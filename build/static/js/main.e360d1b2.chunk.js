(this["webpackJsonpreact-cometchat-typing-indicator"]=this["webpackJsonpreact-cometchat-typing-indicator"]||[]).push([[0],Array(37).concat([function(e,t,a){e.exports=a.p+"static/media/file-blue.ddac87bc.svg"},,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/incomingmessage.5f779bd8.wav"},function(e,t,a){e.exports=a.p+"static/media/incomingothermessage.454c23e7.wav"},function(e,t,a){e.exports=a.p+"static/media/outgoingmessage.7902164d.wav"},function(e,t,a){e.exports=a.p+"static/media/incomingcall.86a6250d.wav"},function(e,t,a){e.exports=a.p+"static/media/outgoingcall.989a71fe.wav"},,function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEXx7OqhaJO7AAAAAXRSTlPM0jRW/QAAAApJREFUeJxjYgAAAAYAAzY3fKgAAAAASUVORK5CYII="},function(e,t,a){e.exports=a.p+"static/media/menu-icon.55f68494.svg"},function(e,t,a){e.exports=a.p+"static/media/call-blue-icon.368958cc.svg"},function(e,t,a){e.exports=a.p+"static/media/video-call-blue-icon.6935c8e5.svg"},function(e,t,a){e.exports=a.p+"static/media/details-pane-blue-icon.64e3a549.svg"},function(e,t,a){e.exports=a.p+"static/media/reply.fd0d3a99.svg"},function(e,t,a){e.exports=a.p+"static/media/delete-message.20174c75.svg"},function(e,t,a){e.exports=a.p+"static/media/edit.65dfa0c8.svg"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAFo9M/3AAAAAXNSR0IArs4c6QAAAWdJREFUOBHNUrtKA1EQPXeNRUDxgVqLQj7AjWjAwh8QKyvbuIIgVhYWNhYWdhFBkugPpLOwt7CwSEQLrTQI1roB44Os7nhm4YZdCyWg4MDsmTOzM3dm7gXiMlUWN84B9RjrcouyBQOJOMmmqg0mMJ5S0IjhrzfELmpQWzYZdUJEjGpEOv6wZNSKxagMScEYzDHU63RjIgxwzvOGO67+Swm2OYupeN1sSY650DzxSFFjxi3JXcpgxunDQ8tHc2wA6bqPV06h24NT88zoe4h7Bv10D4bqDTwqajAh2aLsqcNiIvin5McbzVUkHTRwwms642BrX/m3BbjLcbZ/RX3i4JnWC/pDwTWLNZWfLhrf0flyBzKoldW2ki3LPG19jBdVDyNvz5j+CFFn8qVyTdZ/ow64uR2+sXXy25SDWa7do62Pfp9tr0yWZIMnb1tObEtiBN7wLk9Y1ahxkK8umUOOUSFdsLyd+W+MTyDvnh60pF/jAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAFo9M/3AAAAAXNSR0IArs4c6QAAAWNJREFUOBFjYEAGEhISosh8BgaQCCNMSFJS0gTGZhARETECYbgAMgOuRUxMzAokwQhUGgGkmYD435s3b1aABBn+///PCMJgDskE0Mg0kCYYDTYGZOG/f//kmZiYWIFGr2NkZAx69erVIpJNp5IGmONgNIpfRUVFPVlZWe//+fNHnoWF5eGzZ89uMImLi0cBJXgcHBxYgD6Qtba2vg3yEUgS5CiwCVDj/gkICCz++PFjND8//9I7d+78RHE10BQbkACMRpGkKYeZkOkgz3379s2fm5tb6OvXr4/R+SjBhG6YiooK34cPH8KAcfyLj49vJVCeHRgIocC4/g3iwwNCQUGBA2QysgHAFK0ACj1gQgkApT0pKSk5ZD5MLdgFwLiw+Pv3rx5Q8BPQ9C3ASNL4/fu3EZB97fXr10eAIWsINMQUxodpBtEoXgDaZg2MRG2QBBsb2yFQZAINdwEargTjg+QGFwAAd+eJSUtUxzMAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAFo9M/3AAAAAXNSR0IArs4c6QAAARdJREFUOBFjYEAGIiIiUQg+kBeB4EFZYmJiVnDB////M8I5WBmSkpImIAkmmCxQy0MYmwFogxGcQxYDaEIaTCPcKSA3/vv3T56JiYn11atXi2AKBopGdiQLuiNERUU9WVlZD8HEwSElLi4eBZTgcXBwYAGGmOyzZ89uwBTAvQk19p+AgMDiO3fu/IQpQKGBptigCNCFw0ysLSAPfvv2zZ+bm1vo69evj2H64OkFJoCNVlFR4bty5UoCUI6Xj4/vLDY1YDEFBQUOkE3ICiQkJBRAIQhMLAHY0jE8mEGagPFh8ffvXz0g8xMjI+MWFhYWjd+/fxsB2ddev359BNlgGBvFAJgg0DZrYNLUBvHZ2NgOIUcsTM3goQFXzEj1uzh+EwAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEXx7OqhaJO7AAAAAXRSTlPM0jRW/QAAAApJREFUeJxjYgAAAAYAAzY3fKgAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEXx7OqhaJO7AAAAAXRSTlPM0jRW/QAAAApJREFUeJxjYgAAAAYAAzY3fKgAAAAASUVORK5CYII="},function(e,t,a){e.exports=a.p+"static/media/file-blue.ddac87bc.svg"},function(e,t,a){e.exports=a.p+"static/media/file-blue.ddac87bc.svg"},function(e,t,a){e.exports=a.p+"static/media/check.dc756be3.svg"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAABOwAAATsBH99vcQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAEPSURBVEiJ7ZLBTQNBDEW/0biESJSQw6YFBEsPFhHbA5TCBVEBq2haQOwhLSQHSoi0JXhW5rIjRcjZ2QMICfJPo/H4fY9t4Kw/L/Iu27ZdAngJIaxF5DAFiDEuVHVjZo9N0+y+xi+8JDN7NrPrlNJbjHExBU8pdQBqInry3rgGzHwHYGdmlapuY4yXJyp/N7MKwAcz33sst0XHAACrEXCT2zUVm21wCgRgmAsvGmSTlFJnZhUR7QEgn0MItYj0U/lFA+cnmFN5ljvk71TR4GgVV0S0H9u0LK1w1u8N+UfXdA5grok7A1XdYOw5M195iSLSM/Ntnomqvnos12AYhgcAXWnPRaQPIdQAujHnrP+oT+34zIhNCdZaAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAFqADAAQAAAABAAAAFgAAAAA/6RFgAAABVUlEQVQ4Ea2VzUoCURSAr1qhi14gN0mLDETCCmrZyl24cR9EK9dBb9Jz9B7B2B8VRJRRa0FIIcm+M3FtZjgz5u0e+Ljec8/55qBzMWdmxMSYVUrqUIYveIduzphX1vkCWQGOIYBJChfkDyH/JzuFNbiFNGEy36V2PVNOQRMGc0jtQ/r07KtyDuqO0qi8GpMjXIQHsEWu6zWOwlTOpuNBaoc5iorvPYovQzHCDY9SO3VF3sHGdHR/HxoLuFYU34jcAfSUs2hqjc05iCcaZUloN+eTvFxdIStKHI4hKc5LQmteJn8DrvEm0/78iq4Kve8qTPNWPHl8M+5Ear/fM/3BTtlfF9MW4cXD1I84lmLjkNiF0T/kH/Rux6R2w0HbUT6kr2U96krBHvTAXs9Z6zO1O6osmaSwBKeQ9QARnkAx2S97/hOzg8YtKjZBrj7b8EIFNAZ8To1vlTPgMjYmAh4AAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAABLCAYAAAA4TnrqAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAS6ADAAQAAAABAAAASwAAAACnw0WBAAAIxUlEQVR4Ae1ca2wc1RW+Z+5uDEkcCgmopa0KakNMK1WQJoVW/dE2RDwbQpACXjuBOLYlJCCt+qc0oU0LVaX+aqnUSl6nIYkfgEggLU2BEPhTiQLl0R9QO0LgprwqmUdeRrb3zul3ZjX27uzs7uzO7KzX2ZHsuffcc88595v7PPfeJVWHZ/Me/nxmyqxSTG3K4ja2+RIitRTxJaxUqyJ1Nik1gfBJYj4BE8cV0SgrGlXEI4tYv9jfQ/+L23TYVPvnrkPcMv6euday1VomXsOsVoTWSup1GH+EmA4vWqmf6ltF06FllhFQU7A60nwlK3ObYnULKz63jC1VJ5OicSY1nLD03n1b6Z9VCyqTMXKwmJk6+s06gLMDIK0qoz/yZDTn58mi+wa3Jv4WtfBIwerclVlnbL4PIH09akMrlYeCvWJZavtAd/LJSvMW448ErNt380VTGfN71KobiimqF52IDpDS2wZ76J2wNlhhBDhNLm1+PDlt3piLQEnZYNcG9JsjHX3mrjBllbxV1ywM/0unJ80emHN9WCNiy0/0WEtCdz24hT6pRmdVYHXs5tV2xuzHZ/tiNUrrm4fGkpbesLebXq3UjorB6uyfvsZmehTVe1GlyuYKP/qxk0R802B38kglNlXUZ6X6Mh22TX9uZKAEHNjfig9+qLMvs7ESsALXLAEKE7990BQ4TyWG1IMXk1kbtaV9oDfxSBD9gQqe6pu+GmPBXzDRTAYR2lA8RFMW8XVBmmRZsKQz54x5rtGbXqkPKH2YpfV3B7rolZJ8pRK39vN5E2xea8xRr1TJ/NJorCWpLy81rSjawaMm0aeMeVRDTg/8wChHc1YhD5biKgpWKm3/CIDNueVLqcKETUN5b0ylzd3F5Pj2Wal+/pKysYRRvLBYxvlKR/91ukXrS3d30X+9ZfStWWybB85EoAQcGcgmM+YBL1ASLwCrvT/zA2RZ58ccD40m8XXfghvZxKOvUAsqyvpUOnOdN6UALCX+qDo9pKx7VyzXi4d6El9OtOhzANof62QKXHJ8v1d3Xp/lOO8MH/QyxREHME8AJNTq2UdG5I505gVsXKyepcYX0hbdMNCd+KurMa9m2TZvdxPifmMRVfCRACCTZT0Wty2uPnh973XD8p4Ba9Of+ArsunwzNzHOMJYcx/z0YStszI8eE+0KWcG4umbAMga7MPV84M70VV+M7sscPRFLvRlcHLB2PsIL0C/cEr2qxpcIXNoFHymJA9bR4+ZaTDDOa/yi1aAEwOXNk+aaGbAQWFsDNfNGpG2y+GT7LOY186ZkNSiIHDkQsVbXLr4Q7bKtBjrmj0hWl3bu489ZUwqnWZpPeQSmzGoLk+RmrSoPFcY/agNY3AQrEFjchg6eLwnA22QBTgmgsCxqJLDF9Jyy6CBW7v+BbP+ZuUepvVD/y0Nyogu0/jvc24FcRjgsl2CLLlJsb8TS7Uo/eSFoy6g9nXkXDfLCEELysqKq/nKwN/nzPGIdIvBH/QFdzB2RqSZ6z4KPpjUygYqOL+9J/CI6edVLorP1T+BAxKwomkdwsiAtMj87KT66k8iOxrxwUgY76QSg+iCclNncgpPUrIlZUsgQ0fKdzNlVQUhRYbN3DPAS+Mg+G1aOm19wkpp10iWEfaOP+MzR/szPwsqJJP+E+Y1MjiKRBSGCE6XS0yORHLXOscoZDYkex5rqGMiBRkO1UD8/nKLxHDFOUJZjGA2/4aX7xXNGw1ujdmTiYO+oTB3EwPDn0nOsx5The/iq+MshlglaE5mrwHLEyzZlzHfwXR/20v3iTmdpV6DUT0hx2rgsd0aLpzdTXAQEJwvD64hLaL6LI2BZAEtb3KxZxTGaScGUbcTCFY4XZyjNQHEEFuiXLJxH+gDj6xvFuZopgs/AJnrfmUAyUcEo1IQoFwF6VmLZ2Tapw7lJzXA+AliTPC0UB6wVS/RT2Cr/MJ+lGXMQIPpI8JGwA9bOjTSFCeRwE55CBNBfDTv4uGAJi9Z6TyFrfBRc6T3fT5tt0QV+9LholJjFJdtnQbPcAJWLjXEZUaDHZl/PJhbn3y7gjYkAPP4xuIVectXNgJUlUMEBLpex1m/UrN5NuzhvW05O38EnVbczGBbl44Emmf/gNsXLWIquzKfGFMNtB4BzCN6KMdzo+Bq0XhWlm6WiUpB6dbgnmYeDeB3yHrkqa2wV+f3iPCXFIuyc5lmf9VbUzHtQTHseHW6mHXkERDzNUCm5UwzG/V7GMyqOS5w4snnIW+YCsISBSP8Q/095mc+EOOabp8/SeptfWX3BksvXuO5/j1+G+U+jn/pdGJByF3TwuWBgNNqPoXtDLm0+h1GrDqL5rS9WRt+a5TIvPkd3QcDbbnx+v2kM+wBbSpWxJFh9G+m4Yr0BgEW2A1TKmPql0Smd0DcPddDHpWwoCZZkHOql1zSuZ6DFTpYS1LBpMrdL8E3lLmZK+cqCJUz7epLPYje2E1OKObHbLDZF8Uh5AMDmoa7kM0HkBQJLBA32JB7FWglLj3lSw6RGkUqhXIG22QSDkqOhMHifTenp7xuFDVRc9/emNU6cTknTC1qj3HJVDJZkTPXxZYrMAQB2sSuocd40Jp15kD7KW6bAzTA3o3T6mFZcjlHyQC59rodlHkWL9MpqgJKyVVWzckFJ9Zs78Zt9v8YW++Jc+lwKA6TTWMNtH+rWvwtjV2iwRDl+ru4LzOa3OONwcxhjapEXI97jibP0tr2b6VhY+ZGA5Rrh/KiPrX5VN3+Ya4i84Y8CUDv8vAe5bJWEIwXLVZy9X8w7cOznWy4txvcLOMBx/2Bv4omoddYELNdIcRM79xhJtWPkXOrSI39juwqn8h5iS+8Z6qaaHUeoKVguKHJfb/SEuRoe0LW4mboGzfSrblrVb1L/xqXgI5ZWh7/Sqp90t6uqlhcgYyxgee2QS0MKd2HkigfuZa/ACRU5TLcMmxatMKgVYC7EO/sLuIplEY8Dd3QUo9qInGZROKQhZw+8cmsd/z/CqtkRNEO6JAAAAABJRU5ErkJggg=="},function(e,t,a){e.exports=a.p+"static/media/clear.673767b2.svg"},function(e,t,a){e.exports=a.p+"static/media/rounded-plus-grey-icon.79d16bad.svg"},function(e,t,a){e.exports=a.p+"static/media/video_upload_icon.2e8f1790.svg"},function(e,t,a){e.exports=a.p+"static/media/audio_upload_icon.90c2a903.svg"},function(e,t,a){e.exports=a.p+"static/media/document_upload_icon.4b7060a4.svg"},function(e,t,a){e.exports=a.p+"static/media/images_upload_icon.ef6ffb94.svg"},function(e,t,a){e.exports=a.p+"static/media/insert_emoticon.59472f8c.svg"},function(e,t,a){e.exports=a.p+"static/media/send-blue-icon.70c145e8.svg"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAWCAYAAAArdgcFAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAF6ADAAQAAAABAAAAFgAAAAC4T9ojAAAB+ElEQVQ4EbVVPUjDQBQ2R6D+VaGD6CD4U7K6OQjuLVLdatusrjqI6OagKOIkOunkIB26iThkaDuou4p06iRIoBSsCBbb2vi9mMCZNMkh9iB57773ve9eLi8XqccxisWi3Gg0Qg7Ydwq+kUgkPpwkiYBcLjfcbDZ3JEmKYzppGIbsJArMa8gv4dpPp9PXxJcg3AfhR/hRAQEhChZYy2QyJ6zVaq3/pzCtjiffQ9ERBn+eAIFRQUWaAI8oYSwww3CbFkmA8CEeNQauLsJvt9tRhiShzkAR7yQKvmmDFoB4iLala8Ov5WiPL3F9Wqs/kcUTXDDGRiyf2nbBiruMpzgETtGv284MVVV3bQzCLJvN1jAP2xhvJQSfQRrnQcunvS3YlcOeYbE8+EfAxyzOBHJnLd9pVj0rB5OqWUKymQSbh0NXHL5iggG3rr5QEq8HFGCHpzRNG0DVozbgZ/HO6iRe9iNxsa1qtVrBfIjDPF0UUSbxgifDHeh3Qx2RV1mW75miKMfohIeOlD+A0DKwJRvJZPLNPM/xg+jVdX0TWjHqBBAisGaM1wduf1AE/4qD/4J4CfgBzqBbF4EAGujlO5DnfmbmefKFxBX0+bmNiVi/PjfzIUrdtAzhKxFBnhMkTr+uRQjf8Emivpe4BtFBvBg1lUqZB5aoIM/7BgM8sXwl2dytAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAABOwAAATsBH99vcQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAEPSURBVEiJ7ZLBTQNBDEW/0biESJSQw6YFBEsPFhHbA5TCBVEBq2haQOwhLSQHSoi0JXhW5rIjRcjZ2QMICfJPo/H4fY9t4Kw/L/Iu27ZdAngJIaxF5DAFiDEuVHVjZo9N0+y+xi+8JDN7NrPrlNJbjHExBU8pdQBqInry3rgGzHwHYGdmlapuY4yXJyp/N7MKwAcz33sst0XHAACrEXCT2zUVm21wCgRgmAsvGmSTlFJnZhUR7QEgn0MItYj0U/lFA+cnmFN5ljvk71TR4GgVV0S0H9u0LK1w1u8N+UfXdA5grok7A1XdYOw5M195iSLSM/Ntnomqvnos12AYhgcAXWnPRaQPIdQAujHnrP+oT+34zIhNCdZaAAAAAElFTkSuQmCC"},function(e,t,a){e.exports=a.p+"static/media/search-grey-icon.ee1802c6.svg"},function(e,t,a){e.exports=a.p+"static/media/navigate_before.75589b27.svg"},function(e,t,a){e.exports=a.p+"static/media/navigate_before.75589b27.svg"},function(e,t,a){e.exports=a.p+"static/media/clear.673767b2.svg"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAACRFdLHAAACj0lEQVQ4Ec2US2hTQRSGb94JhCAWBYWCgqAL3Qhu3IkWxJUIFUUwkIdBAqEYBCkKUhBBa7FuQl5oIEUMWNfdK4KCoCtxocRUF4VKI0TM2++PuZeb2lIXLjwwmTn/OfPPf87MjWH8Y3Os58tkMnt8Pt/udrv9OpFItNfHN/ILhcKkw+H4EI1G3zrtCblc7qzf73/lcrleMObsMa3z+fwEI2nHi8ViGgGVXq93SLhFSOJeSDJgOzqdjuF2u5OcfM6+2el0niLnsomxJ03eLNVMx2KxBeEWIeuTHo9ne7fbNfr9vgZVOOYg3WcSgHVQ0pCPsiter3e21Wpdj0Qit8ntC7cIAcYEmCZiNuyCZNrEdAL+N5Rd4vB7KLsRj8dvmXHNbptTJdnm/l7CsWID2xAdRuURlE1R5rwtNlhahJA9p3ffIQiJmN4YbHqG0hn7pmAwuHMNAztGO85QhbvZbD5B6QPlWSUDfMJfRIFwA2L1cZWn82MA8AP5YqPRuMvyIfFl5nfkvGGuMgY28g6z2ewBCF8S2UZZBjcKRzdJadlh/paTpVCZqHkP0U2IBhtZs3Td5xLOb8k0TBhRKKxSqbjq9XqJx3qBHhq8PZX/E6W6hGy5XA6B3yHVz5jhyXzUPtP+IFRAm2j0U8o/IVL1U0a/HjGNc9hx+TybZbA0n1xFvmxDQgVKpdIYqh5z2xMilenCIDD0JcmGrenTmnku61oqlWqO9HCQNfwJh8OrKJhkLIhIpbO2yJTGgQZkFOCYCgQC+4VtSqggl1Sv1WoXUZTGXePNWeUrLpNKSKvEvsjftGQF7cYjPojKq2CnaUPI7CuHfaUN3E1kSfl/TWiS688CwqP44xCt0N8lKvlsxv//+RdSDjjIN00QiwAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAACRFdLHAAAB9klEQVQ4Ee2Tu0sjURTGZyaTl9qs2GmxrZaLqKDFNot/wFYKgpHEWLlY2dtZCVYZCImd3Xa7sIsIiwgigqKChVvuKlhYKIRMkpn4+8ZcGVMJWnrgzLnn9Z3HvWNZ7/TaDdgGoFKpjNu2vRKG4RQcGLuRjuMk4N0gCDby+fyxsXfLCLADtktCT6vVsgDujrPa7baVTCatZrN5S9xELpe7VJDneQOZTOZro9H4USgU/jkyEjzrum4PwVKjZLq0xAIyBUgSaD+2UcWVSqUR9F/ZbLZEkZxsBnCIUaQLwIdvBUKQuAnwIrytDlWA2LBcLk+m0+nfiUTiU71eV9Fe5UeAKKEUJXD+znGejnVusII5eA99zBSlSIuYJeIHY1O1heHqYwgAHe/p5g4psBmAtKsdfIMCpCOtAtUOkIp/Rs8A5WEkdZ3xfX8BsP+c/wDyQft7CUUjxwOp7HJb2s0R5zV8F4D95RwPU2FXO+6myNLpytzqx2q1Osw4fexnlbHzJHkaNUZSPHzX2ruIglFFU+JK1QiQ4zNgJ8h9bAdIPeJ1+TqJEg5T7LGWaeynPBvZapEj+jjONg7fVAMoCadj7KiBVCqlh31DwUPlFYvFM9bxpVarLWPfku1pMXpXAH4DeJIVPLajiA4BqF/vJze9ya93buzv8u038AAdggH5Kp0raQAAAABJRU5ErkJggg=="},function(e,t,a){e.exports=a.p+"static/media/call-end-white-icon.6677eaee.svg"},function(e,t,a){e.exports=a.p+"static/media/ring.19371962.svg"},function(e,t,a){e.exports=a.p+"static/media/clear.673767b2.svg"},function(e,t,a){e.exports=a.p+"static/media/clear.673767b2.svg"},function(e,t,a){e.exports=a.p+"static/media/shield.4190f32a.svg"},function(e,t,a){e.exports=a.p+"static/media/lock.4675ae93.svg"},function(e,t,a){e.exports=a.p+"static/media/search-grey-icon.ee1802c6.svg"},function(e,t,a){e.exports=a.p+"static/media/navigate_before.75589b27.svg"},function(e,t,a){e.exports=a.p+"static/media/edit-blue-icon.7024c158.svg"},function(e,t,a){e.exports=a.p+"static/media/create.552fcd66.svg"},function(e,t,a){e.exports=a.p+"static/media/done.ce59afd4.svg"},function(e,t,a){e.exports=a.p+"static/media/clear.673767b2.svg"},function(e,t,a){e.exports=a.p+"static/media/block.33efc060.svg"},function(e,t,a){e.exports=a.p+"static/media/delete.a24d83e3.svg"},function(e,t,a){e.exports=a.p+"static/media/clear.673767b2.svg"},function(e,t,a){e.exports=a.p+"static/media/checkbox-inactive.15008e49.svg"},function(e,t,a){e.exports=a.p+"static/media/checkbox-blue-active.51b71e5e.svg"},function(e,t,a){e.exports=a.p+"static/media/search-grey-icon.ee1802c6.svg"},function(e,t,a){e.exports=a.p+"static/media/clear.673767b2.svg"},function(e,t,a){e.exports=a.p+"static/media/block.33efc060.svg"},function(e,t,a){e.exports=a.p+"static/media/clear.673767b2.svg"},function(e,t,a){e.exports=a.p+"static/media/navigate_before.75589b27.svg"},function(e,t,a){e.exports=a.p+"static/media/navigate_before.75589b27.svg"},function(e,t,a){e.exports=a.p+"static/media/notification-black-icon.d1851434.svg"},function(e,t,a){e.exports=a.p+"static/media/privacy-black-icon.421ef801.svg"},function(e,t,a){e.exports=a.p+"static/media/chat-black-icon.12c1e338.svg"},function(e,t,a){e.exports=a.p+"static/media/help-black-icon.86ea7e67.svg"},function(e,t,a){e.exports=a.p+"static/media/report-black-icon.b00d3682.svg"},function(e,t,a){e.exports=a.p+"static/media/chat-grey-icon.f25d1076.svg"},function(e,t,a){e.exports=a.p+"static/media/chat-blue-icon.f2b6b911.svg"},function(e,t,a){e.exports=a.p+"static/media/people-grey-icon.771a9bfa.svg"},function(e,t,a){e.exports=a.p+"static/media/people-blue-icon.92d29b43.svg"},function(e,t,a){e.exports=a.p+"static/media/group-chat-grey-icon.46082016.svg"},function(e,t,a){e.exports=a.p+"static/media/group-chat-blue-icon.41e7f079.svg"},function(e,t,a){e.exports=a.p+"static/media/more-grey-icon.fdb25f0b.svg"},function(e,t,a){e.exports=a.p+"static/media/more-blue-icon.ac4e5e40.svg"},,,,,function(e,t,a){e.exports=a(203)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),i=a(64),r=a.n(i),o=a(2),c="87aa8d2c7d94499c6200045b63f9bb1b8b3d2d70",p=a(137),l=a(12),d=a(6),u=a(7),g=a(10),m=a(9),h=a(0),b=a(65),f=a.n(b),v=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).imgRef=n.a.createRef(),s}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.borderWidth||"1px",a=this.props.borderColor||"#AAA",s=this.props.cornerRadius||"50%",n=this.props.image,i=new Image;i.src=n,i.onload=function(){e.imgRef&&(e.imgRef.src=n)};return Object(h.a)("img",{src:f.a,"data-src":n,css:{overflow:"hidden",display:"inherit",width:"100%",height:"100%"},alt:"Avatar",style:{borderWidth:t,borderStyle:"solid",borderColor:a,borderRadius:s},ref:function(t){e.imgRef=t}})}}]),a}(n.a.Component),x=function(e){return{display:"block",fontSize:"12px",width:"auto",height:"18px",borderRadius:"16px",backgroundColor:"".concat(e.theme.backgroundColor.blue),color:"".concat(e.theme.color.white),textAlign:"center",fontWeight:"700",lineHeight:"18px",marginLeft:"4px",padding:"0 9px",marginRight:"2px",opacity:"1",transition:"opacity .1s"}},w=function(e){var t="";return e.count&&(t=Object(h.a)("span",{css:x(e),className:"unread-count"},e.count)),t},O=a(3),C=a(5),y=function(){function e(){Object(d.a)(this,e),this.userListenerId="head_user_"+(new Date).getTime(),this.msgListenerId="head_message_"+(new Date).getTime(),this.groupListenerId="head_group_"+(new Date).getTime()}return Object(u.a)(e,[{key:"attachListeners",value:function(e){o.CometChat.addUserListener(this.userListenerId,new o.CometChat.UserListener({onUserOnline:function(t){e("onUserOnline",t)},onUserOffline:function(t){e("onUserOffline",t)}})),o.CometChat.addMessageListener(this.msgListenerId,new o.CometChat.MessageListener({onTypingStarted:function(t){e("onTypingStarted",t)},onTypingEnded:function(t){e("onTypingEnded",t)}})),o.CometChat.addGroupListener(this.groupListenerId,new o.CometChat.GroupListener({onGroupMemberKicked:function(t,a,s,n){e("onGroupMemberKicked",n,a)},onGroupMemberBanned:function(t,a,s,n){e("onGroupMemberBanned",n,a)},onMemberAddedToGroup:function(t,a,s,n){e("onMemberAddedToGroup",n)},onGroupMemberLeft:function(t,a,s){e("onGroupMemberLeft",s,a)},onGroupMemberJoined:function(t,a,s){e("onGroupMemberJoined",s)}}))}},{key:"removeListeners",value:function(){o.CometChat.removeUserListener(this.userListenerId),o.CometChat.removeMessageListener(this.msgListenerId),o.CometChat.removeGroupListener(this.groupListenerId)}}]),e}(),j=function(e){var t={backgroundColor:"rgb(85, 85, 85)"};return"online"!==e.status&&"available"!==e.status||(t={backgroundColor:"rgb(0, 255, 0)"}),Object(O.a)({width:"9px",height:"9px",top:"-12px",float:"right",position:"relative"},t)},A=function(e){if(e.hasOwnProperty("widgetsettings")&&e.widgetsettings&&e.widgetsettings.hasOwnProperty("main")&&e.widgetsettings.main.hasOwnProperty("show_user_presence")&&!1===e.widgetsettings.main.show_user_presence)return null;var t=e.borderWidth||"1px",a=e.borderColor||"#AAA",s=e.cornerRadius||"50%";return Object(h.a)("span",{css:j(e),className:"presence",style:{borderWidth:t,borderStyle:"solid",borderColor:a,borderRadius:s}})},_=function e(){Object(d.a)(this,e)};_.getAvatar=function(e,t){var a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("width","200"),a.setAttribute("height","200");var s=document.createElementNS("http://www.w3.org/2000/svg","rect");s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("width","200"),s.setAttribute("height","200"),s.setAttribute("fill",_.stringToColour(e));var n=document.createElementNS("http://www.w3.org/2000/svg","text");n.setAttribute("x","50%"),n.setAttribute("y","54%"),n.setAttribute("dominant-baseline","middle"),n.setAttribute("text-anchor","middle"),n.setAttribute("fill","white"),n.setAttribute("font-size","120"),n.setAttribute("font-family","'Inter', sans-serif"),n.setAttribute("font-wight","600"),n.textContent=t,a.appendChild(s),a.appendChild(n);var i=(new XMLSerializer).serializeToString(a),r=unescape(encodeURIComponent(i)),o=btoa(r);return"data:image/svg+xml;base64,".concat(o)},_.stringToColour=function(e){for(var t=0,a=0;a<e.length;a++)t=e.charCodeAt(a)+((t<<5)-t);for(var s="#",n=0;n<3;n++){s+=("00"+(t>>8*n&255).toString(16)).substr(-2)}return s};var k=a(8),M=function(e,t){var a=t.hasOwnProperty("sidebar")&&0===t.sidebar?{display:"none!important"}:{};return Object(O.a)(Object(k.a)({cursor:"pointer",display:"none",background:"url(".concat(e,") center center no-repeat"),padding:"20px",width:"24px",height:"24px",float:"left"},"@media (min-width : 320px) and (max-width: 767px)",{display:"block"}),a)},S=function(e,t){var a={};return"user"===e.type?(a={color:"".concat(e.theme.color.blue),textTransform:"capitalize"},"offline"===t.presence&&(a={color:"".concat(e.theme.color.helpText),textTransform:"capitalize"}),t.status.includes("typing")&&(a={color:"".concat(e.theme.color.helpText),textTransform:"none",fontStyle:"italic"})):"group"===e.type&&(a={color:"".concat(e.theme.color.helpText)},t.status.includes("typing")&&(a={color:"".concat(e.theme.color.helpText),fontStyle:"italic"})),Object(O.a)({fontSize:"13px",lineHeight:"20px",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},a)},I=function(e){return{display:"inline-block",width:"20px",height:"20px",margin:"0 10px",cursor:"pointer",background:"url(".concat(e,") center center no-repeat"),"&:first-of-type":{marginLeft:0},"&:last-of-type":{marginRight:0}}},T=a(66),R=a.n(T),E=a(67),U=a.n(E),N=a(68),P=a.n(N),G=a(69),L=a.n(G),B=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).setStatusForUser=function(){var e=s.props.item.status,t="online"===s.props.item.status?"online":"offline";"offline"===s.props.item.status&&s.props.item.lastActiveAt?e="Last active at: "+new Date(1e3*s.props.item.lastActiveAt).toLocaleTimeString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}):"offline"===s.props.item.status&&(e="offline"),s.setState({status:e,presence:t})},s.setStatusForGroup=function(){var e="".concat(s.props.item.membersCount," members");s.setState({status:e})},s.updateHeader=function(e,t,a){switch(e){case"onUserOnline":case"onUserOffline":if("user"===s.props.type&&s.props.item.uid===t.uid){if(s.props.widgetsettings&&s.props.widgetsettings.hasOwnProperty("main")&&s.props.widgetsettings.main.hasOwnProperty("show_user_presence")&&!1===s.props.widgetsettings.main.show_user_presence)return!1;s.setState({status:t.status,presence:t.status})}break;case"onGroupMemberKicked":case"onGroupMemberBanned":case"onGroupMemberLeft":if("group"===s.props.type&&s.props.item.guid===t.guid&&s.props.loggedInUser.uid!==a.uid){var n=parseInt(t.membersCount),i="".concat(n," members");s.setState({status:i})}break;case"onGroupMemberJoined":if("group"===s.props.type&&s.props.item.guid===t.guid){var r=parseInt(t.membersCount),o="".concat(r," members");s.setState({status:o})}break;case"onMemberAddedToGroup":if("group"===s.props.type&&s.props.item.guid===t.guid){var c=parseInt(t.membersCount),p="".concat(c," members");s.setState({status:p})}break;case"onTypingStarted":"group"===s.props.type&&s.props.type===t.receiverType&&s.props.item.guid===t.receiverId?s.setState({status:"".concat(t.sender.name," is typing...")}):"user"===s.props.type&&s.props.type===t.receiverType&&s.props.item.uid===t.sender.uid&&s.setState({status:"typing..."});break;case"onTypingEnded":"group"===s.props.type&&s.props.type===t.receiverType&&s.props.item.guid===t.receiverId?s.setStatusForGroup():"user"===s.props.type&&s.props.type===t.receiverType&&s.props.item.uid===t.sender.uid&&("online"===s.state.presence?s.setState({status:"online",presence:"online"}):s.setStatusForUser())}},s.toggleTooltip=function(e,t){var a=e.target;if(a.scrollWidth<=a.clientWidth)return!1;t?a.setAttribute("title",a.textContent):a.removeAttribute("title")},s.state={status:"",presence:"offline"},s}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.MessageHeaderManager=new y,this.MessageHeaderManager.attachListeners(this.updateHeader),"user"===this.props.type?this.setStatusForUser():this.setStatusForGroup()}},{key:"componentDidUpdate",value:function(e,t){this.MessageHeaderManager.removeListeners(),this.MessageHeaderManager=new y,this.MessageHeaderManager.attachListeners(this.updateHeader),"user"===this.props.type&&e.item.uid!==this.props.item.uid?this.setStatusForUser():"group"===this.props.type&&(e.item.guid!==this.props.item.guid||e.item.guid===this.props.item.guid&&e.item.membersCount!==this.props.item.membersCount)&&this.setStatusForGroup()}},{key:"componentWillUnmount",value:function(){this.MessageHeaderManager.removeListeners(),this.MessageHeaderManager=null}},{key:"render",value:function(){var e,t,a=this;if("user"===this.props.type){if(!this.props.item.avatar){var s=this.props.item.uid,n=this.props.item.name.charAt(0).toUpperCase();this.props.item.avatar=_.getAvatar(s,n)}e=this.props.item.avatar,t=Object(h.a)(A,{widgetsettings:this.props.widgetsettings,status:this.state.presence,cornerRadius:"50%",borderColor:this.props.theme.borderColor.primary,borderWidth:"1px"})}else{if(!this.props.item.icon){var i=this.props.item.guid,r=this.props.item.name.charAt(0).toUpperCase();this.props.item.icon=_.getAvatar(i,r)}e=this.props.item.icon}var o,c=Object(h.a)("span",{css:S(this.props,this.state),className:"user__status",onMouseEnter:function(e){return a.toggleTooltip(e,!0)},onMouseLeave:function(e){return a.toggleTooltip(e,!1)}},this.state.status),p=Object(h.a)("span",{onClick:function(){return a.props.actionGenerated("audioCall")},css:I(U.a)}),l=Object(h.a)("span",{onClick:function(){return a.props.actionGenerated("videoCall")},css:I(P.a)}),d=Object(h.a)("span",{onClick:function(){return a.props.actionGenerated("viewDetail")},css:I(L.a)});return!1===this.props.viewdetail&&(d=null),!0!==this.props.item.blockedByMe&&!1!==this.props.audiocall||(p=null),!0!==this.props.item.blockedByMe&&!1!==this.props.videocall||(l=null),this.props.widgetsettings&&this.props.widgetsettings.hasOwnProperty("main")&&(this.props.widgetsettings.main.hasOwnProperty("enable_voice_calling")&&!1===this.props.widgetsettings.main.enable_voice_calling&&(p=null),this.props.widgetsettings.main.hasOwnProperty("enable_video_calling")&&!1===this.props.widgetsettings.main.enable_video_calling&&(l=null),this.props.widgetsettings.main.hasOwnProperty("show_user_presence")&&!1===this.props.widgetsettings.main.show_user_presence&&"user"===this.props.type&&(c=null)),Object(h.a)("div",{css:(o=this.props,{padding:"14px 16px",width:"100%",backgroundColor:"".concat(o.theme.backgroundColor.white),zIndex:"1",borderBottom:"1px solid ".concat(o.theme.borderColor.primary),display:"flex",flexDirection:"row",justifyContent:"space-between"}),className:"chat__header"},Object(h.a)("div",{css:{display:"flex",flexDirection:"row",alignItems:"center",width:"calc(100% - 100px)"},className:"chat__details"},Object(h.a)("div",{css:M(R.a,this.props),className:"chat__sidebar-menu",onClick:function(){return a.props.actionGenerated("menuClicked")}}),Object(h.a)("div",{css:{display:"inline-block",width:"36px",height:"36px",flexShrink:"0"},className:"chat__thumbnail"},Object(h.a)(v,{image:e,cornerRadius:"18px",borderColor:this.props.theme.borderColor.primary,borderWidth:"1px"}),t),Object(h.a)("div",{css:Object(k.a)({width:"calc(100% - 50px)",padding:"0 14px",flexGrow:"1",display:"flex",flexDirection:"column"},"@media (min-width : 320px) and (max-width: 767px)",{width:"calc(100% - 80px)!important"}),className:"chat__user"},Object(h.a)("h6",{css:{margin:"0",fontSize:"15px",fontWeight:"600",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},className:"user__name",onMouseEnter:function(e){return a.toggleTooltip(e,!0)},onMouseLeave:function(e){return a.toggleTooltip(e,!1)}},this.props.item.name),c)),Object(h.a)("div",{css:{display:"flex",flexDirection:"row",justifyContent:"flex-end",alignItems:"center",width:"100px"},className:"chat__options"},p,l,d))}}]),a}(n.a.Component),D=function(){function e(){Object(d.a)(this,e)}return Object(u.a)(e,[{key:"getLoggedInUser",value:function(){var e=this,t=0;return new Promise((function(a,s){1e4===t&&s("timer reached ".concat(1e4)),e.loggedInUser&&a(e.loggedInUser),o.CometChat.isInitialized()||s("CometChat not initialized"),e.isUserLoggedIn=setInterval((function(){o.CometChat.getLoggedinUser().then((function(t){e.loggedInUser=t,clearInterval(e.isUserLoggedIn),a(t)}),(function(e){console.log(e),s(e)})),t+=100}),100)}))}}]),e}();D.blockUsers=function(e){return new Promise((function(t,a){o.CometChat.blockUsers(e).then((function(e){return t(e)}),(function(e){return a(e)}))}))},D.unblockUsers=function(e){return new Promise((function(t,a){o.CometChat.unblockUsers(e).then((function(e){return t(e)}),(function(e){return a(e)}))}))},D.call=function(e,t,a){return new Promise((function(s,n){var i=new o.CometChat.Call(e,a,t);o.CometChat.initiateCall(i).then((function(e){return s(e)}),(function(e){return n(e)}))}))},D.audioCall=function(e,t,a){return new Promise((function(s,n){var i=new o.CometChat.Call(e,a,t);o.CometChat.initiateCall(i).then((function(e){return s(e)}),(function(e){return n(e)}))}))},D.videoCall=function(e,t,a){return new Promise((function(s,n){var i=new o.CometChat.Call(e,a,t);o.CometChat.initiateCall(i).then((function(e){return s(e)}),(function(e){return n(e)}))}))},D.acceptCall=function(e){return new Promise((function(t,a){o.CometChat.acceptCall(e).then((function(e){return t(e)}),(function(e){return a(e)}))}))},D.rejectCall=function(e,t){return new Promise((function(a,s){o.CometChat.rejectCall(e,t).then((function(e){return a(e)}),(function(e){return s(e)}))}))};var W=new RegExp("[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,6}","gi"),z=new RegExp("(^|[\\s.:;?\\-\\]<\\(])((https?://|www\\.|pic\\.)[-\\w;/?:@&=+$\\|\\_.!~*\\|'()\\[\\]%#,\u263a]+[\\w/#](\\(\\))?)(?=$|[\\s',\\|\\(\\).:;?\\-\\[\\]>\\)])","gi"),F=new RegExp("\\s*(?:\\+?(\\d{1,3}))?([-. (]*(\\d{3})[-. )]*)?((\\d{3})[-. ]*(\\d{2,4})(?:[-.x ]*(\\d+))?)\\s*","g"),H=function(e){var t=e.replace(F,"<a target='blank' rel='noopener noreferrer' href='tel:$&'>$&</a>");return t=(t=t.replace(W,"<a target='blank' rel='noopener noreferrer' href='mailto:$&'>$&</a>")).replace(z,"<a target='blank' rel='noopener noreferrer' href='$&'>$&</a>")},Y=function(e,t){var a=null;return e&&e.hasOwnProperty("main")&&e.main.hasOwnProperty(t)&&(a=e.main[t]),a},J=function e(){var t,a,s=this;Object(d.a)(this,e),this.categories={},this.types=null,this.getCategories=function(e){return!0===Y(e,"hide_join_leave_notifications")&&delete s.categories.action,!1===Y(e,"show_call_notifications")&&delete s.categories.call,Object.keys(s.categories)},this.getTypes=function(e){return!0===Y(e,"hide_join_leave_notifications")&&delete s.types.groupMember,!1===Y(e,"show_call_notifications")&&(delete s.types.audio,delete s.types.video),Object.keys(s.types)},this.categories=(t={},Object(k.a)(t,"message","message"),Object(k.a)(t,"custom","custom"),Object(k.a)(t,"action","action"),Object(k.a)(t,"call","call"),t),this.types=(a={},Object(k.a)(a,"text","text"),Object(k.a)(a,"image","image"),Object(k.a)(a,"video","video"),Object(k.a)(a,"audio","audio"),Object(k.a)(a,"file","file"),Object(k.a)(a,"extension_poll","extension_poll"),Object(k.a)(a,"groupMember","groupMember"),Object(k.a)(a,"audio","audio"),Object(k.a)(a,"video","video"),a)},V=function(){function e(t,a,s,n){Object(d.a)(this,e),this.item={},this.type="",this.parentMessageId=null,this.messageRequest=null,this.limit=30,this.categories=["message","custom","action","call"],this.types=["text","image","video","audio","file","extension_poll","groupMember","audio","video"],this.msgListenerId="message_"+(new Date).getTime(),this.groupListenerId="group_"+(new Date).getTime(),this.callListenerId="call_"+(new Date).getTime(),this.item=a,this.type=s,this.parentMessageId=n;var i=new J,r=i.getCategories(t),c=i.getTypes(t);"user"===s?this.parentMessageId?this.messageRequest=(new o.CometChat.MessagesRequestBuilder).setUID(a.uid).setParentMessageId(this.parentMessageId).setCategories(r).setTypes(c).setLimit(this.limit).build():this.messageRequest=(new o.CometChat.MessagesRequestBuilder).setUID(a.uid).setCategories(r).setTypes(c).hideReplies(!0).setLimit(this.limit).build():"group"===s&&(this.parentMessageId?this.messageRequest=(new o.CometChat.MessagesRequestBuilder).setGUID(a.guid).setParentMessageId(this.parentMessageId).setCategories(r).setTypes(c).setLimit(this.limit).build():this.messageRequest=(new o.CometChat.MessagesRequestBuilder).setGUID(a.guid).setCategories(r).setTypes(c).hideReplies(!0).setLimit(this.limit).build())}return Object(u.a)(e,[{key:"fetchPreviousMessages",value:function(){return this.messageRequest.fetchPrevious()}},{key:"attachListeners",value:function(e){o.CometChat.addMessageListener(this.msgListenerId,new o.CometChat.MessageListener({onTextMessageReceived:function(t){e("onTextMessageReceived",t)},onMediaMessageReceived:function(t){e("onMediaMessageReceived",t)},onCustomMessageReceived:function(t){e("onCustomMessageReceived",t)},onMessagesDelivered:function(t){e("onMessagesDelivered",t)},onMessagesRead:function(t){e("onMessagesRead",t)},onMessageDeleted:function(t){e("onMessageDeleted",t)},onMessageEdited:function(t){e("onMessageEdited",t)}})),o.CometChat.addGroupListener(this.groupListenerId,new o.CometChat.GroupListener({onGroupMemberScopeChanged:function(t,a,s,n,i){e("onGroupMemberScopeChanged",t,i,{user:a,scope:s})},onGroupMemberKicked:function(t,a,s,n){e("onGroupMemberKicked",t,n,{user:a,hasJoined:!1})},onGroupMemberBanned:function(t,a,s,n){e("onGroupMemberBanned",t,n,{user:a})},onGroupMemberUnbanned:function(t,a,s,n){e("onGroupMemberUnbanned",t,n,{user:a})},onMemberAddedToGroup:function(t,a,s,n){e("onMemberAddedToGroup",t,n,{user:a,hasJoined:!0})},onGroupMemberLeft:function(t,a,s){e("onGroupMemberLeft",t,s,{user:a})},onGroupMemberJoined:function(t,a,s){e("onGroupMemberJoined",t,s,{user:a})}})),o.CometChat.addCallListener(this.callListenerId,new o.CometChat.CallListener({onIncomingCallReceived:function(t){e("onIncomingCallReceived",t)},onIncomingCallCancelled:function(t){e("onIncomingCallCancelled",t)},onOutgoingCallAccepted:function(t){e("onOutgoingCallAccepted",t)},onOutgoingCallRejected:function(t){e("onOutgoingCallRejected",t)}}))}},{key:"removeListeners",value:function(){o.CometChat.removeMessageListener(this.msgListenerId),o.CometChat.removeGroupListener(this.groupListenerId),o.CometChat.removeCallListener(this.callListenerId)}}]),e}(),Q=a(35),q=a(36),K=a.n(q),X=function(e){var t=e.name?{top:"0px"}:{top:"-20px"},a="receiver"===e.message.messageFrom?{alignSelf:"flex-end"}:{alignSelf:"flex-start"};return Object(O.a)(Object(O.a)({position:"absolute",zIndex:"1",display:"none",listStyleType:"none",padding:"0",margin:"0",height:"26px",border:"1px solid ".concat(e.theme.borderColor.primary),backgroundColor:"".concat(e.theme.backgroundColor.white),borderRadius:"4px",alignItems:"center",justifyContent:"center"},a),t)},Z=function(e){return{outline:"0",border:"0",height:"24px",width:"24px",borderRadius:"4px",alignItems:"center",display:"inline-flex",justifyContent:"center",position:"relative",background:"url(".concat(e,") center center / 18px 19px no-repeat")}},$=a(70),ee=a.n($),te=a(71),ae=a.n(te),se=a(72),ne=a.n(se),ie=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).toggleTooltip=function(e,t){var a=e.target;t?a.setAttribute("title",a.dataset.title):a.removeAttribute("title")},s.state={},s}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=Object(h.a)("li",{css:(this.props,{display:"flex",position:"relative"}),className:"action__group"},Object(h.a)("button",{type:"button",onMouseEnter:function(t){return e.toggleTooltip(t,!0)},onMouseLeave:function(t){return e.toggleTooltip(t,!1)},css:Z(ee.a),className:"group__button button__threadedchats","data-title":this.props.message.replyCount?"Reply to thread":"Reply in thread",onClick:function(){return e.props.actionGenerated("viewMessageThread",e.props.message)}}));(this.props.hasOwnProperty("widgetconfig")&&this.props.widgetconfig&&this.props.widgetconfig.hasOwnProperty("threaded-chats")&&!1===this.props.widgetconfig["threaded-chats"]||"custom"===this.props.message.category)&&(t=null),(this.props.hasOwnProperty("widgetsettings")&&this.props.widgetsettings&&this.props.widgetsettings.hasOwnProperty("main")&&this.props.widgetsettings.main.hasOwnProperty("enable_threaded_replies")&&!1===this.props.widgetsettings.main.enable_threaded_replies||"custom"===this.props.message.category)&&(t=null),this.props.message.parentMessageId&&(t=null);var a=Object(h.a)("li",{css:(this.props,{display:"flex",position:"relative"}),className:"action__group"},Object(h.a)("button",{type:"button",onMouseEnter:function(t){return e.toggleTooltip(t,!0)},onMouseLeave:function(t){return e.toggleTooltip(t,!1)},css:Z(ae.a),className:"group__button button__delete","data-title":"Delete message",onClick:function(){return e.props.actionGenerated("deleteMessage",e.props.message)}}));this.props.hasOwnProperty("widgetsettings")&&this.props.widgetsettings&&this.props.widgetsettings.hasOwnProperty("main")&&this.props.widgetsettings.main.hasOwnProperty("enable_deleting_messages")&&!1===this.props.widgetsettings.main.enable_deleting_messages&&(a=null),"receiver"===this.props.message.messageFrom&&(a=null);var s=Object(h.a)("li",{css:(this.props,{display:"flex",position:"relative"}),className:"action__group"},Object(h.a)("button",{type:"button",onMouseEnter:function(t){return e.toggleTooltip(t,!0)},onMouseLeave:function(t){return e.toggleTooltip(t,!1)},css:Z(ne.a),className:"group__button button__edit","data-title":"Edit message",onClick:function(){return e.props.actionGenerated("editMessage",e.props.message)}}));(this.props.hasOwnProperty("widgetsettings")&&this.props.widgetsettings&&this.props.widgetsettings.hasOwnProperty("main")&&this.props.widgetsettings.main.hasOwnProperty("enable_editing_messages")&&!1===this.props.widgetsettings.main.enable_editing_messages||"receiver"===this.props.message.messageFrom||this.props.message.type!==o.CometChat.MESSAGE_TYPE.TEXT)&&(s=null);var n=Object(h.a)("ul",{css:X(this.props),className:"message__actions"},t,s,a);return null===t&&null===a&&null===s&&(n=null),n}}]),a}(n.a.Component),re=function(e){return{display:"inline-block",fontSize:"11px",fontWeight:"500",lineHeight:"12px",textTransform:"lowercase",padding:"0 10px",cursor:"pointer",color:e.theme.color.blue,"&:hover":{textDecoration:"underline"}}},oe=function(e){var t=e.message.replyCount,a="".concat(t,1===t?" reply":" replies"),s=Object(h.a)("span",{css:re(e),className:"replycount",onClick:function(){return e.actionGenerated("viewMessageThread",e.message)}},a);return!1===e.message.hasOwnProperty("replyCount")&&(s=null),e.hasOwnProperty("widgetconfig")&&e.widgetconfig&&e.widgetconfig.hasOwnProperty("threaded-chats")&&!1===e.widgetconfig["threaded-chats"]&&(s=null),e.hasOwnProperty("widgetsettings")&&e.widgetsettings&&e.widgetsettings.hasOwnProperty("main")&&e.widgetsettings.main.hasOwnProperty("enable_threaded_replies")&&!1===e.widgetsettings.main.enable_threaded_replies&&(s=null),s},ce=a(73),pe=a.n(ce),le=a(74),de=a.n(le),ue=a(75),ge=a.n(ue),me=function(e){var t=pe.a;!e.message.sentAt||e.message.readAt||e.message.deliveredAt?e.message.sentAt&&!e.message.readAt&&e.message.deliveredAt&&(t=de.a):t=ge.a,e.hasOwnProperty("widgetsettings")&&e.widgetsettings&&e.widgetsettings.hasOwnProperty("main")&&e.widgetsettings.main.hasOwnProperty("show_delivery_read_indicators")&&!1===e.widgetsettings.main.show_delivery_read_indicators&&(t=null);var a=t?Object(h.a)("img",{src:t,alt:"time"}):null,s=new Date(1e3*e.message.sentAt).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0});return Object(h.a)("span",{css:{display:"inline-block",fontSize:"11px",fontWeight:"500",lineHeight:"12px",textTransform:"uppercase"," > img":{marginLeft:"3px",display:"inline-block",verticalAlign:"bottom"}},className:"message__timestamp"},s,a)},he=function(e){return{display:"inline-block",borderRadius:"12px",backgroundColor:"".concat(e.theme.backgroundColor.blue),color:"".concat(e.theme.color.white),padding:"8px 12px",alignSelf:"flex-end",width:"auto"}},be=function(e){return{borderTop:"1px solid  ".concat(e.theme.borderColor.primary),borderBottom:"1px solid  ".concat(e.theme.borderColor.primary),padding:"12px"}},fe=function(e){return{whiteSpace:"pre-wrap",wordBreak:"break-word",textAlign:"left",width:"auto",color:"".concat(e.theme.color.helpText),fontWeight:"700",marginBottom:"8px"}},ve=function(e){return{whiteSpace:"pre-wrap",wordBreak:"break-word",textAlign:"left",width:"auto",color:"".concat(e.theme.color.helpText),fontStyle:"italic",fontSize:"13px"}},xe=function(e){return{whiteSpace:"pre-wrap",wordBreak:"break-word",textAlign:"left",width:"auto",".message__txt__wrapper":{backgroundColor:"transparent",color:"".concat(e.theme.color.helpText),fontStyle:"normal",padding:"8px 0"}}},we=function(e){return{display:"flex",alignItems:"center",justifyContent:"center",padding:"12px","> a":{display:"inline-block",color:"".concat(e.theme.color.blue),fontWeight:"700"}}},Oe=function(e,t,a,s){var n={};return t.length===a.length&&1===a.length?n={"> img":{width:"48px",height:"48px"}}:t.length===a.length&&2===a.length?n={"> img":{width:"36px",height:"36px"}}:t.length===a.length&&a.length>2&&(n={"> img":{width:"24px",height:"24px"}}),!1===s&&(n={"> img":{width:"24px",height:"24px"}}),Object(O.a)(Object(O.a)({margin:"0",fontSize:"14px",whiteSpace:"pre-wrap",wordBreak:"break-word",textAlign:"left",width:"auto"," a":{color:"#0432FF","&:hover":{color:"#04009D"}}," a[href^='mailto:']":{color:"#F38C00","&:hover":{color:"#F36800"}}," a[href^='tel:']":{color:"#3802DA","&:hover":{color:"#2D038F"}}},{" > img":{width:"24px",height:"24px",display:"inline-block",verticalAlign:"top",zoom:"1",margin:"0 2px"}}),n)},Ce=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var s;Object(d.a)(this,a),(s=t.call(this,e)).messageFrom="sender",s.getMessageText=function(){var e=s.state.message.text,t=H(e),a=Q.a.parse(t,{folder:"svg",ext:".svg"}),n=K()(a),i=n.filter((function(e){return e instanceof Object&&"img"===e.type})),r=!0;return s.props.hasOwnProperty("widgetsettings")&&s.props.widgetsettings&&s.props.widgetsettings.hasOwnProperty("main")&&s.props.widgetsettings.main.hasOwnProperty("show_emojis_in_larger_size")&&!1===s.props.widgetsettings.main.show_emojis_in_larger_size&&(r=!1),e=Object(h.a)("div",{css:he(s.props),className:"message__txt__wrapper"},Object(h.a)("p",{css:Oe(s.props,n,i,r),className:"message__txt"},n))};var n=Object.assign({},e.message,{messageFrom:s.messageFrom});return s.state={message:n},s}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(e){if(JSON.stringify(e.message)!==JSON.stringify(this.props.message)){var t=Object.assign({},this.props.message,{messageFrom:this.messageFrom});this.setState({message:t})}}},{key:"render",value:function(){var e,t,a=this.getMessageText();if(this.state.message.hasOwnProperty("metadata")){var s=this.state.message.metadata["@injected"];if(s&&s.hasOwnProperty("extensions")){var n=s.extensions;if(n&&n.hasOwnProperty("link-preview")){var i=n["link-preview"];if(i&&i.hasOwnProperty("links")&&i.links.length){var r=i.links[0],o=r.url.match(/(http:|https:)?\/\/(www\.)?(youtube.com|youtu.be)(\S+)?/)?"View on Youtube":"Visit",c=a;a=Object(h.a)("div",{css:(t=this.props,{display:"inline-block",borderRadius:"12px",backgroundColor:"".concat(t.theme.backgroundColor.white),boxShadow:"0px 1px 2px 1px rgba(0,0,0,0.18)",alignSelf:"flex-start",width:"auto"}),className:"message__preview"},Object(h.a)("div",{css:{display:"flex",flexDirection:"column"},className:"preview__card"},Object(h.a)("div",{css:(e=r.image,{background:"url(".concat(e,") no-repeat center center"),backgroundSize:"contain",height:"150px",margin:"12px 0"}),className:"card__image"}),Object(h.a)("div",{css:be(this.props),className:"card__info"},Object(h.a)("div",{css:fe(this.props),className:"card__title"},Object(h.a)("span",null,r.title)),Object(h.a)("div",{css:ve(this.props),className:"card__desc"},Object(h.a)("span",null,r.description)),Object(h.a)("div",{css:xe(this.props),className:"card__text"},c)),Object(h.a)("div",{css:we(this.props),className:"card__link"},Object(h.a)("a",{href:r.url,target:"_blank",rel:"noopener noreferrer"},o))))}}}}return Object(h.a)("div",{css:{alignSelf:"flex-end",marginBottom:"16px",paddingLeft:"16px",paddingRight:"16px",maxWidth:"65%",clear:"both",position:"relative",display:"flex",flexDirection:"column",flexShrink:"0",":hover":{"ul.message__actions":{display:"flex"}}},className:"sender__message__container message__text"},Object(h.a)(ie,Object.assign({},this.props,{message:this.state.message})),Object(h.a)("div",{css:{width:"auto",flex:"1 1",alignSelf:"flex-end",display:"flex"},className:"message__wrapper"},a),Object(h.a)("div",{css:{alignSelf:"flex-end"},className:"message__info__wrapper"},Object(h.a)(oe,Object.assign({theme:this.props.theme},this.props,{message:this.state.message})),Object(h.a)(me,Object.assign({theme:this.props.theme},this.props,{message:this.state.message}))))}}]),a}(n.a.Component),ye=function(e){var t=e?{padding:"3px 5px"}:{};return Object(O.a)({alignSelf:"flex-start"},t)},je=function(e){return{display:"inline-block",borderRadius:"12px",backgroundColor:"".concat(e.theme.backgroundColor.white),boxShadow:"0px 1px 2px 1px rgba(0,0,0,0.18)",alignSelf:"flex-start",width:"auto"}},Ae=function(e){return{borderTop:"1px solid  ".concat(e.theme.borderColor.primary),borderBottom:"1px solid  ".concat(e.theme.borderColor.primary),padding:"12px"}},_e=function(e){return{whiteSpace:"pre-wrap",wordBreak:"break-word",textAlign:"left",width:"auto",color:"".concat(e.theme.color.helpText),fontWeight:"700",marginBottom:"8px"}},ke=function(e){return{whiteSpace:"pre-wrap",wordBreak:"break-word",textAlign:"left",width:"auto",color:"".concat(e.theme.color.helpText),fontStyle:"italic",fontSize:"13px"}},Me=function(e){return{whiteSpace:"pre-wrap",wordBreak:"break-word",textAlign:"left",width:"auto",".message__txt__wrapper":{backgroundColor:"transparent",color:"".concat(e.theme.color.helpText),fontStyle:"normal",padding:"8px 0"}}},Se=function(e){return{display:"flex",alignItems:"center",justifyContent:"center",padding:"12px","> a":{display:"inline-block",color:"".concat(e.theme.color.blue),fontWeight:"700"}}},Ie=function(e){return{display:"inline-block",borderRadius:"12px",backgroundColor:"".concat(e.theme.backgroundColor.secondary),padding:"8px 12px",alignSelf:"flex-start",width:"auto"}},Te=function(e,t,a){var s={};return e.length===t.length&&1===t.length?s={"> img":{width:"48px",height:"48px"}}:e.length===t.length&&2===t.length?s={"> img":{width:"36px",height:"36px"}}:e.length===t.length&&t.length>2&&(s={"> img":{width:"24px",height:"24px"}}),!1===a&&(s={"> img":{width:"24px",height:"24px"}}),Object(O.a)(Object(O.a)({margin:"0",fontSize:"14px",whiteSpace:"pre-wrap",wordBreak:"break-word",textAlign:"left",width:"auto"," a":{color:"#0432FF","&:hover":{color:"#04009D"}}," a[href^='mailto:']":{color:"#F38C00","&:hover":{color:"#F36800"}}," a[href^='tel:']":{color:"#3802DA","&:hover":{color:"#2D038F"}}},{" > img":{width:"24px",height:"24px",display:"inline-block",verticalAlign:"top",zoom:"1",margin:"0 2px"}}),s)},Re=function(e){return{display:"inline-block",fontSize:"11px",fontWeight:"500",lineHeight:"12px",textTransform:"uppercase",color:"".concat(e.theme.color.helpText)}},Ee=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var s;Object(d.a)(this,a),(s=t.call(this,e)).messageFrom="receiver",s.getMessageText=function(){s.state.message.text;var e=H(s.state.message.text),t=Q.a.parse(e,{folder:"svg",ext:".svg"}),a=K()(t),n=a.filter((function(e){return e instanceof Object&&"img"===e.type})),i=!0;return s.props.hasOwnProperty("widgetsettings")&&s.props.widgetsettings&&s.props.widgetsettings.hasOwnProperty("main")&&s.props.widgetsettings.main.hasOwnProperty("show_emojis_in_larger_size")&&!1===s.props.widgetsettings.main.show_emojis_in_larger_size&&(i=!1),Object(h.a)("div",{css:Ie(s.props),className:"message__txt__wrapper"},Object(h.a)("p",{css:Te(a,n,i),className:"message__txt"},a))};var n=Object.assign({},e.message,{messageFrom:s.messageFrom});if("group"===n.receiverType&&!n.sender.avatar){var i=n.sender.getUid(),r=n.sender.getName().charAt(0).toUpperCase();n.sender.setAvatar(_.getAvatar(i,r))}return s.state={message:n},s}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(e){if(JSON.stringify(e.message)!==JSON.stringify(this.props.message)){var t=Object.assign({},this.props.message,{messageFrom:this.messageFrom});this.setState({message:t})}}},{key:"render",value:function(){var e,t=null,a=null;"group"===this.state.message.receiverType&&(t=Object(h.a)("div",{css:{width:"36px",height:"36px",margin:"10px 5px",float:"left",flexShrink:"0"},className:"message__thumbnail"},Object(h.a)(v,{cornerRadius:"50%",borderColor:this.props.theme.color.secondary,borderWidth:"1px",image:this.state.message.sender.avatar})),a=Object(h.a)("div",{css:ye(t),className:"message__name__wrapper"},Object(h.a)("span",{css:(e=this.props,{fontSize:"10px",color:"".concat(e.theme.color.helpText)}),className:"message__name"},this.state.message.sender.name)));var s,n=this.getMessageText();if(this.state.message.hasOwnProperty("metadata")){var i=this.state.message.metadata["@injected"];if(i&&i.hasOwnProperty("extensions")){var r=i.extensions;if(r&&r.hasOwnProperty("link-preview")){var o=r["link-preview"];if(o&&o.hasOwnProperty("links")&&o.links.length){var c=o.links[0],p=c.url.match(/(http:|https:)?\/\/(www\.)?(youtube.com|youtu.be)(\S+)?/)?"View on Youtube":"Visit";n=Object(h.a)("div",{css:je(this.props),className:"message__preview"},Object(h.a)("div",{css:{display:"flex",flexDirection:"column"},className:"preview__card"},Object(h.a)("div",{css:(s=c.image,{background:"url(".concat(s,") no-repeat center center"),backgroundSize:"contain",height:"150px",margin:"12px 0"}),className:"card__image"}),Object(h.a)("div",{css:Ae(this.props),className:"card__info"},Object(h.a)("div",{css:_e(this.props),className:"card__title"},Object(h.a)("span",null,c.title)),Object(h.a)("div",{css:ke(this.props),className:"card__desc"},Object(h.a)("span",null,c.description)),Object(h.a)("div",{css:Me(this.props),className:"card__text"},this.getMessageText())),Object(h.a)("div",{css:Se(this.props),className:"card__link"},Object(h.a)("a",{href:c.url,target:"_blank",rel:"noopener noreferrer"},p))))}}}}return Object(h.a)("div",{css:{alignSelf:"flex-start",marginBottom:"16px",paddingLeft:"16px",paddingRight:"16px",maxWidth:"65%",clear:"both",position:"relative",display:"flex",flexDirection:"column",flexShrink:"0",":hover":{"ul.message__actions":{display:"flex"}}},className:"receiver__message__container message__text"},Object(h.a)(ie,Object.assign({},this.props,{message:this.state.message,name:a})),Object(h.a)("div",{css:{width:"auto",flex:"1 1",alignSelf:"flex-start",display:"flex"},className:"message__wrapper"},t,Object(h.a)("div",{css:{flex:"1 1",display:"flex",flexDirection:"column"},className:"message__details"},a,Object(h.a)("div",{css:{width:"auto",flex:"1 1",alignSelf:"flex-start",display:"flex"},className:"message__text__container"},n),Object(h.a)("div",{css:{alignSelf:"flex-start",padding:"3px 5px"},className:"message__info__wrapper"},Object(h.a)("span",{css:Re(this.props),className:"message__timestamp"},new Date(1e3*this.state.message.sentAt).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})),Object(h.a)(oe,Object.assign({},this.props,{message:this.state.message}))))))}}]),a}(n.a.Component),Ue=a(76),Ne=a.n(Ue),Pe=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var s;Object(d.a)(this,a),(s=t.call(this,e)).timer=null,s.messageFrom="sender",s.chooseImage=function(e){var t=e.url_small,a=e.url_medium;return window.matchMedia(s.props.theme.breakPoints[0]).matches&&(a=t),a},s.setImage=function(){if(s.state.message.hasOwnProperty("metadata")){var e=s.state.message.metadata["@injected"];if(e&&e.hasOwnProperty("extensions")){var t=e.extensions;if(t&&t.hasOwnProperty("thumbnail-generation")){var a=t["thumbnail-generation"];window.matchMedia(s.props.theme.breakPoints[0]).addListener((function(){var e=s.chooseImage(a),t=new Image;t.src=e,t.onload=function(){return s.setState({imageUrl:t.src})}}));var n=s.chooseImage(a);s.downloadImage(n).then((function(e){var t=URL.createObjectURL(e),a=new Image;a.src=t,a.onload=function(){s.setState({imageUrl:a.src}),URL.revokeObjectURL(a.src)}})).catch((function(e){return console.error(e)}))}}}else{var i=new Image;i.src=s.state.message.data.url,i.onload=function(){return s.setState({imageUrl:i.src})}}},s.open=function(){s.props.actionGenerated("viewActualImage",s.state.message)},s.imgRef=n.a.createRef();var i=Object.assign({},e.message,{messageFrom:s.messageFrom});return s.state={message:i,imageUrl:Ne.a,fullScreenView:!1},s}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.setImage()}},{key:"componentDidUpdate",value:function(e){if(JSON.stringify(e.message)!==JSON.stringify(this.props.message)){var t=Object.assign({},this.props.message,{messageFrom:this.messageFrom});this.setState({message:t})}}},{key:"downloadImage",value:function(e){var t=this;return new Promise((function(a,s){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(){4===n.readyState?200===n.status?(t.timer=null,a(n.response)):403===n.status&&(t.timer=setTimeout((function(){t.downloadImage(e).then((function(e){return a(e)})).catch((function(e){return s(e)}))}),800)):s(n.statusText)},n.onerror=function(e){return s(new Error("There was a network error.",e))},n.ontimeout=function(e){return s(new Error("There was a timeout error.",e))},n.send()}))}},{key:"render",value:function(){var e=this;return Object(h.a)(n.a.Fragment,null,Object(h.a)("div",{css:{alignSelf:"flex-end",marginBottom:"16px",paddingLeft:"16px",paddingRight:"16px",maxWidth:"65%",clear:"both",position:"relative",display:"flex",flexDirection:"column",flexShrink:"0",":hover":{"ul.message__actions":{display:"flex"}}},className:"sender__message__container message__image"},Object(h.a)(ie,Object.assign({},this.props,{message:this.state.message})),Object(h.a)("div",{css:{width:"auto",flex:"1 1",alignSelf:"flex-end",display:"flex"},className:"message__wrapper"},Object(h.a)("div",{css:(this.props,Object(k.a)({display:"inline-block",alignSelf:"flex-end",maxWidth:"300px",height:"200px",cursor:"pointer",flexShrink:"0",img:{borderRadius:"8px",height:"100%"}},"@media (min-width : 320px) and (max-width: 767px)",{minWidth:"50px",maxWidth:"150px",height:"100px",padding:"2px 2px"})),onClick:this.open,className:"message__img__wrapper"},Object(h.a)("img",{src:this.state.imageUrl,alt:"message",ref:function(t){e.imgRef=t}}))),Object(h.a)("div",{css:{alignSelf:"flex-end"},className:"message__info__wrapper"},Object(h.a)(oe,Object.assign({},this.props,{message:this.state.message})),Object(h.a)(me,this.props))))}}]),a}(n.a.Component),Ge=function(e){var t=e?{padding:"3px 5px"}:{};return Object(O.a)({alignSelf:"flex-start"},t)},Le=function(e){return{display:"inline-block",fontSize:"11px",fontWeight:"500",lineHeight:"12px",textTransform:"uppercase",color:"".concat(e.theme.color.helpText)}},Be=a(77),De=a.n(Be),We=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var s;Object(d.a)(this,a),(s=t.call(this,e)).messageFrom="receiver",s.chooseImage=function(e){var t=e.url_small,a=e.url_medium;return window.matchMedia(s.props.theme.breakPoints[0]).matches&&(a=t),a},s.setImage=function(){if(s.state.message.hasOwnProperty("metadata")){var e=s.state.message.metadata["@injected"];if(e&&e.hasOwnProperty("extensions")){var t=e.extensions;if(t&&t.hasOwnProperty("thumbnail-generation")){var a=t["thumbnail-generation"];window.matchMedia(s.props.theme.breakPoints[0]).addListener((function(){var e=s.chooseImage(a),t=new Image;t.src=e,t.onload=function(){return s.setState({imageUrl:t.src})}}));var n=s.chooseImage(a);s.downloadImage(n).then((function(e){var t=URL.createObjectURL(e),a=new Image;a.src=t,a.onload=function(){s.setState({imageUrl:a.src}),URL.revokeObjectURL(a.src)}})).catch((function(e){return console.error(e)}))}}}else{var i=new Image;i.src=s.state.message.data.url,i.onload=function(){return s.setState({imageUrl:i.src})}}},s.open=function(){s.props.actionGenerated("viewActualImage",s.state.message)},s.imgRef=n.a.createRef();var i=Object.assign({},e.message,{messageFrom:s.messageFrom});if("group"===i.receiverType&&!i.sender.avatar){var r=i.sender.getUid(),o=i.sender.getName().charAt(0).toUpperCase();i.sender.setAvatar(_.getAvatar(r,o))}return s.state={message:i,imageUrl:De.a},s}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.setImage()}},{key:"componentDidUpdate",value:function(e){if(JSON.stringify(e.message)!==JSON.stringify(this.props.message)){var t=Object.assign({},this.props.message,{messageFrom:this.messageFrom});this.setState({message:t})}}},{key:"downloadImage",value:function(e){var t=this;return new Promise((function(a,s){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(){4===n.readyState?200===n.status?(t.timer=null,a(n.response)):403===n.status&&(t.timer=setTimeout((function(){t.downloadImage(e).then((function(e){return a(e)})).catch((function(e){return s(e)}))}),800)):s(n.statusText)},n.onerror=function(e){return s(new Error("There was a network error.",e))},n.ontimeout=function(e){return s(new Error("There was a timeout error.",e))},n.send()}))}},{key:"render",value:function(){var e,t=this,a=null,s=null;return"group"===this.props.message.receiverType&&(a=Object(h.a)("div",{css:{width:"36px",height:"36px",margin:"10px 5px",float:"left",flexShrink:"0"},className:"message__thumbnail"},Object(h.a)(v,{cornerRadius:"50%",borderColor:this.props.theme.color.secondary,borderWidth:"1px",image:this.state.message.sender.avatar})),s=Object(h.a)("div",{css:Ge(a),className:"message__name__wrapper"},Object(h.a)("span",{css:(e=this.props,{fontSize:"10px",color:"".concat(e.theme.color.helpText)}),className:"message__name"},this.state.message.sender.name))),Object(h.a)("div",{css:{alignSelf:"flex-start",marginBottom:"16px",paddingLeft:"16px",paddingRight:"16px",maxWidth:"65%",clear:"both",position:"relative",display:"flex",flexDirection:"column",flexShrink:"0",":hover":{"ul.message__actions":{display:"flex"}}},className:"receiver__message__container message__image"},Object(h.a)(ie,Object.assign({},this.props,{message:this.state.message,name:s})),Object(h.a)("div",{css:{width:"auto",flex:"1 1",alignSelf:"flex-start",display:"flex"},className:"message__wrapper"},a,Object(h.a)("div",{css:{flex:"1 1",display:"flex",flexDirection:"column"},className:"message__details"},s,Object(h.a)("div",{css:{width:"auto",flex:"1 1",alignSelf:"flex-start",display:"flex"},className:"message__image__container"},Object(h.a)("div",{css:(this.props,Object(k.a)({display:"inline-block",alignSelf:"flex-start",maxWidth:"300px",height:"200px",cursor:"pointer",img:{borderRadius:"8px",height:"100%"}},"@media (min-width : 320px) and (max-width: 767px)",{minWidth:"50px",maxWidth:"150px",height:"100px",padding:"2px 2px"})),onClick:this.open,className:"message__image__wrapper"},Object(h.a)("img",{src:this.state.imageUrl,alt:"message",ref:function(e){t.imgRef=e}}))),Object(h.a)("div",{css:{alignSelf:"flex-start",padding:"3px 5px"},className:"message__info__wrapper"},Object(h.a)("span",{css:Le(this.props),className:"message__timestamp"},new Date(1e3*this.props.message.sentAt).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})),Object(h.a)(oe,Object.assign({},this.props,{message:this.state.message}))))))}}]),a}(n.a.Component),ze=function(e){return{display:"inline-block",borderRadius:"12px",backgroundColor:"".concat(e.theme.backgroundColor.blue),color:"".concat(e.theme.color.white),padding:"8px 12px",alignSelf:"flex-end",maxWidth:"100%","> a":{background:"0 0",textDecoration:"none",color:"".concat(e.theme.color.white),maxWidth:"100%",fontSize:"14px","&:visited, &:active, &:hover":{color:"".concat(e.theme.color.white),textDecoration:"none"},img:{backgroundColor:"".concat(e.theme.backgroundColor.white)}}}},Fe=a(78),He=a.n(Fe),Ye=function(e){var t=Object.assign({},e.message,{messageFrom:"sender"});return Object(h.a)("div",{css:{alignSelf:"flex-end",marginBottom:"16px",paddingLeft:"16px",paddingRight:"16px",maxWidth:"65%",clear:"both",position:"relative",display:"flex",flexDirection:"column",flexShrink:"0",":hover":{"ul.message__actions":{display:"flex"}}},className:"sender__message__container message__file"},Object(h.a)(ie,Object.assign({},e,{message:t})),Object(h.a)("div",{css:{width:"auto",flex:"1 1",alignSelf:"flex-end",display:"flex"},className:"message__wrapper"},Object(h.a)("div",{css:ze(e),className:"message__file__wrapper"},Object(h.a)("a",{href:e.message.data.attachments[0].url,target:"_blank",rel:"noopener noreferrer"},e.message.data.attachments[0].name," ",Object(h.a)("img",{src:He.a,alt:"file"})))),Object(h.a)("div",{css:{alignSelf:"flex-end"},className:"message__info__wrapper"},Object(h.a)(oe,Object.assign({},e,{message:t})),Object(h.a)(me,e)))},Je=function(e){var t=e?{padding:"3px 5px"}:{};return Object(O.a)({alignSelf:"flex-start"},t)},Ve=function(e){return{fontSize:"10px",color:"".concat(e.theme.color.helpText)}},Qe=function(e){return{display:"inline-block",borderRadius:"12px",color:"".concat(e.theme.color.secondary),backgroundColor:"".concat(e.theme.backgroundColor.secondary),padding:"8px 12px",alignSelf:"flex-start",width:"auto","> a":{background:"0 0",textDecoration:"none",backgroundColor:"transparent",color:"".concat(e.theme.color.primary),width:"auto",fontSize:"14px","&:visited, &:active, &:hover":{color:"".concat(e.theme.color.primary),textDecoration:"none"},img:{backgroundColor:"".concat(e.theme.backgroundColor.white)}}}},qe=function(e){return{display:"inline-block",fontSize:"11px",fontWeight:"500",lineHeight:"12px",textTransform:"uppercase",color:"".concat(e.theme.color.helpText)}},Ke=a(79),Xe=a.n(Ke),Ze=function(e){var t=null,a=null;if("group"===e.message.receiverType){if(!e.message.sender.avatar){var s=e.message.sender.getUid(),n=e.message.sender.getName().charAt(0).toUpperCase();e.message.sender.setAvatar(_.getAvatar(s,n))}t=Object(h.a)("div",{css:{width:"36px",height:"36px",margin:"10px 5px",float:"left",flexShrink:"0"},className:"message__thumbnail"},Object(h.a)(v,{cornerRadius:"50%",borderColor:e.theme.color.secondary,borderWidth:"1px",image:e.message.sender.avatar})),a=Object(h.a)("div",{css:Je(t),className:"message__name__wrapper"},Object(h.a)("span",{css:Ve(e),className:"message__name"},e.message.sender.name))}var i=Object.assign({},e.message,{messageFrom:"receiver"});return Object(h.a)("div",{css:{alignSelf:"flex-start",marginBottom:"16px",paddingLeft:"16px",paddingRight:"16px",maxWidth:"65%",clear:"both",position:"relative",display:"flex",flexDirection:"column",flexShrink:"0",":hover":{"ul.message__actions":{display:"flex"}}},className:"receiver__message__container message__file"},Object(h.a)(ie,Object.assign({},e,{message:i,name:a})),Object(h.a)("div",{css:{width:"auto",flex:"1 1",alignSelf:"flex-start",display:"flex"},className:"message__wrapper"},t,Object(h.a)("div",{css:{flex:"1 1",display:"flex",flexDirection:"column"},className:"message__details"},a,Object(h.a)("div",{css:{width:"auto",flex:"1 1",alignSelf:"flex-start",display:"flex"},className:"message__file__container"},Object(h.a)("div",{css:Qe(e),className:"message__file__wrapper"},Object(h.a)("a",{href:e.message.data.attachments[0].url,target:"_blank",rel:"noopener noreferrer"},e.message.data.attachments[0].name," ",Object(h.a)("img",{src:Xe.a,alt:"file"})))),Object(h.a)("div",{css:{alignSelf:"flex-start",padding:"3px 5px"},className:"message__info__wrapper"},Object(h.a)("span",{css:qe(e),className:"message__timestamp"},new Date(1e3*e.message.sentAt).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})),Object(h.a)(oe,Object.assign({},e,{message:i}))))))},$e=function(e){var t=Object.assign({},e.message,{messageFrom:"sender"});return Object(h.a)("div",{css:{alignSelf:"flex-end",marginBottom:"16px",paddingLeft:"16px",paddingRight:"16px",maxWidth:"65%",clear:"both",position:"relative",display:"flex",flexDirection:"column",flexShrink:"0",":hover":{"ul.message__actions":{display:"flex"}}},className:"sender__message__container message__audio"},Object(h.a)(ie,Object.assign({},e,{message:t})),Object(h.a)("div",{css:{width:"auto",flex:"1 1",alignSelf:"flex-end",display:"flex"},className:"message__wrapper"},Object(h.a)("div",{css:{display:"inline-block",borderRadius:"12px",alignSelf:"flex-end"," > audio":{maxWidth:"250px",display:"inherit"}},className:"message__audio__wrapper"},Object(h.a)("audio",{controls:!0},Object(h.a)("source",{src:e.message.data.url})))),Object(h.a)("div",{css:{alignSelf:"flex-end"},className:"message__info__wrapper"},Object(h.a)(oe,Object.assign({},e,{message:t})),Object(h.a)(me,e)))},et=function(e){var t=e?{padding:"3px 5px"}:{};return Object(O.a)({alignSelf:"flex-start"},t)},tt=function(e){return{fontSize:"10px",color:"".concat(e.theme.color.helpText)}},at=function(e){return{display:"inline-block",fontSize:"11px",fontWeight:"500",lineHeight:"12px",textTransform:"uppercase",color:"".concat(e.theme.color.helpText)}},st=function(e){var t=null,a=null;if("group"===e.message.receiverType){if(!e.message.sender.avatar){var s=e.message.sender.getUid(),n=e.message.sender.getName().charAt(0).toUpperCase();e.message.sender.setAvatar(_.getAvatar(s,n))}t=Object(h.a)("div",{css:{width:"36px",height:"36px",margin:"10px 5px",float:"left",flexShrink:"0"},className:"message__thumbnail"},Object(h.a)(v,{cornerRadius:"50%",borderColor:e.theme.color.secondary,borderWidth:"1px",image:e.message.sender.avatar})),a=Object(h.a)("div",{css:et(t),className:"message__name__wrapper"},Object(h.a)("span",{css:tt(e),className:"message__name"},e.message.sender.name))}var i=Object.assign({},e.message,{messageFrom:"receiver"});return Object(h.a)("div",{css:{alignSelf:"flex-start",marginBottom:"16px",paddingLeft:"16px",paddingRight:"16px",maxWidth:"65%",clear:"both",position:"relative",display:"flex",flexDirection:"column",flexShrink:"0",":hover":{"ul.message__actions":{display:"flex"}}},className:"receiver__message__container message__audio"},Object(h.a)(ie,Object.assign({},e,{message:i,name:a})),Object(h.a)("div",{css:{width:"auto",flex:"1 1",alignSelf:"flex-start",display:"flex"},className:"message__wrapper"},t,Object(h.a)("div",{css:{flex:"1 1",display:"flex",flexDirection:"column"},className:"message__details"},a,Object(h.a)("div",{css:{width:"auto",flex:"1 1",alignSelf:"flex-start",display:"flex"},className:"message__audio__container"},Object(h.a)("div",{css:{display:"inline-block",borderRadius:"12px",alignSelf:"flex-start"," > audio":{maxWidth:"250px",display:"inherit",outline:"none"}},className:"message__audio__wrapper"},Object(h.a)("audio",{controls:!0},Object(h.a)("source",{src:e.message.data.url})))),Object(h.a)("div",{css:{alignSelf:"flex-start",padding:"3px 5px"},className:"message__info__wrapper"},Object(h.a)("span",{css:at(e),className:"message__timestamp"},new Date(1e3*e.message.sentAt).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})),Object(h.a)(oe,Object.assign({},e,{message:i}))))))},nt=function(e){var t=Object.assign({},e.message,{messageFrom:"sender"});return Object(h.a)("div",{css:{alignSelf:"flex-end",marginBottom:"16px",paddingLeft:"16px",paddingRight:"16px",maxWidth:"65%",clear:"both",position:"relative",display:"flex",flexDirection:"column",flexShrink:"0",":hover":{"ul.message__actions":{display:"flex"}}},className:"sender__message__container message__video"},Object(h.a)(ie,Object.assign({},e,{message:t})),Object(h.a)("div",{css:{width:"auto",flex:"1 1",alignSelf:"flex-end",display:"flex"},className:"message__wrapper"},Object(h.a)("div",{css:{display:"inline-block",alignSelf:"flex-end"," > video":{maxWidth:"250px",borderRadius:"12px",display:"inherit"}},className:"message__video__wrapper"},Object(h.a)("video",{controls:!0},Object(h.a)("source",{src:e.message.data.url})))),Object(h.a)("div",{css:{alignSelf:"flex-end"},className:"message__info__wrapper"},Object(h.a)(oe,Object.assign({},e,{message:t})),Object(h.a)(me,e)))},it=function(e){var t=e?{padding:"3px 5px"}:{};return Object(O.a)({alignSelf:"flex-start"},t)},rt=function(e){return{fontSize:"10px",color:"".concat(e.theme.color.helpText)}},ot=function(e){return{display:"inline-block",fontSize:"11px",fontWeight:"500",lineHeight:"12px",textTransform:"uppercase",color:"".concat(e.theme.color.helpText)}},ct=function(e){var t=null,a=null;if("group"===e.message.receiverType){if(!e.message.sender.avatar){var s=e.message.sender.getUid(),n=e.message.sender.getName().charAt(0).toUpperCase();e.message.sender.setAvatar(_.getAvatar(s,n))}t=Object(h.a)("div",{css:{width:"36px",height:"36px",margin:"10px 5px",float:"left",flexShrink:"0"},className:"message__thumbnail"},Object(h.a)(v,{cornerRadius:"50%",borderColor:e.theme.color.secondary,borderWidth:"1px",image:e.message.sender.avatar})),a=Object(h.a)("div",{css:it(t),className:"message__name__wrapper"},Object(h.a)("span",{css:rt(e),className:"message__name"},e.message.sender.name))}var i=Object.assign({},e.message,{messageFrom:"receiver"});return Object(h.a)("div",{css:{alignSelf:"flex-start",marginBottom:"16px",paddingLeft:"16px",paddingRight:"16px",maxWidth:"65%",clear:"both",position:"relative",display:"flex",flexDirection:"column",flexShrink:"0",":hover":{"ul.message__actions":{display:"flex"}}},className:"receiver__message__container message__video"},Object(h.a)(ie,Object.assign({},e,{message:i,name:a})),Object(h.a)("div",{css:{width:"auto",flex:"1 1",alignSelf:"flex-start",display:"flex"},className:"message__wrapper"},t,Object(h.a)("div",{css:{flex:"1 1",display:"flex",flexDirection:"column"},className:"message__details"},a,Object(h.a)("div",{css:{width:"auto",flex:"1 1",alignSelf:"flex-start",display:"flex"},className:"message__video__container"},Object(h.a)("div",{css:{display:"inline-block",alignSelf:"flex-start","> video":{maxWidth:"250px",borderRadius:"12px",display:"inherit",outline:"none"}},className:"message__video__wrapper"},Object(h.a)("video",{controls:!0},Object(h.a)("source",{src:e.message.data.url})))),Object(h.a)("div",{css:{alignSelf:"flex-start",padding:"3px 5px"},className:"message__info__wrapper"},Object(h.a)("span",{css:ot(e),className:"message__timestamp"},new Date(1e3*e.message.sentAt).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})),Object(h.a)(oe,Object.assign({},e,{message:i}))))))},pt=function(e){var t="sender"===e.messageOf?{alignSelf:"flex-end"}:{alignSelf:"flex-start"};return Object(O.a)({marginBottom:"16px",paddingLeft:"16px",paddingRight:"16px",maxWidth:"65%",clear:"both",flexShrink:"0"},t)},lt=function(e){var t="sender"===e.messageOf?{display:"flex",flexDirection:"column"}:{};return Object(O.a)({flex:"1 1",position:"relative",width:"100%"},t)},dt=function(e){var t="sender"===e.messageOf?{alignSelf:"flex-end"}:{alignSelf:"flex-start"};return Object(O.a)({display:"inline-block",borderRadius:"12px",padding:"8px 12px",alignSelf:"flex-end",Width:"100%",backgroundColor:"".concat(e.theme.backgroundColor.secondary),fontStyle:"italic"},t)},ut=function(e){return{fontSize:"14px!important",margin:"0",lineHeight:"20px!important",color:"".concat(e.theme.color.helpText)}},gt=function(e){return"sender"===e.messageOf?{alignSelf:"flex-end"}:{alignSelf:"flex-start"}},mt=function(e){return{display:"inline-block",fontSize:"11px",fontWeight:500,lineHeight:"12px",textTransform:"uppercase",color:"".concat(e.theme.color.helpText)}},ht=function(e){var t={};return"receiver"===e.messageOf&&"group"===e.message.receiverType&&(t={paddingLeft:"5px"}),Object(O.a)({flex:"1 1",display:"flex",flexDirection:"column",position:"relative"},t)},bt=function(e){var t={};return"receiver"===e.messageOf&&"group"===e.message.receiverType&&(t={padding:"3px 5px"}),Object(O.a)({alignSelf:"flex-start"},t)},ft=function(e){return{fontSize:"10px",color:"".concat(e.theme.color.helpText)}},vt=function(e){var t=null;if("sender"===e.messageOf)t=Object(h.a)(n.a.Fragment,null,Object(h.a)("div",{css:dt(e),className:"message__txt__wrapper"},Object(h.a)("p",{css:ut(e),className:"message__txt"},"You deleted this message.")),Object(h.a)("div",{css:gt(e),className:"message__info__wrapper"},Object(h.a)("span",{css:mt(e),className:"message__timestamp"},new Date(1e3*e.message.sentAt).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}))));else if("receiver"===e.messageOf){var a=null,s=null;if("group"===e.message.receiverType){if(!e.message.sender.avatar){var i=e.message.sender.getUid(),r=e.message.sender.getName().charAt(0).toUpperCase();e.message.sender.setAvatar(_.getAvatar(i,r))}a=Object(h.a)("div",{css:{width:"36px",height:"36px",margin:"12px 0",float:"left"},className:"message__thumbnail"},Object(h.a)(v,{cornerRadius:"50%",borderColor:e.theme.color.secondary,borderWidth:"1px",image:e.message.sender.avatar})),s=Object(h.a)("div",{css:bt(e),className:"message__name__wrapper"},Object(h.a)("span",{css:ft(e),className:"message__name"},e.message.sender.name))}t=Object(h.a)(n.a.Fragment,null,a,Object(h.a)("div",{css:ht(e),className:"message__details"},s,Object(h.a)("div",{css:dt(e),className:"message__txt__wrapper"},Object(h.a)("p",{css:ut(e),className:"message__txt"},"This message was deleted.")),Object(h.a)("div",{css:gt(e),className:"message__info__wrapper"},Object(h.a)("span",{css:mt(e),className:"message__timestamp"},new Date(1e3*e.message.sentAt).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})))))}return Object(h.a)("div",{css:pt(e),className:"message__deleted"},Object(h.a)("div",{css:lt(e),className:"message__wrapper"},t))},xt=function(e){return{display:"inline-block",borderRadius:"12px",backgroundColor:"".concat(e.theme.backgroundColor.blue),color:"".concat(e.theme.color.white),padding:"8px 12px",alignSelf:"flex-end",width:"auto"}},wt=function(e){return{listStyleType:"none",padding:"0",margin:"0",width:"100%",li:{backgroundColor:"".concat(e.theme.backgroundColor.white),margin:"10px 0",borderRadius:"8px",display:"flex",width:"100%",position:"relative"}}},Ot=function(e,t){var a="100%"===t?{borderRadius:"8px"}:{borderRadius:"8px 0 0 8px"};return Object(O.a)(Object(O.a)({maxWidth:"100%",width:t},a),{},{backgroundColor:"".concat(e.theme.backgroundColor.primary),minHeight:"35px",height:"100%",position:"absolute",zIndex:"1"})},Ct=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).requestInProgress=null,s.message=Object.assign({},e.message,{messageFrom:"sender"}),s}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.message=Object.assign({},this.props.message,{messageFrom:"sender"})}},{key:"componentDidUpdate",value:function(){this.message=Object.assign({},this.props.message,{messageFrom:"sender"})}},{key:"render",value:function(){if(!this.props.message.hasOwnProperty("metadata"))return null;if(!this.props.message.metadata.hasOwnProperty("@injected"))return null;if(!this.props.message.metadata["@injected"].hasOwnProperty("extensions"))return null;if(!this.props.message.metadata["@injected"].extensions.hasOwnProperty("polls"))return null;var e=[],t=this.props.message.metadata["@injected"].extensions.polls;this.pollId=t.id;var a,s=t.results.total,n="".concat(s,1===s?" vote":" votes");for(var i in t.results.options){var r=t.results.options[i],o=r.count,c="0%";if(s)c=(o/s).toLocaleString("en",{style:"percent"});var p=Object(h.a)("li",{key:i},Object(h.a)("div",{css:Ot(this.props,c)}," "),Object(h.a)("div",{css:(a=this.props,{width:"100%",color:"".concat(a.theme.color.primary),display:"flex",alignItems:"center",minHeight:"35px",height:"100%",zIndex:"2",p:{margin:"0",padding:"6px 12px",width:"calc(100% - 40px)",whiteSpace:"pre-wrap",wordWrap:"break-word",fontSize:"14px"},span:{width:"40px",padding:"6px 12px",fontWeight:"bold",display:"inline-block",fontSize:"13px"}})},Object(h.a)("span",null,c),Object(h.a)("p",null,r.text)));e.push(p)}return Object(h.a)("div",{css:{alignSelf:"flex-end",marginBottom:"16px",paddingLeft:"16px",paddingRight:"16px",maxWidth:"65%",clear:"both",position:"relative",display:"flex",flexDirection:"column",flexShrink:"0",":hover":{"ul.message__actions":{display:"flex"}}},className:"sender__message__container message__poll"},Object(h.a)(ie,Object.assign({},this.props,{message:this.message})),Object(h.a)("div",{css:{width:"auto",flex:"1 1",alignSelf:"flex-end",display:"flex"},className:"message__wrapper"},Object(h.a)("div",{css:xt(this.props),className:"message__poll__wrapper"},Object(h.a)("p",{css:{margin:"0",whiteSpace:"pre-wrap",wordWrap:"break-word",textAlign:"left",width:"100%",fontSize:"14px"},className:"poll__question"},t.question),Object(h.a)("ul",{css:wt(this.props),className:"poll__options"},e),Object(h.a)("p",{css:{fontSize:"13px",margin:"0",alignSelf:"flex-end"},className:"poll__votes"},n))),Object(h.a)("div",{css:{alignSelf:"flex-end"},className:"message__info__wrapper"},Object(h.a)(oe,Object.assign({theme:this.props.theme},this.props,{message:this.message})),Object(h.a)(me,Object.assign({theme:this.props.theme},this.props))))}}]),a}(n.a.Component),yt=function(){return{width:"36px",height:"36px",margin:"10px 5px",float:"left",flexShrink:"0"}},jt=function(e){var t=e?{padding:"3px 5px"}:{};return Object(O.a)({alignSelf:"flex-start"},t)},At=function(e){return{display:"flex",flexDirection:"column",borderRadius:"12px",backgroundColor:"".concat(e.theme.backgroundColor.secondary),padding:"8px 12px",alignSelf:"flex-start",width:"100%"}},_t=function(e){return{listStyleType:"none",padding:"0",margin:"0",li:{backgroundColor:"".concat(e.theme.backgroundColor.white),margin:"10px 0",borderRadius:"8px",display:"flex",width:"100%",cursor:"pointer",position:"relative"}}},kt=function(e,t){var a="100%"===t?{borderRadius:"8px"}:{borderRadius:"8px 0 0 8px"};return Object(O.a)(Object(O.a)({maxWidth:"100%",width:t},a),{},{backgroundColor:"".concat(e.theme.backgroundColor.primary),minHeight:"35px",height:"100%",position:"absolute",zIndex:"1"})},Mt=function(e,t,a){var s={},n="6px 12px",i=n;return t.hasOwnProperty("voters")&&t.voters.hasOwnProperty(e.user.uid)&&(s={background:"url(".concat(a,") no-repeat 10px center")},n="6px 12px 6px 35px",i="6px 6px 6px 40px"),Object(O.a)(Object(O.a)({width:"100%",color:"".concat(e.theme.color.primary),display:"flex",alignItems:"center",minHeight:"35px",height:"100%"},s),{},{zIndex:"2",p:{margin:"0",padding:n,width:"calc(100% - 40px)",whiteSpace:"pre-wrap",wordWrap:"break-word",fontSize:"14px"},span:{width:"40px",padding:i,fontWeight:"bold",display:"inline-block",fontSize:"13px"}})},St=function(e){return{display:"inline-block",fontSize:"11px",fontWeight:"500",lineHeight:"12px",textTransform:"uppercase",color:"".concat(e.theme.color.helpText)}},It=a(80),Tt=a.n(It),Rt=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(d.a)(this,a);for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).requestInProgress=null,e.answerPollQuestion=function(t,a){o.CometChat.callExtension("polls","POST","v1/vote",{vote:a,id:e.pollId}).then((function(t){e.props.actionGenerated("pollAnswered",t)})).catch((function(e){console.log("answerPollQuestion error",e)}))},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this;if(!this.props.message.hasOwnProperty("metadata"))return null;if(!this.props.message.metadata.hasOwnProperty("@injected"))return null;if(!this.props.message.metadata["@injected"].hasOwnProperty("extensions"))return null;if(!this.props.message.metadata["@injected"].extensions.hasOwnProperty("polls"))return null;var t,a=null,s=null;if("group"===this.props.message.receiverType){if(!this.props.message.sender.avatar){var n=this.props.message.sender.getUid(),i=this.props.message.sender.getName().charAt(0).toUpperCase();this.props.message.sender.setAvatar(_.getAvatar(n,i))}a=Object(h.a)("div",{css:yt,className:"message__thumbnail"},Object(h.a)(v,{cornerRadius:"50%",borderColor:this.props.theme.color.secondary,borderWidth:"1px",image:this.props.message.sender.avatar})),s=Object(h.a)("div",{css:jt(a),className:"message__name__wrapper"},Object(h.a)("span",{css:(t=this.props,{fontSize:"10px",color:"".concat(t.theme.color.helpText)}),className:"message__name"},this.props.message.sender.name))}var r=[],o=this.props.message.metadata["@injected"].extensions.polls;this.pollId=o.id;var c=o.results.total,p="".concat(c,1===c?" vote":" votes"),l=function(t){var a=o.results.options[t],s=a.count,n="0%";c&&(n=(s/c).toLocaleString("en",{style:"percent"}));var i=Object(h.a)("li",{key:t,onClick:function(a){return e.answerPollQuestion(a,t)}},Object(h.a)("div",{css:kt(e.props,n)}," "),Object(h.a)("div",{css:Mt(e.props,a,Tt.a)},Object(h.a)("span",null,n),Object(h.a)("p",null,a.text)));r.push(i)};for(var d in o.options)l(d);var u=Object.assign({},this.props.message,{messageFrom:"receiver"});return Object(h.a)("div",{css:{alignSelf:"flex-start",marginBottom:"16px",paddingLeft:"16px",paddingRight:"16px",maxWidth:"65%",clear:"both",position:"relative",display:"flex",flexDirection:"column",flexShrink:"0",":hover":{"ul.message__actions":{display:"flex"}}},className:"receiver__message__container message__poll"},Object(h.a)(ie,Object.assign({},this.props,{message:u,name:s})),Object(h.a)("div",{css:{width:"auto",flex:"1 1",alignSelf:"flex-start",display:"flex"},className:"message__wrapper"},a,Object(h.a)("div",{css:{flex:"1 1",display:"flex",flexDirection:"column"},className:"message__details"},s,Object(h.a)("div",{css:{width:"auto",flex:"1 1",alignSelf:"flex-start",display:"flex"},className:"message__poll__container"},Object(h.a)("div",{css:At(this.props),className:"message__poll__wrapper"},Object(h.a)("p",{css:{margin:"0",whiteSpace:"pre-wrap",wordWrap:"break-word",textAlign:"left",width:"100%",fontSize:"14px"},className:"poll__question"},o.question),Object(h.a)("ul",{css:_t(this.props),className:"poll__options"},r),Object(h.a)("p",{css:{fontSize:"13px",margin:"0",alignSelf:"flex-end"},className:"poll__votes"},p))),Object(h.a)("div",{css:{alignSelf:"flex-start",padding:"3px 5px"},className:"message__info__wrapper"},Object(h.a)("span",{css:St(this.props),className:"message__timestamp"},new Date(1e3*this.props.message.sentAt).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})),Object(h.a)(oe,Object.assign({},this.props,{message:u}))))))}}]),a}(n.a.Component),Et=function(){return{fontSize:"13px",fontWeight:"500",margin:"0"}},Ut=function(e){var t=Object(s.useCallback)((function(){var t=e.message,a=e.loggedInUser,s=null;switch(t.status){case o.CometChat.CALL_STATUS.INITIATED:s="Call initiated","audio"===t.type?"user"===t.receiverType?s=t.callInitiator.uid===a.uid?"Outgoing audio call":"Incoming audio call":"group"===t.receiverType&&(t.action===o.CometChat.CALL_STATUS.INITIATED?s=t.callInitiator.uid===a.uid?"Outgoing audio call":"Incoming audio call":t.action===o.CometChat.CALL_STATUS.REJECTED&&(s=t.sender.uid===a.uid?"Call rejected":"".concat(t.sender.name," rejected call"))):"video"===t.type&&("user"===t.receiverType?s=t.callInitiator.uid===a.uid?"Outgoing video call":"Incoming video call":"group"===t.receiverType&&(t.action===o.CometChat.CALL_STATUS.INITIATED?s=t.callInitiator.uid===a.uid?"Outgoing video call":"Incoming video call":t.action===o.CometChat.CALL_STATUS.REJECTED&&(s=t.sender.uid===a.uid?"Call rejected":"".concat(t.sender.name," rejected call"))));break;case o.CometChat.CALL_STATUS.ONGOING:"user"===t.receiverType?s="Call accepted":"group"===t.receiverType&&(t.action===o.CometChat.CALL_STATUS.ONGOING?s=t.sender.uid===a.uid?"Call accepted":"".concat(t.sender.name," joined"):t.action===o.CometChat.CALL_STATUS.REJECTED?s=t.sender.uid===a.uid?"Call rejected":"".concat(t.sender.name," rejected call"):"left"===t.action&&(s=t.sender.uid===a.uid?"You left the call":"".concat(t.sender.name," left the call")));break;case o.CometChat.CALL_STATUS.UNANSWERED:s="Call unanswered","audio"!==t.type||"user"!==t.receiverType&&"group"!==t.receiverType?"video"!==t.type||"user"!==t.receiverType&&"group"!==t.receiverType||(s=t.callInitiator.uid===a.uid?"Unanswered video call":"Missed video call"):s=t.callInitiator.uid===a.uid?"Unanswered audio call":"Missed audio call";break;case o.CometChat.CALL_STATUS.REJECTED:s="Call rejected";break;case o.CometChat.CALL_STATUS.ENDED:s="Call ended";break;case o.CometChat.CALL_STATUS.CANCELLED:s="Call cancelled";break;case o.CometChat.CALL_STATUS.BUSY:s="Call busy"}return Object(h.a)("p",{css:Et},s)}),[e]);return Object(h.a)("div",{css:{padding:"8px 12px",marginBottom:"16px",textAlign:"center"},className:"call__message"},t())},Nt=function(e){return{backgroundColor:"".concat(e.theme.backgroundColor.white),zIndex:"1",width:"100%",flex:"1 1 0",order:"2",position:"relative"}},Pt=function(e){return{padding:"8px 12px",backgroundColor:"".concat(e.theme.backgroundColor.secondary),color:"".concat(e.theme.color.primary),borderRadius:"10px"}},Gt=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).loggedInUser=null,s.lastScrollTop=0,s.times=0,s.decoratorMessage="Loading...",s.scrollToBottom=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;s.messagesEnd&&(s.messagesEnd.scrollTop=s.messagesEnd.scrollHeight-e)},s.getMessages=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];(new D).getLoggedInUser().then((function(a){s.MessageListManager.fetchPreviousMessages().then((function(n){0===n.length&&(s.decoratorMessage="No messages found"),n.forEach((function(e){"action"===e.category&&"app_system"===e.sender.uid&&t.push(e),e.getSender().getUid()===a.getUid()||e.getReadAt()||("user"===e.getReceiverType()?o.CometChat.markAsRead(e.getId().toString(),e.getSender().getUid(),e.getReceiverType()):"group"===e.getReceiverType()&&o.CometChat.markAsRead(e.getId().toString(),e.getReceiverId(),e.getReceiverType())),s.props.actionGenerated("messageRead",e)}));var i="messageFetched";!0===e&&(i="messageFetchedAgain"),++s.times,1===s.times&&t.length>5||s.times>1&&30===t.length?(s.props.actionGenerated("messageFetched",n),s.getMessages(!0)):(s.lastScrollTop=s.messagesEnd.scrollHeight,s.props.actionGenerated(i,n))})).catch((function(e){console.error("[MessageList] getMessages fetchPrevious error",e),s.decoratorMessage="Error"}))})).catch((function(e){console.log("[MessageList] getMessages getLoggedInUser error",e),s.decoratorMessage="Error"}))},s.messageUpdated=function(e,t,a,n){switch(e){case"onMessageDeleted":s.messageDeleted(t);break;case"onMessageEdited":s.messageEdited(t);break;case"onMessagesDelivered":case"onMessagesRead":s.messageReadAndDelivered(t);break;case"onTextMessageReceived":case"onMediaMessageReceived":s.messageReceived(t);break;case"onCustomMessageReceived":s.customMessageReceived(t);break;case"onGroupMemberScopeChanged":case"onGroupMemberJoined":case"onGroupMemberLeft":case"onMemberAddedToGroup":case"onGroupMemberKicked":case"onGroupMemberBanned":case"onGroupMemberUnbanned":s.groupUpdated(e,t,a,n);break;case"onIncomingCallReceived":case"onIncomingCallCancelled":case"onOutgoingCallAccepted":case"onOutgoingCallRejected":s.callUpdated(t)}},s.messageDeleted=function(e){("group"===s.props.type&&"group"===e.getReceiverType()&&e.getReceiver().guid===s.props.item.guid||"user"===s.props.type&&"user"===e.getReceiverType()&&e.getSender().uid===s.props.item.uid)&&s.props.actionGenerated("messageDeleted",[e])},s.messageEdited=function(e){if("group"===s.props.type&&"group"===e.getReceiverType()&&e.getReceiver().guid===s.props.item.guid||"user"===s.props.type&&"user"===e.getReceiverType()&&e.getSender().uid===s.props.item.uid){var t=Object(C.a)(s.props.messages),a=t.findIndex((function(t,a){return t.id===e.id}));if(a>-1){var n=t[a],i=Object.assign({},n,e);t.splice(a,1,i),s.props.actionGenerated("messageUpdated",t)}}},s.messageReadAndDelivered=function(e){if("user"===e.getReceiverType()&&e.getSender().getUid()===s.props.item.uid&&e.getReceiver()===s.loggedInUser.uid){var t=Object(C.a)(s.props.messages);if("delivery"===e.getReceiptType()){var a=t.findIndex((function(t){return t.id===e.messageId}));if(a>-1){var n=Object(O.a)({},t[a]),i=Object.assign({},n,{deliveredAt:e.getDeliveredAt()});t.splice(a,1,i),s.props.actionGenerated("messageUpdated",t)}}else if("read"===e.getReceiptType()){var r=t.findIndex((function(t){return t.id===e.messageId}));if(r>-1){var o=Object(O.a)({},t[r]),c=Object.assign({},o,{readAt:e.getReadAt()});t.splice(r,1,c),s.props.actionGenerated("messageUpdated",t)}}}else"group"===e.getReceiverType()&&(e.getReceiver().guid,s.props.item.guid)},s.messageReceived=function(e){"group"===s.props.type&&"group"===e.getReceiverType()&&e.getReceiverId()===s.props.item.guid?(e.getReadAt()||o.CometChat.markAsRead(e.getId().toString(),e.getReceiverId(),e.getReceiverType()),s.props.actionGenerated("messageReceived",[e])):"user"===s.props.type&&"user"===e.getReceiverType()&&e.getSender().uid===s.props.item.uid&&(e.getReadAt()||o.CometChat.markAsRead(e.getId().toString(),e.getSender().uid,e.getReceiverType()),s.props.actionGenerated("messageReceived",[e]))},s.customMessageReceived=function(e){if("group"===s.props.type&&"group"===e.getReceiverType()&&e.getReceiverId()===s.props.item.guid){if(e.getReadAt()||o.CometChat.markAsRead(e.getId().toString(),e.getReceiverId(),e.getReceiverType()),e.hasOwnProperty("metadata"))s.props.actionGenerated("customMessageReceived",[e]);else if("extension_poll"===e.type){var t=s.addMetadataToCustomData(e);s.props.actionGenerated("customMessageReceived",[t])}}else if("user"===s.props.type&&"user"===e.getReceiverType()&&e.getSender().uid===s.props.item.uid)if(e.getReadAt()||o.CometChat.markAsRead(e.getId().toString(),e.getSender().uid,e.getReceiverType()),e.hasOwnProperty("metadata"))s.props.actionGenerated("customMessageReceived",[e]);else if("extension_poll"===e.type){var a=s.addMetadataToCustomData(e);s.props.actionGenerated("customMessageReceived",[a])}},s.addMetadataToCustomData=function(e){var t=e.data.customData,a=t.options,s={};for(var n in a)s[n]={text:a[n],count:0};var i={id:e.id,options:a,results:{total:0,options:s,question:t.question},question:t.question};return Object(O.a)(Object(O.a)({},e),{},{metadata:{"@injected":{extensions:{polls:i}}}})},s.callUpdated=function(e){if(!1===Y(s.props.widgetsettings,"show_call_notifications"))return!1;"group"===s.props.type&&"group"===e.getReceiverType()&&e.getReceiverId()===s.props.item.guid?(e.getReadAt()||o.CometChat.markAsRead(e.getId().toString(),e.getReceiverId(),e.getReceiverType()),s.props.actionGenerated("callUpdated",e)):"user"===s.props.type&&"user"===e.getReceiverType()&&e.getSender().uid===s.props.item.uid&&(e.getReadAt()||o.CometChat.markAsRead(e.getId().toString(),e.getSender().uid,e.getReceiverType()),s.props.actionGenerated("callUpdated",e))},s.groupUpdated=function(e,t,a,n){"group"===s.props.type&&"group"===t.getReceiverType()&&t.getReceiver().guid===s.props.item.guid&&s.props.actionGenerated("groupUpdated",t,e,a,n)},s.handleScroll=function(e){var t=e.currentTarget.scrollTop;s.lastScrollTop=s.messagesEnd.scrollHeight-t,0===Math.round(t)&&s.props.messages.length&&s.getMessages()},s.handleClick=function(e){s.props.onItemClick(e,"message")},s.getSenderMessageComponent=function(e,t){var a;if(e.hasOwnProperty("deletedAt"))a=Object(h.a)(vt,{theme:s.props.theme,key:t,item:s.props.item,type:s.props.type,message:e,messageOf:"sender"});else switch(e.type){case o.CometChat.MESSAGE_TYPE.TEXT:a=e.text?Object(h.a)(Ce,{theme:s.props.theme,key:t,item:s.props.item,type:s.props.type,message:e,widgetsettings:s.props.widgetsettings,widgetconfig:s.props.widgetconfig,actionGenerated:s.props.actionGenerated}):null;break;case o.CometChat.MESSAGE_TYPE.IMAGE:a=e.data.url?Object(h.a)(Pe,{theme:s.props.theme,key:t,item:s.props.item,type:s.props.type,message:e,widgetsettings:s.props.widgetsettings,widgetconfig:s.props.widgetconfig,actionGenerated:s.props.actionGenerated}):null;break;case o.CometChat.MESSAGE_TYPE.FILE:a=e.data.attachments?Object(h.a)(Ye,{theme:s.props.theme,key:t,item:s.props.item,type:s.props.type,message:e,widgetsettings:s.props.widgetsettings,widgetconfig:s.props.widgetconfig,actionGenerated:s.props.actionGenerated}):null;break;case o.CometChat.MESSAGE_TYPE.VIDEO:a=e.data.url?Object(h.a)(nt,{theme:s.props.theme,key:t,item:s.props.item,type:s.props.type,message:e,widgetsettings:s.props.widgetsettings,widgetconfig:s.props.widgetconfig,actionGenerated:s.props.actionGenerated}):null;break;case o.CometChat.MESSAGE_TYPE.AUDIO:a=e.data.url?Object(h.a)($e,{theme:s.props.theme,key:t,item:s.props.item,type:s.props.type,message:e,widgetsettings:s.props.widgetsettings,widgetconfig:s.props.widgetconfig,actionGenerated:s.props.actionGenerated}):null}return a},s.getReceiverMessageComponent=function(e,t){var a;if(e.hasOwnProperty("deletedAt"))a=Object(h.a)(vt,{theme:s.props.theme,key:t,message:e,messageOf:"receiver"});else switch(e.type){case"message":case o.CometChat.MESSAGE_TYPE.TEXT:a=e.text?Object(h.a)(Ee,{theme:s.props.theme,key:t,item:s.props.item,type:s.props.type,message:e,widgetsettings:s.props.widgetsettings,widgetconfig:s.props.widgetconfig,actionGenerated:s.props.actionGenerated}):null;break;case o.CometChat.MESSAGE_TYPE.IMAGE:a=e.data.url?Object(h.a)(We,{theme:s.props.theme,key:t,item:s.props.item,type:s.props.type,message:e,widgetsettings:s.props.widgetsettings,widgetconfig:s.props.widgetconfig,actionGenerated:s.props.actionGenerated}):null;break;case o.CometChat.MESSAGE_TYPE.FILE:a=e.data.attachments?Object(h.a)(Ze,{theme:s.props.theme,key:t,item:s.props.item,type:s.props.type,message:e,widgetsettings:s.props.widgetsettings,widgetconfig:s.props.widgetconfig,actionGenerated:s.props.actionGenerated}):null;break;case o.CometChat.MESSAGE_TYPE.AUDIO:a=e.data.url?Object(h.a)(st,{theme:s.props.theme,key:t,item:s.props.item,type:s.props.type,message:e,widgetsettings:s.props.widgetsettings,widgetconfig:s.props.widgetconfig,actionGenerated:s.props.actionGenerated}):null;break;case o.CometChat.MESSAGE_TYPE.VIDEO:a=e.data.url?Object(h.a)(ct,{theme:s.props.theme,key:t,item:s.props.item,type:s.props.type,message:e,widgetsettings:s.props.widgetsettings,widgetconfig:s.props.widgetconfig,actionGenerated:s.props.actionGenerated}):null}return a},s.getSenderCustomMessageComponent=function(e,t){var a;if(e.hasOwnProperty("deletedAt"))a=Object(h.a)(vt,{theme:s.props.theme,key:t,item:s.props.item,type:s.props.type,message:e,messageOf:"sender"});else switch(e.type){case"extension_poll":a=Object(h.a)(Ct,{theme:s.props.theme,key:t,item:s.props.item,type:s.props.type,message:e,widgetsettings:s.props.widgetsettings,actionGenerated:s.props.actionGenerated})}return a},s.getReceiverCustomMessageComponent=function(e,t){var a;if(e.hasOwnProperty("deletedAt"))a=Object(h.a)(vt,{theme:s.props.theme,key:t,item:s.props.item,type:s.props.type,message:e,messageOf:"receiver"});else switch(e.type){case"extension_poll":a=Object(h.a)(Rt,{user:s.loggedInUser,theme:s.props.theme,key:t,item:s.props.item,type:s.props.type,message:e,widgetsettings:s.props.widgetsettings,actionGenerated:s.props.actionGenerated})}return a},s.getCallMessageComponent=function(e,t){return Object(h.a)(Ut,{message:e,key:t,theme:s.props.theme,loggedInUser:s.loggedInUser})},s.getActionMessageComponent=function(e,t){var a=null;if(e.message&&(a=Object(h.a)("div",{css:{padding:"8px 12px",marginBottom:"16px",textAlign:"center"},className:"message__action",key:t},Object(h.a)("p",{css:{fontSize:"13.5px",margin:"0",lineHeight:"20px"}},e.message)),s.props.messageconfig)){var n=s.props.messageconfig.find((function(t){return t.action===e.action&&t.category===e.category}));n&&!1===n.enabled&&(a=null)}return a},s.getComponent=function(e,t){var a;switch(e.category){case"action":a=s.getActionMessageComponent(e,t);break;case"call":a=s.getCallMessageComponent(e,t);break;case"message":a=s.loggedInUser.uid===e.sender.uid?s.getSenderMessageComponent(e,t):s.getReceiverMessageComponent(e,t);break;case"custom":a=s.loggedInUser.uid===e.sender.uid?s.getSenderCustomMessageComponent(e,t):s.getReceiverCustomMessageComponent(e,t)}return a},s.state={onItemClick:null},s.loggedInUser=s.props.loggedInUser,s.messagesEnd=n.a.createRef(),s}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.parentMessageId?this.MessageListManager=new V(this.props.widgetsettings,this.props.item,this.props.type,this.props.parentMessageId):this.MessageListManager=new V(this.props.widgetsettings,this.props.item,this.props.type),this.getMessages(),this.MessageListManager.attachListeners(this.messageUpdated)}},{key:"componentDidUpdate",value:function(e,t){var a=JSON.stringify(e.messages),s=JSON.stringify(this.props.messages);"user"===this.props.type&&e.item.uid!==this.props.item.uid||"group"===this.props.type&&e.item.guid!==this.props.item.guid?(this.MessageListManager.removeListeners(),this.props.parentMessageId?this.MessageListManager=new V(this.props.widgetsettings,this.props.item,this.props.type,this.props.parentMessageId):this.MessageListManager=new V(this.props.widgetsettings,this.props.item,this.props.type),this.getMessages(),this.MessageListManager.attachListeners(this.messageUpdated)):e.parentMessageId!==this.props.parentMessageId?(this.MessageListManager.removeListeners(),this.MessageListManager=new V(this.props.widgetsettings,this.props.item,this.props.type,this.props.parentMessageId),this.getMessages(),this.MessageListManager.attachListeners(this.messageUpdated)):a!==s&&(this.props.scrollToBottom?this.scrollToBottom():this.scrollToBottom(this.lastScrollTop))}},{key:"render",value:function(){var e,t=this,a=null;0===this.props.messages.length&&(a=Object(h.a)("div",{css:{overflow:"hidden",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:"50%"},className:"messages__decorator-message"},Object(h.a)("p",{css:(e=this.props,{margin:"0",height:"30px",color:"".concat(e.theme.color.secondary),fontSize:"24px!important",fontWeight:"600"}),className:"decorator-message"},this.decoratorMessage)));var s=null,i=this.props.messages.map((function(e,a){var i=null,r=new Date(1e3*e.sentAt).toLocaleDateString();return s!==r&&(i=Object(h.a)("div",{css:{textAlign:"center",marginBottom:"16px"},className:"message__date"},Object(h.a)("span",{css:Pt(t.props)},r))),s=r,Object(h.a)(n.a.Fragment,{key:a},i,t.getComponent(e,a))}));return Object(h.a)("div",{className:"chat__list",css:Nt(this.props)},a,Object(h.a)("div",{className:"list__wrapper",css:{boxSizing:"border-box",display:"flex",flexDirection:"column",height:"100%",overflowX:"hidden",overflowY:"scroll",position:"absolute",top:"0",transition:"background .3s ease-out .1s",width:"100%",zIndex:"100",paddingTop:"14px"},ref:function(e){t.messagesEnd=e},onScroll:this.handleScroll},i))}},{key:"componentWillUnmount",value:function(){this.MessageListManager.removeListeners(),this.MessageListManager=null}}]),a}(n.a.PureComponent),Lt=a(138),Bt=(a(191),a(24));function Dt(){var e=Object(Bt.a)(["\n    from {\n        bottom: -55px\n    }\n    to {\n        bottom: 0px\n    }"]);return Dt=function(){return e},e}var Wt=function(e,t){var a=t(Dt());return{padding:"7px",backgroundColor:"".concat(e.theme.backgroundColor.white),border:"1px solid ".concat(e.theme.borderColor.primary),fontSize:"13px",display:"flex",flexDirection:"row-reverse",justifyContent:"space-between",animation:"".concat(a," 0.5s ease-out"),position:"relative"}},zt=function(e){return{padding:"10px",backgroundColor:"".concat(e.theme.backgroundColor.grey),border:"1px solid ".concat(e.theme.borderColor.primary),borderRadius:"10px",cursor:"pointer"}},Ft=a(81),Ht=a.n(Ft),Yt=function(e){var t,a=e.options.map((function(t,a){return Object(h.a)("div",{key:a,css:zt(e),className:"option",onClick:function(){return e.clicked(t)}},t)}));return Object(h.a)("div",{css:Wt(e,h.b),className:"reply__preview__wrapper"},Object(h.a)("div",{css:{alignSelf:"flex-start",display:"flex",alignItems:"baseline",justifyContent:"space-between"},className:"preview__heading"},Object(h.a)("div",{css:(t=Ht.a,{width:"24px",height:"24px",borderRadius:"50%",background:"url(".concat(t,") center center no-repeat"),cursor:"pointer"}),onClick:e.close,className:"preview__close"})),Object(h.a)("div",{css:{display:"flex",alignItems:"center",justifyContent:"space-around",width:"100%"},className:"preview__options"},a))},Jt=function(e){return e.show?Object(h.a)("div",{css:{zIndex:"1000",backgroundColor:"#000",opacity:".3",position:"fixed",width:"100%",height:"100%",top:"0",left:"0",cursor:"pointer",transition:"background .3s ease-out 0"},className:"modal__backdrop",onClick:e.clicked}):null},Vt=a(82),Qt=a.n(Vt),qt=function(e){var t=e.open?{display:"block"}:{};return Object(O.a)(Object(O.a)({minWidth:"350px",minHeight:"450px",width:"50%",height:"40%",overflow:"hidden",backgroundColor:"".concat(e.theme.backgroundColor.white),position:"fixed",left:"50%",top:"50%",transform:"translate(-50%, -50%)",zIndex:"1002",margin:"0 auto",boxShadow:"rgba(20, 20, 20, 0.2) 0 16px 32px, rgba(20, 20, 20, 0.04) 0 0 0 1px",borderRadius:"12px",display:"none"},t),{},Object(k.a)({},"@media (min-width : 320px) and (max-width: 767px)",{width:"100%",height:"100%"}))},Kt=function(e){return{display:"inline-block",button:{cursor:"pointer",padding:"10px 20px",backgroundColor:"".concat(e.theme.backgroundColor.blue),borderRadius:"5px",color:"".concat(e.theme.color.white),fontSize:"14px",outline:"0",border:"0"},tr:{border:"none",td:{textAlign:"center"}}}},Xt=function(e){return{background:"url(".concat(e,") right center no-repeat"),backgroundSize:"28px 28px",cursor:"pointer",display:"block",height:"28px",width:"28px"}},Zt=function(e){return Object(h.a)("tr",{className:"poll__options"},Object(h.a)("td",null,"\xa0"),Object(h.a)("td",null,Object(h.a)("input",{autoFocus:!0,type:"text",autoComplete:"off",placeholder:"Enter your option",value:e.value,onChange:function(t){return e.optionChangeHandler(t,e.option)}})),Object(h.a)("td",{css:{width:"50px"},className:"option__remove"},Object(h.a)("span",{css:(t=Qt.a,{background:"url(".concat(t,") right center no-repeat"),backgroundSize:"28px 28px",cursor:"pointer",display:"block",height:"28px",width:"28px"}),onClick:function(){return e.removePollOption(e.option)}})));var t},$t=a(83),ea=a.n($t),ta=a(84),aa=a.n(ta),sa=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).loggedInUser=null,s.addPollOption=function(){var e=Object(C.a)(s.state.options);e.push({value:"",id:(new Date).getTime()}),s.setState({options:e})},s.removePollOption=function(e){var t=Object(C.a)(s.state.options),a=t.findIndex((function(t){return t.id===e.id}));a>-1&&(t.splice(a,1),s.setState({options:t}))},s.optionChangeHandler=function(e,t){var a=Object(C.a)(s.state.options),n=a.findIndex((function(e){return e.id===t.id}));if(n>-1){var i=Object(O.a)(Object(O.a)({},t),{},{value:e.target.value});a.splice(n,1,i),s.setState({options:a})}},s.createPoll=function(){var e,t=s.questionRef.current.value.trim(),a=s.optionOneRef.current.value.trim(),n=s.optionTwoRef.current.value.trim(),i=[a,n];if(0===t.length)return s.setState({error:"Question cannnot be blank."}),!1;if(0===a.length||0===n.length)return s.setState({error:"Option cannnot be blank."}),!1;s.state.options.forEach((function(e){i.push(e.value)}));var r=s.props.type;"user"===s.props.type?e=s.props.item.uid:"group"===s.props.type&&(e=s.props.item.guid),o.CometChat.callExtension("polls","POST","v1/create",{question:t,options:i,receiver:e,receiverType:r}).then((function(e){var t=e.message.data,a=t.data.customData,n=a.options,i={};for(var r in n)i[r]={text:n[r],count:0};var o={id:t.id,options:n,results:{total:0,options:i,question:a.question},question:a.question},c=Object(O.a)(Object(O.a)({},t),{},{sender:{uid:t.sender},metadata:{"@injected":{extensions:{polls:o}}}});s.props.actionGenerated("pollCreated",c),s.setState({error:null})})).catch((function(e){console.log("error",e),s.setState({error:e})}))},s.state={error:null,options:[]},s.questionRef=n.a.createRef(),s.optionOneRef=n.a.createRef(),s.optionTwoRef=n.a.createRef(),s.optionRef=n.a.createRef(),s}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;(new D).getLoggedInUser().then((function(t){e.loggedInUser=t})).catch((function(e){console.error("[CometChatCreatePoll] getLoggedInUser error",e)}))}},{key:"render",value:function(){var e,t,a=this,s=Object(C.a)(this.state.options).map((function(e,t){return Object(h.a)(Zt,{key:t,option:e,optionChangeHandler:a.optionChangeHandler,removePollOption:a.removePollOption})}));return Object(h.a)(n.a.Fragment,null,Object(h.a)(Jt,{show:this.props.open,clicked:this.props.close}),Object(h.a)("div",{css:qt(this.props),className:"modal__createpoll"},Object(h.a)("span",{css:(t=aa.a,{position:"absolute",width:"32px",height:"32px",borderRadius:"50%",top:"16px",right:"16px",background:"url(".concat(t,") center center no-repeat"),cursor:"pointer"}),className:"modal__close",onClick:this.props.close}),Object(h.a)("div",{css:{padding:"25px",height:"100%",width:"100%"},className:"modal__body"},Object(h.a)("table",{css:(e=this.props,{borderCollapse:"collapse",margin:"0",padding:"0",width:"100%",height:"90%",tr:{borderBottom:"1px solid ".concat(e.theme.borderColor.primary),display:"table",width:"100%",tableLayout:"fixed"}})},Object(h.a)("caption",{css:{fontSize:"20px",marginBottom:"15px",fontWeight:"bold",textAlign:"left"},className:"modal__title"},"Create Poll"),Object(h.a)("tbody",{css:{height:"calc(100% - 40px)",overflowY:"auto",display:"block",tr:{td:{padding:"6px 12px",fontSize:"14px",input:{width:"100%",border:"none",padding:"6px 12px",fontSize:"14px","&:focus":{outline:"none"}},label:{padding:"6px 12px"},":first-of-type":{width:"90px"}}}}},Object(h.a)("tr",{className:"error"},Object(h.a)("td",{colSpan:"3"},Object(h.a)("div",{css:{fontSize:"12px",color:"red",textAlign:"center"}},this.state.error))),Object(h.a)("tr",{className:"poll__question"},Object(h.a)("td",null,Object(h.a)("label",null,"Question")),Object(h.a)("td",{colSpan:"2"},Object(h.a)("input",{type:"text",autoFocus:!0,tabIndex:"1",placeholder:"Enter your question",ref:this.questionRef}))),Object(h.a)("tr",{className:"poll__options"},Object(h.a)("td",null,Object(h.a)("label",null,"Options")),Object(h.a)("td",{colSpan:"2"},Object(h.a)("input",{type:"text",placeholder:"Enter your option",ref:this.optionOneRef}))),Object(h.a)("tr",{ref:this.optionRef,className:"poll__options"},Object(h.a)("td",null,"\xa0"),Object(h.a)("td",{colSpan:"2"},Object(h.a)("input",{type:"text",placeholder:"Enter your option",ref:this.optionTwoRef}))),s,Object(h.a)("tr",null,Object(h.a)("td",null,"\xa0"),Object(h.a)("td",null,Object(h.a)("label",null,"Add new option")),Object(h.a)("td",{css:{width:"50px"}},Object(h.a)("span",{css:Xt(ea.a),className:"option__add",onClick:this.addPollOption})))),Object(h.a)("tfoot",{css:Kt(this.props)},Object(h.a)("tr",{className:"createpoll"},Object(h.a)("td",{colSpan:"2"},Object(h.a)("button",{onClick:this.createPoll},"Create"))))))))}}]),a}(n.a.Component);function na(){var e=Object(Bt.a)(["\n    from {\n        bottom: -60px\n    }\n    to {\n        bottom: 0px\n    }"]);return na=function(){return e},e}var ia=function(e,t){var a=t(na());return{padding:"7px",backgroundColor:"".concat(e.theme.backgroundColor.white),borderColor:"".concat(e.theme.borderColor.primary),borderWidth:"1px 1px 1px 5px",borderStyle:"solid",color:"".concat(e.theme.color.helpText),fontSize:"13px",animation:"".concat(a," 0.5s ease-out"),position:"relative"}},ra=function(e){return{width:"24px",height:"24px",borderRadius:"50%",background:"url(".concat(e,") center center no-repeat"),cursor:"pointer"}},oa=function(e){return{flex:"1 1 auto",position:"relative",outline:"none",borderRadius:"8px",border:"1px solid ".concat(e.theme.borderColor.primary),backgroundColor:"".concat(e.theme.backgroundColor.white),display:"flex",flexDirection:"column",width:"100%",minHeight:"85px"}},ca=function(e){var t=e?{pointerEvents:"none",opacity:"0.4"}:{};return Object(O.a)(Object(O.a)({width:"100%",fontSize:"15px",lineHeight:"20px",fontWeight:"400",padding:"15px 10px",outline:"none",overflowX:"hidden",overflowY:"auto",position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word",zIndex:"1",minHeight:"50px",maxHeight:"100px",userSelect:"text"},t),{},{"&:empty:before":{content:"attr(placeholder)",color:"rgb(153, 153, 153)",pointerEvents:"none",display:"block"}})},pa=function(e){return{padding:"7px 10px",height:"35px",borderTop:"1px solid ".concat(e.theme.borderColor.primary),backgroundColor:"".concat(e.theme.backgroundColor.grey),display:"flex",justifyContent:"flex-end"}},la=function(e){var t=e.showFilePicker?{width:"120px",opacity:"1",margin:"auto 10px"}:{};return Object(O.a)({left:"0",bottom:"0",position:"relative",width:"0",borderRadius:"8px",overflow:"hidden",zIndex:"1",textAlign:"center",opacity:"0",transition:"width 0.5s linear"},t)},da=function(e,t){var a={background:"url(".concat(t,") no-repeat 100% 100%")};return Object(O.a)({width:"21px",height:"21px",backgroundColor:"".concat(e.theme.backgroundColor.secondary),cursor:"pointer"," > input":{display:"none"}},a)},ua=a(85),ga=a.n(ua),ma=a(86),ha=a.n(ma),ba=a(87),fa=a.n(ba),va=a(88),xa=a.n(va),wa=a(89),Oa=a.n(wa),Ca=a(90),ya=a.n(Ca),ja=a(91),Aa=a.n(ja),_a=a(92),ka=a.n(_a),Ma=a(93),Sa=a.n(Ma),Ia=a(59),Ta=a.n(Ia),Ra=a(60),Ea=a.n(Ra),Ua=a(61),Na=a.n(Ua),Pa=a(62),Ga=a.n(Pa),La=a(63),Ba=a.n(La),Da=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).playAudio=function(){if(s.props.hasOwnProperty("widgetsettings")&&s.props.widgetsettings&&s.props.widgetsettings.hasOwnProperty("main")&&(!1===s.props.widgetsettings.main.hasOwnProperty("enable_sound_for_messages")||s.props.widgetsettings.main.hasOwnProperty("enable_sound_for_messages")&&!1===s.props.widgetsettings.main.enable_sound_for_messages))return!1;s.audio.currentTime=0,s.audio.play()},s.emojiClicked=function(e,t){var a=s.messageInputRef.current;a.focus(),s.pasteHtmlAtCaret(e.native,!1),s.setState({messageInput:a.innerText,messageType:"text"})},s.changeHandler=function(e){s.startTyping();var t=e.currentTarget,a=t.textContent.trim();if(!a.length)return e.currentTarget.textContent=a,!1;s.setState({messageInput:t.innerText,messageType:"text"})},s.toggleFilePicker=function(){var e=!s.state.showFilePicker;s.setState({showFilePicker:e})},s.openFileDialogue=function(e){switch(e){case"image":s.imageUploaderRef.current.click();break;case"file":s.fileUploaderRef.current.click();break;case"audio":s.audioUploaderRef.current.click();break;case"video":s.videoUploaderRef.current.click()}},s.onImageChange=function(e){if(!s.imageUploaderRef.current.files[0])return!1;var t=s.imageUploaderRef.current.files[0],a=new FileReader;a.addEventListener("load",(function(){var e=new File([a.result],t.name,t);s.sendMediaMessage(e,"image")}),!1),a.readAsArrayBuffer(t)},s.onFileChange=function(e){if(!s.fileUploaderRef.current.files[0])return!1;var t=s.fileUploaderRef.current.files[0],a=new FileReader;a.addEventListener("load",(function(){var e=new File([a.result],t.name,t);s.sendMediaMessage(e,"file")}),!1),a.readAsArrayBuffer(t)},s.onAudioChange=function(e){if(!s.audioUploaderRef.current.files[0])return!1;var t=s.audioUploaderRef.current.files[0],a=new FileReader;a.addEventListener("load",(function(){var e=new File([a.result],t.name,t);s.sendMediaMessage(e,"audio")}),!1),a.readAsArrayBuffer(t)},s.onVideoChange=function(e){if(!s.videoUploaderRef.current.files[0])return!1;var t=s.videoUploaderRef.current.files[0],a=new FileReader;a.addEventListener("load",(function(){var e=new File([a.result],t.name,t);s.sendMediaMessage(e,"video")}),!1),a.readAsArrayBuffer(t)},s.getReceiverDetails=function(){var e,t;return"user"===s.props.type?(e=s.props.item.uid,t=o.CometChat.RECEIVER_TYPE.USER):"group"===s.props.type&&(e=s.props.item.guid,t=o.CometChat.RECEIVER_TYPE.GROUP),{receiverId:e,receiverType:t}},s.sendMediaMessage=function(e,t){if(s.toggleFilePicker(),s.messageSending)return!1;var a;s.messageSending=!0;var n=s.props.type;"user"===s.props.type?a=s.props.item.uid:"group"===s.props.type&&(a=s.props.item.guid);var i=new o.CometChat.MediaMessage(a,e,t,n);s.props.parentMessageId&&i.setParentMessageId(s.props.parentMessageId),s.endTyping(),o.CometChat.sendMessage(i).then((function(e){s.messageSending=!1,s.playAudio(),s.props.actionGenerated("messageComposed",[e])})).catch((function(e){s.messageSending=!1,console.log("Message sending failed with error:",e)}))},s.sendMessageOnEnter=function(e){if(13===e.keyCode&&!e.shiftKey)return e.preventDefault(),s.messageInputRef.current.textContent="",s.sendTextMessage(),!0},s.sendTextMessage=function(){if(s.state.emojiViewer&&s.setState({emojiViewer:!1}),!s.state.messageInput.trim().length)return!1;if(s.messageSending)return!1;if(s.messageSending=!0,s.state.messageToBeEdited)return s.editMessage(),!1;var e=s.getReceiverDetails(),t=e.receiverId,a=e.receiverType,n=s.state.messageInput.trim(),i=new o.CometChat.TextMessage(t,n,a);s.props.parentMessageId&&i.setParentMessageId(s.props.parentMessageId),s.endTyping(),o.CometChat.sendMessage(i).then((function(e){s.setState({messageInput:""}),s.messageSending=!1,s.messageInputRef.current.textContent="",s.playAudio(),s.props.actionGenerated("messageComposed",[e])})).catch((function(e){console.log("Message sending failed with error:",e),s.messageSending=!1}))},s.editMessage=function(){var e=s.props.messageToBeEdited,t=s.getReceiverDetails(),a=t.receiverId,n=t.receiverType,i=s.state.messageInput.trim(),r=new o.CometChat.TextMessage(a,i,n);r.setId(e.id),s.endTyping(),o.CometChat.editMessage(r).then((function(e){s.playAudio(),s.messageSending=!1,s.closeEditPreview(),s.props.actionGenerated("messageEdited",e)})).catch((function(e){s.messageSending=!1,console.log("Message editing failed with error:",e)}))},s.closeEditPreview=function(){s.props.actionGenerated("clearEditPreview")},s.startTyping=function(){if(s.props.hasOwnProperty("widgetsettings")&&s.props.widgetsettings&&s.props.widgetsettings.hasOwnProperty("main")&&s.props.widgetsettings.main.hasOwnProperty("show_typing_indicators")&&!1===s.props.widgetsettings.main.show_typing_indicators)return!1;if(s.isTyping)return!1;var e=s.getReceiverDetails(),t=e.receiverId,a=e.receiverType,n=new o.CometChat.TypingIndicator(t,a);o.CometChat.startTyping(n),s.isTyping=setTimeout((function(){clearTimeout(s.isTyping),s.isTyping=null}),5e3)},s.endTyping=function(){if(s.props.hasOwnProperty("widgetsettings")&&s.props.widgetsettings&&s.props.widgetsettings.hasOwnProperty("main")&&s.props.widgetsettings.main.hasOwnProperty("show_typing_indicators")&&!1===s.props.widgetsettings.main.show_typing_indicators)return!1;var e=s.getReceiverDetails(),t=e.receiverId,a=e.receiverType,n=new o.CometChat.TypingIndicator(t,a);o.CometChat.endTyping(n)},s.toggleEmojiPicker=function(){s.state.emojiViewer?document.removeEventListener("click",s.handleOutsideClick,!1):document.addEventListener("click",s.handleOutsideClick,!1);var e=s.state.emojiViewer;s.setState({emojiViewer:!e})},s.handleOutsideClick=function(e){s.node&&s.node.contains(e.target)||s.toggleEmojiPicker()},s.toggleCreatePoll=function(){var e=s.state.createPoll;s.setState({createPoll:!e})},s.closeCreatePoll=function(){s.toggleCreatePoll(),s.toggleFilePicker()},s.actionHandler=function(e,t){switch(e){case"pollCreated":s.toggleCreatePoll(),s.toggleFilePicker(),"user"===s.props.type&&s.props.actionGenerated("pollCreated",[t])}},s.sendReplyMessage=function(e){var t=s.getReceiverDetails(),a=t.receiverId,n=t.receiverType,i=new o.CometChat.TextMessage(a,e,n);s.props.parentMessageId&&i.setParentMessageId(s.props.parentMessageId),o.CometChat.sendMessage(i).then((function(e){s.playAudio(),s.setState({replyPreview:null}),s.props.actionGenerated("messageComposed",[e])})).catch((function(e){console.log("Message sending failed with error:",e)}))},s.clearReplyPreview=function(){s.setState({replyPreview:null})},s.imageUploaderRef=n.a.createRef(),s.fileUploaderRef=n.a.createRef(),s.audioUploaderRef=n.a.createRef(),s.videoUploaderRef=n.a.createRef(),s.messageInputRef=n.a.createRef(),s.messageSending=!1,s.node=n.a.createRef(),s.isTyping=!1,s.state={showFilePicker:!1,messageInput:"",messageType:"",emojiViewer:!1,createPoll:!1,messageToBeEdited:null,replyPreview:null},s}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.audio=new Audio(Na.a)}},{key:"componentDidUpdate",value:function(e){if(e.messageToBeEdited!==this.props.messageToBeEdited){var t=this.props.messageToBeEdited;this.setState({messageInput:t,messageToBeEdited:t});var a=this.messageInputRef.current;t?(a.focus(),this.pasteHtmlAtCaret(t.text,!1)):a.textContent=""}e.replyPreview!==this.props.replyPreview&&this.setState({replyPreview:this.props.replyPreview})}},{key:"pasteHtmlAtCaret",value:function(e,t){var a,s;if(window.getSelection){if(a=window.getSelection(),this.props.widgetsettings&&this.props.hasOwnProperty("widgetsettings")){var n=this.props.widgetsettings.hasOwnProperty("parentNode")?this.props.widgetsettings.parentNode:null;n&&(a=n.querySelector("iframe").contentWindow.getSelection())}if(a.getRangeAt&&a.rangeCount){(s=a.getRangeAt(0)).deleteContents();var i=document.createElement("div");i.innerHTML=e;for(var r,o,c=document.createDocumentFragment();r=i.firstChild;)o=c.appendChild(r);var p=c.firstChild;s.insertNode(c),o&&((s=s.cloneRange()).setStartAfter(o),t?s.setStartBefore(p):s.collapse(!0),a.removeAllRanges(),a.addRange(s))}}else if((a=document.selection)&&"Control"!==a.type){var l=a.createRange();l.collapse(!0),a.createRange().pasteHTML(e),t&&((s=a.createRange()).setEndPoint("StartToStart",l),s.select())}}},{key:"render",value:function(){var e=this,t=null;this.state.emojiViewer&&(t=Object(h.a)(Lt.a,{title:"Pick your emoji",emoji:"point_up",native:!0,onClick:this.emojiClicked,style:{position:"absolute",bottom:"20px",right:"50px",zIndex:"2",width:"280px"}}));var a=!1;this.props.item.blockedByMe&&(a=!0);var s=Object(h.a)("span",{title:"Attach File",css:da(this.props,xa.a),className:"filelist__item item__file",onClick:function(){e.openFileDialogue("file")}},Object(h.a)("input",{onChange:this.onFileChange,type:"file",id:"file",ref:this.fileUploaderRef})),i=Object(h.a)(n.a.Fragment,null,Object(h.a)("span",{title:"Attach Video",css:da(this.props,ha.a),className:"filelist__item item__video",onClick:function(){e.openFileDialogue("video")}},Object(h.a)("input",{onChange:this.onVideoChange,accept:"video/*",type:"file",ref:this.videoUploaderRef})),Object(h.a)("span",{title:"Attach Audio",css:da(this.props,fa.a),className:"filelist__item item__audio",onClick:function(){e.openFileDialogue("audio")}},Object(h.a)("input",{onChange:this.onAudioChange,accept:"audio/*",type:"file",ref:this.audioUploaderRef})),Object(h.a)("span",{title:"Attach Image",css:da(this.props,Oa.a),className:"filelist__item item__image",onClick:function(){e.openFileDialogue("image")}},Object(h.a)("input",{onChange:this.onImageChange,accept:"image/*",type:"file",ref:this.imageUploaderRef}))),r=Object(h.a)("span",{title:"Create Poll",css:da(this.props,ka.a),className:"filelist__item item__poll",onClick:this.toggleCreatePoll},"\xa0"),o=Object(h.a)("div",{title:"Emoji",css:{padding:"0 5px","> img":{width:"20px",height:"20px",display:"inline-block",cursor:"pointer"}},className:"button__emoji",onClick:this.toggleEmojiPicker},Object(h.a)("img",{src:ya.a,alt:"Insert Emoticon"}));this.props.hasOwnProperty("widgetsettings")&&this.props.widgetsettings&&this.props.widgetsettings.hasOwnProperty("main")&&(this.props.widgetsettings.main.hasOwnProperty("send_photos_videos")&&!1===this.props.widgetsettings.main.send_photos_videos&&(i=null),this.props.widgetsettings.main.hasOwnProperty("send_photos_videos")&&!1===this.props.widgetsettings.main.send_files&&(s=null),this.props.widgetsettings.main.hasOwnProperty("send_emojis")&&!1===this.props.widgetsettings.main.send_emojis&&(o=null),(!1===this.props.widgetsettings.main.hasOwnProperty("allow_creating_polls")||this.props.widgetsettings.main.hasOwnProperty("allow_creating_polls")&&!1===this.props.widgetsettings.main.allow_creating_polls)&&(r=null)),this.props.parentMessageId&&(r=null);var c,p=Object(h.a)("div",{css:{display:"flex",width:"calc(100% - 50px)"},className:"input__sticky__attachment"},Object(h.a)("div",{css:(c=ga.a,{margin:"auto 0"," > span":{display:"inline-block",width:"20px",height:"20px",background:"url(".concat(c,") center center no-repeat"),cursor:"pointer"}}),className:"attachment__icon",onClick:this.toggleFilePicker},Object(h.a)("span",null,"\xa0")),Object(h.a)("div",{css:la(this.state),className:"attachment__filepicker"},Object(h.a)("div",{css:{width:"100%",display:"flex",flexDirection:"row",alignItems:"center"},className:"filepicker__filelist"},i,s,r)));null===i&&null===s&&null===r&&(p=null);var l=null;this.state.createPoll&&(l=Object(h.a)(sa,{theme:this.props.theme,item:this.props.item,type:this.props.type,open:this.state.createPoll,close:this.closeCreatePoll,widgetsettings:this.props.widgetsettings,actionGenerated:this.actionHandler}));var d=null;this.state.messageToBeEdited&&(d=Object(h.a)("div",{css:ia(this.props,h.b)},Object(h.a)("div",{css:{display:"flex",alignItems:"center",justifyContent:"space-between"}},Object(h.a)("div",{css:{padding:"5px 0"}},"Edit message"),Object(h.a)("span",{css:ra(Sa.a),onClick:this.closeEditPreview})),Object(h.a)("div",null,this.state.messageToBeEdited.text)));var u,g=null;if(this.state.replyPreview){var m=this.state.replyPreview;if(m.hasOwnProperty("metadata")){var b=m.metadata;if(b.hasOwnProperty("@injected")){var f=b["@injected"];if(f.hasOwnProperty("extensions")){var v=f.extensions;if(v.hasOwnProperty("smart-reply")){var x=v["smart-reply"],w=[x.reply_positive,x.reply_neutral,x.reply_negative];g=Object(h.a)(Yt,Object.assign({},this.props,{options:w,clicked:this.sendReplyMessage,close:this.clearReplyPreview}))}}}}}return Object(h.a)("div",{css:(u=this.props,{padding:"14px 16px",backgroundColor:"".concat(u.theme.backgroundColor.white),zIndex:"1",order:"3",position:"relative",flex:"none",minHeight:"105px"}),className:"chat__composer"},d,g,Object(h.a)("div",{css:{display:"flex",width:"100%",flexDirection:"row",alignItems:"flex-end",position:"relative",zIndex:"2",padding:"0",minHeight:"85px"},className:"composer__input"},Object(h.a)("div",{tabIndex:"-1",css:oa(this.props),className:"input__inner"},Object(h.a)("div",{css:ca(a),className:"input__message-input",contentEditable:"true",placeholder:"Enter your message here",dir:"ltr",onInput:this.changeHandler,onBlur:this.endTyping,onKeyDown:this.sendMessageOnEnter,ref:this.messageInputRef}),Object(h.a)("div",{css:pa(this.props),className:"input__sticky"},p,Object(h.a)("div",{css:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},className:"input__sticky__buttons",ref:function(t){e.node=t}},t,o,Object(h.a)("div",{title:"Send Message",css:{"> img":{width:"20px",height:"18px",display:"inline-block",cursor:"pointer"}},className:"button__send",onClick:this.sendTextMessage},Object(h.a)("img",{src:Aa.a,alt:"Send Message"})))))),l)}}]),a}(n.a.PureComponent),Wa={fontFamily:"Inter, sans-serif",fontSize:"14px",color:{primary:"#141414",secondary:"#cccccc",darkSecondary:"#eaeaea",grey:"rgba(20,20,20,0.04)",helpText:"rgba(20, 20, 20, 0.6)",blue:"#39f",white:"#fff",red:"#ff3b30"},borderColor:{primary:"#eaeaea",white:"#fff"},backgroundColor:{white:"#fff",primary:"#E6E6E6",secondary:"#f6f6f6",blue:"#39f",red:"#ff3b30",grey:"rgba(20,20,20,0.04)",lightGrey:"rgba(20, 20, 20, 0.08)",darkGrey:"rgba(20,20,20,0.9)",callScreenGrey:"#444444"},breakPoints:["(min-width : 320px) and (max-width: 767px)"]},za=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).playAudio=function(){if(s.props.hasOwnProperty("widgetsettings")&&s.props.widgetsettings&&s.props.widgetsettings.hasOwnProperty("main")&&(!1===s.props.widgetsettings.main.hasOwnProperty("enable_sound_for_messages")||s.props.widgetsettings.main.hasOwnProperty("enable_sound_for_messages")&&!1===s.props.widgetsettings.main.enable_sound_for_messages))return!1;s.audio.currentTime=0,s.audio.play()},s.actionHandler=function(e,t,a,n,i){switch(e){case"customMessageReceived":case"messageReceived":t[0].parentMessageId?s.updateReplyCount(t):(s.smartReplyPreview(t),s.appendMessage(t)),s.playAudio();break;case"messageRead":s.props.actionGenerated(e,t);break;case"messageComposed":s.appendMessage(t),s.props.actionGenerated("messageComposed",t);break;case"messageUpdated":s.updateMessages(t);break;case"messageFetched":s.prependMessages(t);break;case"messageFetchedAgain":s.prependMessagesAndScrollBottom(t);break;case"messageDeleted":s.removeMessages(t);break;case"viewMessageThread":s.props.actionGenerated("viewMessageThread",t);break;case"deleteMessage":s.deleteMessage(t);break;case"editMessage":s.editMessage(t);break;case"messageEdited":s.messageEdited(t);break;case"clearEditPreview":s.clearEditPreview();break;case"groupUpdated":s.groupUpdated(t,a,n,i);break;case"callUpdated":s.callUpdated(t);break;case"pollAnswered":s.updatePollMessage(t);break;case"pollCreated":s.appendPollMessage(t);break;case"viewActualImage":s.props.actionGenerated("viewActualImage",t)}},s.deleteMessage=function(e){var t=e.id;o.CometChat.deleteMessage(t).then((function(t){s.removeMessages([t]);var a=Object(C.a)(s.state.messageList),n=a.findIndex((function(t){return t.id===e.id}));a.length-n!==1||e.replyCount||s.props.actionGenerated("messageDeleted",[t])})).catch((function(e){console.log("Message delete failed with error:",e)}))},s.editMessage=function(e){s.setState({messageToBeEdited:e,replyPreview:null})},s.messageEdited=function(e){var t=Object(C.a)(s.state.messageList),a=t.findIndex((function(t){return t.id===e.id}));if(a>-1){var n=t[a],i=Object(O.a)(Object(O.a)({},n),e);t.splice(a,1,i),s.updateMessages(t),t.length-a!==1||e.replyCount||s.props.actionGenerated("messageEdited",[i])}},s.updatePollMessage=function(e){var t=Object(C.a)(s.state.messageList),a=e.poll.id,n=t.findIndex((function(e,t){return e.id===a}));if(n>-1){var i=t[n],r={"@injected":{extensions:{polls:e.poll}}},o=Object(O.a)(Object(O.a)({},i),{},{metadata:r});t.splice(n,1,o),s.updateMessages(t)}},s.appendPollMessage=function(e){s.appendMessage(e)},s.removeMessages=function(e){var t=e[0],a=Object(C.a)(s.state.messageList),n=a.findIndex((function(e){return e.id===t.id}));if(n>-1){var i=Object(O.a)({},a[n]),r=Object.assign({},i,t);a.splice(n,1,r),s.setState({messageList:a,scrollToBottom:!1})}},s.prependMessages=function(e){var t=[].concat(Object(C.a)(e),Object(C.a)(s.state.messageList));s.setState({messageList:t,scrollToBottom:!1})},s.prependMessagesAndScrollBottom=function(e){var t=[].concat(Object(C.a)(e),Object(C.a)(s.state.messageList));s.setState({messageList:t,scrollToBottom:!0})},s.appendMessage=function(e){var t=Object(C.a)(s.state.messageList);t=t.concat(e),s.setState({messageList:t,scrollToBottom:!0})},s.updateMessages=function(e){s.setState({messageList:e,scrollToBottom:!1})},s.groupUpdated=function(e,t,a,n){!0!==Y(s.props.widgetsettings,"hide_join_leave_notifications")&&s.appendMessage([e]),s.props.actionGenerated("groupUpdated",e,t,a,n)},s.callUpdated=function(e){if(!1===Y(s.props.widgetsettings,"show_call_notifications"))return!1;s.appendMessage([e])},s.updateReplyCount=function(e){var t=e[0],a=Object(C.a)(s.state.messageList),n=a.findIndex((function(e){return e.id===t.parentMessageId}));if(n>-1){var i=a[n],r=i.replyCount?i.replyCount:0;r+=1;var o=Object.assign({},i,{replyCount:r});a.splice(n,1,o),s.setState({messageList:a,scrollToBottom:!1})}},s.smartReplyPreview=function(e){var t=e[0];if(t.hasOwnProperty("metadata")){var a=t.metadata;if(a.hasOwnProperty("@injected")){var n=a["@injected"];if(n.hasOwnProperty("extensions")){var i=n.extensions;if(i.hasOwnProperty("smart-reply"))!1===i["smart-reply"].hasOwnProperty("error")?s.setState({replyPreview:t}):s.setState({replyPreview:null})}}}},s.clearEditPreview=function(){s.setState({messageToBeEdited:null})},s.state={messageList:[],scrollToBottom:!0,messageToBeEdited:null,replyPreview:null},s.theme=Object.assign({},Wa,s.props.theme),s}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.audio=new Audio(Ta.a)}},{key:"componentDidUpdate",value:function(e,t){"user"===this.props.type&&e.item.uid!==this.props.item.uid||"group"===this.props.type&&e.item.guid!==this.props.item.guid||e.type!==this.props.type?this.setState({messageList:[],scrollToBottom:!0,messageToBeEdited:null}):e.composedthreadmessage!==this.props.composedthreadmessage?this.updateReplyCount(this.props.composedthreadmessage):e.callmessage!==this.props.callmessage?this.actionHandler("callUpdated",this.props.callmessage):e.groupmessage!==this.props.groupmessage&&!0!==Y(this.props.widgetsettings,"hide_join_leave_notifications")&&this.appendMessage(this.props.groupmessage)}},{key:"render",value:function(){var e,t=Object(h.a)(Da,{theme:this.theme,item:this.props.item,type:this.props.type,widgetsettings:this.props.widgetsettings,messageToBeEdited:this.state.messageToBeEdited,replyPreview:this.state.replyPreview,actionGenerated:this.actionHandler});return this.props.hasOwnProperty("widgetsettings")&&this.props.widgetsettings&&this.props.widgetsettings.hasOwnProperty("main")&&this.props.widgetsettings.main.hasOwnProperty("enable_sending_messages")&&!1===this.props.widgetsettings.main.enable_sending_messages&&(t=null),Object(h.a)("div",{css:(e=this.theme,{display:"flex",flexDirection:"column",height:"100%",width:"100%",boxSizing:"border-box",fontFamily:"".concat(e.fontFamily),"*":{boxSizing:"border-box",fontFamily:"".concat(e.fontFamily)}}),className:"main__chat"},Object(h.a)(B,{sidebar:this.props.sidebar,theme:this.theme,item:this.props.item,type:this.props.type,viewdetail:!1!==this.props.viewdetail,audiocall:!1!==this.props.audiocall,videocall:!1!==this.props.videocall,widgetsettings:this.props.widgetsettings,loggedInUser:this.props.loggedInUser,actionGenerated:this.props.actionGenerated}),Object(h.a)(Gt,{theme:this.theme,messages:this.state.messageList,item:this.props.item,type:this.props.type,scrollToBottom:this.state.scrollToBottom,messageconfig:this.props.messageconfig,widgetsettings:this.props.widgetsettings,widgetconfig:this.props.widgetconfig,loggedInUser:this.props.loggedInUser,actionGenerated:this.actionHandler}),t)}}]),a}(n.a.PureComponent),Fa=function(){function e(t,a){Object(d.a)(this,e),this.userRequest=null,this.userListenerId="userlist_"+(new Date).getTime(),this.usersRequest=a?(new o.CometChat.UsersRequestBuilder).setLimit(30).friendsOnly(t).setSearchKeyword(a).build():(new o.CometChat.UsersRequestBuilder).setLimit(30).friendsOnly(t).build()}return Object(u.a)(e,[{key:"fetchNextUsers",value:function(){return this.usersRequest.fetchNext()}},{key:"attachListeners",value:function(e){o.CometChat.addUserListener(this.userListenerId,new o.CometChat.UserListener({onUserOnline:function(t){e(t)},onUserOffline:function(t){e(t)}}))}},{key:"removeListeners",value:function(){o.CometChat.removeUserListener(this.userListenerId)}}]),e}(),Ha=function(e){var t=e.selectedUser&&e.selectedUser.uid===e.user.uid?{backgroundColor:"".concat(e.theme.backgroundColor.primary)}:{};return Object(O.a)(Object(O.a)({display:"flex",flexDirection:"row",justifyContent:"left",alignItems:"center",cursor:"pointer",width:"100%",padding:"10px 20px"},t),{},{"&:hover":{backgroundColor:"".concat(e.theme.backgroundColor.primary)}})},Ya=function(e){var t,a=Object(h.a)(A,{widgetsettings:e.widgetsettings,status:e.user.status,cornerRadius:"50%",borderColor:e.theme.color.darkSecondary,borderWidth:"1px"}),s=function(e,t){var a=e.target;if(a.scrollWidth<=a.clientWidth)return!1;t?a.setAttribute("title",a.textContent):a.removeAttribute("title")};return Object(h.a)("div",{css:Ha(e),onClick:function(){return e.clickeHandler(e.user)},className:"list__item"},Object(h.a)("div",{css:{display:"inline-block",width:"36px",height:"36px",flexShrink:"0"},className:"list__item__thumbnail"},Object(h.a)(v,{image:e.user.avatar,cornerRadius:"50%",borderColor:e.theme.color.secondary,borderWidth:"1px"}),a),Object(h.a)("div",{css:{width:"calc(100% - 45px)",flexGrow:1,paddingLeft:"15px"},className:"list__item__details"},Object(h.a)("div",{css:{fontSize:"15px",fontWeight:"600",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",width:"100%",margin:"5px 0 0 0"},className:"item__details__name",onMouseEnter:function(e){return s(e,!0)},onMouseLeave:function(e){return s(e,!1)}},e.user.name),Object(h.a)("div",{css:(t=e.theme,{marginTop:"10px",borderBottom:"1px solid ".concat(t.borderColor.primary)}),className:"item__details__desc"})))},Ja=function(e){return{padding:"19px 16px",position:"relative",display:"flex",alignItems:"center",borderBottom:"1px solid ".concat(e.color.darkSecondary)}},Va=function(e){var t=e.hasOwnProperty("enableCloseMenu")&&e.enableCloseMenu.length>0?{width:"33%",textAlign:"center"}:{};return Object(O.a)({margin:"0",fontWeight:"700",display:"inline-block",width:"66%",textAlign:"left",fontSize:"20px"},t)},Qa=function(e,t){return{display:"block",width:"100%",border:"0",boxShadow:"rgba(20, 20, 20, 0.04) 0 0 0 1px inset",borderRadius:"8px",padding:"6px 8px 6px 35px",fontSize:"15px",outline:"none",color:"".concat(e.color.primary),background:"url(".concat(t,") 10px center no-repeat ").concat(e.backgroundColor.grey)}},qa=a(94),Ka=a.n(qa),Xa=a(95),Za=a.n(Xa),$a=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).friendsOnly=!1,s.decoratorMessage="Loading...",s.userUpdated=function(e){var t=Object(C.a)(s.state.userlist),a=t.findIndex((function(t,a){return t.uid===e.uid}));if(a>-1){var n=Object(O.a)({},t[a]),i=Object(O.a)(Object(O.a)({},n),e);t.splice(a,1,i),s.setState({userlist:t})}},s.handleScroll=function(e){Math.round(e.currentTarget.scrollHeight-e.currentTarget.scrollTop)===Math.round(e.currentTarget.clientHeight)&&s.getUsers()},s.handleClick=function(e){s.props.onItemClick&&s.props.onItemClick(e,"user")},s.handleMenuClose=function(){if(!s.props.actionGenerated)return!1;s.props.actionGenerated("closeMenuClicked")},s.searchUsers=function(e){s.timeout&&clearTimeout(s.timeout);var t=e.target.value;s.timeout=setTimeout((function(){s.UserListManager=new Fa(s.friendsOnly,t),s.setState({userlist:[]},(function(){return s.getUsers()}))}),500)},s.getUsers=function(){(new D).getLoggedInUser().then((function(e){s.UserListManager.fetchNextUsers().then((function(e){0===e.length&&(s.decoratorMessage="No users found"),e.forEach((function(e){return s.setAvatar(e)})),s.setState({userlist:[].concat(Object(C.a)(s.state.userlist),Object(C.a)(e))})})).catch((function(e){s.decoratorMessage="Error",console.error("[CometChatUserList] getUsers fetchNext error",e)}))})).catch((function(e){s.decoratorMessage="Error",console.log("[CometChatUserList] getUsers getLoggedInUser error",e)}))},s.state={userlist:[],selectedUser:null},s.userListRef=n.a.createRef(),s.theme=Object.assign({},Wa,s.props.theme),s}return Object(u.a)(a,[{key:"componentDidMount",value:function(){if(this.props.hasOwnProperty("friendsOnly")&&(this.friendsOnly=this.props.friendsOnly),this.props.hasOwnProperty("widgetsettings")&&this.props.widgetsettings&&this.props.widgetsettings.hasOwnProperty("sidebar")&&this.props.widgetsettings.sidebar.hasOwnProperty("user_listing"))switch(this.props.widgetsettings.sidebar.user_listing){case"friends":this.friendsOnly=!0}this.UserListManager=new Fa(this.friendsOnly),this.getUsers(),this.UserListManager.attachListeners(this.userUpdated)}},{key:"componentDidUpdate",value:function(e){var t=this;if(JSON.stringify(e.item)!==JSON.stringify(this.props.item))if(0===Object.keys(this.props.item).length)this.userListRef.scrollTop=0,this.setState({selectedUser:{}});else{var a=Object(C.a)(this.state.userlist),s=a.findIndex((function(e){return e.uid===t.props.item.uid}));if(s>-1){var n=Object(O.a)({},a[s]);this.setState({selectedUser:n})}}if(e.item&&Object.keys(e.item).length&&e.item.uid===this.props.item.uid&&e.item.blockedByMe!==this.props.item.blockedByMe){var i=Object(C.a)(this.state.userlist),r=i.findIndex((function(e,a){return e.uid===t.props.item.uid}));if(r>-1){var o=Object(O.a)({},i[r]),c=Object.assign({},o,{blockedByMe:this.props.item.blockedByMe});i.splice(r,1,c),this.setState({userlist:i})}}}},{key:"componentWillUnmount",value:function(){this.UserListManager.removeListeners(),this.UserListManager=null}},{key:"setAvatar",value:function(e){if(!e.getAvatar()){var t=e.getUid(),a=e.getName().charAt(0).toUpperCase();e.setAvatar(_.getAvatar(t,a))}}},{key:"render",value:function(){var e,t=this,a=null;0===this.state.userlist.length&&(a=Object(h.a)("div",{css:{overflow:"hidden",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:"50%"},className:"contacts__decorator-message"},Object(h.a)("p",{css:(e=this.theme,{margin:"0",height:"30px",color:"".concat(e.color.secondary),fontSize:"24px!important",fontWeight:"600"}),className:"decorator-message"},this.decoratorMessage)));var s,i=Object(C.a)(this.state.userlist),r="",o=i.map((function(e,a){var s=e.name[0].toUpperCase(),i=null;return s!==r?(r=s,i=Object(h.a)("div",{css:{padding:"0 15px",margin:"5px 0",width:"100%",fontSize:"14px"},className:"contacts__list__alphabet-filter"},r)):i=null,Object(h.a)(n.a.Fragment,{key:a},i,Object(h.a)(Ya,{theme:t.theme,user:e,selectedUser:t.state.selectedUser,widgetsettings:t.props.widgetsettings,clickeHandler:t.handleClick}))})),c=Object(h.a)("div",{css:(s=Za.a,Object(k.a)({cursor:"pointer",display:"none",background:"url(".concat(s,") left center no-repeat"),height:"24px",width:"33%"},"@media (min-width : 320px) and (max-width: 767px)",{display:"block!important"})),className:"header__close",onClick:this.handleMenuClose});return(!this.props.hasOwnProperty("enableCloseMenu")||this.props.hasOwnProperty("enableCloseMenu")&&0===this.props.enableCloseMenu)&&(c=null),Object(h.a)("div",{css:{display:"flex",flexDirection:"column",height:"100%",boxSizing:"border-box","*":{boxSizing:"border-box"}},className:"contacts"},Object(h.a)("div",{css:Ja(this.theme),className:"contacts__header"},c,Object(h.a)("h4",{css:Va(this.props),className:"header__title"},"Contacts"),Object(h.a)("div",null)),Object(h.a)("div",{css:{padding:"16px 16px",position:"relative"},className:"contacts__search"},Object(h.a)("input",{type:"text",autoComplete:"off",css:Qa(this.theme,Ka.a),className:"search__input",placeholder:"Search",onChange:this.searchUsers})),a,Object(h.a)("div",{css:{height:"calc(100% - 125px)",overflowY:"auto",margin:"0",padding:"0"},className:"contacts__list",onScroll:this.handleScroll,ref:function(e){return t.userListRef=e}},o))}}]),a}(n.a.PureComponent),es=function(){function e(t,a,s){Object(d.a)(this,e),this.mediaMessageListenerId=(new Date).getTime(),this.mediaMessageRequest=null,this.mediaMessageRequest="user"===a?(new o.CometChat.MessagesRequestBuilder).setUID(t.uid).setLimit(10).setCategory("message").setType(s).build():(new o.CometChat.MessagesRequestBuilder).setGUID(t.guid).setLimit(10).setCategory("message").setType(s).build()}return Object(u.a)(e,[{key:"fetchPreviousMessages",value:function(){return this.mediaMessageRequest.fetchPrevious()}},{key:"attachListeners",value:function(e){o.CometChat.addMessageListener(this.msgListenerId,new o.CometChat.MessageListener({onMediaMessageReceived:function(t){e("onMediaMessageReceived",t)},onMessageDeleted:function(t){e("onMessageDeleted",t)}}))}},{key:"removeListeners",value:function(){o.CometChat.removeMessageListener(this.mediaMessageListenerId)}}]),e}(),ts=function(e){var t=e.containerHeight?{height:"calc(100% - ".concat(e.containerHeight,")")}:{height:"calc(100% - 20px)"};return Object(O.a)({width:"100%"},t)},as=function(e,t){var a=e.messagetype===t?{backgroundColor:"#fff",boxShadow:"rgba(20, 20, 20, 0.04) 0 3px 1px, rgba(20, 20, 20, 0.12) 0 3px 8px",borderRadius:"7px","&::before":{display:"none"}}:{};return Object(O.a)(Object(O.a)({display:"inline-block",width:"33.33%",float:"left",fontSize:"13px",fontWeight:"500",lineHeight:"18px",padding:"5px",position:"relative",textAlign:"center",cursor:"pointer"},a),{},{"&:before":{"`content`":"",position:"absolute",display:"block",width:"2px",height:"16px",backgroundColor:"rgba(20, 20, 20, 0.12)",right:"-2px",top:"6px"},"&:last-of-type::before":{display:"none"}})},ss=function(e,t,a){var s={},n="".concat(t.theme.backgroundColor.lightGrey);return"image"===e.messagetype?s={height:"120px",width:"120px",backgroundColor:n,"> img":{display:"block",width:"100%",height:"100%",objectFit:"contain"}}:"video"===e.messagetype?s={"> video":{height:"120px",width:"120px",margin:"auto"}}:"file"===e.messagetype&&(s={backgroundColor:n,"> a":{maxWidth:"100%",maxHeight:"100%",margin:"auto",backgroundColor:n,display:"inline-block",padding:"10px",paddingLeft:"35px",fontSize:"13px",color:"".concat(t.theme.color.primary),background:"url(".concat(a,") no-repeat 10px center"),whiteSpace:"pre-wrap",wordWrap:"break-word",textAlign:"left","&:hover, &:visited":{color:"".concat(t.theme.color.primary)}}}),Object(O.a)(Object(O.a)({margin:"0.5rem",textAlign:"center",flex:"1 0 auto"},s),{},{"@for $i from 1 through 36":{"&:nth-of-type(#{$i})":{maxWidth:"100%"}}})},ns=a(37),is=a.n(ns),rs=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).messageUpdated=function(e,t){switch(e){case"onMessageDeleted":s.messageDeleted(t);break;case"onMediaMessageReceived":s.messageReceived(t)}},s.messageDeleted=function(e){var t=e.data.type;if("group"===s.props.type&&"group"===e.getReceiverType()&&e.getReceiver().guid===s.props.item.guid&&t===s.state.messagetype){var a=Object(C.a)(s.state.messageList).filter((function(t){return t.id!==e.id}));s.setState({messageList:a,scrollToBottom:!1})}},s.messageReceived=function(e){var t=e.data.type;if("group"===s.props.type&&"group"===e.getReceiverType()&&e.getReceiver().guid===s.props.item.guid&&t===s.state.messagetype){var a=Object(C.a)(s.state.messageList);a=a.concat(e),s.setState({messageList:a,scrollToBottom:!0})}},s.getMessages=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(new D).getLoggedInUser().then((function(t){s.loggedInUser=t,s.SharedMediaManager.fetchPreviousMessages().then((function(t){var a=[].concat(Object(C.a)(t),Object(C.a)(s.state.messageList));s.setState({messageList:a}),e&&s.scrollToBottom()})).catch((function(e){console.error("[SharedMediaView] getMessages fetchPrevious error",e)}))})).catch((function(e){console.log("[SharedMediaView] getMessages getLoggedInUser error",e)}))},s.scrollToBottom=function(){s.messageContainer&&(s.messageContainer.scrollTop=s.messageContainer.scrollHeight)},s.handleScroll=function(e){0===Math.round(e.currentTarget.scrollTop)&&s.state.messageList.length&&s.getMessages()},s.mediaClickHandler=function(e){s.setState({messagetype:e,messageList:[]})},s.lazyLoad=function(e){new IntersectionObserver((function(e,t){e.forEach((function(e){if(e.isIntersecting){var a=e.target.querySelector("img"),s=a.getAttribute("data-lazy");a.setAttribute("src",s),a.classList.add("fadeIn"),t.disconnect()}}))})).observe(e)},s.state={messagetype:"image",messageList:[]},s.messageContainer=n.a.createRef(),s}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.SharedMediaManager=new es(this.props.item,this.props.type,this.state.messagetype),this.getMessages(!0),this.SharedMediaManager.attachListeners(this.messageUpdated)}},{key:"componentDidUpdate",value:function(e,t){t.messagetype!==this.state.messagetype&&(this.SharedMediaManager=null,this.SharedMediaManager=new es(this.props.item,this.props.type,this.state.messagetype),this.getMessages(!0),this.SharedMediaManager.attachListeners(this.messageUpdated))}},{key:"render",value:function(){var e,t=this,a=Object(C.a)(this.state.messageList).map((function(e,a){return function(e,a){return"image"===t.state.messagetype&&e.data.url?Object(h.a)("div",{id:e.id,key:a,css:ss(t.state,t.props,is.a),className:"item item__image"},Object(h.a)("img",{src:e.data.url,alt:"Media Item"})):"video"===t.state.messagetype&&e.data.url?Object(h.a)("div",{id:e.id,key:a,css:ss(t.state,t.props,is.a),className:"item item__video"},Object(h.a)("video",{src:e.data.url})):"file"===t.state.messagetype&&e.data.attachments?Object(h.a)("div",{id:e.id,key:a,css:ss(t.state,t.props,is.a),className:"item item__file"},Object(h.a)("a",{href:e.data.attachments[0].url,target:"_blank",rel:"noopener noreferrer"},e.data.attachments[0].name)):void 0}(e,a)}));return Object(h.a)("div",{css:ts(this.props),className:"section section__sharedmedia"},Object(h.a)("h6",{css:(e=this.props,{margin:"0",width:"100%",fontSize:"12px",fontWeight:"500!important",lineHeight:"20px",color:"".concat(e.theme.color.secondary),textTransform:"uppercase"}),className:"section__header"},"Shared Media"),Object(h.a)("div",{css:(this.props,{width:"100%",margin:"6px 0",display:"flex",flexDirection:"column",height:"calc(100% - 20px)"}),"data-id":"sharedmedia",className:"section__content"},Object(h.a)("div",{css:{borderRadius:"8px",backgroundColor:"rgba(20, 20, 20, 0.08)",width:"100%",padding:"2px",margin:"6px 0",clear:"both"},className:"media__button"},Object(h.a)("span",{css:as(this.state,"image"),onClick:function(){return t.mediaClickHandler("image")}},"Photos"),Object(h.a)("span",{css:as(this.state,"video"),onClick:function(){return t.mediaClickHandler("video")}},"Videos"),Object(h.a)("span",{css:as(this.state,"file"),onClick:function(){return t.mediaClickHandler("file")}},"Docs")),Object(h.a)("div",{css:{height:"calc(100% - 45px)",overflowY:"auto",overflowX:"hidden",display:"flex",flexWrap:"wrap",fontSize:"14px"},className:"media_items",ref:function(e){return t.messageContainer=e},onScroll:this.handleScroll},a.length?a:"No records found.")))}},{key:"componentWillUnmount",value:function(){this.SharedMediaManager.removeListeners(),this.SharedMediaManager=null}}]),a}(n.a.Component),os=function(e){return{display:"flex",flexDirection:"column",height:"100%",boxSizing:"border-box",fontFamily:"".concat(e.theme.fontFamily),"*":{boxSizing:"border-box",fontFamily:"".concat(e.theme.fontFamily)}}},cs=function(e){return{padding:"19px 16px",position:"relative",borderBottom:"1px solid ".concat(e.theme.borderColor.primary),display:"flex",justifyContent:"flex-start",alignItems:"center"}},ps=function(e){return{margin:"0",width:"100%",fontSize:"12px",fontWeight:"500!important",lineHeight:"20px",color:"".concat(e.theme.color.secondary),textTransform:"uppercase"}},ls=function(e,t){var a=e?{color:"".concat(t.theme.color.red)}:{};return Object(O.a)({fontSize:"15px",lineHeight:"20px",fontWeight:"600",display:"inline-block"},a)},ds=a(96),us=a.n(ds),gs=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e,t=this;e=this.props.item.blockedByMe?Object(h.a)("div",{css:ls(1,this.props),className:"item__link",onClick:function(){return t.props.actionGenerated("unblockUser")}},"Unblock User"):Object(h.a)("div",{css:ls(1,this.props),className:"item__link",onClick:function(){return t.props.actionGenerated("blockUser")}},"Block User");var a,s,n=Object(h.a)("div",{css:(a=this.props,{width:"100%","> div":{color:"".concat(a.theme.color.red),fontWeight:"600",cursor:"pointer",fontSize:"12px"}}),className:"section section__privacy"},Object(h.a)("h6",{css:ps(this.props),className:"section__header"},"Options"),Object(h.a)("div",{css:{width:"100%",margin:"6px 0"},className:"section__content"},Object(h.a)("div",{css:{width:NaN,"&:not(:first-of-type):not(:last-of-type)":{padding:"6px 0"}},className:"content__item"},e))),i=Object(h.a)(rs,{theme:this.props.theme,containerHeight:"50px",item:this.props.item,type:this.props.type,widgetsettings:this.props.widgetsettings});return this.props.hasOwnProperty("widgetsettings")&&this.props.widgetsettings&&this.props.widgetsettings.hasOwnProperty("main")&&(this.props.widgetsettings.main.hasOwnProperty("block_user")&&!1===this.props.widgetsettings.main.block_user&&(n=null),this.props.widgetsettings.main.hasOwnProperty("view_shared_media")&&!1===this.props.widgetsettings.main.view_shared_media&&(i=null)),Object(h.a)("div",{css:os(this.props),className:"detailpane detailpane--user"},Object(h.a)("div",{css:cs(this.props),className:"detailpane__header"},Object(h.a)("div",{css:(s=us.a,Object(k.a)({cursor:"pointer",display:"none",background:"url(".concat(s,") center center no-repeat"),width:"24px",height:"24px"},"@media (min-width : 320px) and (max-width: 767px)",{display:"block"})),className:"header__close",onClick:function(){return t.props.actionGenerated("closeDetailClicked")}}),Object(h.a)("h4",{css:{margin:"0",fontWeight:"700",fontSize:"20px"},className:"header__title"},"Details")),Object(h.a)("div",{css:{margin:"0",padding:"16px",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"flex-start",height:"calc(100% - 70px)","&:not(:last-of-type)":{marginBottom:"16px"}},className:"detailpane__section"},n,i))}}]),a}(n.a.Component),ms=function(e){return{padding:"12px 16px",width:"100%",backgroundColor:"".concat(e.theme.backgroundColor.white),zIndex:"1",borderBottom:"1px solid ".concat(e.theme.borderColor.primary)}},hs=function(e){var t="sender"===e.messageFrom?{justifyContent:"flex-end"}:{justifyContent:"flex-start"};return Object(O.a)(Object(O.a)({padding:"14px 16px",display:"flex",alignItems:"center"},t),{},{".sender__message__container, .receiver__message__container":{maxWidth:"100%","&:hover":{".message__actions":{display:"none"}}},".replycount":{display:"none"}})},bs=function(e){return{display:"flex",alignItems:"center",position:"relative",margin:"7px 16px",height:"15px",hr:{flex:"1",margin:"1px 0 0 0",borderTop:"1px solid ".concat(e.theme.borderColor.primary)}}},fs=a(97),vs=a.n(fs),xs=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).actionHandler=function(e,t){switch(e){case"messageReceived":var a=t[0];if(a.parentMessageId&&a.parentMessageId===s.props.parentMessage.id){var n=s.state.replyCount+1;s.setState({replyCount:n}),s.smartReplyPreview(t),s.appendMessage(t)}break;case"messageComposed":var i=s.state.replyCount;s.setState({replyCount:++i}),s.appendMessage(t),s.props.actionGenerated("threadMessageComposed",t);break;case"messageUpdated":s.updateMessages(t);break;case"messageFetched":s.prependMessages(t);break;case"messageDeleted":s.removeMessages(t);break;case"editMessage":s.editMessage(t);break;case"messageEdited":s.messageEdited(t);break;case"clearEditPreview":s.clearEditPreview();break;case"deleteMessage":s.deleteMessage(t);break;case"viewActualImage":s.props.actionGenerated("viewActualImage",t)}},s.editMessage=function(e){s.setState({messageToBeEdited:e})},s.messageEdited=function(e){var t=Object(C.a)(s.state.messageList),a=t.findIndex((function(t){return t.id===e.id}));if(a>-1){var n=t[a],i=Object(O.a)(Object(O.a)({},n),e);t.splice(a,1,i),s.updateMessages(t),t.length-a===1&&s.props.actionGenerated("messageEdited",[i])}},s.clearEditPreview=function(){s.setState({messageToBeEdited:null})},s.deleteMessage=function(e){var t=e.id;o.CometChat.deleteMessage(t).then((function(t){s.removeMessages([t]);var a=Object(C.a)(s.state.messageList),n=a.findIndex((function(t){return t.id===e.id}));a.length-n!==1||e.replyCount||s.props.actionGenerated("messageDeleted",[t])})).catch((function(e){console.log("Message delete failed with error:",e)}))},s.smartReplyPreview=function(e){var t=e[0];if(t.hasOwnProperty("metadata")){var a=t.metadata;if(a.hasOwnProperty("@injected")){var n=a["@injected"];if(n.hasOwnProperty("extensions")){var i=n.extensions;if(i.hasOwnProperty("smart-reply"))!1===i["smart-reply"].hasOwnProperty("error")?s.setState({replyPreview:t}):s.setState({replyPreview:null})}}}},s.appendMessage=function(e){var t=Object(C.a)(s.state.messageList);t=t.concat(e),s.setState({messageList:t,scrollToBottom:!0})},s.updateMessages=function(e){s.setState({messageList:e})},s.prependMessages=function(e){var t=[].concat(Object(C.a)(e),Object(C.a)(s.state.messageList));s.setState({messageList:t,scrollToBottom:!1})},s.removeMessages=function(e){var t=e[0],a=Object(C.a)(s.state.messageList),n=a.findIndex((function(e){return e.id===t.id}));if(n>-1){var i=Object(O.a)({},a[n]),r=Object.assign({},i,t);a.splice(n,1,r),s.setState({messageList:a,scrollToBottom:!1})}},s.getSenderMessageComponent=function(e,t){var a;switch(e.type){case o.CometChat.MESSAGE_TYPE.TEXT:a=Object(h.a)(Ce,{theme:s.props.theme,key:t,item:s.props.item,type:s.props.type,message:e,widgetsettings:s.props.widgetsettings,actionGenerated:s.props.actionGenerated});break;case o.CometChat.MESSAGE_TYPE.IMAGE:a=Object(h.a)(Pe,{theme:s.props.theme,key:t,item:s.props.item,type:s.props.type,message:e,widgetsettings:s.props.widgetsettings,actionGenerated:s.props.actionGenerated});break;case o.CometChat.MESSAGE_TYPE.FILE:a=Object(h.a)(Ye,{theme:s.props.theme,key:t,item:s.props.item,type:s.props.type,message:e,widgetsettings:s.props.widgetsettings,actionGenerated:s.props.actionGenerated});break;case o.CometChat.MESSAGE_TYPE.VIDEO:a=Object(h.a)(nt,{theme:s.props.theme,key:t,item:s.props.item,type:s.props.type,message:e,widgetsettings:s.props.widgetsettings,actionGenerated:s.props.actionGenerated});break;case o.CometChat.MESSAGE_TYPE.AUDIO:a=Object(h.a)($e,{theme:s.props.theme,key:t,item:s.props.item,type:s.props.type,message:e,widgetsettings:s.props.widgetsettings,actionGenerated:s.props.actionGenerated})}return a},s.getReceiverMessageComponent=function(e,t){var a;switch(e.type){case"message":case o.CometChat.MESSAGE_TYPE.TEXT:a=Object(h.a)(Ee,{theme:s.props.theme,key:t,item:s.props.item,type:s.props.type,message:e,widgetsettings:s.props.widgetsettings,actionGenerated:s.props.actionGenerated});break;case o.CometChat.MESSAGE_TYPE.IMAGE:a=Object(h.a)(We,{theme:s.props.theme,key:t,item:s.props.item,type:s.props.type,message:e,widgetsettings:s.props.widgetsettings,actionGenerated:s.props.actionGenerated});break;case o.CometChat.MESSAGE_TYPE.FILE:a=Object(h.a)(Ze,{theme:s.props.theme,key:t,item:s.props.item,type:s.props.type,message:e,widgetsettings:s.props.widgetsettings,actionGenerated:s.props.actionGenerated});break;case o.CometChat.MESSAGE_TYPE.AUDIO:a=Object(h.a)(st,{theme:s.props.theme,key:t,item:s.props.item,type:s.props.type,message:e,widgetsettings:s.props.widgetsettings,actionGenerated:s.props.actionGenerated});break;case o.CometChat.MESSAGE_TYPE.VIDEO:a=Object(h.a)(ct,{theme:s.props.theme,key:t,item:s.props.item,type:s.props.type,message:e,widgetsettings:s.props.widgetsettings,actionGenerated:s.props.actionGenerated})}return a},s.getMessageComponent=function(e){return s.props.loggedInUser.uid===e.sender.uid?s.getSenderMessageComponent(e,1):s.getReceiverMessageComponent(e,1)},s.state={messageList:[],scrollToBottom:!1,replyCount:0,replyPreview:null,messageToBeEdited:null},s}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.parentMessage.replyCount&&this.setState({replyCount:this.props.parentMessage.replyCount})}},{key:"componentDidUpdate",value:function(e){e.parentMessage.id!==this.props.parentMessage.id&&(this.setState({messageList:[],scrollToBottom:!0}),this.props.parentMessage.replyCount?this.setState({replyCount:this.props.parentMessage.replyCount}):this.setState({replyCount:0}))}},{key:"render",value:function(){var e,t,a=this,s=this.getMessageComponent(this.props.parentMessage),n=Object(h.a)("div",{css:bs(this.props)},Object(h.a)("hr",null));if(this.state.replyCount){var i=this.state.replyCount,r="".concat(i,1===i?" reply":" replies");n=Object(h.a)("div",{css:bs(this.props),className:"message__separator"},Object(h.a)("span",{css:{marginRight:"12px",fontSize:"12px"},className:"message__replies"},r),Object(h.a)("hr",null))}return Object(h.a)("div",{css:(t=this.props,{display:"flex",flexDirection:"column",height:"100%",boxSizing:"border-box",fontFamily:"".concat(t.theme.fontFamily),"*":{boxSizing:"border-box",fontFamily:"".concat(t.theme.fontFamily)}}),className:"thread__chat"},Object(h.a)("div",{css:ms(this.props),className:"chat__header"},Object(h.a)("div",{css:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%"},className:"header__wrapper"},Object(h.a)("div",{css:{display:"flex",flexDirection:"column",width:"calc(100% - 40px)"},className:"header__details"},Object(h.a)("h6",{css:{margin:"0",fontSize:"15px",fontWight:"600",lineHeight:"22px",width:"100%"},className:"header__title"},"Thread"),Object(h.a)("span",{css:{fontSize:"13px",lineHeight:"20px",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},className:"header__username"},this.props.item.name)),Object(h.a)("div",{css:(e=vs.a,{cursor:"pointer",background:"url(".concat(e,") center center no-repeat"),width:"24px",height:"24px"}),className:"header__close",onClick:function(){return a.props.actionGenerated("closeThreadClicked")}}))),Object(h.a)("div",{css:{display:"flex",flexDirection:"column",height:"100%",overflowX:"hidden",overflowY:"auto",transition:"background .3s ease-out .1s",width:"100%",zIndex:"100",minHeight:"calc(100% - 68px)",order:"2",".chat__list":{minHeight:"250px",".list__wrapper":{"::-webkit-scrollbar":{display:"none"}}}},className:"chat__message__container"},Object(h.a)("div",{css:hs(this.props.parentMessage),className:"parent__message"},s),n,Object(h.a)(Gt,{theme:this.props.theme,messages:this.state.messageList,item:this.props.item,type:this.props.type,scrollToBottom:this.state.scrollToBottom,config:this.props.config,widgetsettings:this.props.widgetsettings,parentMessageId:this.props.parentMessage.id,loggedInUser:this.props.loggedInUser,actionGenerated:this.actionHandler}),Object(h.a)(Da,{theme:this.props.theme,item:this.props.item,type:this.props.type,widgetsettings:this.props.widgetsettings,parentMessageId:this.props.parentMessage.id,messageToBeEdited:this.state.messageToBeEdited,replyPreview:this.state.replyPreview,actionGenerated:this.actionHandler})))}}]),a}(n.a.Component),ws=function(){function e(){Object(d.a)(this,e),this.callListenerId="incoming_call_"+(new Date).getTime()}return Object(u.a)(e,[{key:"attachListeners",value:function(e){o.CometChat.addCallListener(this.callListenerId,new o.CometChat.CallListener({onIncomingCallReceived:function(t){e("onIncomingCallReceived",t)},onIncomingCallCancelled:function(t){e("onIncomingCallCancelled",t)}}))}},{key:"removeListeners",value:function(){o.CometChat.removeCallListener(this.callListenerId)}}]),e}();function Os(){var e=Object(Bt.a)(["\n    0% { transform: translateY(-50px); }\n    100% { transform: translateY(0px); }\n    "]);return Os=function(){return e},e}var Cs=function(e,t){var a=t(Os()),s="absolute",n="0",i="0",r="0",o="unset",c="999";if(e.hasOwnProperty("widgetsettings")&&e.widgetsettings.hasOwnProperty("dockedview")&&e.widgetsettings.dockedview)if(e.widgetsettings.hasOwnProperty("launched")&&e.widgetsettings.launched)if(c="2147483000",s="fixed",r="unset",o="100px",e.widgetsettings.hasOwnProperty("alignment")&&"left"===e.widgetsettings.alignment){if(i="unset",n="20px",e.widgetsettings.hasOwnProperty("width")&&e.widgetsettings.width.includes("px")){var p=e.widgetsettings.width.replace("px","");i=parseInt(p)-250-15,i+="px"}if(e.widgetsettings.hasOwnProperty("height")&&e.widgetsettings.height.includes("px")){var l=e.widgetsettings.height.replace("px","");o=parseInt(l)-140+100,o+="px"}}else{if(n="unset",i="20px",e.widgetsettings.hasOwnProperty("width")&&e.widgetsettings.width.includes("px")){var d=e.widgetsettings.width.replace("px","");i=parseInt(d)-250-15,i+="px"}if(e.widgetsettings.hasOwnProperty("height")&&e.widgetsettings.height.includes("px")){var u=e.widgetsettings.height.replace("px","");o=parseInt(u)-140+100,o+="px"}}else n="unset",s="fixed";return{position:s,top:r,left:n,bottom:o,right:i,borderRadius:"10px",margin:"15px",backgroundColor:"".concat(e.theme.backgroundColor.callScreenGrey),zIndex:c,color:"".concat(e.theme.color.white),textAlign:"center",boxSizing:"border-box",fontFamily:"".concat(e.theme.fontFamily),animation:"".concat(a," 250ms ease"),width:"250px","*":{boxSizing:"border-box",fontFamily:"".concat(e.theme.fontFamily)}}},ys=function(e,t){return{cursor:"pointer",padding:"6px 20px",backgroundColor:"".concat(t?e.theme.backgroundColor.blue:e.theme.backgroundColor.red),borderRadius:"5px",color:"".concat(e.theme.color.white),fontSize:"14px",outline:"0",border:"0",width:"45%"}},js=a(98),As=a.n(js),_s=a(99),ks=a.n(_s),Ms=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).playIncomingAlert=function(){if(s.props.hasOwnProperty("widgetsettings")&&s.props.widgetsettings&&s.props.widgetsettings.hasOwnProperty("main")&&(!1===s.props.widgetsettings.main.hasOwnProperty("enable_sound_for_calls")||s.props.widgetsettings.main.hasOwnProperty("enable_sound_for_calls")&&!1===s.props.widgetsettings.main.enable_sound_for_calls))return!1;s.incomingAlert.currentTime=0,"boolean"==typeof s.incomingAlert.loop?s.incomingAlert.loop=!0:s.incomingAlert.addEventListener("ended",(function(){this.currentTime=0,this.play()}),!1),s.incomingAlert.play()},s.pauseIncomingAlert=function(){if(s.props.hasOwnProperty("widgetsettings")&&s.props.widgetsettings&&s.props.widgetsettings.hasOwnProperty("main")&&(!1===s.props.widgetsettings.main.hasOwnProperty("enable_sound_for_calls")||s.props.widgetsettings.main.hasOwnProperty("enable_sound_for_calls")&&!1===s.props.widgetsettings.main.enable_sound_for_calls))return!1;s.incomingAlert.pause()},s.callScreenUpdated=function(e,t){switch(e){case"onIncomingCallReceived":s.incomingCallReceived(t);break;case"onIncomingCallCancelled":s.incomingCallCancelled(t)}},s.incomingCallReceived=function(e){if(o.CometChat.getActiveCall())o.CometChat.rejectCall(e.sessionId,o.CometChat.CALL_STATUS.BUSY).then((function(t){s.markMessageAsRead(e),s.props.actionGenerated("rejectedIncomingCall",e,t)})).catch((function(e){s.props.actionGenerated("callError",e),console.log("Call rejection failed with error:",e)}));else if(null===s.state.incomingCall){if(s.playIncomingAlert(),!1===e.sender.avatar){var t=e.sender.uid,a=e.sender.name.charAt(0).toUpperCase();e.sender.avatar=_.getAvatar(t,a)}s.setState({incomingCall:e})}},s.incomingCallCancelled=function(e){s.pauseIncomingAlert(),s.setState({incomingCall:null})},s.markMessageAsRead=function(e){var t=e.receiverType,a="user"===t?e.sender.uid:e.receiverId;!1===e.hasOwnProperty("readAt")&&o.CometChat.markAsRead(e.id,a,t)},s.rejectCall=function(){s.pauseIncomingAlert(),D.rejectCall(s.state.incomingCall.sessionId,o.CometChat.CALL_STATUS.REJECTED).then((function(e){s.props.actionGenerated("rejectedIncomingCall",s.state.incomingCall,e),s.setState({incomingCall:null})})).catch((function(e){s.props.actionGenerated("callError",e),s.setState({incomingCall:null})}))},s.acceptCall=function(){s.setState({incomingCall:null,callInProgress:s.props.callInProgress}),s.pauseIncomingAlert(),s.props.actionGenerated("acceptIncomingCall",s.state.incomingCall)},s.state={incomingCall:null,callInProgress:null},s}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.incomingAlert=new Audio(Ga.a),this.CallAlertManager=new ws,this.CallAlertManager.attachListeners(this.callScreenUpdated)}},{key:"render",value:function(){var e=null;if(this.state.incomingCall){var t=Object(h.a)(n.a.Fragment,null,Object(h.a)("img",{src:As.a,alt:"Incoming audio call"}),Object(h.a)("span",null,"Incoming audio call"));"video"===this.state.incomingCall.type&&(t=Object(h.a)(n.a.Fragment,null,Object(h.a)("img",{src:ks.a,alt:"Incoming video call"}),Object(h.a)("span",null,"Incoming video call"))),e=Object(h.a)("div",{css:Cs(this.props,h.b),className:"callalert__wrapper"},Object(h.a)("div",{css:{display:"flex",flexDirection:"column",width:"100%",padding:"15px"},className:"callalert__container"},Object(h.a)("div",{css:{width:"100%",display:"flex"},className:"callalert__header"},Object(h.a)("div",{css:{width:"calc(100% - 36px)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"left"},className:"header__detail"},Object(h.a)("div",{css:{fontSize:"15px",fontWeight:"600",display:"block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:"20px"},className:"name"},this.state.incomingCall.sender.name),Object(h.a)("div",{css:(this.props,{fontSize:"13px",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",textTransform:"capitalize",lineHeight:"20px",color:"#8A8A8A",display:"flex",justifyContent:"start",alignItems:"center",padding:"2px 0 0 0px",span:{padding:"0 5px"}}),className:"calltype"},t)),Object(h.a)("div",{css:{width:"36px",height:"36px",display:"flex",justifyContent:"center"},className:"header__thumbnail"},Object(h.a)(v,{cornerRadius:"50%",image:this.state.incomingCall.sender.avatar}))),Object(h.a)("div",{css:{width:"100%",display:"flex",justifyContent:"space-between",margin:"10px 0 0 0"},className:"callalert__buttons"},Object(h.a)("button",{css:ys(this.props,0),className:"button button__decline",onClick:this.rejectCall},"Decline"),Object(h.a)("button",{css:ys(this.props,1),className:"button button__accept",onClick:this.acceptCall},"Accept"))))}return e}}]),a}(n.a.PureComponent),Ss=function(){function e(){Object(d.a)(this,e),this.callListenerId="callscreen_"+(new Date).getTime()}return Object(u.a)(e,[{key:"attachListeners",value:function(e){o.CometChat.addCallListener(this.callListenerId,new o.CometChat.CallListener({onOutgoingCallAccepted:function(t){e("onOutgoingCallAccepted",t)},onOutgoingCallRejected:function(t){e("onOutgoingCallRejected",t)},onIncomingCallCancelled:function(t){e("onIncomingCallCancelled",t)}}))}},{key:"removeListeners",value:function(){o.CometChat.removeCallListener(this.callListenerId)}}]),e}();function Is(){var e=Object(Bt.a)(["\n    from {\n        opacity: 0;\n    }\n    to {\n        opacity: 1;\n    }"]);return Is=function(){return e},e}var Ts=function(e,t){var a=t(Is());return{width:"inherit",height:"inherit",position:"absolute",top:"0",right:"0",bottom:"0",left:"0",backgroundColor:"".concat(e.theme.backgroundColor.darkGrey),zIndex:"999",color:"".concat(e.theme.color.white),textAlign:"center",boxSizing:"border-box",animation:"".concat(a," 250ms ease"),fontFamily:"".concat(e.theme.fontFamily),"*":{boxSizing:"border-box",fontFamily:"".concat(e.theme.fontFamily)}}},Rs=function(e,t){var a=t?"#008000":"#ff3b30";return{width:"50px",height:"50px",borderRadius:"27px",backgroundColor:"rgba(255, 255, 255, 0.2)",display:"block",margin:"auto 10px",cursor:"pointer",background:"url(".concat(e,") center center no-repeat ").concat(a)}},Es=a(100),Us=a.n(Es),Ns=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).playOutgoingAlert=function(){if(s.props.hasOwnProperty("widgetsettings")&&s.props.widgetsettings&&s.props.widgetsettings.hasOwnProperty("main")&&(!1===s.props.widgetsettings.main.hasOwnProperty("enable_sound_for_calls")||s.props.widgetsettings.main.hasOwnProperty("enable_sound_for_calls")&&!1===s.props.widgetsettings.main.enable_sound_for_calls))return!1;s.outgoingAlert.currentTime=0,"boolean"==typeof s.outgoingAlert.loop?s.outgoingAlert.loop=!0:s.outgoingAlert.addEventListener("ended",(function(){this.currentTime=0,this.play()}),!1),s.outgoingAlert.play()},s.pauseOutgoingAlert=function(){if(s.props.hasOwnProperty("widgetsettings")&&s.props.widgetsettings&&s.props.widgetsettings.hasOwnProperty("main")&&(!1===s.props.widgetsettings.main.hasOwnProperty("enable_sound_for_calls")||s.props.widgetsettings.main.hasOwnProperty("enable_sound_for_calls")&&!1===s.props.widgetsettings.main.enable_sound_for_calls))return!1;s.outgoingAlert.pause()},s.callScreenUpdated=function(e,t){switch(e){case"onIncomingCallCancelled":s.incomingCallCancelled(t);break;case"onOutgoingCallAccepted":s.outgoingCallAccepted(t);break;case"onOutgoingCallRejected":s.outgoingCallRejected(t)}},s.incomingCallCancelled=function(e){s.setState({outgoingCallScreen:!1,callInProgress:null})},s.outgoingCallAccepted=function(e){!0===s.state.outgoingCallScreen&&(s.pauseOutgoingAlert(),s.setState({outgoingCallScreen:!1,callInProgress:e}),s.startCall(e))},s.outgoingCallRejected=function(e){if(e.hasOwnProperty("status")&&e.status===o.CometChat.CALL_STATUS.BUSY){var t="".concat(e.sender.name," is on another call.");s.setState({errorScreen:!0,errorMessage:t})}else s.pauseOutgoingAlert(),s.props.actionGenerated("outgoingCallRejected",e),s.setState({outgoingCallScreen:!1,callInProgress:null})},s.acceptCall=function(){D.acceptCall(s.props.incomingCall.sessionId).then((function(e){if(e.receiver.hasOwnProperty("uid")&&!1===e.receiver.hasOwnProperty("avatar")){var t=e.receiver.uid,a=e.receiver.name.charAt(0).toUpperCase();e.receiver.avatar=_.getAvatar(t,a)}else if(e.receiver.hasOwnProperty("guid")&&!1===e.receiver.hasOwnProperty("icon")){var n=e.receiver.guid,i=e.receiver.name.charAt(0).toUpperCase();e.receiver.icon=_.getAvatar(n,i)}s.props.actionGenerated("acceptedIncomingCall",e),s.setState({outgoingCallScreen:!1,callInProgress:e,errorScreen:!1,errorMessage:null}),s.startCall(e)})).catch((function(e){console.log("[CallScreen] acceptCall -- error",e),s.props.actionGenerated("callError",e)}))},s.startCall=function(e){var t=s.callScreenFrame;o.CometChat.startCall(e.getSessionId(),t,new o.CometChat.OngoingCallListener({onUserJoined:function(t){if(e.callInitiator.uid!==s.props.loggedInUser.uid&&e.callInitiator.uid!==t.uid){s.markMessageAsRead(e);var a={category:e.category,type:e.type,action:e.action,status:e.status,callInitiator:e.callInitiator,callReceiver:e.callReceiver,receiverId:e.receiverId,receiverType:e.receiverType,sentAt:e.sentAt,sender:Object(O.a)({},t)};s.props.actionGenerated("userJoinedCall",a)}},onUserLeft:function(t){if(e.callInitiator.uid!==s.props.loggedInUser.uid&&e.callInitiator.uid!==t.uid){s.markMessageAsRead(e);var a={category:e.category,type:e.type,action:"left",status:e.status,callInitiator:e.callInitiator,callReceiver:e.callReceiver,receiverId:e.receiverId,receiverType:e.receiverType,sentAt:e.sentAt,sender:Object(O.a)({},t)};s.props.actionGenerated("userLeftCall",a)}},onCallEnded:function(e){s.setState({showOutgoingScreen:!1,callInProgress:null}),s.markMessageAsRead(e),s.props.actionGenerated("callEnded",e)}}))},s.markMessageAsRead=function(e){var t=e.receiverType,a="user"===t?e.sender.uid:e.receiverId;!1===e.hasOwnProperty("readAt")&&o.CometChat.markAsRead(e.id,a,t)},s.cancelCall=function(){s.pauseOutgoingAlert(),D.rejectCall(s.state.callInProgress.sessionId,o.CometChat.CALL_STATUS.CANCELLED).then((function(e){s.props.actionGenerated("outgoingCallCancelled",e),s.setState({outgoingCallScreen:!1,callInProgress:null})})).catch((function(e){s.props.actionGenerated("callError",e),s.setState({outgoingCallScreen:!1,callInProgress:null})}))},s.callScreenFrame=n.a.createRef(),s.state={errorScreen:!1,errorMessage:null,outgoingCallScreen:!1,callInProgress:null},s}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.outgoingAlert=new Audio(Ba.a),this.CallScreenManager=new Ss,this.CallScreenManager.attachListeners(this.callScreenUpdated)}},{key:"componentDidUpdate",value:function(e,t){if(e.outgoingCall!==this.props.outgoingCall&&this.props.outgoingCall){this.playOutgoingAlert();var a=this.props.outgoingCall;if("group"===a.receiverType&&!1===a.receiver.hasOwnProperty("icon")){var s=a.receiver.guid,n=a.receiver.name.charAt(0).toUpperCase();a.receiver.icon=_.getAvatar(s,n)}else if("user"===a.receiverType&&!1===a.receiver.hasOwnProperty("avatar")){var i=a.receiver.uid,r=a.receiver.name.charAt(0).toUpperCase();a.receiver.avatar=_.getAvatar(i,r)}this.setState({outgoingCallScreen:!0,callInProgress:a,errorScreen:!1,errorMessage:null})}e.incomingCall!==this.props.incomingCall&&this.props.incomingCall&&this.acceptCall()}},{key:"componentWillUnmount",value:function(){this.CallScreenManager.removeListeners(),this.CallScreenManager=null}},{key:"render",value:function(){var e,t=this,a=null,s=null,n=null;this.state.callInProgress&&("user"===this.props.type?e=Object(h.a)(v,{image:this.state.callInProgress.receiver.avatar,cornerRadius:"50%",borderColor:this.props.theme.color.secondary,borderWidth:"1px"}):"group"===this.props.type&&(e=Object(h.a)(v,{image:this.state.callInProgress.receiver.icon,cornerRadius:"50%",borderColor:this.props.theme.color.secondary,borderWidth:"1px"})),this.state.errorScreen&&(n=Object(h.a)("div",{css:{color:"#fff",textAlign:"center",borderRadius:"2px",padding:"13px 10px",fontSize:"13px",width:"100%",height:"10%",backgroundColor:"#333"},className:"callscreen__error__wrapper"},Object(h.a)("div",null,this.state.errorMessage))),this.state.outgoingCallScreen&&(s=Object(h.a)("div",{css:{display:"flex",flexDirection:"column",height:"100%",width:"100%"},className:"callscreen__container"},Object(h.a)("div",{css:{padding:"20px 10px",width:"100%",height:"20%"},className:"callscreen__header"},Object(h.a)("h6",{css:{margin:"0",fontWeight:"700",textTransform:"capitalize",fontSize:"16px"},className:"header__name"},this.state.callInProgress.receiver.name),Object(h.a)("span",{css:{fontSize:"13px",display:"inline-block",padding:"5px"},className:"header__calling"},"calling...")),Object(h.a)("div",{css:{width:"100%",height:"50%",display:"flex",justifyContent:"center",alignItems:"center"},className:"callscreen__thumbnail__wrapper"},Object(h.a)("div",{css:{width:"200px",flexShrink:"0"},className:"callscreen__thumbnail"},e)),n,Object(h.a)("div",{css:{width:"100%",height:"15%",padding:"10px",display:"flex",justifyContent:"center"},className:"callscreen__icons"},Object(h.a)("div",{css:{display:"flex"},className:"icon__block",onClick:this.cancelCall},Object(h.a)("div",{css:Rs(Us.a,0),className:"icon icon__end"}))))));return this.state.callInProgress&&(a=Object(h.a)("div",{css:Ts(this.props,h.b),className:"callscreen__wrapper",ref:function(e){t.callScreenFrame=e}},s)),a}}]),a}(n.a.PureComponent),Ps=function(e){return{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",padding:"2%",zIndex:"9999",display:"flex",justifyContent:"center",background:"url(".concat(e,") no-repeat right top #fff"),cursor:"pointer"}},Gs=a(101),Ls=a.n(Gs),Bs=a(102),Ds=a.n(Bs),Ws=function(e){var t=Object(s.useRef)(),a=new Image;return a.src=e.message.data.url,a.onload=function(){t&&(t.src=a.src)},Object(h.a)(n.a.Fragment,null,Object(h.a)(Jt,{show:e.open,clicked:e.close}),Object(h.a)("div",{css:Ps(Ds.a),onClick:e.close,className:"image__wrapper"},Object(h.a)("img",{src:Ls.a,css:{objectFit:"contain"},alt:"Full Screen View",ref:function(e){t=e}})))},zs=function(e,t){var a=e.sidebarview?{left:"0",boxShadow:"rgba(0, 0, 0, .4) -30px 0 30px 30px"}:{};return Object(k.a)({width:"280px",borderRight:"1px solid ".concat(t.borderColor.primary),height:"100%",position:"relative",display:"flex",flexDirection:"column"},"@media (min-width : 320px) and (max-width: 767px)",Object(O.a)({position:"absolute!important",left:"-100%",top:"0",bottom:"0",width:"100%!important",zIndex:"2",backgroundColor:"".concat(t.backgroundColor.white),transition:"all .3s ease-out"},a))},Fs=function(e){var t=e.threadmessageview||e.detailview?{width:"calc(100% - 680px)"}:{};return Object(O.a)(Object(O.a)({width:"calc(100% - 280px)",height:"100%",order:"2"},t),{},Object(k.a)({},"@media (min-width : 320px) and (max-width: 767px)",{width:"100%!important"}))},Hs=function(e){return Object(k.a)({float:"right",borderLeft:"1px solid ".concat(e.borderColor.primary),height:"100%",width:"400px",display:"flex",flexDirection:"column",order:"3"},"@media (min-width : 320px) and (max-width: 767px)",{position:"absolute!important",right:"0!important",top:"0",bottom:"0",width:"100%!important",zIndex:"2",backgroundColor:"".concat(e.backgroundColor.white)})},Ys=(n.a.Component,function(){function e(t){Object(d.a)(this,e),this.groupRequest=null,this.groupListenerId="grouplist_"+(new Date).getTime(),this.groupRequest=t?(new o.CometChat.GroupsRequestBuilder).setLimit(30).setSearchKeyword(t).build():(new o.CometChat.GroupsRequestBuilder).setLimit(30).build()}return Object(u.a)(e,[{key:"fetchNextGroups",value:function(){return this.groupRequest.fetchNext()}},{key:"attachListeners",value:function(e){o.CometChat.addGroupListener(this.groupListenerId,new o.CometChat.GroupListener({onGroupMemberScopeChanged:function(t,a,s,n,i){e("onGroupMemberScopeChanged",t,i,{user:a,scope:s})},onGroupMemberKicked:function(t,a,s,n){e("onGroupMemberKicked",t,n,{user:a,hasJoined:!1})},onGroupMemberBanned:function(t,a,s,n){e("onGroupMemberBanned",t,n,{user:a,hasJoined:!1})},onGroupMemberUnbanned:function(t,a,s,n){e("onGroupMemberUnbanned",t,n,{user:a,hasJoined:!1})},onMemberAddedToGroup:function(t,a,s,n){e("onMemberAddedToGroup",t,n,{user:a,hasJoined:!0})},onGroupMemberLeft:function(t,a,s){e("onGroupMemberLeft",t,s,{user:a})},onGroupMemberJoined:function(t,a,s){e("onGroupMemberJoined",t,s,{user:a})}}))}},{key:"removeListeners",value:function(){o.CometChat.removeGroupListener(this.groupListenerId)}}]),e}()),Js=function(e){var t=e.open?{display:"block"}:{};return Object(O.a)(Object(O.a)({minWidth:"350px",minHeight:"350px",width:"40%",height:"40%",overflow:"hidden",backgroundColor:"".concat(e.theme.backgroundColor.white),position:"fixed",left:"50%",top:"50%",transform:"translate(-50%, -50%)",zIndex:"1002",margin:"0 auto",boxShadow:"rgba(20, 20, 20, 0.2) 0 16px 32px, rgba(20, 20, 20, 0.04) 0 0 0 1px",borderRadius:"12px",display:"none"},t),{},Object(k.a)({},"@media (min-width : 320px) and (max-width: 767px)",{width:"100%",height:"100%"}))},Vs=function(e){return{display:"block",width:"100%",border:"0",boxShadow:"rgba(20, 20, 20, 0.04) 0 0 0 1px inset",borderRadius:"8px",backgroundColor:"".concat(e.theme.backgroundColor.grey),padding:"6px 8px 6px 30px",color:"".concat(e.theme.color.helpText),fontSize:"15px"}},Qs=a(103),qs=a.n(Qs),Ks=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).passwordChangeHandler=function(e){s.setState({password:e.target.value})},s.nameChangeHandler=function(e){s.setState({name:e.target.value})},s.typeChangeHandler=function(e){var t=e.target.value;s.setState({type:e.target.value}),"protected"===t?s.setState({passwordInput:!0}):s.setState({passwordInput:!1})},s.validate=function(){var e=s.state.name.trim(),t=s.state.type.trim();if(!e)return s.setState({error:"Group name cannnot be blank."}),!1;if(!t)return s.setState({error:"Group type cannnot be blank."}),!1;return!("protected"===t&&!s.state.password.length)||(s.setState({error:"Group password cannnot be blank."}),!1)},s.createGroup=function(){if(!s.validate())return!1;var e=s.state.type.trim(),t=s.state.password,a="group_"+(new Date).getTime(),n=s.state.name.trim(),i=o.CometChat.GROUP_TYPE.PUBLIC;switch(e){case"public":i=o.CometChat.GROUP_TYPE.PUBLIC;break;case"private":i=o.CometChat.GROUP_TYPE.PRIVATE;break;case"protected":i=o.CometChat.GROUP_TYPE.PASSWORD}var r=new o.CometChat.Group(a,n,i,t);o.CometChat.createGroup(r).then((function(e){console.log("Group created successfully:",e),s.setState({error:null,name:"",type:"",password:"",passwordInput:""}),s.props.actionGenerated("groupCreated",e)})).catch((function(e){console.log("Group creation failed with exception:",e),s.setState({error:e})}))},s.state={error:null,passwordInput:!1,name:"",type:"",password:""},s}return Object(u.a)(a,[{key:"render",value:function(){var e,t,a=null;return this.state.passwordInput&&(a=Object(h.a)("tr",null,Object(h.a)("td",null,Object(h.a)("input",{autoComplete:"off",css:Vs(this.props),placeholder:"Enter group password",type:"password",tabIndex:"3",onChange:this.passwordChangeHandler,value:this.state.password})))),Object(h.a)(n.a.Fragment,null,Object(h.a)(Jt,{show:this.props.open,clicked:this.props.close}),Object(h.a)("div",{css:Js(this.props),className:"modal__creategroup"},Object(h.a)("span",{css:(t=qs.a,{position:"absolute",width:"32px",height:"32px",borderRadius:"50%",top:"16px",right:"16px",background:"url(".concat(t,") center center no-repeat"),cursor:"pointer"}),className:"modal__close",onClick:this.props.close}),Object(h.a)("div",{css:{padding:"25px",height:"100%",width:"100%"},className:"modal__body"},Object(h.a)("table",{css:(this.props,{borderCollapse:"collapse",margin:"0",padding:"0",width:"100%",height:"90%",tr:{display:"table",width:"100%",tableLayout:"fixed"}})},Object(h.a)("caption",{css:{fontSize:"20px",marginBottom:"15px",fontWeight:"bold",textAlign:"left"},className:"modal__title"},"Create Group"),Object(h.a)("tbody",{css:{height:"calc(100% - 40px)",overflowY:"auto",display:"block",tr:{td:{padding:"8px",fontSize:"14px",input:{width:"100%",border:"none",padding:"10px 14px",fontSize:"14px",outline:"none"},select:{outline:"none",padding:"10px"}}}},className:"modal__search"},Object(h.a)("tr",{className:"error"},Object(h.a)("td",null,Object(h.a)("div",{css:{fontSize:"12px",color:"red",textAlign:"center",display:"block"}},this.state.error))),Object(h.a)("tr",null,Object(h.a)("td",null,Object(h.a)("input",{autoComplete:"off",css:Vs(this.props),className:"search__input",placeholder:"Enter group name",type:"text",tabIndex:"1",onChange:this.nameChangeHandler,value:this.state.name}))),Object(h.a)("tr",null,Object(h.a)("td",null,Object(h.a)("select",{css:Vs(this.props),className:"grouptype",onChange:this.typeChangeHandler,value:this.state.type,tabIndex:"2"},Object(h.a)("option",{value:""},"Select group type"),Object(h.a)("option",{value:"public"},"Public"),Object(h.a)("option",{value:"private"},"Private"),Object(h.a)("option",{value:"protected"},"Password Protected")))),a),Object(h.a)("tfoot",{css:(e=this.props,{display:"inline-block",button:{cursor:"pointer",padding:"10px 20px",backgroundColor:"".concat(e.theme.backgroundColor.blue),borderRadius:"5px",color:"".concat(e.theme.color.white),fontSize:"14px",outline:"0",border:"0"},tr:{border:"none",td:{textAlign:"center"}}})},Object(h.a)("tr",{className:"creategroup"},Object(h.a)("td",null,Object(h.a)("button",{tabIndex:"4",onClick:this.createGroup},"Create"))))))))}}]),a}(n.a.Component),Xs=function(e){var t=e.selectedGroup&&e.selectedGroup.guid===e.group.guid?{backgroundColor:"".concat(e.theme.backgroundColor.primary)}:{};return Object(O.a)(Object(O.a)({display:"flex",flexDirection:"row",justifyContent:"left",alignItems:"center",cursor:"pointer",width:"100%",padding:"10px 20px"},t),{},{"&:hover":{backgroundColor:"".concat(e.theme.backgroundColor.primary)}})},Zs=function(e){return{borderBottom:"1px solid ".concat(e.theme.borderColor.primary),marginTop:"10px"}},$s=a(104),en=a.n($s),tn=a(105),an=a.n(tn),sn=function(e){var t=function(e,t){var a=e.target;if(a.scrollWidth<=a.clientWidth)return!1;t?a.setAttribute("title",a.textContent):a.removeAttribute("title")},a=null;return"private"===e.group.type?a=Object(h.a)("div",{css:{alignSelf:"center",width:"16px",height:"16px"},className:"list__item__icon"},Object(h.a)("img",{src:en.a,alt:"time"})):"password"===e.group.type&&(a=Object(h.a)("div",{css:{alignSelf:"center",width:"16px",height:"16px"},className:"list__item__icon"},Object(h.a)("img",{src:an.a,alt:"time"}))),Object(h.a)("div",{css:Xs(e),className:"list__item",onClick:function(){return e.clickHandler(e.group)}},Object(h.a)("div",{css:{display:"inline-block",width:"36px",height:"36px",flexShrink:"0"},className:"list__item__thumbnail"},Object(h.a)(v,{image:e.group.icon,cornerRadius:"18px",borderColor:e.theme.color.secondary,borderWidth:"1px"})),Object(h.a)("div",{css:{width:"calc(100% - 70px)",flexGrow:"1",paddingLeft:"15px"},className:"list__item__details"},Object(h.a)("div",{css:{fontSize:"15px",fontWeight:"600",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",width:"100%",margin:"0",marginTop:"5px"},className:"item__details__name",onMouseEnter:function(e){return t(e,!0)},onMouseLeave:function(e){return t(e,!1)}},e.group.name),Object(h.a)("div",{css:Zs(e),className:"item__details__desc"})),a)},nn=function(e){return{padding:"19px 16px",position:"relative",display:"flex",alignItems:"center",borderBottom:"1px solid ".concat(e.borderColor.primary)}},rn=function(e){return Object(k.a)({cursor:"pointer",display:"none",background:"url(".concat(e,") left center no-repeat"),height:"24px",width:"33%"},"@media (min-width : 320px) and (max-width: 767px)",{display:"block!important"})},on=function(e){var t=e.hasOwnProperty("enableCloseMenu")&&e.enableCloseMenu.length>0?{width:"33%",textAlign:"center"}:{};return Object(O.a)({margin:"0",fontWeight:"700",display:"inline-block",width:"66%",textAlign:"left",fontSize:"20px"},t)},cn=function(e,t){return{display:"block",width:"100%",border:"0",boxShadow:"rgba(20, 20, 20, 0.04) 0 0 0 1px inset",borderRadius:"8px",lineHeight:"20px",padding:"6px 8px 6px 30px",fontSize:"15px",outline:"none",color:"".concat(e.color.primary),background:"url(".concat(t,") 10px center no-repeat ").concat(e.backgroundColor.grey)}},pn=a(106),ln=a.n(pn),dn=a(107),un=a.n(dn),gn=a(108),mn=a.n(gn),hn=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).loggedInUser=null,s.decoratorMessage="Loading...",s.groupUpdated=function(e,t,a,n){switch(e){case"onGroupMemberScopeChanged":s.updateMemberChanged(a,n);break;case"onGroupMemberKicked":case"onGroupMemberBanned":case"onGroupMemberLeft":s.updateMemberRemoved(a,n);break;case"onMemberAddedToGroup":s.updateMemberAdded(a,n);break;case"onGroupMemberJoined":s.updateMemberJoined(a,n)}},s.updateMemberRemoved=function(e,t){var a=Object(C.a)(s.state.grouplist),n=a.findIndex((function(t,a){return t.guid===e.guid}));if(n>-1)if(t&&s.loggedInUser.uid===t.user.uid){var i=Object(O.a)({},a[n]),r=parseInt(e.membersCount),o=Object.assign({},i,{membersCount:r,hasJoined:!1});a.splice(n,1,o),s.setState({grouplist:a})}else{var c=Object(O.a)({},a[n]),p=parseInt(e.membersCount),l=Object.assign({},c,{membersCount:p});a.splice(n,1,l),s.setState({grouplist:a})}},s.updateMemberAdded=function(e,t){var a=Object(C.a)(s.state.grouplist),n=a.findIndex((function(t,a){return t.guid===e.guid}));if(n>-1){var i=Object(O.a)({},a[n]),r=parseInt(e.membersCount),c=e.hasOwnProperty("scope")?e.scope:"",p=!!e.hasOwnProperty("hasJoined")&&e.hasJoined;t&&s.loggedInUser.uid===t.user.uid&&(c=o.CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT,p=!0);var l=Object.assign({},i,{membersCount:r,scope:c,hasJoined:p});a.splice(n,1,l),s.setState({grouplist:a})}else{var d=Object(O.a)({},e),u=d.hasOwnProperty("scope")?d.scope:{},g=!!d.hasOwnProperty("hasJoined")&&d.hasJoined,m=parseInt(d.membersCount);s.setAvatar(d),t&&s.loggedInUser.uid===t.user.uid&&(u=o.CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT,g=!0);var h=[Object.assign({},d,{membersCount:m,scope:u,hasJoined:g})].concat(Object(C.a)(s.state.grouplist));s.setState({grouplist:h})}},s.updateMemberJoined=function(e,t){var a=Object(C.a)(s.state.grouplist),n=a.findIndex((function(t,a){return t.guid===e.guid}));if(n>-1){var i=Object(O.a)({},a[n]),r=i.scope,c=parseInt(e.membersCount);t&&s.loggedInUser.uid===t.user.uid&&(r=o.CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT);var p=Object.assign({},i,{membersCount:c,scope:r});a.splice(n,1,p),s.setState({grouplist:a})}},s.updateMemberChanged=function(e,t){var a=Object(C.a)(s.state.grouplist),n=a.findIndex((function(t,a){return t.guid===e.guid}));if(n>-1){var i=Object(O.a)({},a[n]);if(t&&s.loggedInUser.uid===t.user.uid){var r=Object.assign({},i,{scope:t.scope});a.splice(n,1,r),s.setState({grouplist:a})}}},s.handleScroll=function(e){Math.round(e.currentTarget.scrollHeight-e.currentTarget.scrollTop)===Math.round(e.currentTarget.clientHeight)&&s.getGroups()},s.handleClick=function(e){if(s.props.onItemClick)if(!1===e.hasJoined){if(s.props.hasOwnProperty("widgetsettings")&&s.props.widgetsettings&&s.props.widgetsettings.hasOwnProperty("main")&&s.props.widgetsettings.main.hasOwnProperty("join_or_leave_groups")&&!1===s.props.widgetsettings.main.join_or_leave_groups)return console.log("Group joining disabled in widget settings"),!1;var t="";e.type===o.CometChat.GROUP_TYPE.PASSWORD&&(t=prompt("Enter your password"));var a=e.guid,n=e.type;o.CometChat.joinGroup(a,n,t).then((function(t){console.log("Group joining success with response",t,"group",e);var n=Object(C.a)(s.state.grouplist),i=n.findIndex((function(e,t){return e.guid===a}));if(i>-1){var r=n[i],c=Object.assign({},r,t,{scope:o.CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT});n.splice(i,1,c),s.setState({grouplist:n,selectedGroup:c}),s.props.onItemClick(c,"group")}})).catch((function(e){console.log("Group joining failed with exception:",e)}))}else s.setState({selectedGroup:e}),s.props.onItemClick(e,"group")},s.handleMenuClose=function(){if(!s.props.actionGenerated)return!1;s.props.actionGenerated("closeMenuClicked")},s.searchGroup=function(e){s.timeout&&clearTimeout(s.timeout);var t=e.target.value;s.timeout=setTimeout((function(){s.GroupListManager=new Ys(t),s.setState({grouplist:[]},(function(){return s.getGroups()}))}),500)},s.markMessagesRead=function(e){e.getReadAt()||e.getReadByMeAt()||("user"===e.getReceiverType()?o.CometChat.markAsRead(e.getId().toString(),e.getSender().getUid(),e.getReceiverType()):o.CometChat.markAsRead(e.getId().toString(),e.getReceiverId(),e.getReceiverType()))},s.getGroups=function(){(new D).getLoggedInUser().then((function(e){s.loggedInUser=e,s.GroupListManager.fetchNextGroups().then((function(e){0===e.length&&(s.decoratorMessage="No groups found"),e.forEach((function(e){return s.setAvatar(e)})),s.setState({grouplist:[].concat(Object(C.a)(s.state.grouplist),Object(C.a)(e))})})).catch((function(e){s.decoratorMessage="Error",console.error("[CometChatGroupList] getGroups fetchNextGroups error",e)}))})).catch((function(e){s.decoratorMessage="Error",console.log("[CometChatGroupList] getUsers getLoggedInUser error",e)}))},s.createGroupHandler=function(e){s.setState({createGroup:e})},s.createGroupActionHandler=function(e,t){if("groupCreated"===e){s.setAvatar(t);var a=[t].concat(Object(C.a)(s.state.grouplist));s.handleClick(t),s.setState({grouplist:a,createGroup:!1})}},s.state={grouplist:[],createGroup:!1,selectedGroup:null},s.groupListRef=n.a.createRef(),s.theme=Object.assign({},Wa,s.props.theme),s}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.GroupListManager=new Ys,this.getGroups(),this.GroupListManager.attachListeners(this.groupUpdated)}},{key:"componentDidUpdate",value:function(e){var t=this;if(JSON.stringify(e.item)!==JSON.stringify(this.props.item))if(0===Object.keys(this.props.item).length)this.groupListRef.scrollTop=0,this.setState({selectedGroup:{}});else{var a=Object(C.a)(this.state.grouplist),s=a.findIndex((function(e){return e.guid===t.props.item.guid}));if(s>-1){var n=Object(O.a)({},a[s]);this.setState({selectedGroup:n})}}if(e.groupToLeave&&e.groupToLeave.guid!==this.props.groupToLeave.guid){var i=Object(C.a)(this.state.grouplist),r=i.findIndex((function(e){return e.guid===t.props.groupToLeave.guid}));if(r>-1){var o=Object(O.a)({},i[r]),c=parseInt(o.membersCount)-1,p=Object.assign({},o,{membersCount:c,hasJoined:!1});i.splice(r,1,p),this.setState({grouplist:i})}}if(e.groupToDelete&&e.groupToDelete.guid!==this.props.groupToDelete.guid){var l=Object(C.a)(this.state.grouplist),d=l.findIndex((function(e){return e.guid===t.props.groupToDelete.guid}));d>-1&&(l.splice(d,1),this.setState({grouplist:l}),0===l.length&&(this.decoratorMessage="No groups found"))}if(e.groupToUpdate&&(e.groupToUpdate.guid!==this.props.groupToUpdate.guid||e.groupToUpdate.guid===this.props.groupToUpdate.guid&&(e.groupToUpdate.membersCount!==this.props.groupToUpdate.membersCount||e.groupToUpdate.scope!==this.props.groupToUpdate.scope))){var u=Object(C.a)(this.state.grouplist),g=this.props.groupToUpdate,m=u.findIndex((function(e){return e.guid===g.guid}));if(m>-1){var h=u[m],b=Object.assign({},h,g,{scope:g.scope,membersCount:g.membersCount});u.splice(m,1,b),this.setState({grouplist:u})}}}},{key:"componentWillUnmount",value:function(){this.GroupListManager=null}},{key:"setAvatar",value:function(e){if(!1===e.hasOwnProperty("icon")){var t=e.guid,a=e.name.charAt(0).toUpperCase();e.icon=_.getAvatar(t,a)}return e}},{key:"render",value:function(){var e,t=this,a=null;0===this.state.grouplist.length&&(a=Object(h.a)("div",{css:{overflow:"hidden",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:"50%"},className:"groups__decorator-message"},Object(h.a)("p",{css:(e=this.theme,{margin:"0",height:"30px",color:"".concat(e.color.secondary),fontSize:"24px!important",fontWeight:"600"}),className:"decorator-message"},this.decoratorMessage)));var s,n=this.state.grouplist.map((function(e,a){return Object(h.a)(sn,{key:a,theme:t.theme,group:e,selectedGroup:t.state.selectedGroup,clickHandler:t.handleClick})})),i=Object(h.a)("div",{css:(s=mn.a,{display:"block",height:"20px",background:"url(".concat(s,") right center no-repeat"),cursor:"pointer",width:"35%"}),title:"Create Group",onClick:function(){return t.createGroupHandler(!0)}});this.props.hasOwnProperty("config")&&this.props.config&&this.props.config.hasOwnProperty("group-create")&&!1===this.props.config["group-create"]&&(i=null),this.props.hasOwnProperty("widgetsettings")&&this.props.widgetsettings&&this.props.widgetsettings.hasOwnProperty("main")&&this.props.widgetsettings.main.hasOwnProperty("create_groups")&&!1===this.props.widgetsettings.main.create_groups&&(i=null);var r=Object(h.a)("div",{css:rn(un.a),className:"header__close",onClick:this.handleMenuClose});return(!this.props.hasOwnProperty("enableCloseMenu")||this.props.hasOwnProperty("enableCloseMenu")&&0===this.props.enableCloseMenu)&&(r=null),Object(h.a)("div",{css:{display:"flex",flexDirection:"column",height:"100%",boxSizing:"border-box","*":{boxSizing:"border-box"}},className:"groups"},Object(h.a)("div",{css:nn(this.theme),className:"groups__header"},r,Object(h.a)("h4",{css:on(this.props),className:"header__title"},"Groups"),i),Object(h.a)("div",{css:{padding:"16px 16px",position:"relative"},className:"groups__search"},Object(h.a)("input",{type:"text",autoComplete:"off",css:cn(this.theme,ln.a),className:"search__input",placeholder:"Search",onChange:this.searchGroup})),a,Object(h.a)("div",{css:{height:"calc(100% - 125px)",overflowY:"auto",margin:"0",padding:"0"},className:"groups__list",onScroll:this.handleScroll,ref:function(e){return t.groupListRef=e}},n),Object(h.a)(Ks,{theme:this.theme,open:this.state.createGroup,close:function(){return t.createGroupHandler(!1)},actionGenerated:this.createGroupActionHandler}))}}]),a}(n.a.Component),bn=function(){function e(t){Object(d.a)(this,e),this.guid=null,this.groupMemberRequest=null,this.bannedGroupMemberRequest=null,this.userListenerId="group_detail_user_"+(new Date).getTime(),this.groupListenerId="group_detail_group_"+(new Date).getTime(),this.guid=t,this.groupMemberRequest=new o.CometChat.GroupMembersRequestBuilder(t).setLimit(10).build(),this.bannedGroupMemberRequest=new o.CometChat.BannedMembersRequestBuilder(t).setLimit(10).build()}return Object(u.a)(e,[{key:"fetchNextGroupMembers",value:function(){return this.groupMemberRequest.fetchNext()}},{key:"fetchNextBannedGroupMembers",value:function(){return this.bannedGroupMemberRequest.fetchNext()}},{key:"attachListeners",value:function(e){var t=this;o.CometChat.addGroupListener(this.groupListenerId,new o.CometChat.GroupListener({onGroupMemberScopeChanged:function(t,a,s,n,i){e("onGroupMemberScopeChanged",t,i,{user:a,scope:s})},onGroupMemberKicked:function(t,a,s,n){e("onGroupMemberKicked",t,n,{user:a,hasJoined:!1})},onGroupMemberBanned:function(t,a,s,n){e("onGroupMemberBanned",t,n,{user:a})},onGroupMemberUnbanned:function(t,a,s,n){e("onGroupMemberUnbanned",t,n,{user:a,hasJoined:!1})},onMemberAddedToGroup:function(t,a,s,n){e("onMemberAddedToGroup",t,n,{user:a,hasJoined:!0})},onGroupMemberLeft:function(t,a,s){e("onGroupMemberLeft",t,s,{user:a})},onGroupMemberJoined:function(t,a,s){e("onGroupMemberJoined",t,s,{user:a})}})),o.CometChat.addUserListener(this.userListenerId,new o.CometChat.UserListener({onUserOnline:function(a){e("onUserOnline",null,{guid:t.guid},{user:a})},onUserOffline:function(a){e("onUserOffline",null,{guid:t.guid},{user:a})}}))}},{key:"removeListeners",value:function(){o.CometChat.removeUserListener(this.userListenerId),o.CometChat.removeGroupListener(this.groupListenerId)}}]),e}(),fn=n.a.createContext({memberlist:[],bannedmemberlist:[],administratorslist:[],moderatorslist:[]}),vn=function(e){var t=e?{display:"none"}:{};return Object(k.a)({display:"inline-block",float:"left",span:{top:"26px",left:"-8px"}},"@media (min-width : 320px) and (max-width: 767px)",Object(O.a)({},t))},xn=function(e){var t=e?{width:"100%"}:{};return Object(k.a)({margin:"10px 0",width:"calc(100% - 50px)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},"@media (min-width : 320px) and (max-width: 767px)",Object(O.a)({},t))},wn=function(){return Object(k.a)({width:"70px",padding:"8px",img:{width:"20px",height:"20px",cursor:"pointer"}},"@media (min-width : 320px) and (max-width: 767px)",{width:"55px"})},On=a(109),Cn=a.n(On),yn=a(110),jn=a.n(yn),An=a(111),_n=a.n(An),kn=a(112),Mn=a.n(kn),Sn=a(113),In=a.n(Sn),Tn=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).state={showChangeScope:!1,scope:null},s.toggleChangeScope=function(e){s.setState({showChangeScope:e})},s.scopeChangeHandler=function(e){s.setState({scope:e.target.value})},s.updateMemberScope=function(){s.props.actionGenerated("changescope",s.props.member,s.state.scope),s.toggleChangeScope()},s.toggleTooltip=function(e,t){var a=e.currentTarget.lastChild;if(a.scrollWidth<=a.clientWidth)return!1;t?a.setAttribute("title",a.textContent):a.removeAttribute("title")},s.changeScopeDropDown=Object(h.a)("select",{className:"members-scope-select",onChange:s.scopeChangeHandler,defaultValue:s.props.member.scope}),s.roles={},s.roles[o.CometChat.GROUP_MEMBER_SCOPE.ADMIN]="Administrator",s.roles[o.CometChat.GROUP_MEMBER_SCOPE.MODERATOR]="Moderator",s.roles[o.CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT]="Participant",s}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.context,a="",s=this.props.member.name,i=Object(h.a)("span",{css:{padding:"5px",float:"left",fontSize:"12px"}},this.roles[this.props.member.scope]),r=null,c=Object(h.a)("img",{src:Mn.a,alt:"Ban",onClick:function(){e.props.actionGenerated("ban",e.props.member)}}),p=Object(h.a)("img",{src:In.a,alt:"Kick",onClick:function(){e.props.actionGenerated("kick",e.props.member)}});if(this.state.showChangeScope){var l=Object(h.a)(n.a.Fragment,null,Object(h.a)("option",{value:o.CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT},this.roles[o.CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT]),Object(h.a)("option",{value:o.CometChat.GROUP_MEMBER_SCOPE.MODERATOR},this.roles[o.CometChat.GROUP_MEMBER_SCOPE.MODERATOR]),Object(h.a)("option",{value:o.CometChat.GROUP_MEMBER_SCOPE.ADMIN},this.roles[o.CometChat.GROUP_MEMBER_SCOPE.ADMIN]));this.props.item.scope===o.CometChat.GROUP_MEMBER_SCOPE.MODERATOR&&this.props.member.scope===o.CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT&&(l=Object(h.a)(n.a.Fragment,null,Object(h.a)("option",{value:o.CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT},this.roles[o.CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT]),Object(h.a)("option",{value:o.CometChat.GROUP_MEMBER_SCOPE.MODERATOR},this.roles[o.CometChat.GROUP_MEMBER_SCOPE.MODERATOR]))),r=Object(h.a)("div",{css:{float:"left",width:"100%",transition:"opacity .1s linear",img:{margin:"6px 3px",float:"left"}},className:"scope__wrapper"},Object(h.a)("select",{css:{width:"65%",border:"0",boxShadow:"rgba(20, 20, 20, 0.04) 0 0 0 1px inset",borderRadius:"8px",backgroundColor:"rgba(20, 20, 20, 0.04)",padding:"6px",color:"rgba(20, 20, 20, 0.6)",float:"left"},className:"scope__select",onChange:this.scopeChangeHandler,defaultValue:this.props.member.scope},l),Object(h.a)("img",{src:jn.a,alt:"Change Scope",onClick:this.updateMemberScope}),Object(h.a)("img",{src:_n.a,alt:"Change Scope",onClick:function(){return e.toggleChangeScope(!1)}}))}else r=this.props.item.scope===o.CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT?i:Object(h.a)(n.a.Fragment,null,i,Object(h.a)("img",{src:Cn.a,alt:"Change Scope",onClick:function(){return e.toggleChangeScope(!0)}}));this.props.item.owner===this.props.member.uid&&(r=i=Object(h.a)("span",{css:{padding:"5px",float:"left",fontSize:"12px"}},"Owner"),c=null,p=null),t.loggedinuser.uid===this.props.member.uid&&(s="You",r=i,c=null,p=null),this.props.item.scope!==o.CometChat.GROUP_MEMBER_SCOPE.MODERATOR||this.props.member.scope!==o.CometChat.GROUP_MEMBER_SCOPE.ADMIN&&this.props.member.scope!==o.CometChat.GROUP_MEMBER_SCOPE.MODERATOR||(r=i,c=null,p=null),this.props.item.scope===o.CometChat.GROUP_MEMBER_SCOPE.ADMIN&&this.props.item.owner!==t.loggedinuser.uid&&this.props.member.scope===o.CometChat.GROUP_MEMBER_SCOPE.ADMIN&&(r=i,c=null,p=null);var d=null;this.props.item.scope===o.CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT?(d=null,a="true"):(d=Object(h.a)(n.a.Fragment,null,Object(h.a)("td",{css:wn(),className:"ban"},Object(h.a)("span",null,c)),Object(h.a)("td",{css:wn(),className:"kick"},Object(h.a)("span",null,p))),this.props.hasOwnProperty("widgetsettings")&&this.props.widgetsettings&&this.props.widgetsettings.hasOwnProperty("main")&&(this.props.widgetsettings.main.hasOwnProperty("allow_kick_ban_members")&&!1===this.props.widgetsettings.main.allow_kick_ban_members&&(d=null),this.props.widgetsettings.main.hasOwnProperty("allow_promote_demote_members")&&!1===this.props.widgetsettings.main.allow_promote_demote_members&&(r=i)));var u,g=Object(h.a)(A,{widgetsettings:this.props.widgetsettings,status:this.props.member.status,cornerRadius:"50%",borderColor:this.props.theme.color.darkSecondary,borderWidth:"1px"});return Object(h.a)("tr",{css:(u=this.props,{border:"1px solid ".concat(u.theme.borderColor.primary),display:"table",width:"100%",tableLayout:"fixed",fontSize:"14px"})},Object(h.a)("td",{css:{padding:"8px",img:{width:"36px",height:"36px",float:"left"}},className:"userinfo",onMouseEnter:function(t){return e.toggleTooltip(t,!0)},onMouseLeave:function(t){return e.toggleTooltip(t,!1)}},Object(h.a)("div",{css:vn(a),className:"thumbnail"},Object(h.a)(v,{image:this.props.member.avatar,cornerRadius:"18px",borderColor:this.props.theme.color.secondary,borderWidth:"1px"}),g),Object(h.a)("div",{css:xn(a),className:"name"},s)),Object(h.a)("td",{css:Object(k.a)({img:{width:"20px",height:"20px",cursor:"pointer"}},"@media (min-width : 320px) and (max-width: 767px)",{width:"170px"}),className:"scope"},r),d)}}]),a}(n.a.Component);Tn.contextType=fn;var Rn=Tn,En=function(e){var t=e.open?{display:"block"}:{};return Object(O.a)(Object(O.a)({minWidth:"350px",minHeight:"450px",width:"50%",height:"40%",overflow:"hidden",backgroundColor:"".concat(e.theme.backgroundColor.white),position:"fixed",left:"50%",top:"50%",transform:"translate(-50%, -50%)",zIndex:"1002",margin:"0 auto",boxShadow:"rgba(20, 20, 20, 0.2) 0 16px 32px, rgba(20, 20, 20, 0.04) 0 0 0 1px",borderRadius:"12px",display:"none"},t),{},Object(k.a)({},"@media (min-width : 320px) and (max-width: 767px)",{width:"100%",height:"100%"}))},Un=function(){return Object(k.a)({width:"70px"},"@media (min-width : 320px) and (max-width: 767px)",{width:"55px"})},Nn=a(114),Pn=a.n(Nn),Gn=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(d.a)(this,a);for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))).handleScroll=function(t){Math.round(t.currentTarget.scrollHeight-t.currentTarget.scrollTop)===Math.round(t.currentTarget.clientHeight)&&e.props.actionGenerated("fetchGroupMembers")},e.updateMembers=function(t,a,s){switch(t){case"ban":e.banMember(a);break;case"kick":e.kickMember(a);break;case"changescope":e.changeScope(a,s)}},e.banMember=function(t){var a=e.props.item.guid;o.CometChat.banGroupMember(a,t.uid).then((function(a){a&&(console.log("banGroupMember success with response: ",a),e.props.actionGenerated("removeGroupParticipants",t))})).catch((function(e){console.log("banGroupMember failed with error: ",e)}))},e.kickMember=function(t){var a=e.props.item.guid;o.CometChat.kickGroupMember(a,t.uid).then((function(a){a&&(console.log("kickGroupMember success with response: ",a),e.props.actionGenerated("removeGroupParticipants",t))})).catch((function(e){console.log("kickGroupMember failed with error: ",e)}))},e.changeScope=function(t,a){var s=e.props.item.guid;o.CometChat.updateGroupMemberScope(s,t.uid,a).then((function(s){if(s){console.log("updateGroupMemberScope success with response: ",s);var n=Object.assign({},t,{scope:a});e.props.actionGenerated("updateGroupParticipants",n)}})).catch((function(e){console.log("updateGroupMemberScope failed with error: ",e)}))},e}return Object(u.a)(a,[{key:"render",value:function(){var e,t,a=this,s=this.context,i=Object(C.a)(s.memberlist).map((function(e,t){return Object(h.a)(Rn,{theme:a.props.theme,key:t,member:e,item:a.props.item,widgetsettings:a.props.widgetsettings,actionGenerated:a.updateMembers})})),r=null;return this.props.item.scope!==o.CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT&&(r=Object(h.a)(n.a.Fragment,null,Object(h.a)("th",{css:Un(),className:"ban"},"Ban"),Object(h.a)("th",{css:Un(),className:"kick"},"Kick")),this.props.hasOwnProperty("widgetsettings")&&this.props.widgetsettings&&this.props.widgetsettings.hasOwnProperty("main")&&this.props.widgetsettings.main.hasOwnProperty("allow_kick_ban_members")&&!1===this.props.widgetsettings.main.allow_kick_ban_members&&(r=null)),Object(h.a)(n.a.Fragment,null,Object(h.a)(Jt,{show:this.props.open,clicked:this.props.close}),Object(h.a)("div",{css:En(this.props),className:"modal__viewmembers"},Object(h.a)("span",{css:(t=Pn.a,{position:"absolute",width:"32px",height:"32px",borderRadius:"50%",top:"16px",right:"16px",background:"url(".concat(t,") center center no-repeat"),cursor:"pointer"}),className:"modal__close",onClick:this.props.close,title:"Close"}),Object(h.a)("div",{css:{padding:"25px",height:"100%",width:"100%"},className:"modal__body"},Object(h.a)("table",{css:(e=this.props,{borderCollapse:"collapse",margin:"0",padding:"0",width:"100%",height:"90%",tr:{border:"1px solid ".concat(e.theme.borderColor.primary),display:"table",width:"100%",tableLayout:"fixed",th:{padding:"8px",fontSize:"12px",textAlign:"left"}}})},Object(h.a)("caption",{css:{fontSize:"20px",marginBottom:"15px",fontWeight:"bold",textAlign:"left"},className:"modal__title"},"Group Members"),Object(h.a)("thead",null,Object(h.a)("tr",null,Object(h.a)("th",{className:"name"},"Name"),Object(h.a)("th",{css:Object(k.a)({},"@media (min-width : 320px) and (max-width: 767px)",{width:"170px"}),className:"scope"},"Scope"),r)),Object(h.a)("tbody",{css:{height:"325px",overflowY:"auto",display:"block"},onScroll:this.handleScroll},i)))))}}]),a}(n.a.Component);Gn.contextType=fn;var Ln=Gn,Bn=function(){function e(t,a){Object(d.a)(this,e),this.membersRequest=null,this.userListenerId=(new Date).getTime(),this.membersRequest=a?(new o.CometChat.UsersRequestBuilder).setLimit(30).friendsOnly(t).setSearchKeyword(a).build():(new o.CometChat.UsersRequestBuilder).setLimit(30).friendsOnly(t).build()}return Object(u.a)(e,[{key:"fetchNextUsers",value:function(){return this.membersRequest.fetchNext()}},{key:"attachListeners",value:function(e){o.CometChat.addUserListener(this.userListenerId,new o.CometChat.UserListener({onUserOnline:function(t){e(t)},onUserOffline:function(t){e(t)}}))}},{key:"removeListeners",value:function(){o.CometChat.removeUserListener(this.userListenerId)}}]),e}(),Dn=a(25),Wn=function(e){return{border:"1px solid ".concat(e.theme.borderColor.primary),display:"table",width:"100%",tableLayout:"fixed",fontSize:"14px"}},zn=a(115),Fn=a.n(zn),Hn=a(116),Yn=a.n(Hn),Jn=function(e){var t,a,n=Object(s.useState)((function(){return!!e.members.find((function(t){return t.uid===e.user.uid}))})),i=Object(Dn.a)(n,2),r=i[0],o=i[1],c=function(e,t){var a=e.currentTarget.lastChild;if(a.scrollWidth<=a.clientWidth)return!1;t?a.setAttribute("title",a.textContent):a.removeAttribute("title")};return Object(h.a)("tr",{css:Wn(e)},Object(h.a)("td",{css:{padding:"8px",width:"100%"},className:"userinfo",onMouseEnter:function(e){return c(e,!0)},onMouseLeave:function(e){return c(e,!1)}},Object(h.a)("div",{css:{display:"inline-block",float:"left",width:"36px",height:"36px",marginRight:"8px"},className:"avatar"},Object(h.a)(v,{image:e.user.avatar,cornerRadius:"50%",borderColor:e.theme.color.secondary,borderWidth:"1px"}),Object(h.a)(A,{widgetsettings:e.widgetsettings,status:e.user.status,cornerRadius:"50%",borderColor:e.theme.color.darkSecondary,borderWidth:"1px"})),Object(h.a)("div",{css:{margin:"10px",width:"calc(100% - 50px)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},className:"name"},e.user.name)),Object(h.a)("td",{css:{padding:"8px",width:"50px"},className:"selection"},Object(h.a)("input",{css:(t=Fn.a,a=Yn.a,{display:"none"," + label":{display:"block",cursor:"pointer",background:"url(".concat(t,") right center / 16px no-repeat"),userSelect:"none",float:"right",padding:".625em"},"&:checked + label":{background:"url(".concat(a,") no-repeat right center"),backgroundSize:"16px"}}),type:"checkbox",checked:r,id:e.user.uid+"sel",onChange:function(t){var a=!0!==r;o(a),e.changed(e.user,a)}}),Object(h.a)("label",{htmlFor:e.user.uid+"sel"},"\xa0")))},Vn=function(e){var t=e.open?{display:"block"}:{};return Object(O.a)(Object(O.a)({minWidth:"350px",minHeight:"450px",width:"40%",height:"40%",overflow:"hidden",backgroundColor:"".concat(e.theme.backgroundColor.white),position:"fixed",left:"50%",top:"50%",transform:"translate(-50%, -50%)",zIndex:"1002",margin:"0 auto",boxShadow:"rgba(20, 20, 20, 0.2) 0 16px 32px, rgba(20, 20, 20, 0.04) 0 0 0 1px",borderRadius:"12px",display:"none"},t),{},Object(k.a)({},"@media (min-width : 320px) and (max-width: 767px)",{width:"100%",height:"100%"}))},Qn=function(e,t){return{width:"100%",border:"0",boxShadow:"rgba(20, 20, 20, 0.04) 0 0 0 1px inset",borderRadius:"8px",padding:"6px 8px 6px 35px",fontSize:"15px",outline:"none",color:"".concat(e.theme.color.primary),background:"url(".concat(t,") 10px center no-repeat ").concat(e.theme.backgroundColor.grey)}},qn=function(e){return Object(k.a)({height:"100%",overflowY:"auto",display:"block",tr:{border:"1px solid ".concat(e.theme.borderColor.primary),display:"table",width:"100%",tableLayout:"fixed"}},"@media (min-width : 320px) and (max-width: 767px)",{height:"100%"})},Kn=function(e){return{button:{cursor:"pointer",padding:"10px 20px",backgroundColor:"".concat(e.theme.backgroundColor.blue),borderRadius:"5px",color:"".concat(e.theme.color.white),fontSize:"14px",outline:"0",border:"0"},tr:{border:"none"},td:{textAlign:"center"}}},Xn=a(117),Zn=a.n(Xn),$n=a(118),ei=a.n($n),ti=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).decoratorMessage="Loading...",s.userUpdated=function(e){var t=Object(C.a)(s.state.userlist),a=t.findIndex((function(t,a){return t.uid===e.uid}));if(a>-1){var n=t[a],i=Object.assign({},n,e);t.splice(a,1,i),s.setState({userlist:t})}},s.handleScroll=function(e){Math.round(e.currentTarget.scrollHeight-e.currentTarget.scrollTop)===Math.round(e.currentTarget.clientHeight)&&s.getUsers()},s.searchUsers=function(e){s.timeout&&clearTimeout(s.timeout);var t=e.target.value;s.timeout=setTimeout((function(){s.AddMembersManager=new Bn(s.friendsOnly,t),s.setState({userlist:[],membersToAdd:[],membersToRemove:[]},(function(){return s.getUsers()}))}),500)},s.getUsers=function(){(new D).getLoggedInUser().then((function(e){s.AddMembersManager.fetchNextUsers().then((function(e){e.forEach((function(e){return s.setAvatar(e)}));var t=e.filter((function(e){var t=s.context.memberlist.find((function(t){return e.uid===t.uid})),a=s.context.bannedmemberlist.find((function(t){return e.uid===t.uid}));return!t&&!a}));0===t.length&&(s.decoratorMessage="No users found"),s.setState({userlist:[].concat(Object(C.a)(s.state.userlist),Object(C.a)(e)),filteredlist:[].concat(Object(C.a)(s.state.filteredlist),Object(C.a)(t))})})).catch((function(e){s.decoratorMessage="Error",console.error("[CometChatAddMembers] getUsers fetchNext error",e)}))})).catch((function(e){s.decoratorMessage="Error",console.log("[CometChatAddMembers] getUsers getLoggedInUser error",e)}))},s.membersUpdated=function(e,t){if(t){var a=Object(C.a)(s.state.membersToAdd);a.push(e),s.setState({membersToAdd:Object(C.a)(a)})}else{var n=Object(C.a)(s.state.membersToAdd),i=n.findIndex((function(t){return t.uid===e.uid}));i>-1&&(n.splice(i,1),s.setState({membersToAdd:Object(C.a)(n)}))}},s.updateMembers=function(){var e=s.context,t=s.props.item.guid,a=[];if(s.state.membersToAdd.forEach((function(t){if(-1===e.memberlist.findIndex((function(e){return e.uid===t.uid}))){var s=new o.CometChat.GroupMember(t.uid,o.CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT);a.push(s),t.type="add"}})),a.length){var n=[];o.CometChat.addMembersToGroup(t,a,[]).then((function(e){if(Object.keys(e).length){var t=function(t){if("success"===e[t]){var a=s.state.userlist.find((function(e){return e.uid===t}));a.scope=o.CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT,n.push(a)}};for(var a in e)t(a);s.props.actionGenerated("addGroupParticipants",n)}s.props.close()})).catch((function(e){console.log("addMembersToGroup failed with exception:",e)}))}},s.state={userlist:[],membersToAdd:[],filteredlist:[]},s}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e;(null===(e=this.props)||void 0===e?void 0:e.friendsOnly)&&(this.friendsOnly=this.props.friendsOnly),this.AddMembersManager=new Bn(this.friendsOnly),this.getUsers(),this.AddMembersManager.attachListeners(this.userUpdated)}},{key:"componentWillUnmount",value:function(){this.AddMembersManager.removeListeners(),this.AddMembersManager=null}},{key:"setAvatar",value:function(e){if(!e.getAvatar()){var t=e.getUid(),a=e.getName().charAt(0).toUpperCase();e.setAvatar(_.getAvatar(t,a))}}},{key:"render",value:function(){var e,t=this,a=this.context,s=null;0===this.state.filteredlist.length&&(s=Object(h.a)("caption",{css:{overflow:"hidden",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",height:"55%"},className:"members__decorator-message"},Object(h.a)("p",{css:(e=this.props,{margin:"0",height:"30px",color:"".concat(e.theme.color.secondary),fontSize:"24px!important",fontWeight:"600"}),className:"decorator-message"},this.decoratorMessage)));var i,r="",o=Object(C.a)(this.state.filteredlist).map((function(e,s){var i=e.name[0].toUpperCase(),o=null;return i!==r&&(o=r=i),Object(h.a)(n.a.Fragment,{key:e.uid},Object(h.a)(Jn,{theme:t.props.theme,firstLetter:o,loggedinuser:a.loggedinuser,user:e,members:a.memberlist,changed:t.membersUpdated,widgetsettings:t.props.widgetsettings}))}));return Object(h.a)(n.a.Fragment,null,Object(h.a)(Jt,{show:this.props.open,clicked:this.props.close}),Object(h.a)("div",{css:Vn(this.props),className:"modal__addmembers"},Object(h.a)("span",{css:(i=ei.a,{position:"absolute",width:"32px",height:"32px",borderRadius:"50%",top:"16px",right:"16px",background:"url(".concat(i,") center center no-repeat"),cursor:"pointer"}),className:"modal__close",onClick:this.props.close,title:"Close"}),Object(h.a)("div",{css:{padding:"25px",height:"100%",width:"100%"},className:"modal__body"},Object(h.a)("table",{css:{borderCollapse:"collapse",margin:"0",padding:"0",width:"100%",height:"80%"}},Object(h.a)("caption",{css:{fontSize:"20px",marginBottom:"15px",fontWeight:"bold",textAlign:"left"},className:"modal__title"},"Contacts"),Object(h.a)("caption",{css:{fontWeight:"normal",marginBottom:"15px"},className:"modal__search"},Object(h.a)("input",{type:"text",autoComplete:"off",css:Qn(this.props,Zn.a),className:"search__input",placeholder:"Search",onChange:this.searchUsers})),s,Object(h.a)("tbody",{css:qn(this.props),onScroll:this.handleScroll},o),Object(h.a)("tfoot",{css:Kn(this.props)},Object(h.a)("tr",null,Object(h.a)("td",{colSpan:"2",className:"addmembers"},Object(h.a)("button",{onClick:this.updateMembers},"Add"))))))))}}]),a}(n.a.Component);ti.contextType=fn;var ai=ti,si=function(e){return{border:"1px solid ".concat(e.theme.borderColor.primary),display:"table",width:"100%",tableLayout:"fixed",fontSize:"14px",td:{padding:".625em",img:{width:"36px",height:"36px",float:"left"}}}},ni=a(119),ii=a.n(ni),ri=function(e){var t={};t[o.CometChat.GROUP_MEMBER_SCOPE.ADMIN]="Administrator",t[o.CometChat.GROUP_MEMBER_SCOPE.MODERATOR]="Moderator",t[o.CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT]="Participant";var a=e.member.name,s=t[e.member.scope],n=Object(h.a)("img",{src:ii.a,alt:"Unban",onClick:function(){e.actionGenerated("unban",e.member)}});e.item.scope!==o.CometChat.GROUP_MEMBER_SCOPE.MODERATOR||e.member.scope!==o.CometChat.GROUP_MEMBER_SCOPE.ADMIN&&e.member.scope!==o.CometChat.GROUP_MEMBER_SCOPE.MODERATOR||(n=null),e.item.scope===o.CometChat.GROUP_MEMBER_SCOPE.ADMIN&&e.member.scope===o.CometChat.GROUP_MEMBER_SCOPE.ADMIN&&e.item.owner!==e.loggedinuser.uid&&(n=null);var i=function(e,t){var a=e.currentTarget.lastChild;if(a.scrollWidth<=a.clientWidth)return!1;t?a.setAttribute("title",a.textContent):a.removeAttribute("title")};return Object(h.a)("tr",{css:si(e)},Object(h.a)("td",{onMouseEnter:function(e){return i(e,!0)},onMouseLeave:function(e){return i(e,!1)}},Object(h.a)("div",{css:{display:"inline-block",float:"left",span:{top:"26px",left:"-8px"}},className:"avatar"},Object(h.a)(v,{image:e.member.avatar,cornerRadius:"18px",borderColor:e.theme.borderColor.primary,borderWidth:"1px"}),Object(h.a)(A,{widgetsettings:e.widgetsettings,status:e.member.status,cornerRadius:"50%",borderColor:e.theme.borderColor.primary,borderWidth:"1px"})),Object(h.a)("div",{css:{margin:"10px 0 0 0",width:"calc(100% - 50px)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},className:"name"},a)),Object(h.a)("td",{css:Object(k.a)({width:"150px",fontSize:"12px"},"@media (min-width : 320px) and (max-width: 767px)",{width:"115px"}),className:"role"},s),Object(h.a)("td",{css:{width:"70px",img:{width:"20px!important",height:"20px!important",cursor:"pointer"}},className:"unban"},n))},oi=function(e){var t=e.open?{display:"block"}:{};return Object(O.a)(Object(O.a)({minWidth:"350px",minHeight:"450px",width:"40%",height:"40%",overflow:"hidden",backgroundColor:"".concat(e.theme.backgroundColor.white),position:"fixed",left:"50%",top:"50%",transform:"translate(-50%, -50%)",zIndex:"1002",margin:"0 auto",boxShadow:"rgba(20, 20, 20, 0.2) 0 16px 32px, rgba(20, 20, 20, 0.04) 0 0 0 1px",borderRadius:"12px",display:"none"},t),{},Object(k.a)({},"@media (min-width : 320px) and (max-width: 767px)",{width:"100%",height:"100%"}))},ci=function(e){return{borderCollapse:"collapse",margin:"0",padding:"0",width:"100%",height:"90%",tr:{border:"1px solid ".concat(e.theme.borderColor.primary),display:"table",width:"100%",tableLayout:"fixed"},th:{padding:"8px",fontSize:"12px",textAlign:"left"}}},pi=a(120),li=a.n(pi),di=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).decoratorMessage="Loading...",s.unbanMember=function(e){var t=s.context.item.guid;o.CometChat.unbanGroupMember(t,e.uid).then((function(t){t&&(console.log("Group member unbanning success with response",t),s.props.actionGenerated("unbanGroupMembers",[e]))})).catch((function(e){console.log("Group member banning failed with error",e)}))},s.updateMembers=function(e,t){switch(e){case"unban":s.unbanMember(t)}},s.handleScroll=function(e){Math.round(e.currentTarget.scrollHeight-e.currentTarget.scrollTop)===Math.round(e.currentTarget.clientHeight)&&s.props.actionGenerated("fetchBannedMembers")},s.state={membersToBan:[],membersToUnBan:[]},s}return Object(u.a)(a,[{key:"render",value:function(){var e,t,a=this,s=this.context,i=Object(C.a)(s.bannedmemberlist).map((function(e,t){return Object(h.a)(ri,{theme:a.props.theme,key:t,member:e,item:a.props.item,loggedinuser:s.loggedinuser,widgetsettings:a.props.widgetsettings,actionGenerated:a.updateMembers})})),r=null;return 0===i.length&&(this.decoratorMessage="No banned members found",r=Object(h.a)("caption",{css:{overflow:"hidden",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",height:"55%"},className:"bannedmembers__decorator-message"},Object(h.a)("p",{css:(e=this.props,{margin:"0",height:"30px",color:"".concat(e.theme.color.secondary),fontSize:"24px!important",fontWeight:"600"}),className:"decorator-message"},this.decoratorMessage))),Object(h.a)(n.a.Fragment,null,Object(h.a)(Jt,{show:this.props.open,clicked:this.props.close}),Object(h.a)("div",{css:oi(this.props),className:"modal__addmembers"},Object(h.a)("span",{css:(t=li.a,{position:"absolute",width:"32px",height:"32px",borderRadius:"50%",top:"16px",right:"16px",background:"url(".concat(t,") center center no-repeat"),cursor:"pointer"}),className:"modal__close",onClick:this.props.close}),Object(h.a)("div",{css:{padding:"25px",height:"100%",width:"100%"},className:"modal__body"},Object(h.a)("table",{css:ci(this.props)},Object(h.a)("caption",{css:{fontSize:"20px",marginBottom:"15px",fontWeight:"bold",textAlign:"left"},className:"modal__title"},"Banned Members"),Object(h.a)("thead",null,Object(h.a)("tr",null,Object(h.a)("th",{className:"name"},"Name"),Object(h.a)("th",{css:Object(k.a)({width:"150px"},"@media (min-width : 320px) and (max-width: 767px)",{width:"115px"}),className:"role"},"Scope"),Object(h.a)("th",{css:{width:"70px"},className:"unban"},"Unban"))),r,Object(h.a)("tbody",{css:{height:"340px",overflowY:"auto",display:"block"},onScroll:this.handleScroll},i)))))}}]),a}(n.a.Component);di.contextType=fn;var ui=di,gi=function(e){return{padding:"19px 16px",position:"relative",borderBottom:"1px solid ".concat(e.theme.borderColor.primary),display:"flex",justifyContent:"flex-start",alignItems:"center"}},mi=function(e){return{margin:"0",width:"100%",fontSize:"12px",lineHeight:"20px",color:"".concat(e.theme.color.secondary),textTransform:"uppercase"}},hi=function(e,t){var a=t?{color:"".concat(e.theme.color.red)}:{};return Object(O.a)({fontSize:"15px",lineHeight:"20px",display:"inline-block",cursor:"pointer",fontWeight:"600"},a)},bi=a(121),fi=a.n(bi),vi=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).loggedInUser=null,s.groupUpdated=function(e,t,a,n){if(s.props.item.guid!==a.guid)return!1;switch(e){case"onUserOnline":case"onUserOffline":s.groupMemberUpdated(n.user);break;case"onMemberAddedToGroup":case"onGroupMemberJoined":var i=n.user;s.setAvatar(i);var r=Object.assign({},i,{scope:o.CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT});s.addParticipants([r],!1);break;case"onGroupMemberLeft":case"onGroupMemberKicked":var c=n.user;s.removeParticipants(c,!1);break;case"onGroupMemberBanned":var p=n.user;s.setAvatar(p),s.banMembers([p]),s.removeParticipants(p,!1);break;case"onGroupMemberUnbanned":var l=n.user;s.unbanMembers([l]);break;case"onGroupMemberScopeChanged":var d=n.user,u=Object.assign({},d,{scope:n.scope});s.updateParticipants(u)}},s.groupMemberUpdated=function(e){var t=Object(C.a)(s.state.memberlist),a=t.findIndex((function(t,a){return t.uid===e.uid}));if(a>-1){var n=t[a],i=Object.assign({},n,e);t.splice(a,1,i),s.setState({memberlist:t})}var r=Object(C.a)(s.state.bannedmemberlist),o=r.findIndex((function(t,a){return t.uid===e.uid}));if(o>-1){var c=r[o],p=Object.assign({},c,e);r.splice(o,1,p),s.setState({bannedmemberlist:r})}},s.getGroupMembers=function(){var e=[],t=[];(new D).getLoggedInUser().then((function(a){s.loggedInUser=a,s.GroupDetailManager.fetchNextGroupMembers().then((function(a){a.forEach((function(a){s.setAvatar(a),"admin"===a.scope&&e.push(a),"moderator"===a.scope&&t.push(a)})),s.setState({memberlist:[].concat(Object(C.a)(s.state.memberlist),Object(C.a)(a)),administratorslist:[].concat(Object(C.a)(s.state.administratorslist),e),moderatorslist:[].concat(Object(C.a)(s.state.moderatorslist),t)})})).catch((function(e){console.error("[CometChatGroupDetail] getGroupMembers fetchNextGroupMembers error",e)}))})).catch((function(e){console.log("[CometChatGroupDetail] getGroupMembers getLoggedInUser error",e)}))},s.getBannedGroupMembers=function(){if(s.props.item.scope===o.CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT)return!1;(new D).getLoggedInUser().then((function(e){s.GroupDetailManager.fetchNextBannedGroupMembers().then((function(e){e.forEach((function(e){return s.setAvatar(e)})),s.setState({bannedmemberlist:[].concat(Object(C.a)(s.state.bannedmemberlist),Object(C.a)(e))})})).catch((function(e){console.error("[CometChatGroupDetail] getGroupMembers fetchNextGroupMembers error",e)}))})).catch((function(e){console.log("[CometChatGroupDetail] getGroupMembers getLoggedInUser error",e)}))},s.deleteGroup=function(){var e=s.props.item.guid;o.CometChat.deleteGroup(e).then((function(e){console.log("Groups deleted successfully:",e),s.props.actionGenerated("groupDeleted",s.props.item)})).catch((function(e){console.log("Group delete failed with exception:",e)}))},s.leaveGroup=function(){var e=s.props.item.guid;o.CometChat.leaveGroup(e).then((function(e){console.log("Group left successfully:",e),s.props.actionGenerated("leftGroup",s.props.item)})).catch((function(e){console.log("Group leaving failed with exception:",e)}))},s.clickHandler=function(e,t){switch(e){case"viewmember":s.setState({viewMember:t});break;case"addmember":s.setState({addMember:t});break;case"banmember":s.setState({banMember:t})}},s.membersActionHandler=function(e,t){switch(e){case"banGroupMembers":s.banMembers(t);break;case"unbanGroupMembers":s.unbanMembers(t);break;case"addGroupParticipants":s.addParticipants(t);break;case"removeGroupParticipants":s.removeParticipants(t);break;case"updateGroupParticipants":s.updateParticipants(t);break;case"fetchGroupMembers":s.getGroupMembers();break;case"fetchBannedMembers":s.getBannedGroupMembers()}},s.banMembers=function(e){s.setState({bannedmemberlist:[].concat(Object(C.a)(s.state.bannedmemberlist),Object(C.a)(e))})},s.unbanMembers=function(e){var t=Object(C.a)(s.state.bannedmemberlist),a=[],n=t.filter((function(t){var s=e.find((function(e){return t.uid===e.uid}));return!s||(a.push(s),!1)}));s.props.actionGenerated("memberUnbanned",a),s.setState({bannedmemberlist:Object(C.a)(n)})},s.addParticipants=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=[].concat(Object(C.a)(s.state.memberlist),Object(C.a)(e));s.setState({memberlist:a}),s.props.actionGenerated("membersAdded",e),t&&s.props.actionGenerated("membersUpdated",s.props.item,a.length)},s.removeParticipants=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=Object(C.a)(s.state.memberlist),n=a.filter((function(t){return t.uid!==e.uid}));s.setState({memberlist:n}),t&&s.props.actionGenerated("membersUpdated",s.props.item,n.length)},s.updateParticipants=function(e){var t=Object(C.a)(s.state.memberlist),a=t.findIndex((function(t){return t.uid===e.uid}));if(a>-1){var n=t[a],i=Object.assign({},n,e,{scope:e.scope});t.splice(a,1,i),s.props.actionGenerated("memberScopeChanged",[i]),s.setState({memberlist:t})}},s.state={user:{},memberlist:[],bannedmemberlist:[],administratorslist:[],moderatorslist:[],viewMember:!1,addMember:!1,banMember:!1,addAdministrator:!1,addModerator:!1},s}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.setState({memberlist:[],administratorslist:[],moderatorslist:[],bannedmemberlist:[]});var e=this.props.item.guid;this.GroupDetailManager=new bn(e),this.getGroupMembers(),this.getBannedGroupMembers(),this.GroupDetailManager.attachListeners(this.groupUpdated)}},{key:"componentDidUpdate",value:function(e,t){if(e.item.guid!==this.props.item.guid){this.setState({memberlist:[],administratorslist:[],moderatorslist:[],bannedmemberlist:[]});var a=this.props.item.guid;this.GroupDetailManager.removeListeners(),this.GroupDetailManager=new bn(a),this.getGroupMembers(),this.getBannedGroupMembers(),this.GroupDetailManager.attachListeners(this.groupUpdated)}}},{key:"componentWillUnmount",value:function(){this.GroupDetailManager.removeListeners(),this.GroupDetailManager=null}},{key:"setAvatar",value:function(e){if(!e.avatar){var t=e.uid,a=e.name.charAt(0).toUpperCase();e.avatar=_.getAvatar(t,a)}}},{key:"render",value:function(){var e=this,t=Object(h.a)("div",{css:{position:"relative",display:"flex",clear:"both",width:"100%",padding:" 6px 0","&:first-of-type":{paddingTop:"0"},"&:last-of-type":{paddingBottom:"0"}},className:"content__item"},Object(h.a)("div",{css:hi(this.props,0),className:"item__link",onClick:function(){return e.clickHandler("viewmember",!0)}},"View Members")),a=null,s=null,n=null;this.props.item.scope===o.CometChat.GROUP_MEMBER_SCOPE.ADMIN&&(a=Object(h.a)("div",{css:{position:"relative",display:"flex",clear:"both",width:"100%",padding:" 6px 0","&:first-of-type":{paddingTop:"0"},"&:last-of-type":{paddingBottom:"0"}},className:"content__item"},Object(h.a)("div",{css:hi(this.props,0),className:"item__link",onClick:function(){return e.clickHandler("addmember",!0)}},"Add Members")),s=Object(h.a)("div",{css:{position:"relative",display:"flex",clear:"both",width:"100%",padding:" 6px 0","&:first-of-type":{paddingTop:"0"},"&:last-of-type":{paddingBottom:"0"}},className:"content__item"},Object(h.a)("span",{css:hi(this.props,1),className:"item__link",onClick:this.deleteGroup},"Delete and Exit"))),this.props.item.scope!==o.CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT&&(n=Object(h.a)("div",{css:{position:"relative",display:"flex",clear:"both",width:"100%",padding:" 6px 0","&:first-of-type":{paddingTop:"0"},"&:last-of-type":{paddingBottom:"0"}},className:"content__item"},Object(h.a)("div",{css:hi(this.props,0),className:"item__link",onClick:function(){return e.clickHandler("banmember",!0)}},"Banned Members")));var i=Object(h.a)("div",{css:{position:"relative",display:"flex",clear:"both",width:"100%",padding:" 6px 0","&:first-of-type":{paddingTop:"0"},"&:last-of-type":{paddingBottom:"0"}},className:"content__item"},Object(h.a)("span",{css:hi(this.props,0),className:"item__link",onClick:this.leaveGroup},"Leave Group")),r=Object(h.a)(rs,{theme:this.props.theme,containerHeight:"225px",item:this.props.item,type:this.props.type,widgetsettings:this.props.widgetsettings});this.props.hasOwnProperty("widgetsettings")&&this.props.widgetsettings&&this.props.widgetsettings.hasOwnProperty("main")&&(this.props.widgetsettings.main.hasOwnProperty("view_group_members")&&!1===this.props.widgetsettings.main.view_group_members&&this.props.widgetsettings.main.hasOwnProperty("allow_kick_ban_members")&&!1===this.props.widgetsettings.main.allow_kick_ban_members&&this.props.widgetsettings.main.hasOwnProperty("allow_promote_demote_members")&&!1===this.props.widgetsettings.main.allow_promote_demote_members&&(t=null),this.props.widgetsettings.main.hasOwnProperty("allow_add_members")&&!1===this.props.widgetsettings.main.allow_add_members&&(a=null),this.props.widgetsettings.main.hasOwnProperty("allow_kick_ban_members")&&!1===this.props.widgetsettings.main.allow_kick_ban_members&&(n=null),this.props.widgetsettings.main.hasOwnProperty("allow_delete_groups")&&!1===this.props.widgetsettings.main.allow_delete_groups&&(s=null),this.props.widgetsettings.main.hasOwnProperty("join_or_leave_groups")&&!1===this.props.widgetsettings.main.join_or_leave_groups&&(i=null),this.props.widgetsettings.main.hasOwnProperty("view_shared_media")&&!1===this.props.widgetsettings.main.view_shared_media&&(r=null));var c=Object(h.a)("div",{css:{width:"100%"},className:"section section__members"},Object(h.a)("h6",{css:mi(this.props),className:"section__header"},"Members"),Object(h.a)("div",{css:{width:"100%",margin:"6px 0","&:not(:last-of-type)":{marginBottom:"16px"}},className:"section__content"},t,a,n)),p=Object(h.a)("div",{css:{width:"100%"},className:"section section__options"},Object(h.a)("h6",{css:mi(this.props),className:"section__header"},"Options"),Object(h.a)("div",{css:{width:"100%",margin:"6px 0","&:not(:last-of-type)":{marginBottom:"16px"}},className:"section__content"},i,s));null===t&&null===a&&null===n&&(c=null),null===i&&null===s&&(p=null);var l=null;this.state.viewMember&&(l=Object(h.a)(Ln,{theme:this.props.theme,item:this.props.item,open:this.state.viewMember,close:function(){return e.clickHandler("viewmember",!1)},widgetsettings:this.props.widgetsettings,actionGenerated:this.membersActionHandler}));var d=null;this.state.addMember&&(d=Object(h.a)(ai,{theme:this.props.theme,item:this.props.item,open:this.state.addMember,close:function(){return e.clickHandler("addmember",!1)},widgetsettings:this.props.widgetsettings,actionGenerated:this.membersActionHandler}));var u,g,m=null;return this.state.banMember&&(m=Object(h.a)(ui,{theme:this.props.theme,item:this.props.item,open:this.state.banMember,close:function(){return e.clickHandler("banmember",!1)},widgetsettings:this.props.widgetsettings,actionGenerated:this.membersActionHandler})),Object(h.a)("div",{css:(g=this.props,{height:"100%",boxSizing:"border-box",fontFamily:"".concat(g.theme.fontFamily),"*":{boxSizing:"border-box",fontFamily:"".concat(g.theme.fontFamily)}}),className:"detailpane"},Object(h.a)(fn.Provider,{value:{memberlist:this.state.memberlist,bannedmemberlist:this.state.bannedmemberlist,administratorslist:this.state.administratorslist,moderatorslist:this.state.moderatorslist,loggedinuser:this.loggedInUser,item:this.props.item}},Object(h.a)("div",{css:gi(this.props),className:"detailpane__header"},Object(h.a)("div",{css:(u=fi.a,Object(k.a)({cursor:"pointer",display:"none",background:"url(".concat(u,") center center no-repeat"),width:"24px",height:"24px"},"@media (min-width : 320px) and (max-width: 767px)",{display:"block"})),className:"header__close",onClick:function(){return e.props.actionGenerated("closeDetailClicked")}}),Object(h.a)("h4",{css:{margin:"0",fontWeight:"700",fontSize:"20px"},className:"header__title"},"Details")),Object(h.a)("div",{css:{margin:"0",padding:"16px",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"flex-start",height:"calc(100% - 70px)"},className:"detailpane__section"},c,p,r),l,d,m))}}]),a}(n.a.Component),xi=function(e,t){var a=e.sidebarview?{left:"0",boxShadow:"rgba(0, 0, 0, .4) -30px 0 30px 30px"}:{};return Object(k.a)({width:"280px",borderRight:"1px solid ".concat(t.borderColor.primary),height:"100%",position:"relative",display:"flex",flexDirection:"column",".css-15jyeqi":{height:"calc(100% - 130px)"}},"@media (min-width : 320px) and (max-width: 767px)",Object(O.a)({position:"absolute!important",left:"-100%",top:"0",bottom:"0",width:"100%!important",zIndex:"2",backgroundColor:"".concat(t.backgroundColor.white),transition:"all .3s ease-out"},a))},wi=function(e){var t=e.threadmessageview||e.detailview?{width:"calc(100% - 680px)"}:{};return Object(O.a)(Object(O.a)({width:"calc(100% - 280px)",height:"100%",order:"2"},t),{},Object(k.a)({},"@media (min-width : 320px) and (max-width: 767px)",{width:"100%!important"}))},Oi=function(e){return Object(k.a)({float:"right",borderLeft:"1px solid ".concat(e.borderColor.primary),height:"100%",width:"400px",display:"flex",flexDirection:"column",order:"3"},"@media (min-width : 320px) and (max-width: 767px)",{position:"absolute!important",right:"0!important",top:"0",bottom:"0",width:"100%!important",zIndex:"2",backgroundColor:"".concat(e.backgroundColor.white)})},Ci=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).loggedInUser=null,s.changeTheme=function(e){var t=s.state.darktheme;s.setState({darktheme:!t})},s.itemClicked=function(e,t){s.toggleSideBar(),s.setState({item:Object(O.a)({},e),type:t,viewdetailscreen:!1})},s.actionHandler=function(e,t,a){for(var n,i,r=arguments.length,o=new Array(r>3?r-3:0),c=3;c<r;c++)o[c-3]=arguments[c];switch(e){case"blockUser":s.blockUser();break;case"unblockUser":s.unblockUser();break;case"audioCall":s.audioCall();break;case"videoCall":s.videoCall();break;case"menuClicked":s.toggleSideBar(),s.setState({item:{}});break;case"closeMenuClicked":s.toggleSideBar();break;case"viewDetail":case"closeDetailClicked":s.toggleDetailView();break;case"groupUpdated":(n=s).groupUpdated.apply(n,[t,a].concat(o));break;case"groupDeleted":s.deleteGroup(t);break;case"leftGroup":(i=s).leaveGroup.apply(i,[t].concat(o));break;case"membersUpdated":s.updateMembersCount(t,a);break;case"viewMessageThread":s.viewMessageThread(t);break;case"closeThreadClicked":s.closeThreadMessages();break;case"threadMessageComposed":s.onThreadMessageComposed(t);break;case"acceptIncomingCall":s.acceptIncomingCall(t);break;case"acceptedIncomingCall":s.callInitiated(t);break;case"rejectedIncomingCall":s.rejectedIncomingCall(t,a);break;case"outgoingCallRejected":case"outgoingCallCancelled":case"callEnded":s.outgoingCallEnded(t);break;case"userJoinedCall":case"userLeftCall":break;case"viewActualImage":s.toggleImageView(t);break;case"membersAdded":s.membersAdded(t);break;case"memberUnbanned":s.memberUnbanned(t);break;case"memberScopeChanged":s.memberScopeChanged(t)}},s.blockUser=function(){var e=[s.state.item.uid];D.blockUsers(e).then((function(e){s.setState({item:Object(O.a)(Object(O.a)({},s.state.item),{},{blockedByMe:!0})})})).catch((function(e){console.log("Blocking user fails with error",e)}))},s.unblockUser=function(){var e=[s.state.item.uid];D.unblockUsers(e).then((function(e){s.setState({item:Object(O.a)(Object(O.a)({},s.state.item),{},{blockedByMe:!1})})})).catch((function(e){console.log("unblocking user fails with error",e)}))},s.audioCall=function(){var e,t;"user"===s.state.type?(e=s.state.item.uid,t=o.CometChat.RECEIVER_TYPE.USER):"group"===s.state.type&&(e=s.state.item.guid,t=o.CometChat.RECEIVER_TYPE.GROUP),D.call(e,t,o.CometChat.CALL_TYPE.AUDIO).then((function(e){s.appendCallMessage(e),s.setState({outgoingCall:e})})).catch((function(e){console.log("Call initialization failed with exception:",e)}))},s.videoCall=function(){var e,t;"user"===s.state.type?(e=s.state.item.uid,t=o.CometChat.RECEIVER_TYPE.USER):"group"===s.state.type&&(e=s.state.item.guid,t=o.CometChat.RECEIVER_TYPE.GROUP),D.call(e,t,o.CometChat.CALL_TYPE.VIDEO).then((function(e){s.appendCallMessage(e),s.setState({outgoingCall:e})})).catch((function(e){console.log("Call initialization failed with exception:",e)}))},s.toggleSideBar=function(){var e=s.state.sidebarview;s.setState({sidebarview:!e})},s.toggleDetailView=function(){var e=!s.state.viewdetailscreen;s.setState({viewdetailscreen:e,threadmessageview:!1})},s.deleteGroup=function(e){s.setState({groupToDelete:e,item:{},type:"group",viewdetailscreen:!1})},s.leaveGroup=function(e){s.setState({groupToLeave:e,item:{},type:"group",viewdetailscreen:!1})},s.updateMembersCount=function(e,t){var a=Object.assign({},s.state.item,{membersCount:t});s.setState({item:a,groupToUpdate:a})},s.groupUpdated=function(e,t,a,n){switch(t){case"onGroupMemberBanned":case"onGroupMemberKicked":n.user.uid===s.loggedInUser.uid&&s.setState({item:{},type:"group",viewdetailscreen:!1});break;case"onGroupMemberScopeChanged":if(n.user.uid===s.loggedInUser.uid){var i=Object.assign({},s.state.item,{scope:n.scope});s.setState({item:i,type:"group",viewdetailscreen:!1})}}},s.closeThreadMessages=function(){s.setState({viewdetailscreen:!1,threadmessageview:!1})},s.viewMessageThread=function(e){var t=Object(O.a)({},e),a=Object(O.a)({},s.state.item);s.setState({threadmessageview:!0,threadmessageparent:t,threadmessageitem:a,threadmessagetype:s.state.type,viewdetailscreen:!1})},s.onThreadMessageComposed=function(e){if(s.state.type!==s.state.threadmessagetype)return!1;if("group"===s.state.threadmessagetype&&s.state.item.guid!==s.state.threadmessageitem.guid||"user"===s.state.threadmessagetype&&s.state.item.uid!==s.state.threadmessageitem.uid)return!1;var t=Object(O.a)({},e);s.setState({composedthreadmessage:t})},s.acceptIncomingCall=function(e){s.setState({incomingCall:e});var t=e.receiverType,a="user"===t?e.sender.uid:e.receiverId;o.CometChat.getConversation(a,t).then((function(e){s.itemClicked(e.conversationWith,t)})).catch((function(e){console.log("error while fetching a conversation",e)}))},s.callInitiated=function(e){s.appendCallMessage(e)},s.rejectedIncomingCall=function(e,t){var a=e.receiverType,n="user"===a?e.sender.uid:e.receiverId;!1===e.hasOwnProperty("readAt")&&o.CometChat.markAsRead(e.id,n,a),s.setState({messageToMarkRead:e});var i=s.state.item,r=s.state.type;a=t.receiverType,n=t.receiverId,("group"===r&&"group"===a&&n===i.guid||"user"===r&&"user"===a&&n===i.uid)&&s.appendCallMessage(t)},s.outgoingCallEnded=function(e){s.setState({outgoingCall:null,incomingCall:null}),s.appendCallMessage(e)},s.appendCallMessage=function(e){s.setState({callmessage:e})},s.toggleImageView=function(e){s.setState({imageView:e})},s.membersAdded=function(e){var t=[];e.forEach((function(e){var a={category:"action",message:"".concat(s.loggedInUser.name," added ").concat(e.name),type:"groupMember",sentAt:new Date/1e3|0};t.push(a)})),s.setState({groupmessage:t})},s.memberUnbanned=function(e){var t=[];e.forEach((function(e){var a={category:"action",message:"".concat(s.loggedInUser.name," unbanned ").concat(e.name),type:"groupMember",sentAt:new Date/1e3|0};t.push(a)})),s.setState({groupmessage:t})},s.memberScopeChanged=function(e){var t=[];e.forEach((function(e){var a={category:"action",message:"".concat(s.loggedInUser.name," made ").concat(e.name," ").concat(e.scope),type:"groupMember",sentAt:new Date/1e3|0};t.push(a)})),s.setState({groupmessage:t})},s.state={darktheme:!1,viewdetailscreen:!1,item:{},type:"group",tab:"groups",groupToDelete:{},groupToLeave:{},groupToUpdate:{},threadmessageview:!1,threadmessagetype:null,threadmessageitem:{},threadmessageparent:{},composedthreadmessage:{},incomingCall:null,outgoingCall:null,callmessage:{},sidebarview:!1,imageView:null,groupmessage:{}},s.theme=Object.assign({},Wa,s.props.theme),s}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;Object.keys(this.state.item).length||this.toggleSideBar(),(new D).getLoggedInUser().then((function(t){e.loggedInUser=t})).catch((function(e){console.log("[CometChatUnified] getLoggedInUser error",e)}))}},{key:"render",value:function(){var e,t=this,a=null;this.state.threadmessageview&&(a=Object(h.a)("div",{css:Oi(this.theme),className:"groups__secondary-view"},Object(h.a)(xs,{theme:this.theme,tab:this.state.tab,item:this.state.threadmessageitem,type:this.state.threadmessagetype,parentMessage:this.state.threadmessageparent,loggedInUser:this.loggedInUser,actionGenerated:this.actionHandler}))),this.state.viewdetailscreen&&(e=Object(h.a)("div",{css:Oi(this.theme),className:"groups__secondary-view"},Object(h.a)(vi,{theme:this.theme,item:this.state.item,type:this.state.type,actionGenerated:this.actionHandler})));var s=null;Object.keys(this.state.item).length&&(s=Object(h.a)(za,{theme:this.theme,item:this.state.item,tab:this.state.tab,type:this.state.type,composedthreadmessage:this.state.composedthreadmessage,callmessage:this.state.callmessage,groupmessage:this.state.groupmessage,loggedInUser:this.loggedInUser,actionGenerated:this.actionHandler}));var n,i=null;return this.state.imageView&&(i=Object(h.a)(Ws,{open:!0,close:function(){return t.toggleImageView(null)},message:this.state.imageView})),Object(h.a)("div",{css:(n=this.theme,{display:"flex",height:"100%",width:"100%",boxSizing:"border-box",fontFamily:"".concat(n.fontFamily),"*":{boxSizing:"border-box",fontFamily:"".concat(n.fontFamily)}}),className:"cometchat cometchat--groups"},Object(h.a)("div",{css:xi(this.state,this.theme),className:"groups__sidebar"},Object(h.a)(hn,{theme:this.theme,item:this.state.item,type:this.state.type,groupToDelete:this.state.groupToDelete,groupToLeave:this.state.groupToLeave,groupToUpdate:this.state.groupToUpdate,onItemClick:this.itemClicked,actionGenerated:this.actionHandler,enableCloseMenu:Object.keys(this.state.item).length})),Object(h.a)("div",{css:wi(this.state),className:"groups__main"},s),e,a,Object(h.a)(Ms,{theme:this.theme,actionGenerated:this.actionHandler}),Object(h.a)(Ns,{theme:this.theme,item:this.state.item,type:this.state.type,incomingCall:this.state.incomingCall,outgoingCall:this.state.outgoingCall,loggedInUser:this.loggedInUser,actionGenerated:this.actionHandler}),i)}}]),a}(n.a.Component),yi=function(){function e(){Object(d.a)(this,e),this.conversationRequest=null,this.conversationListenerId="chatlist_"+(new Date).getTime(),this.userListenerId="chatlist_user_"+(new Date).getTime(),this.groupListenerId="chatlist_group_"+(new Date).getTime(),this.callListenerId="chatlist_call_"+(new Date).getTime(),this.conversationRequest=(new o.CometChat.ConversationsRequestBuilder).setLimit(30).build()}return Object(u.a)(e,[{key:"fetchNextConversation",value:function(){return this.conversationRequest.fetchNext()}},{key:"attachListeners",value:function(e){o.CometChat.addUserListener(this.userListenerId,new o.CometChat.UserListener({onUserOnline:function(t){e("onUserOnline",t)},onUserOffline:function(t){e("onUserOffline",t)}})),o.CometChat.addGroupListener(this.groupListenerId,new o.CometChat.GroupListener({onGroupMemberScopeChanged:function(t,a,s,n,i){e("onGroupMemberScopeChanged",i,t,{user:a,scope:s})},onGroupMemberKicked:function(t,a,s,n){e("onGroupMemberKicked",n,t,{user:a,hasJoined:!1})},onGroupMemberBanned:function(t,a,s,n){e("onGroupMemberBanned",n,t,{user:a})},onGroupMemberUnbanned:function(t,a,s,n){e("onGroupMemberUnbanned",n,t,{user:a})},onMemberAddedToGroup:function(t,a,s,n){e("onMemberAddedToGroup",n,t,{user:a,hasJoined:!0})},onGroupMemberLeft:function(t,a,s){e("onGroupMemberLeft",s,t,{user:a})},onGroupMemberJoined:function(t,a,s){e("onGroupMemberJoined",s,t,{user:a})}})),o.CometChat.addMessageListener(this.conversationListenerId,new o.CometChat.MessageListener({onTextMessageReceived:function(t){e("onTextMessageReceived",null,t)},onMediaMessageReceived:function(t){e("onMediaMessageReceived",null,t)},onCustomMessageReceived:function(t){e("onCustomMessageReceived",null,t)},onMessageDeleted:function(t){e("onMessageDeleted",null,t)},onMessageEdited:function(t){e("onMessageEdited",null,t)}})),o.CometChat.addCallListener(this.callListenerId,new o.CometChat.CallListener({onIncomingCallReceived:function(t){e("onIncomingCallReceived",null,t)},onIncomingCallCancelled:function(t){e("onIncomingCallCancelled",null,t)}}))}},{key:"removeListeners",value:function(){o.CometChat.removeMessageListener(this.conversationListenerId),o.CometChat.removeUserListener(this.userListenerId),o.CometChat.removeGroupListener(this.groupListenerId),o.CometChat.removeCallListener(this.callListenerId)}}]),e}(),ji=function(e){var t=e.selectedConversation&&e.selectedConversation.conversationId===e.conversation.conversationId?{backgroundColor:"".concat(e.theme.backgroundColor.primary)}:{};return Object(O.a)(Object(O.a)({display:"flex",flexDirection:"row",justifyContent:"left",alignItems:"center",cursor:"pointer",width:"100%",padding:"10px 20px"},t),{},{"&:hover":{backgroundColor:"".concat(e.theme.backgroundColor.primary)}})},Ai=function(e){return{margin:"0",fontSize:"13px",width:"calc(100% - 50px)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:"20px",color:"".concat(e.theme.color.helpText)}},_i=function(e){return{fontSize:"11px",textTransform:"uppercase",color:"".concat(e.theme.color.helpText)}},ki=function(e){var t,a=null;if(e.conversation.lastMessage&&(a=Object(h.a)("span",{css:_i(e),className:"item__details__timestamp"},new Date(1e3*e.conversation.lastMessage.sentAt).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}))),"user"===e.conversation.conversationType){var s=e.conversation.conversationWith.status;t=Object(h.a)(A,{widgetsettings:e.widgetsettings,status:s,cornerRadius:"50%",borderColor:e.theme.color.darkSecondary,borderWidth:"1px"})}var n=function(e,t){var a=e.target;if(a.scrollWidth<=a.clientWidth)return!1;t?a.setAttribute("title",a.textContent):a.removeAttribute("title")};return Object(h.a)("div",{css:ji(e),className:"list__item",onClick:function(){return e.handleClick(e.conversation,e.conversationKey)}},Object(h.a)("div",{css:{display:"inline-block",width:"36px",height:"36px",flexShrink:"0"},className:"list__item__thumbnail"},Object(h.a)(v,{image:function(){var t;return"user"===e.conversation.conversationType?t=e.conversation.conversationWith.avatar:"group"===e.conversation.conversationType&&(t=e.conversation.conversationWith.icon),t}(),cornerRadius:"18px",borderColor:e.theme.color.secondary,borderWidth:"1px"}),t),Object(h.a)("div",{css:{width:"calc(100% - 45px)",flexGrow:"1",paddingLeft:"15px"},className:"list__item__details"},Object(h.a)("div",{css:{display:"flex",justifyContent:"space-between",alignItems:"baseline"},className:"item__details_block_one"},Object(h.a)("div",{css:{fontSize:"15px",fontWeight:"600",display:"block",width:"calc(100% - 60px)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},className:"item__details__name",onMouseEnter:function(e){return n(e,!0)},onMouseLeave:function(e){return n(e,!1)}},e.conversation.conversationWith.name),a),Object(h.a)("div",{css:{display:"flex",justifyContent:"space-between",alignItems:"baseline"},className:"item__details_block_two"},Object(h.a)("div",{css:Ai(e),className:"item__details__last-message",onMouseEnter:function(e){return n(e,!0)},onMouseLeave:function(e){return n(e,!1)}},function(){if(!e.conversation.lastMessage)return!1;var t=e.conversation.lastMessage,a=null;if(t.hasOwnProperty("deletedAt"))a=e.loggedInUser.uid===t.sender.uid?"\u26a0 You deleted this message.":"\u26a0 This message was deleted.";else switch(t.category){case"message":a=function(){var t="";switch(e.conversation.lastMessage.type){case o.CometChat.MESSAGE_TYPE.TEXT:t=e.conversation.lastMessage.text;break;case o.CometChat.MESSAGE_TYPE.MEDIA:t="Media message";break;case o.CometChat.MESSAGE_TYPE.IMAGE:t="\ud83d\udcf7 Image ";break;case o.CometChat.MESSAGE_TYPE.FILE:t="\ud83d\udcc1 File";break;case o.CometChat.MESSAGE_TYPE.VIDEO:t="\ud83c\udfa5 Video";break;case o.CometChat.MESSAGE_TYPE.AUDIO:t="\ud83c\udfb5 Audio";break;case o.CometChat.MESSAGE_TYPE.CUSTOM:t="Custom message"}return t}();break;case"call":a=function(){var t="";switch(e.conversation.lastMessage.type){case o.CometChat.MESSAGE_TYPE.VIDEO:t="Video call";break;case o.CometChat.MESSAGE_TYPE.AUDIO:t="Audio call"}return t}();break;case"action":a=function(){var t=e.conversation.lastMessage.message;if(e.config){var a=e.config.find((function(e){return e.action===t.action&&e.category===t.category}));a&&!1===a.enabled&&(t="")}return t}();break;case"custom":a="Custom Message"}return a}()),Object(h.a)(w,{theme:e.theme,count:e.conversation.unreadMessageCount}))))},Mi=function(e){return{padding:"19px 16px",display:"flex",alignItems:"center",borderBottom:"1px solid ".concat(e.color.darkSecondary)}},Si=function(e){var t=e.hasOwnProperty("enableCloseMenu")&&e.enableCloseMenu.length>0?{width:"33%",textAlign:"center"}:{};return Object(O.a)({margin:"0",display:"inline-block",width:"66%",textAlign:"left",fontSize:"20px"},t)},Ii=a(122),Ti=a.n(Ii),Ri=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).loggedInUser=null,s.decoratorMessage="Loading...",s.conversationUpdated=function(e,t,a,n){switch(e){case"onUserOnline":case"onUserOffline":s.updateUser(t);break;case"onTextMessageReceived":case"onMediaMessageReceived":case"onCustomMessageReceived":s.updateConversation(a);break;case"onMessageEdited":case"onMessageDeleted":s.conversationEditedDeleted(a);break;case"onIncomingCallReceived":case"onIncomingCallCancelled":s.updateConversation(a,!1);break;case"onMemberAddedToGroup":s.updateGroupMemberAdded(a,n);break;case"onGroupMemberKicked":case"onGroupMemberBanned":case"onGroupMemberLeft":s.updateGroupMemberRemoved(a,n);break;case"onGroupMemberScopeChanged":s.updateGroupMemberScopeChanged(a,n);break;case"onGroupMemberJoined":s.updateGroupMemberChanged(a,n,"increment");break;case"onGroupMemberUnbanned":s.updateGroupMemberChanged(a,n,"")}},s.updateUser=function(e){var t=Object(C.a)(s.state.conversationlist),a=t.findIndex((function(t){return"user"===t.conversationType&&t.conversationWith.uid===e.uid}));if(a>-1){var n=Object(O.a)({},t[a]),i=Object(O.a)(Object(O.a)({},n.conversationWith),{},{status:e.getStatus()}),r=Object(O.a)(Object(O.a)({},n),{},{conversationWith:i});t.splice(a,1,r),s.setState({conversationlist:t})}},s.playAudio=function(e){return!(s.props.hasOwnProperty("widgetsettings")&&s.props.widgetsettings&&s.props.widgetsettings.hasOwnProperty("main")&&(!1===s.props.widgetsettings.main.hasOwnProperty("enable_sound_for_messages")||s.props.widgetsettings.main.hasOwnProperty("enable_sound_for_messages")&&!1===s.props.widgetsettings.main.enable_sound_for_messages))&&(("action"!==e.category||"groupMember"!==e.type||!0!==Y(s.props.widgetsettings,"hide_join_leave_notifications"))&&(s.audio.currentTime=0,void s.audio.play()))},s.makeConversation=function(e){return new Promise((function(t,a){o.CometChat.CometChatHelper.getConversationFromMessage(e).then((function(e){var a=Object(C.a)(s.state.conversationlist),n=a.findIndex((function(t){return t.conversationId===e.conversationId})),i=Object(O.a)({},e);n>-1&&(i=Object(O.a)({},a[n])),t({conversationKey:n,conversationObj:i,conversationList:a})})).catch((function(e){return a(e)}))}))},s.makeUnreadMessageCount=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(0===Object.keys(e).length)return 1;var a=parseInt(e.unreadMessageCount);return s.state.selectedConversation&&s.state.selectedConversation.conversationId===e.conversationId||s.props.hasOwnProperty("item")&&s.props.item.hasOwnProperty("guid")&&e.conversationWith.hasOwnProperty("guid")&&s.props.item.guid===e.conversationWith.guid||s.props.hasOwnProperty("item")&&s.props.item.hasOwnProperty("uid")&&e.conversationWith.hasOwnProperty("uid")&&s.props.item.uid===e.conversationWith.uid?a=0:t&&"decrement"===t?a=a?a-1:0:a+=1,a},s.makeLastMessage=function(e){var t=Object.assign({},e);return t},s.updateConversation=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];s.makeConversation(e).then((function(a){var n=a.conversationKey,i=a.conversationObj,r=a.conversationList;if(n>-1){var o=s.makeUnreadMessageCount(i),c=s.makeLastMessage(e,i),p=Object(O.a)(Object(O.a)({},i),{},{lastMessage:c,unreadMessageCount:o});r.splice(n,1),r.unshift(p),s.setState({conversationlist:r}),t&&s.playAudio(e)}else{var l=s.makeUnreadMessageCount(),d=s.makeLastMessage(e),u=Object(O.a)(Object(O.a)({},i),{},{lastMessage:d,unreadMessageCount:l});r.unshift(u),s.setState({conversationlist:r}),t&&s.playAudio(e)}})).catch((function(e){console.log("This is an error in converting message to conversation",e)}))},s.conversationEditedDeleted=function(e){s.makeConversation(e).then((function(t){var a=t.conversationKey,n=t.conversationObj,i=t.conversationList;if(a>-1){var r=n.lastMessage;if(r.id===e.id){var o=Object.assign({},r,e),c=Object.assign({},n,{lastMessage:o});i.splice(a,1,c),s.setState({conversationlist:i})}}})).catch((function(e){console.log("This is an error in converting message to conversation",e)}))},s.updateGroupMemberAdded=function(e,t){s.makeConversation(e).then((function(a){var n=a.conversationKey,i=a.conversationObj,r=a.conversationList;if(n>-1){var c=s.makeUnreadMessageCount(i),p=s.makeLastMessage(e,i),l=Object(O.a)({},i.conversationWith),d=parseInt(l.membersCount)+1,u=Object(O.a)(Object(O.a)({},l),{},{membersCount:d}),g=Object(O.a)(Object(O.a)({},i),{},{conversationWith:u,lastMessage:p,unreadMessageCount:c});r.splice(n,1),r.unshift(g),s.setState({conversationlist:r}),s.playAudio(e)}else if(t&&s.loggedInUser.uid===t.user.uid){var m=s.setAvatar(i),h=s.makeUnreadMessageCount(),b=s.makeLastMessage(e),f=Object(O.a)({},i.conversationWith),v=parseInt(f.membersCount)+1,x=o.CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT,w=t.hasJoined,C=Object(O.a)(Object(O.a)({},f),{},{icon:m,membersCount:v,scope:x,hasJoined:w}),y=Object(O.a)(Object(O.a)({},i),{},{conversationWith:C,lastMessage:b,unreadMessageCount:h});r.unshift(y),s.setState({conversationlist:r}),s.playAudio(e)}})).catch((function(e){console.log("This is an error in converting message to conversation",e)}))},s.updateGroupMemberRemoved=function(e,t){s.makeConversation(e).then((function(a){var n=a.conversationKey,i=a.conversationObj,r=a.conversationList;if(n>-1)if(t&&s.loggedInUser.uid===t.user.uid)r.splice(n,1),s.setState({conversationlist:r});else{var o=s.makeUnreadMessageCount(i),c=s.makeLastMessage(e,i),p=Object(O.a)({},i.conversationWith),l=parseInt(p.membersCount)-1,d=Object(O.a)(Object(O.a)({},p),{},{membersCount:l}),u=Object(O.a)(Object(O.a)({},i),{},{conversationWith:d,lastMessage:c,unreadMessageCount:o});r.splice(n,1),r.unshift(u),s.setState({conversationlist:r}),s.playAudio(e)}})).catch((function(e){console.log("This is an error in converting message to conversation",e)}))},s.updateGroupMemberScopeChanged=function(e,t){s.makeConversation(e).then((function(a){var n=a.conversationKey,i=a.conversationObj,r=a.conversationList;if(n>-1){var o=s.makeUnreadMessageCount(i),c=s.makeLastMessage(e,i),p=Object(O.a)({},i.conversationWith),l=parseInt(p.membersCount),d=p.scope;t&&s.loggedInUser.uid===t.user.uid&&(d=t.scope);var u=Object(O.a)(Object(O.a)({},p),{},{membersCount:l,scope:d}),g=Object(O.a)(Object(O.a)({},i),{},{conversationWith:u,lastMessage:c,unreadMessageCount:o});r.splice(n,1),r.unshift(g),s.setState({conversationlist:r}),s.playAudio(e)}})).catch((function(e){console.log("This is an error in converting message to conversation",e)}))},s.updateGroupMemberChanged=function(e,t,a){s.makeConversation(e).then((function(n){var i=n.conversationKey,r=n.conversationObj,o=n.conversationList;if(i>-1&&t&&s.loggedInUser.uid!==t.user.uid){var c=s.makeUnreadMessageCount(r),p=s.makeLastMessage(e,r),l=Object(O.a)({},r.conversationWith),d=parseInt(l.membersCount);"increment"===a&&(d+=1);var u=Object(O.a)(Object(O.a)({},l),{},{membersCount:d}),g=Object(O.a)(Object(O.a)({},r),{},{conversationWith:u,lastMessage:p,unreadMessageCount:c});o.splice(i,1),o.unshift(g),s.setState({conversationlist:o}),s.playAudio(e)}})).catch((function(e){console.log("This is an error in converting message to conversation",e)}))},s.handleScroll=function(e){Math.round(e.currentTarget.scrollHeight-e.currentTarget.scrollTop)===Math.round(e.currentTarget.clientHeight)&&s.getConversations()},s.handleClick=function(e,t){s.props.onItemClick&&s.props.onItemClick(e.conversationWith,e.conversationType)},s.handleMenuClose=function(){if(!s.props.actionGenerated)return!1;s.props.actionGenerated("closeMenuClicked")},s.getConversations=function(){(new D).getLoggedInUser().then((function(e){s.loggedInUser=e,s.ConversationListManager.fetchNextConversation().then((function(e){0===e.length&&(s.decoratorMessage="No chats found"),e.forEach((function(e){"user"!==e.conversationType||e.conversationWith.avatar?"group"!==e.conversationType||e.conversationWith.icon||(e.conversationWith.icon=s.setAvatar(e)):e.conversationWith.avatar=s.setAvatar(e),s.props.hasOwnProperty("type")&&s.props.hasOwnProperty("item")&&s.props.type===e.conversationType&&("user"===e.conversationType&&s.props.item.uid===e.conversationWith.uid||"group"===e.conversationType&&s.props.item.guid===e.conversationWith.guid)&&(e.unreadMessageCount=0)})),s.setState({conversationlist:[].concat(Object(C.a)(s.state.conversationlist),Object(C.a)(e))})})).catch((function(e){s.decoratorMessage="Error",console.error("[CometChatConversationList] getConversations fetchNext error",e)}))})).catch((function(e){s.decoratorMessage="Error",console.log("[CometChatConversationList] getConversations getLoggedInUser error",e)}))},s.state={conversationlist:[],onItemClick:null,selectedConversation:void 0},s.chatListRef=n.a.createRef(),s.theme=Object.assign({},Wa,s.props.theme),s}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.audio=new Audio(Ea.a),this.ConversationListManager=new yi,this.getConversations(),this.ConversationListManager.attachListeners(this.conversationUpdated)}},{key:"componentDidUpdate",value:function(e){var t=this;if(JSON.stringify(e.item)!==JSON.stringify(this.props.item))if(0===Object.keys(this.props.item).length)this.chatListRef.scrollTop=0,this.setState({selectedConversation:{}});else{var a=Object(C.a)(this.state.conversationlist),s=a.find((function(e){return(e.conversationType===t.props.type&&"user"===t.props.type&&e.conversationWith.uid===t.props.item.uid||e.conversationType===t.props.type&&"group"===t.props.type&&e.conversationWith.guid===t.props.item.guid)&&e}));if(s){var n=a.indexOf(s),i=Object(O.a)(Object(O.a)({},s),{},{unreadMessageCount:0});a.splice(n,1,i),this.setState({conversationlist:a,selectedConversation:i})}}if(e.item&&Object.keys(e.item).length&&e.item.uid===this.props.item.uid&&e.item.blockedByMe!==this.props.item.blockedByMe){var r=Object(C.a)(this.state.conversationlist),o=r.findIndex((function(e,a){return"user"===e.conversationType&&e.conversationWith.uid===t.props.item.uid}));o>-1&&(r.splice(o,1),this.setState({conversationlist:r}))}if(e.groupToUpdate&&(e.groupToUpdate.guid!==this.props.groupToUpdate.guid||e.groupToUpdate.guid===this.props.groupToUpdate.guid&&(e.groupToUpdate.membersCount!==this.props.groupToUpdate.membersCount||e.groupToUpdate.scope!==this.props.groupToUpdate.scope))){var c=Object(C.a)(this.state.conversationlist),p=this.props.groupToUpdate,l=c.findIndex((function(e){return"group"===e.conversationType&&e.conversationWith.guid===p.guid}));if(l>-1){var d=c[l],u=Object(O.a)({},d.conversationWith),g=Object(O.a)(Object(O.a)({},u),{},{scope:p.scope,membersCount:p.membersCount}),m=Object(O.a)(Object(O.a)({},d),{},{conversationWith:g});c.splice(l,1,m),this.setState({conversationlist:c})}}if(e.messageToMarkRead!==this.props.messageToMarkRead){var h=this.props.messageToMarkRead;this.makeConversation(h).then((function(e){var a=e.conversationKey,s=e.conversationObj,n=e.conversationList;if(a>-1){var i=t.makeUnreadMessageCount(s,"decrement"),r=t.makeLastMessage(h,s),o=Object(O.a)(Object(O.a)({},s),{},{lastMessage:r,unreadMessageCount:i});n.splice(a,1),n.unshift(o),t.setState({conversationlist:n})}})).catch((function(e){console.log("This is an error in converting message to conversation",e)}))}if(e.lastMessage!==this.props.lastMessage){var b=this.props.lastMessage,f=Object(C.a)(this.state.conversationlist),v=f.findIndex((function(e){return e.conversationId===b.conversationId}));if(v>-1){var x=f[v],w=Object(O.a)(Object(O.a)({},x),{},{lastMessage:b});f.splice(v,1),f.unshift(w),this.setState({conversationlist:f})}}}},{key:"componentWillUnmount",value:function(){this.ConversationListManager.removeListeners(),this.ConversationListManager=null}},{key:"setAvatar",value:function(e){if("user"===e.conversationType&&!e.conversationWith.avatar){var t=e.conversationWith.uid,a=e.conversationWith.name.charAt(0).toUpperCase();return _.getAvatar(t,a)}if("group"===e.conversationType&&!e.conversationWith.icon){var s=e.conversationWith.guid,n=e.conversationWith.name.charAt(0).toUpperCase();return _.getAvatar(s,n)}}},{key:"render",value:function(){var e,t=this,a=this.state.conversationlist.map((function(e,a){return Object(h.a)(ki,{key:a,theme:t.theme,config:t.props.config,conversationKey:a,conversation:e,selectedConversation:t.state.selectedConversation,widgetsettings:t.props.widgetsettings,loggedInUser:t.loggedInUser,handleClick:t.handleClick})})),s=null;0===this.state.conversationlist.length&&(s=Object(h.a)("div",{css:{overflow:"hidden",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",top:"50%"},className:"chats__decorator-message"},Object(h.a)("p",{css:(e=this.theme,{margin:"0",height:"30px",color:"".concat(e.color.secondary),fontSize:"24px!important",fontWeight:"600"}),className:"decorator-message"},this.decoratorMessage)));var n,i=Object(h.a)("div",{css:(n=Ti.a,Object(k.a)({cursor:"pointer",display:"none",background:"url(".concat(n,") left center no-repeat"),height:"24px",width:"33%"},"@media (min-width : 320px) and (max-width: 767px)",{display:"block!important"})),className:"header__close",onClick:this.handleMenuClose});return(!this.props.hasOwnProperty("enableCloseMenu")||this.props.hasOwnProperty("enableCloseMenu")&&0===this.props.enableCloseMenu)&&(i=null),Object(h.a)("div",{css:{display:"flex",flexDirection:"column",height:"100%",boxSizing:"border-box","*":{boxSizing:"border-box"}},className:"chats"},Object(h.a)("div",{css:Mi(this.theme),className:"chats__header"},i,Object(h.a)("h4",{css:Si(this.props),className:"header__title"},"Chats"),Object(h.a)("div",null)),s,Object(h.a)("div",{css:{height:"calc(100% - 75px)",width:"100%",overflowY:"auto",margin:"0",padding:"0"},className:"chats__list",onScroll:this.handleScroll,ref:function(e){return t.chatListRef=e}},a))}}]),a}(n.a.Component),Ei=function(e,t){var a=e.sidebarview?{left:"0",boxShadow:"rgba(0, 0, 0, .4) -30px 0 30px 30px"}:{};return Object(k.a)({width:"280px",borderRight:"1px solid ".concat(t.borderColor.primary),height:"100%",position:"relative"},"@media (min-width : 320px) and (max-width: 767px)",Object(O.a)({position:"absolute!important",left:"-100%",top:"0",bottom:"0",width:"100%!important",zIndex:"2",backgroundColor:"".concat(t.backgroundColor.white),transition:"all .3s ease-out"},a))},Ui=function(e){var t=e.threadmessageview||e.detailview?{width:"calc(100% - 680px)"}:{};return Object(O.a)(Object(O.a)({width:"calc(100% - 280px)",display:"flex",flexDirection:"column",height:"100%",order:"2"},t),{},Object(k.a)({},"@media (min-width : 320px) and (max-width: 767px)",{width:"100%!important"}))},Ni=function(e){return Object(k.a)({float:"right",borderLeft:"1px solid ".concat(e.borderColor.primary),height:"100%",width:"400px",display:"flex",flexDirection:"column",order:"3"},"@media (min-width : 320px) and (max-width: 767px)",{position:"absolute!important",right:"0!important",top:"0",bottom:"0",width:"100%!important",zIndex:"2",backgroundColor:"".concat(e.backgroundColor.white)})},Pi=(n.a.Component,function(e){return{padding:"19px 16px",position:"relative",borderBottom:"1px solid ".concat(e.borderColor.primary)}}),Gi=function(e){return{fontSize:"13px",margin:"0",color:"".concat(e.color.blue)}},Li=function(e){return{margin:"5px 0",width:"100%",fontSize:"12px",color:"".concat(e.color.secondary),textTransform:"uppercase"}},Bi=function(e){return{width:"100%",padding:"15px 15px 15px 48px",fontWeight:600,background:"url(".concat(e,") 16px center no-repeat")}},Di=a(123),Wi=a.n(Di),zi=a(124),Fi=a.n(zi),Hi=a(125),Yi=a.n(Hi),Ji=a(126),Vi=a.n(Ji),Qi=a(127),qi=a.n(Qi),Ki=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).state={user:{}},s.theme=Object.assign({},Wa,s.props.theme),s}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getProfile()}},{key:"getProfile",value:function(){var e=this;(new D).getLoggedInUser().then((function(t){e.setAvatar(t),e.setState({user:t})})).catch((function(e){console.log("[CometChatUserInfoScreen] getProfile getLoggedInUser error",e)}))}},{key:"setAvatar",value:function(e){if(!e.getAvatar()){var t=e.getUid(),a=e.getName().charAt(0).toUpperCase();e.setAvatar(_.getAvatar(t,a))}}},{key:"render",value:function(){var e,t=null;return Object.keys(this.state.user).length&&(t=Object(h.a)(v,{image:this.state.user.avatar,cornerRadius:"50%",borderColor:"#CCC",borderWidth:"1px"})),Object(h.a)("div",{css:(e=this.theme,{display:"flex",flexDirection:"column!important",height:"calc(100% - 50px)",fontFamily:"".concat(e.fontFamily),"*":{boxSizing:"border-box",fontFamily:"".concat(e.fontFamily)}}),className:"userinfo"},Object(h.a)("div",{css:Pi(this.theme),className:"userinfo__header"},Object(h.a)("h4",{css:{margin:"0",fontWeight:"700",fontSize:"22px"},className:"header__title"},"More")),Object(h.a)("div",{css:{padding:"19px 16px",display:"flex",flexDirection:"row",justifyContent:"left",alignItems:"center"},className:"userinfo__detail"},Object(h.a)("div",{css:{display:"inline-block",width:"36px",height:"36px",flexShrink:"0"},className:"detail__thumbnail"},t),Object(h.a)("div",{css:{width:"calc(100% - 45px)",flexGrow:"1",paddingLeft:"15px"},className:"detail__user"},Object(h.a)("div",{css:{margin:"0",fontSize:"15px",fontWeight:"600",display:"block",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},className:"user__name"},this.state.user.name),Object(h.a)("p",{css:Gi(this.theme),className:"user__status"},"Online"))),Object(h.a)("div",{css:{height:"calc(100% - 196px)",overflowY:"auto",padding:"0 16px",display:"flex",flexDirection:"column",justifyContent:"left",alignItems:"flex-start"},className:"userinfo__options"},Object(h.a)("div",{css:Li(this.theme),className:"options__title"},"Preferences"),Object(h.a)("div",{css:{padding:"10px 0",width:"100%",fontSize:"15px"},className:"options_list"},Object(h.a)("div",{css:Bi(Wi.a),className:"option option-notification"},Object(h.a)("div",{css:{width:"100%"},className:"option_name"},"Notifications")),Object(h.a)("div",{css:Bi(Fi.a),className:"option option-privacy"},Object(h.a)("div",{css:{width:"100%"},className:"option_name"},"Privacy and Security")),Object(h.a)("div",{css:Bi(Yi.a),className:"option option-chats"},Object(h.a)("div",{css:{width:"100%"},className:"option_name"},"Chats"))),Object(h.a)("div",{css:Li(this.theme),className:"options__title"},"Other"),Object(h.a)("div",{css:{padding:"10px 0",width:"100%",fontSize:"15px"},className:"options_list"},Object(h.a)("div",{css:Bi(Vi.a),className:"option option-help"},Object(h.a)("div",{css:{width:"100%"},className:"option_name"},"Help")),Object(h.a)("div",{css:Bi(qi.a),className:"option option-report"},Object(h.a)("div",{css:{width:"100%"},className:"option_name"},"Report a Problem")))))}}]),a}(n.a.Component),Xi=function(e,t,a){var s=a?{background:"url(".concat(t,") center center / 20px 21px no-repeat")}:{};return Object(O.a)({width:"20px",height:"21px",display:"inline-block",background:"url(".concat(e,") center center / 20px 21px no-repeat")},s)},Zi=a(128),$i=a.n(Zi),er=a(129),tr=a.n(er),ar=a(130),sr=a.n(ar),nr=a(131),ir=a.n(nr),rr=a(132),or=a.n(rr),cr=a(133),pr=a.n(cr),lr=a(134),dr=a.n(lr),ur=a(135),gr=a.n(ur),mr=function(e){Object(g.a)(a,e);var t=Object(m.a)(a);function a(e){var s;return Object(d.a)(this,a),(s=t.call(this,e)).getDefaultComponent=function(){switch(s.props.tab){case"contacts":return Object(h.a)($a,{theme:s.props.theme,item:s.props.item,type:s.props.type,actionGenerated:s.props.actionGenerated,enableCloseMenu:s.props.enableCloseMenu,onItemClick:function(e,t){return s.props.actionGenerated("itemClicked",t,e)}});case"calls":return"calls";case"conversations":return Object(h.a)(Ri,{ref:s.sidebar,theme:s.props.theme,item:s.props.item,type:s.props.type,groupToUpdate:s.props.groupToUpdate,messageToMarkRead:s.props.messageToMarkRead,lastMessage:s.props.lastMessage,actionGenerated:s.props.actionGenerated,enableCloseMenu:s.props.enableCloseMenu,onItemClick:function(e,t){return s.props.actionGenerated("itemClicked",t,e)}});case"groups":return Object(h.a)(hn,{theme:s.props.theme,item:s.props.item,type:s.props.type,groupToLeave:s.props.groupToLeave,groupToDelete:s.props.groupToDelete,groupToUpdate:s.props.groupToUpdate,actionGenerated:s.props.actionGenerated,enableCloseMenu:s.props.enableCloseMenu,onItemClick:function(e,t){return s.props.actionGenerated("itemClicked",t,e)}});case"info":return Object(h.a)(Ki,{theme:s.props.theme,onItemClick:function(e,t){return s.props.actionGenerated("itemClicked",t,e)}});default:return null}},s.sidebar=n.a.createRef(),s}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t="conversations"===this.props.tab,a="contacts"===this.props.tab,s="groups"===this.props.tab,i="info"===this.props.tab;return Object(h.a)(n.a.Fragment,null,this.getDefaultComponent(),Object(h.a)("div",{css:{width:"100%",zIndex:"1"},className:"sidebar__footer"},Object(h.a)("div",{css:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-around"},className:"footer__navbar"},Object(h.a)("div",{css:{display:"inline-block",padding:"13px",cursor:"pointer"},className:"navbar__item",onClick:function(){return e.props.actionGenerated("tabChanged","conversations")}},Object(h.a)("span",{css:Xi($i.a,tr.a,t),className:"item__link item__link__chats"})),Object(h.a)("div",{css:{display:"inline-block",padding:"13px",cursor:"pointer"},className:"navbar__item",onClick:function(){return e.props.actionGenerated("tabChanged","contacts")}},Object(h.a)("span",{css:Xi(sr.a,ir.a,a),className:"item__link item__link__contacts"})),Object(h.a)("div",{css:{display:"inline-block",padding:"13px",cursor:"pointer"},className:"navbar__item",onClick:function(){return e.props.actionGenerated("tabChanged","groups")}},Object(h.a)("span",{css:Xi(or.a,pr.a,s),className:"item__link item__link__groups"})),Object(h.a)("div",{css:{display:"inline-block",padding:"13px",cursor:"pointer"},className:"navbar__item",onClick:function(){return e.props.actionGenerated("tabChanged","info")}},Object(h.a)("span",{css:Xi(dr.a,gr.a,i),className:"item__link item__link__info"})))))}}]),a}(n.a.Component),hr=function(e,t){var a=e.sidebarview?{left:"0",boxShadow:"rgba(0, 0, 0, .4) -30px 0 30px 30px"}:{};return Object(k.a)({width:"280px",borderRight:"1px solid ".concat(t.borderColor.primary),height:"100%",position:"relative",display:"flex",flexDirection:"column","> .contacts, .chats, .groups":{height:"calc(100% - 50px)"}},"@media (min-width : 320px) and (max-width: 767px)",Object(O.a)({position:"absolute!important",left:"-100%",top:"0",bottom:"0",width:"100%!important",zIndex:"2",backgroundColor:"".concat(t.backgroundColor.white),transition:"all .3s ease-out"},a))},br=function(e){var t=e.threadmessageview||e.detailview?{width:"calc(100% - 680px)"}:{};return Object(O.a)(Object(O.a)({width:"calc(100% - 280px)",height:"100%",order:"2"},t),{},Object(k.a)({},"@media (min-width : 320px) and (max-width: 767px)",{width:"100%!important"}))},fr=function(e){return Object(k.a)({float:"right",borderLeft:"1px solid ".concat(e.borderColor.primary),height:"100%",width:"400px",display:"flex",flexDirection:"column",order:"3"},"@media (min-width : 320px) and (max-width: 767px)",{position:"absolute!important",right:"0!important",top:"0",bottom:"0",width:"100%!important",zIndex:"2",backgroundColor:"".concat(e.backgroundColor.white)})},vr=(n.a.Component,a(21)),xr=a.n(vr),wr=a(26),Or={user:null,IsLoggedIn:!1,login:function(){var e=Object(wr.a)(xr.a.mark((function e(t){return xr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),logout:function(){}},Cr=n.a.createContext(Or),yr=(Cr.Consumer,function(e){var t=e.children,a=Object(l.g)(),s=n.a.useState(null),i=Object(Dn.a)(s,2),r=i[0],p=i[1],d=n.a.useState(),u=Object(Dn.a)(d,2),g=u[0],m=u[1];n.a.useEffect((function(){(function(){var e=Object(wr.a)(xr.a.mark((function e(){var t;return xr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.CometChat.getLoggedinUser();case 2:(t=e.sent)&&(p(t),m(!0));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var h=function(){var e=Object(wr.a)(xr.a.mark((function e(t){var s;return xr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=t,t?o.CometChat.createUser(r,c).then((function(e){console.log("user created",e),o.CometChat.login(s,c).then((function(e){p(e),m(!0),a.push("/message")})).catch((function(e){return console.log("Login failed with exception:",{error:e})}))})).catch((function(e){o.CometChat.login(s,c).then((function(e){p(e),m(!0),a.push("/message")})).catch((function(e){return console.log("Login failed with exception:",{error:e})}))})):a.push("/message");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(wr.a)(xr.a.mark((function e(){return xr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.CometChat.logout().then((function(e){p(null),m(!1),a.push("/")}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n.a.createElement(Cr.Provider,{value:{user:r,login:h,logout:b,IsLoggedIn:g}},t)}),jr=(a(198),function(){var e=n.a.useContext(Cr).logout;return n.a.createElement("div",{className:"wrapper"},n.a.createElement("div",{className:"button__container"},n.a.createElement("button",{className:"button",onClick:e},"LOGOUT")),n.a.createElement("div",{className:"chat__container"},n.a.createElement(Ci,null)))}),Ar=(a(199),a(200),function(){var e=n.a.useContext(Cr).login,t=n.a.useState(""),a=Object(Dn.a)(t,2),s=a[0],i=a[1],r=n.a.useState(!1),o=Object(Dn.a)(r,2),c=o[0],p=o[1],l=function(){var t=Object(wr.a)(xr.a.mark((function t(a){return xr.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),p(!0),console.log("isSubmitting",c),t.next=5,e(s);case 5:t.sent&&(p(!1),i(""));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=Object(wr.a)(xr.a.mark((function t(a){return xr.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(!0),t.next=3,e(a);case 3:t.sent&&p(!1);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),u=null;return c&&(u=n.a.createElement("div",{className:"loading"},"Loading...")),n.a.createElement("div",{className:"authContainer"},n.a.createElement("div",{className:"container"},u,n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-3"}),n.a.createElement("div",{className:"col-md-6"},n.a.createElement("form",{onSubmit:l},n.a.createElement("fieldset",null,n.a.createElement("legend",null,"Welcome to CometChatApp"),n.a.createElement("div",{className:"user__container"},n.a.createElement("div",{className:"user__block"},n.a.createElement("div",{className:"avatar__block",onClick:function(){d("superhero1")}},n.a.createElement("img",{src:"https://data-us.cometchat.io/assets/images/avatars/ironman.png",className:"rounded",alt:"..."})),n.a.createElement("label",null,"superhero1")),n.a.createElement("div",{className:"user__block"},n.a.createElement("div",{className:"avatar__block",onClick:function(){d("superhero2")}},n.a.createElement("img",{src:"https://data-us.cometchat.io/assets/images/avatars/captainamerica.png",className:"rounded",alt:"..."})),n.a.createElement("label",null,"superhero2")),n.a.createElement("div",{className:"user__block"},n.a.createElement("div",{className:"avatar__block",onClick:function(){d("superhero3")}},n.a.createElement("img",{src:"https://data-us.cometchat.io/assets/images/avatars/spiderman.png",className:"rounded",alt:"..."})),n.a.createElement("label",null,"superhero3"))),n.a.createElement("p",null,n.a.createElement("input",{className:"form-control",value:s,type:"text",placeholder:"Username",onChange:function(e){return i(e.target.value)}})),n.a.createElement("p",{className:"button__container"},n.a.createElement("button",{type:"submit",className:"button",variant:"secondary btn-action",size:"lg",disabled:c},"LOGIN ",c?n.a.createElement("i",{className:"fa fa-spinner fa-spin"}):null))))),n.a.createElement("div",{className:"col-md-3"}))))}),_r=a(139),kr=function(e){var t=e.isPrivate,a=Object(_r.a)(e,["isPrivate"]),s=n.a.useContext(Cr).IsLoggedIn;return s?t&&s?n.a.createElement(l.b,a):n.a.createElement(l.a,{to:"/"}):null};a(201);var Mr=function(){return n.a.createElement(p.a,null,n.a.createElement(yr,null,n.a.createElement(l.d,null,n.a.createElement(l.b,{path:"/",exact:!0,component:Ar}),n.a.createElement(kr,{path:"/message",isPrivate:!0,component:jr}))))},Sr=(a(202),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,204)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),i(e),r(e)}))}),Ir=(new o.CometChat.AppSettingsBuilder).subscribePresenceForAllUsers().setRegion("eu").build();o.CometChat.init("24984c06d507171",Ir).then((function(){console.log("Initialization completed successfully"),r.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(Mr,null)),document.getElementById("root"))})).catch((function(e){console.log("Initialization failed with error:",e)})),Sr(console.log)}]),[[140,1,2]]]);
//# sourceMappingURL=main.e360d1b2.chunk.js.map