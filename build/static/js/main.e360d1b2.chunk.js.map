{"version":3,"sources":["CometChat/components/SharedMediaView/resources/file-blue.svg","CometChat/resources/audio/incomingmessage.wav","CometChat/resources/audio/incomingothermessage.wav","CometChat/resources/audio/outgoingmessage.wav","CometChat/resources/audio/incomingcall.wav","CometChat/resources/audio/outgoingcall.wav","CometChat/components/Avatar/resources/1px.png","CometChat/components/MessageHeader/resources/menu-icon.svg","CometChat/components/MessageHeader/resources/call-blue-icon.svg","CometChat/components/MessageHeader/resources/video-call-blue-icon.svg","CometChat/components/MessageHeader/resources/details-pane-blue-icon.svg","CometChat/components/ToolTip/resources/reply.svg","CometChat/components/ToolTip/resources/delete-message.svg","CometChat/components/ToolTip/resources/edit.svg","CometChat/components/ReadReciept/resources/blue-double-tick-icon.png","CometChat/components/ReadReciept/resources/grey-double-tick-icon.png","CometChat/components/ReadReciept/resources/grey-tick-icon.png","CometChat/components/SenderImageBubble/resources/1px.png","CometChat/components/ReceiverImageBubble/resources/1px.png","CometChat/components/SenderFileBubble/resources/file-blue.svg","CometChat/components/ReceiverFileBubble/resources/file-blue.svg","CometChat/components/ReceiverPollBubble/resources/check.svg","CometChat/components/ReplyPreview/resources/clear.png","CometChat/components/CreatePollView/resources/remove.png","CometChat/components/CometChatCreatePoll/resources/add.png","CometChat/components/CometChatCreatePoll/resources/clear.svg","CometChat/components/MessageComposer/resources/rounded-plus-grey-icon.svg","CometChat/components/MessageComposer/resources/video_upload_icon.svg","CometChat/components/MessageComposer/resources/audio_upload_icon.svg","CometChat/components/MessageComposer/resources/document_upload_icon.svg","CometChat/components/MessageComposer/resources/images_upload_icon.svg","CometChat/components/MessageComposer/resources/insert_emoticon.svg","CometChat/components/MessageComposer/resources/send-blue-icon.svg","CometChat/components/MessageComposer/resources/poll.png","CometChat/components/MessageComposer/resources/clear.png","CometChat/components/CometChatUserList/resources/search-grey-icon.svg","CometChat/components/CometChatUserList/resources/navigate_before.svg","CometChat/components/CometChatUserDetail/resources/navigate_before.svg","CometChat/components/MessageThread/resources/clear.svg","CometChat/components/CallAlert/resources/incomingaudiocall.png","CometChat/components/CallAlert/resources/incomingvideocall.png","CometChat/components/CallScreen/resources/call-end-white-icon.svg","CometChat/components/ImageView/resources/ring.svg","CometChat/components/ImageView/resources/clear.svg","CometChat/components/CometChatCreateGroup/resources/clear.svg","CometChat/components/GroupView/resources/shield.svg","CometChat/components/GroupView/resources/lock.svg","CometChat/components/CometChatGroupList/resources/search-grey-icon.svg","CometChat/components/CometChatGroupList/resources/navigate_before.svg","CometChat/components/CometChatGroupList/resources/edit-blue-icon.svg","CometChat/components/MemberView/resources/create.svg","CometChat/components/MemberView/resources/done.svg","CometChat/components/MemberView/resources/clear.svg","CometChat/components/MemberView/resources/block.svg","CometChat/components/MemberView/resources/delete.svg","CometChat/components/CometChatViewMembers/resources/clear.svg","CometChat/components/AddMemberView/resources/checkbox-inactive.svg","CometChat/components/AddMemberView/resources/checkbox-blue-active.svg","CometChat/components/CometChatAddMembers/resources/search-grey-icon.svg","CometChat/components/CometChatAddMembers/resources/clear.svg","CometChat/components/BanMemberView/resources/block.svg","CometChat/components/CometChatBanMembers/resources/clear.svg","CometChat/components/CometChatGroupDetail/resources/navigate_before.svg","CometChat/components/CometChatConversationList/resources/navigate_before.svg","CometChat/components/CometChatUserInfoScreen/resources/notification-black-icon.svg","CometChat/components/CometChatUserInfoScreen/resources/privacy-black-icon.svg","CometChat/components/CometChatUserInfoScreen/resources/chat-black-icon.svg","CometChat/components/CometChatUserInfoScreen/resources/help-black-icon.svg","CometChat/components/CometChatUserInfoScreen/resources/report-black-icon.svg","CometChat/components/CometChatUnified/NavBar/resources/chat-grey-icon.svg","CometChat/components/CometChatUnified/NavBar/resources/chat-blue-icon.svg","CometChat/components/CometChatUnified/NavBar/resources/people-grey-icon.svg","CometChat/components/CometChatUnified/NavBar/resources/people-blue-icon.svg","CometChat/components/CometChatUnified/NavBar/resources/group-chat-grey-icon.svg","CometChat/components/CometChatUnified/NavBar/resources/group-chat-blue-icon.svg","CometChat/components/CometChatUnified/NavBar/resources/more-grey-icon.svg","CometChat/components/CometChatUnified/NavBar/resources/more-blue-icon.svg","constants/constants.js","CometChat/components/Avatar/index.js","CometChat/components/Avatar/style.js","CometChat/components/BadgeCount/style.js","CometChat/components/BadgeCount/index.js","CometChat/components/MessageHeader/controller.js","CometChat/util/enums.js","CometChat/components/StatusIndicator/style.js","CometChat/components/StatusIndicator/index.js","CometChat/util/svgavatar.js","CometChat/components/MessageHeader/style.js","CometChat/components/MessageHeader/index.js","CometChat/util/controller.js","CometChat/util/common.js","CometChat/components/MessageList/MessageFilter.js","CometChat/components/MessageList/controller.js","CometChat/components/ToolTip/style.js","CometChat/components/ToolTip/index.js","CometChat/components/ReplyCount/style.js","CometChat/components/ReplyCount/index.js","CometChat/components/ReadReciept/index.js","CometChat/components/ReadReciept/style.js","CometChat/components/SenderMessageBubble/style.js","CometChat/components/SenderMessageBubble/index.js","CometChat/components/ReceiverMessageBubble/style.js","CometChat/components/ReceiverMessageBubble/index.js","CometChat/components/SenderImageBubble/index.js","CometChat/components/SenderImageBubble/style.js","CometChat/components/ReceiverImageBubble/style.js","CometChat/components/ReceiverImageBubble/index.js","CometChat/components/SenderFileBubble/style.js","CometChat/components/SenderFileBubble/index.js","CometChat/components/ReceiverFileBubble/style.js","CometChat/components/ReceiverFileBubble/index.js","CometChat/components/SenderAudioBubble/index.js","CometChat/components/SenderAudioBubble/style.js","CometChat/components/ReceiverAudioBubble/style.js","CometChat/components/ReceiverAudioBubble/index.js","CometChat/components/SenderVideoBubble/index.js","CometChat/components/SenderVideoBubble/style.js","CometChat/components/ReceiverVideoBubble/style.js","CometChat/components/ReceiverVideoBubble/index.js","CometChat/components/DeletedMessageBubble/style.js","CometChat/components/DeletedMessageBubble/index.js","CometChat/components/SenderPollBubble/style.js","CometChat/components/SenderPollBubble/index.js","CometChat/components/ReceiverPollBubble/style.js","CometChat/components/ReceiverPollBubble/index.js","CometChat/components/CallMessage/style.js","CometChat/components/CallMessage/index.js","CometChat/components/MessageList/style.js","CometChat/components/MessageList/index.js","CometChat/components/ReplyPreview/style.js","CometChat/components/ReplyPreview/index.js","CometChat/components/Backdrop/index.js","CometChat/components/Backdrop/style.js","CometChat/components/CometChatCreatePoll/style.js","CometChat/components/CreatePollView/index.js","CometChat/components/CreatePollView/style.js","CometChat/components/CometChatCreatePoll/index.js","CometChat/components/MessageComposer/style.js","CometChat/components/MessageComposer/index.js","CometChat/resources/theme.js","CometChat/components/CometChatMessageListScreen/index.js","CometChat/components/CometChatMessageListScreen/style.js","CometChat/components/CometChatUserList/controller.js","CometChat/components/UserView/style.js","CometChat/components/UserView/index.js","CometChat/components/CometChatUserList/style.js","CometChat/components/CometChatUserList/index.js","CometChat/components/SharedMediaView/controller.js","CometChat/components/SharedMediaView/style.js","CometChat/components/SharedMediaView/index.js","CometChat/components/CometChatUserDetail/style.js","CometChat/components/CometChatUserDetail/index.js","CometChat/components/MessageThread/style.js","CometChat/components/MessageThread/index.js","CometChat/components/CallAlert/controller.js","CometChat/components/CallAlert/style.js","CometChat/components/CallAlert/index.js","CometChat/components/CallScreen/controller.js","CometChat/components/CallScreen/style.js","CometChat/components/CallScreen/index.js","CometChat/components/ImageView/style.js","CometChat/components/ImageView/index.js","CometChat/components/CometChatUserListScreen/style.js","CometChat/components/CometChatGroupList/controller.js","CometChat/components/CometChatUserListScreen/index.js","CometChat/components/CometChatCreateGroup/style.js","CometChat/components/CometChatCreateGroup/index.js","CometChat/components/GroupView/style.js","CometChat/components/GroupView/index.js","CometChat/components/CometChatGroupList/style.js","CometChat/components/CometChatGroupList/index.js","CometChat/components/CometChatGroupDetail/controller.js","CometChat/components/CometChatGroupDetail/context.js","CometChat/components/MemberView/style.js","CometChat/components/MemberView/index.js","CometChat/components/CometChatViewMembers/style.js","CometChat/components/CometChatViewMembers/index.js","CometChat/components/CometChatAddMembers/controller.js","CometChat/components/AddMemberView/style.js","CometChat/components/AddMemberView/index.js","CometChat/components/CometChatAddMembers/style.js","CometChat/components/CometChatAddMembers/index.js","CometChat/components/BanMemberView/style.js","CometChat/components/BanMemberView/index.js","CometChat/components/CometChatBanMembers/style.js","CometChat/components/CometChatBanMembers/index.js","CometChat/components/CometChatGroupDetail/style.js","CometChat/components/CometChatGroupDetail/index.js","CometChat/components/CometChatGroupListScreen/style.js","CometChat/components/CometChatGroupListScreen/index.js","CometChat/components/CometChatConversationList/controller.js","CometChat/components/ConversationView/style.js","CometChat/components/ConversationView/index.js","CometChat/components/CometChatConversationList/style.js","CometChat/components/CometChatConversationList/index.js","CometChat/components/CometChatConversationListScreen/style.js","CometChat/components/CometChatUserInfoScreen/style.js","CometChat/components/CometChatConversationListScreen/index.js","CometChat/components/CometChatUserInfoScreen/index.js","CometChat/components/CometChatUnified/NavBar/style.js","CometChat/components/CometChatUnified/NavBar/index.js","CometChat/components/CometChatUnified/style.js","CometChat/components/CometChatUnified/index.js","context/authcontext.js","components/Message/index.js","components/Login/index.js","constants/ProtectedRoute.js","components/App/index.js","reportWebVitals.js","index.js"],"names":["module","exports","AUTH_KEY","Avatar","props","imgRef","React","createRef","borderWidth","this","borderColor","cornerRadius","image","img","Image","src","onload","srcIcon","data-src","css","overflow","display","width","height","alt","style","borderStyle","ref","el","Component","badgeStyle","fontSize","borderRadius","backgroundColor","theme","blue","color","white","textAlign","fontWeight","lineHeight","marginLeft","padding","marginRight","opacity","transition","badgecount","count","className","MessageHeaderManager","userListenerId","Date","getTime","msgListenerId","groupListenerId","callback","CometChat","addUserListener","UserListener","onUserOnline","onlineUser","onUserOffline","offlineUser","addMessageListener","MessageListener","onTypingStarted","typingIndicator","onTypingEnded","addGroupListener","GroupListener","onGroupMemberKicked","message","kickedUser","kickedBy","kickedFrom","onGroupMemberBanned","bannedUser","bannedBy","bannedFrom","onMemberAddedToGroup","userAdded","userAddedBy","userAddedIn","onGroupMemberLeft","leavingUser","group","onGroupMemberJoined","joinedUser","joinedGroup","removeUserListener","removeMessageListener","removeGroupListener","presenceStyle","presenceStatus","status","top","float","position","statusindicator","hasOwnProperty","widgetsettings","main","SvgAvatar","getAvatar","generator","data","svg1","document","createElementNS","setAttribute","rect","stringToColour","text","textContent","appendChild","svgString","XMLSerializer","serializeToString","decoded","unescape","encodeURIComponent","base64","btoa","str","hash","i","length","charCodeAt","colour","toString","substr","chatSideBarBtnStyle","displayValue","sidebar","cursor","background","chatStatusStyle","state","type","textTransform","presence","helpText","includes","fontStyle","textOverflow","whiteSpace","chatOptionStyle","margin","MessageHeader","setStatusForUser","item","lastActiveAt","toLocaleTimeString","year","month","day","hour","minute","hour12","setState","setStatusForGroup","membersCount","updateHeader","key","groupUser","uid","guid","loggedInUser","parseInt","receiverType","receiverId","sender","name","toggleTooltip","event","flag","elem","target","scrollWidth","clientWidth","removeAttribute","attachListeners","prevProps","prevState","removeListeners","avatar","char","charAt","toUpperCase","StatusIndicator","primary","icon","onMouseEnter","onMouseLeave","audioCallBtn","onClick","actionGenerated","audioCallIcon","videoCallBtn","videoCallIcon","viewDetailBtn","detailPaneIcon","viewdetail","blockedByMe","audiocall","videocall","zIndex","borderBottom","flexDirection","justifyContent","alignItems","menuIcon","flexShrink","flexGrow","CometChatManager","timer","Promise","resolve","reject","isInitialized","isUserLoggedIn","setInterval","getLoggedinUser","then","user","clearInterval","error","console","log","blockUsers","userList","list","unblockUsers","call","receiverID","callType","Call","initiateCall","audioCall","videoCall","acceptCall","sessionId","rejectCall","rejectStatus","emailPattern","RegExp","urlPattern","phoneNumPattern","linkify","outputStr","replace","validateWidgetSettings","wSettings","checkAgainst","output","MessageFilter","categories","types","getCategories","widgetSettings","Object","keys","getTypes","MessageListManager","parentMessageId","messageRequest","limit","callListenerId","messageFilterManager","MessagesRequestBuilder","setUID","setParentMessageId","setCategories","setTypes","setLimit","build","hideReplies","setGUID","fetchPrevious","onTextMessageReceived","textMessage","onMediaMessageReceived","mediaMessage","onCustomMessageReceived","customMessage","onMessagesDelivered","messageReceipt","onMessagesRead","onMessageDeleted","deletedMessage","onMessageEdited","editedMessage","onGroupMemberScopeChanged","changedUser","newScope","oldScope","changedGroup","onGroupMemberUnbanned","unbannedUser","unbannedBy","unbannedFrom","addCallListener","CallListener","onIncomingCallReceived","onIncomingCallCancelled","onOutgoingCallAccepted","onOutgoingCallRejected","removeCallListener","messageActionStyle","topPos","alignment","messageFrom","alignSelf","listStyleType","border","groupButtonStyle","outline","Tooltip","dataset","title","threadedChats","replyIcon","data-title","replyCount","widgetconfig","category","deleteMessage","deleteIcon","editMessage","editIcon","MESSAGE_TYPE","TEXT","tooltip","replyCountStyle","textDecoration","replycount","replyText","replies","readreceipt","ticks","blueDoubleTick","sentAt","readAt","deliveredAt","greyDoubleTick","greyTick","receipt","timestamp","verticalAlign","messageTxtWrapperStyle","previewDataStyle","borderTop","previewTitleStyle","wordBreak","marginBottom","previewDescStyle","previewTextStyle","previewLinkStyle","messageTxtStyle","parsedMessage","emojiMessage","showVariation","emojiProp","zoom","SenderMessageBubble","getMessageText","messageText","formattedText","emojiParsedMessage","twemoji","parse","folder","ext","ReactHtmlParser","filter","assign","JSON","stringify","injectedObject","metadata","extensionsObject","linkPreviewObject","linkObject","linkText","match","actualMessage","boxShadow","backgroundSize","href","rel","paddingLeft","paddingRight","maxWidth","clear","ToolTip","flex","ReplyCount","ReadReciept","nameWrapperStyle","paddingValue","messagePreviewContainerStyle","secondary","messageTimestampStyle","ReceiverMessageBubble","getUid","getName","setAvatar","SenderImageBubble","chooseImage","thumbnailGenerationObject","smallUrl","imageToDownload","window","matchMedia","breakPoints","matches","setImage","addListener","imageUrl","downloadImage","response","url","URL","createObjectURL","revokeObjectURL","catch","open","fullScreenView","imgUrl","xhr","XMLHttpRequest","responseType","readyState","setTimeout","statusText","onerror","Error","ontimeout","send","Fragment","minWidth","ReceiverImageBubble","messageFileWrapper","senderfilebubble","attachments","blueFile","nameStyle","messageFileWrapperStyle","receiverfilebubble","senderaudiobubble","controls","receiveraudiobubble","sendervideobubble","receivervideobubble","messageContainerStyle","messageOf","messageWrapperStyle","Width","messageInfoWrapperStyle","messageTimeStampStyle","messageDetailStyle","paddingSpace","deletedmessagebubble","pollAnswerStyle","pollPercentStyle","curvedBorders","minHeight","SenderPollBubble","requestInProgress","pollOptions","pollExtensionData","pollId","id","total","results","totalText","option","options","optionData","vote","toLocaleString","template","wordWrap","push","question","messageThumbnailStyle","answerWrapperStyle","bgImg","txtPadding","countPadding","voters","ReceiverPollBubble","answerPollQuestion","selectedOption","callExtension","checkIcon","callMessageTxtStyle","CallMessage","getMessage","useCallback","CALL_STATUS","INITIATED","callInitiator","action","REJECTED","ONGOING","UNANSWERED","ENDED","CANCELLED","BUSY","chatListStyle","order","messageDateStyle","MessageList","lastScrollTop","times","decoratorMessage","scrollToBottom","scrollHeight","messagesEnd","scrollTop","getMessages","actionMessages","getLoggedInUser","fetchPreviousMessages","messageList","forEach","getSender","getReadAt","getReceiverType","markAsRead","getId","getReceiverId","messageUpdated","messageDeleted","messageEdited","messageReadAndDelivered","messageReceived","customMessageReceived","groupUpdated","callUpdated","getReceiver","messages","messageKey","findIndex","m","k","messageObj","newMessageObj","splice","getReceiptType","messageId","getDeliveredAt","newMessage","addMetadataToCustomData","customData","resultOptions","polls","handleScroll","e","currentTarget","Math","round","handleClick","onItemClick","getSenderMessageComponent","component","DeletedMessageBubble","IMAGE","FILE","SenderFileBubble","VIDEO","SenderVideoBubble","AUDIO","SenderAudioBubble","getReceiverMessageComponent","ReceiverFileBubble","ReceiverAudioBubble","ReceiverVideoBubble","getSenderCustomMessageComponent","getReceiverCustomMessageComponent","getCallMessageComponent","getActionMessageComponent","messageconfig","found","find","cfg","enabled","getComponent","previousMessageStr","currentMessageStr","messageContainer","cDate","map","dateSeparator","messageSentDate","toLocaleDateString","boxSizing","overflowX","overflowY","paddingTop","onScroll","PureComponent","previewWrapperStyle","keyframes","slideAnimation","animation","previewOptionStyle","grey","ReplyPreview","clicked","closeIcon","close","backdrop","show","left","modalWrapperStyle","transform","tableFootStyle","addOptionIconStyle","createpollview","autoFocus","autoComplete","placeholder","value","onChange","optionChangeHandler","removeIcon","removePollOption","CometChatCreatePoll","addPollOption","optionKey","opt","newOption","createPoll","questionRef","current","trim","firstOption","optionOneRef","secondOption","optionTwoRef","optionItems","optionRef","pollOptionView","index","CreatePollView","Backdrop","clearIcon","right","borderCollapse","tableLayout","colSpan","tabIndex","addIcon","editPreviewContainerStyle","previewCloseStyle","inputInnerStyle","messageInputStyle","disabled","disabledState","pointerEvents","maxHeight","userSelect","content","inputStickyStyle","filePickerStyle","active","showFilePicker","bottom","fileItemStyle","MessageComposer","playAudio","audio","currentTime","play","emojiClicked","emoji","element","messageInputRef","focus","pasteHtmlAtCaret","native","innerText","changeHandler","startTyping","messageInput","toggleFilePicker","currentState","openFileDialogue","fileType","imageUploaderRef","click","fileUploaderRef","audioUploaderRef","videoUploaderRef","onImageChange","files","uploadedFile","reader","FileReader","addEventListener","newFile","File","result","sendMediaMessage","readAsArrayBuffer","onFileChange","onAudioChange","onVideoChange","getReceiverDetails","RECEIVER_TYPE","USER","GROUP","messageType","messageSending","MediaMessage","endTyping","sendMessage","sendMessageOnEnter","keyCode","shiftKey","preventDefault","sendTextMessage","emojiViewer","messageToBeEdited","TextMessage","setId","closeEditPreview","isTyping","typingNotification","TypingIndicator","clearTimeout","toggleEmojiPicker","removeEventListener","handleOutsideClick","node","contains","toggleCreatePoll","closeCreatePoll","actionHandler","sendReplyMessage","replyPreview","clearReplyPreview","Audio","outgoingMessageAlert","html","selectPastedContent","sel","range","getSelection","parentnode","parentNode","querySelector","contentWindow","getRangeAt","rangeCount","deleteContents","createElement","innerHTML","lastNode","frag","createDocumentFragment","firstChild","firstNode","insertNode","cloneRange","setStartAfter","setStartBefore","collapse","removeAllRanges","addRange","selection","originalRange","createRange","pasteHTML","setEndPoint","select","emojiPicker","docs","docIcon","avp","videoIcon","accept","audioIcon","imageIcon","createPollBtn","pollIcon","emojiBtn","insertEmoticon","attach","roundedPlus","editPreview","smartReplyPreview","smartReplyObject","contentEditable","dir","onInput","onBlur","onKeyDown","sendBlue","fontFamily","darkSecondary","red","lightGrey","darkGrey","callScreenGrey","CometChatMessageListScreen","updateReplyCount","appendMessage","updateMessages","prependMessages","prependMessagesAndScrollBottom","removeMessages","clearEditPreview","updatePollMessage","appendPollMessage","poll","metadataObj","messagelist","concat","receivedMessage","incomingMessageAlert","composedthreadmessage","callmessage","groupmessage","messageComposer","UserListManager","friendsOnly","searchKey","userRequest","usersRequest","UsersRequestBuilder","setSearchKeyword","fetchNext","listItem","selectedState","selectedUser","userview","userPresence","clickeHandler","marginTop","contactHeaderStyle","contactHeaderTitleStyle","enableCloseMenu","contactSearchInputStyle","CometChatUserList","userUpdated","userlist","userKey","u","userObj","newUserObj","clientHeight","getUsers","handleMenuClose","searchUsers","timeout","val","fetchNextUsers","userListRef","currentLetter","users","chr","firstChar","UserView","closeBtn","navigateIcon","searchIcon","SharedMediaManager","messagetype","mediaMessageListenerId","mediaMessageRequest","setCategory","setType","sectionStyle","containerHeightProp","containerHeight","buttonStyle","activeBtn","itemStyle","itemTypeStyle","bgColor","objectFit","SharedMediaView","filteredMessages","mediaClickHandler","lazyLoad","IntersectionObserver","entries","observer","entry","isIntersecting","getAttribute","classList","add","disconnect","observe","fileIcon","data-id","flexWrap","userDetailStyle","headerStyle","sectionHeaderStyle","itemLinkStyle","deleteLink","deleteCss","CometChatUserDetail","blockUserText","blockUserView","sharedmediaView","parentMessageStyle","messageSeparatorStyle","MessageThread","parentMessage","getMessageComponent","seperator","fontWight","config","CallAlertManager","incomingCallWrapperStyle","slideDown","positionValue","leftPos","rightPos","bottomPos","zIndexValue","dockedview","launched","widgetWidth","widgetHeight","ButtonStyle","CallAlert","playIncomingAlert","incomingAlert","loop","pauseIncomingAlert","pause","callScreenUpdated","incomingCallReceived","incomingCallCancelled","incomingCall","getActiveCall","rejectedCall","markMessageAsRead","callInProgress","incomingCallAlert","callScreen","CallScreenManager","callScreenWrapperStyle","fadeAnimation","iconStyle","callAction","CallScreen","playOutgoingAlert","outgoingAlert","pauseOutgoingAlert","outgoingCallAccepted","outgoingCallRejected","outgoingCallScreen","startCall","errorMessage","errorScreen","receiver","callScreenFrame","getSessionId","OngoingCallListener","onUserJoined","callMessage","callReceiver","onUserLeft","onCallEnded","endedCall","showOutgoingScreen","cancelCall","outgoingCallAlert","outgoingCall","callIcon","imageWrapperStyle","ImageView","useRef","userScreenSidebarStyle","sidebarView","sidebarview","borderRight","userScreenMainStyle","secondaryView","threadmessageview","detailview","userScreenSecondaryStyle","borderLeft","GroupListManager","groupRequest","GroupsRequestBuilder","inputStyle","CometChatCreateGroup","passwordChangeHandler","password","nameChangeHandler","typeChangeHandler","validate","groupName","groupType","createGroup","GROUP_TYPE","PUBLIC","PRIVATE","PASSWORD","Group","passwordInput","selectedGroup","itemDescStyle","groupview","groupTypeIcon","shieldIcon","lockIcon","clickHandler","groupHeaderStyle","groupHeaderCloseStyle","groupHeaderTitleStyle","groupSearchInputStyle","CometChatGroupList","updateMemberChanged","updateMemberRemoved","updateMemberAdded","updateMemberJoined","grouplist","groupKey","g","groupObj","newgroupObj","hasJoined","scope","GROUP_MEMBER_SCOPE","PARTICIPANT","groupList","getGroups","prompt","joinGroup","groups","newGroupObj","searchGroup","markMessagesRead","getReadByMeAt","fetchNextGroups","createGroupHandler","createGroupActionHandler","groupListRef","groupToLeave","member","groupToDelete","groupToUpdate","GroupView","creategroup","GroupDetailManager","groupMemberRequest","bannedGroupMemberRequest","GroupMembersRequestBuilder","BannedMembersRequestBuilder","GroupDetailContext","createContext","memberlist","bannedmemberlist","administratorslist","moderatorslist","avatarStyle","participantView","displayProp","widthProp","actionColumnStyle","MemberView","showChangeScope","toggleChangeScope","scopeChangeHandler","updateMemberScope","nameContainer","lastChild","changeScopeDropDown","defaultValue","roles","ADMIN","MODERATOR","context","editClassName","changescope","ban","banIcon","kick","kickIcon","doneIcon","scopeIcon","owner","loggedinuser","editAccess","contextType","CometChatViewMembers","updateMembers","banMember","kickMember","changeScope","memberToBan","banGroupMember","memberToKick","kickGroupMember","updateGroupMemberScope","updatedMember","groupMembers","AddMembersManager","membersRequest","tableRowStyle","AddMemberView","inactiveStateImg","activeStateImg","useState","members","checked","setChecked","inactiveIcon","activeIcon","changed","htmlFor","searchInputStyle","tableBodyStyle","CometChatAddMembers","membersToAdd","membersToRemove","filteredUserList","foundbanned","filteredlist","membersUpdated","userState","IndexFound","membersList","newmember","newMember","GroupMember","addMembersToGroup","firstLetter","memberview","unBan","unban","modalTableStyle","CometChatBanMembers","unbanMember","memberToUnBan","unbanGroupMember","membersToBan","membersToUnBan","bannedMembers","BanMemberView","CometChatGroupDetail","groupMemberUpdated","addParticipants","removeParticipants","banMembers","unbanMembers","updateParticipants","memberKey","memberObj","newMemberObj","bannedMemberKey","bannedMemberObj","newBannedMemberObj","getGroupMembers","fetchNextGroupMembers","getBannedGroupMembers","fetchNextBannedGroupMembers","deleteGroup","leaveGroup","hasLeft","viewMember","addMember","membersActionHandler","unbannedMembers","filteredBannedMembers","bannedmember","triggerUpdate","groupmembers","filteredMembers","groupmember","addAdministrator","addModerator","viewMembersBtn","paddingBottom","addMembersBtn","deleteGroupBtn","bannedMembersBtn","leaveGroupBtn","viewMembers","addMembers","Provider","groupScreenSidebarStyle","groupScreenMainStyle","groupScreenSecondaryStyle","CometChatGroupListScreen","changeTheme","darktheme","itemClicked","toggleSideBar","viewdetailscreen","otherProps","blockUser","unblockUser","toggleDetailView","updateMembersCount","viewMessageThread","closeThreadMessages","onThreadMessageComposed","acceptIncomingCall","callInitiated","rejectedIncomingCall","outgoingCallEnded","toggleImageView","membersAdded","memberUnbanned","memberScopeChanged","usersList","CALL_TYPE","appendCallMessage","newObj","threaditem","threadmessageparent","threadmessageitem","threadmessagetype","composedMessage","getConversation","conversation","conversationWith","incomingCallMessage","rejectedCallMessage","messageToMarkRead","imageView","eachMember","tab","detailScreen","threadMessageView","messageScreen","ConversationListManager","conversationRequest","conversationListenerId","ConversationsRequestBuilder","selectedConversation","conversationId","itemLastMsgStyle","itemLastMsgTimeStyle","conversationview","lastMessageTimeStamp","lastMessage","conversationType","conversationKey","MEDIA","CUSTOM","getCallMessage","getActionMessage","getLastMessage","BadgeCount","unreadMessageCount","chatsHeaderStyle","chatsHeaderTitleStyle","CometChatConversationList","conversationUpdated","updateUser","updateConversation","conversationEditedDeleted","updateGroupMemberAdded","updateGroupMemberRemoved","updateGroupMemberScopeChanged","updateGroupMemberChanged","conversationlist","conversationObj","conversationWithObj","getStatus","newConversationObj","makeConversation","CometChatHelper","getConversationFromMessage","conversationList","c","makeUnreadMessageCount","operator","makeLastMessage","notification","lastMessageObj","unshift","newLastMessageObj","newConversationWithObj","getConversations","fetchNextConversation","undefined","chatListRef","incomingOtherMessageAlert","indexOf","convKey","convObj","convWithObj","newConvWithObj","newConvObj","ConversationView","chatScreenSidebarStyle","chatScreenMainStyle","chatScreenSecondaryStyle","userStatusStyle","optionTitleStyle","optionStyle","CometChatUserInfoScreen","getProfile","notificationIcon","privacyIcon","chatIcon","helpIcon","reportIcon","activeStateIcon","isActive","activeStateBg","Navbar","getDefaultComponent","chatsTabActive","userTabActive","groupsTabActive","moreTabActive","chatGreyIcon","chatBlueIcon","contactGreyIcon","contactBlueIcon","groupGreyIcon","groupBlueIcon","moreGreyIcon","moreBlueIcon","unifiedSidebarStyle","unifiedMainStyle","unifiedSecondaryStyle","defaultState","IsLoggedIn","login","username","a","logout","AuthContext","AuthProvider","Consumer","children","history","useHistory","setUser","setLoggedIn","useEffect","refresh","UID","createUser","Message","useContext","Login","setUsername","isSubmitting","setIsSubmitting","formsubmit","userLogin","loader","onSubmit","variant","size","ProtectedRoute","isPrivate","to","App","path","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","appSetting","AppSettingsBuilder","subscribePresenceForAllUsers","setRegion","init","ReactDOM","render","StrictMode","getElementById"],"mappings":"4JAAAA,EAAOC,QAAU,IAA0B,uC,qCCA3CD,EAAOC,QAAU,IAA0B,6C,gBCA3CD,EAAOC,QAAU,IAA0B,kD,gBCA3CD,EAAOC,QAAU,IAA0B,6C,gBCA3CD,EAAOC,QAAU,IAA0B,0C,gBCA3CD,EAAOC,QAAU,IAA0B,0C,eCA3CD,EAAOC,QAAU,0J,gBCAjBD,EAAOC,QAAU,IAA0B,uC,gBCA3CD,EAAOC,QAAU,IAA0B,4C,gBCA3CD,EAAOC,QAAU,IAA0B,kD,gBCA3CD,EAAOC,QAAU,IAA0B,oD,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,4C,gBCA3CD,EAAOC,QAAU,IAA0B,kC,cCA3CD,EAAOC,QAAU,slB,cCAjBD,EAAOC,QAAU,klB,cCAjBD,EAAOC,QAAU,8e,cCAjBD,EAAOC,QAAU,0J,cCAjBD,EAAOC,QAAU,0J,gBCAjBD,EAAOC,QAAU,IAA0B,uC,gBCA3CD,EAAOC,QAAU,IAA0B,uC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,cCA3CD,EAAOC,QAAU,kjB,cCAjBD,EAAOC,QAAU,8pB,cCAjBD,EAAOC,QAAU,0oG,gBCAjBD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,oD,gBCA3CD,EAAOC,QAAU,IAA0B,+C,gBCA3CD,EAAOC,QAAU,IAA0B,+C,gBCA3CD,EAAOC,QAAU,IAA0B,kD,gBCA3CD,EAAOC,QAAU,IAA0B,gD,gBCA3CD,EAAOC,QAAU,IAA0B,6C,gBCA3CD,EAAOC,QAAU,IAA0B,4C,cCA3CD,EAAOC,QAAU,s3B,cCAjBD,EAAOC,QAAU,kjB,gBCAjBD,EAAOC,QAAU,IAA0B,8C,gBCA3CD,EAAOC,QAAU,IAA0B,6C,gBCA3CD,EAAOC,QAAU,IAA0B,6C,gBCA3CD,EAAOC,QAAU,IAA0B,mC,cCA3CD,EAAOC,QAAU,kkC,cCAjBD,EAAOC,QAAU,s3B,gBCAjBD,EAAOC,QAAU,IAA0B,iD,gBCA3CD,EAAOC,QAAU,IAA0B,kC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0B,mC,gBCA3CD,EAAOC,QAAU,IAA0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","file":"static/js/main.e360d1b2.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/file-blue.ddac87bc.svg\";","module.exports = __webpack_public_path__ + \"static/media/incomingmessage.5f779bd8.wav\";","module.exports = __webpack_public_path__ + \"static/media/incomingothermessage.454c23e7.wav\";","module.exports = __webpack_public_path__ + \"static/media/outgoingmessage.7902164d.wav\";","module.exports = __webpack_public_path__ + \"static/media/incomingcall.86a6250d.wav\";","module.exports = __webpack_public_path__ + \"static/media/outgoingcall.989a71fe.wav\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEXx7OqhaJO7AAAAAXRSTlPM0jRW/QAAAApJREFUeJxjYgAAAAYAAzY3fKgAAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/menu-icon.55f68494.svg\";","module.exports = __webpack_public_path__ + \"static/media/call-blue-icon.368958cc.svg\";","module.exports = __webpack_public_path__ + \"static/media/video-call-blue-icon.6935c8e5.svg\";","module.exports = __webpack_public_path__ + \"static/media/details-pane-blue-icon.64e3a549.svg\";","module.exports = __webpack_public_path__ + \"static/media/reply.fd0d3a99.svg\";","module.exports = __webpack_public_path__ + \"static/media/delete-message.20174c75.svg\";","module.exports = __webpack_public_path__ + \"static/media/edit.65dfa0c8.svg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAFo9M/3AAAAAXNSR0IArs4c6QAAAWdJREFUOBHNUrtKA1EQPXeNRUDxgVqLQj7AjWjAwh8QKyvbuIIgVhYWNhYWdhFBkugPpLOwt7CwSEQLrTQI1roB44Os7nhm4YZdCyWg4MDsmTOzM3dm7gXiMlUWN84B9RjrcouyBQOJOMmmqg0mMJ5S0IjhrzfELmpQWzYZdUJEjGpEOv6wZNSKxagMScEYzDHU63RjIgxwzvOGO67+Swm2OYupeN1sSY650DzxSFFjxi3JXcpgxunDQ8tHc2wA6bqPV06h24NT88zoe4h7Bv10D4bqDTwqajAh2aLsqcNiIvin5McbzVUkHTRwwms642BrX/m3BbjLcbZ/RX3i4JnWC/pDwTWLNZWfLhrf0flyBzKoldW2ki3LPG19jBdVDyNvz5j+CFFn8qVyTdZ/ow64uR2+sXXy25SDWa7do62Pfp9tr0yWZIMnb1tObEtiBN7wLk9Y1ahxkK8umUOOUSFdsLyd+W+MTyDvnh60pF/jAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAFo9M/3AAAAAXNSR0IArs4c6QAAAWNJREFUOBFjYEAGEhISosh8BgaQCCNMSFJS0gTGZhARETECYbgAMgOuRUxMzAokwQhUGgGkmYD435s3b1aABBn+///PCMJgDskE0Mg0kCYYDTYGZOG/f//kmZiYWIFGr2NkZAx69erVIpJNp5IGmONgNIpfRUVFPVlZWe//+fNHnoWF5eGzZ89uMImLi0cBJXgcHBxYgD6Qtba2vg3yEUgS5CiwCVDj/gkICCz++PFjND8//9I7d+78RHE10BQbkACMRpGkKYeZkOkgz3379s2fm5tb6OvXr4/R+SjBhG6YiooK34cPH8KAcfyLj49vJVCeHRgIocC4/g3iwwNCQUGBA2QysgHAFK0ACj1gQgkApT0pKSk5ZD5MLdgFwLiw+Pv3rx5Q8BPQ9C3ASNL4/fu3EZB97fXr10eAIWsINMQUxodpBtEoXgDaZg2MRG2QBBsb2yFQZAINdwEargTjg+QGFwAAd+eJSUtUxzMAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAFo9M/3AAAAAXNSR0IArs4c6QAAARdJREFUOBFjYEAGIiIiUQg+kBeB4EFZYmJiVnDB////M8I5WBmSkpImIAkmmCxQy0MYmwFogxGcQxYDaEIaTCPcKSA3/vv3T56JiYn11atXi2AKBopGdiQLuiNERUU9WVlZD8HEwSElLi4eBZTgcXBwYAGGmOyzZ89uwBTAvQk19p+AgMDiO3fu/IQpQKGBptigCNCFw0ysLSAPfvv2zZ+bm1vo69evj2H64OkFJoCNVlFR4bty5UoCUI6Xj4/vLDY1YDEFBQUOkE3ICiQkJBRAIQhMLAHY0jE8mEGagPFh8ffvXz0g8xMjI+MWFhYWjd+/fxsB2ddev359BNlgGBvFAJgg0DZrYNLUBvHZ2NgOIUcsTM3goQFXzEj1uzh+EwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEXx7OqhaJO7AAAAAXRSTlPM0jRW/QAAAApJREFUeJxjYgAAAAYAAzY3fKgAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEXx7OqhaJO7AAAAAXRSTlPM0jRW/QAAAApJREFUeJxjYgAAAAYAAzY3fKgAAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/file-blue.ddac87bc.svg\";","module.exports = __webpack_public_path__ + \"static/media/file-blue.ddac87bc.svg\";","module.exports = __webpack_public_path__ + \"static/media/check.dc756be3.svg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAABOwAAATsBH99vcQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAEPSURBVEiJ7ZLBTQNBDEW/0biESJSQw6YFBEsPFhHbA5TCBVEBq2haQOwhLSQHSoi0JXhW5rIjRcjZ2QMICfJPo/H4fY9t4Kw/L/Iu27ZdAngJIaxF5DAFiDEuVHVjZo9N0+y+xi+8JDN7NrPrlNJbjHExBU8pdQBqInry3rgGzHwHYGdmlapuY4yXJyp/N7MKwAcz33sst0XHAACrEXCT2zUVm21wCgRgmAsvGmSTlFJnZhUR7QEgn0MItYj0U/lFA+cnmFN5ljvk71TR4GgVV0S0H9u0LK1w1u8N+UfXdA5grok7A1XdYOw5M195iSLSM/Ntnomqvnos12AYhgcAXWnPRaQPIdQAujHnrP+oT+34zIhNCdZaAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAFqADAAQAAAABAAAAFgAAAAA/6RFgAAABVUlEQVQ4Ea2VzUoCURSAr1qhi14gN0mLDETCCmrZyl24cR9EK9dBb9Jz9B7B2B8VRJRRa0FIIcm+M3FtZjgz5u0e+Ljec8/55qBzMWdmxMSYVUrqUIYveIduzphX1vkCWQGOIYBJChfkDyH/JzuFNbiFNGEy36V2PVNOQRMGc0jtQ/r07KtyDuqO0qi8GpMjXIQHsEWu6zWOwlTOpuNBaoc5iorvPYovQzHCDY9SO3VF3sHGdHR/HxoLuFYU34jcAfSUs2hqjc05iCcaZUloN+eTvFxdIStKHI4hKc5LQmteJn8DrvEm0/78iq4Kve8qTPNWPHl8M+5Ear/fM/3BTtlfF9MW4cXD1I84lmLjkNiF0T/kH/Rux6R2w0HbUT6kr2U96krBHvTAXs9Z6zO1O6osmaSwBKeQ9QARnkAx2S97/hOzg8YtKjZBrj7b8EIFNAZ8To1vlTPgMjYmAh4AAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAABLCAYAAAA4TnrqAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAS6ADAAQAAAABAAAASwAAAACnw0WBAAAIxUlEQVR4Ae1ca2wc1RW+Z+5uDEkcCgmopa0KakNMK1WQJoVW/dE2RDwbQpACXjuBOLYlJCCt+qc0oU0LVaX+aqnUSl6nIYkfgEggLU2BEPhTiQLl0R9QO0LgprwqmUdeRrb3zul3ZjX27uzs7uzO7KzX2ZHsuffcc88595v7PPfeJVWHZ/Me/nxmyqxSTG3K4ja2+RIitRTxJaxUqyJ1Nik1gfBJYj4BE8cV0SgrGlXEI4tYv9jfQ/+L23TYVPvnrkPcMv6euday1VomXsOsVoTWSup1GH+EmA4vWqmf6ltF06FllhFQU7A60nwlK3ObYnULKz63jC1VJ5OicSY1nLD03n1b6Z9VCyqTMXKwmJk6+s06gLMDIK0qoz/yZDTn58mi+wa3Jv4WtfBIwerclVlnbL4PIH09akMrlYeCvWJZavtAd/LJSvMW448ErNt380VTGfN71KobiimqF52IDpDS2wZ76J2wNlhhBDhNLm1+PDlt3piLQEnZYNcG9JsjHX3mrjBllbxV1ywM/0unJ80emHN9WCNiy0/0WEtCdz24hT6pRmdVYHXs5tV2xuzHZ/tiNUrrm4fGkpbesLebXq3UjorB6uyfvsZmehTVe1GlyuYKP/qxk0R802B38kglNlXUZ6X6Mh22TX9uZKAEHNjfig9+qLMvs7ESsALXLAEKE7990BQ4TyWG1IMXk1kbtaV9oDfxSBD9gQqe6pu+GmPBXzDRTAYR2lA8RFMW8XVBmmRZsKQz54x5rtGbXqkPKH2YpfV3B7rolZJ8pRK39vN5E2xea8xRr1TJ/NJorCWpLy81rSjawaMm0aeMeVRDTg/8wChHc1YhD5biKgpWKm3/CIDNueVLqcKETUN5b0ylzd3F5Pj2Wal+/pKysYRRvLBYxvlKR/91ukXrS3d30X+9ZfStWWybB85EoAQcGcgmM+YBL1ASLwCrvT/zA2RZ58ccD40m8XXfghvZxKOvUAsqyvpUOnOdN6UALCX+qDo9pKx7VyzXi4d6El9OtOhzANof62QKXHJ8v1d3Xp/lOO8MH/QyxREHME8AJNTq2UdG5I505gVsXKyepcYX0hbdMNCd+KurMa9m2TZvdxPifmMRVfCRACCTZT0Wty2uPnh973XD8p4Ba9Of+ArsunwzNzHOMJYcx/z0YStszI8eE+0KWcG4umbAMga7MPV84M70VV+M7sscPRFLvRlcHLB2PsIL0C/cEr2qxpcIXNoFHymJA9bR4+ZaTDDOa/yi1aAEwOXNk+aaGbAQWFsDNfNGpG2y+GT7LOY186ZkNSiIHDkQsVbXLr4Q7bKtBjrmj0hWl3bu489ZUwqnWZpPeQSmzGoLk+RmrSoPFcY/agNY3AQrEFjchg6eLwnA22QBTgmgsCxqJLDF9Jyy6CBW7v+BbP+ZuUepvVD/y0Nyogu0/jvc24FcRjgsl2CLLlJsb8TS7Uo/eSFoy6g9nXkXDfLCEELysqKq/nKwN/nzPGIdIvBH/QFdzB2RqSZ6z4KPpjUygYqOL+9J/CI6edVLorP1T+BAxKwomkdwsiAtMj87KT66k8iOxrxwUgY76QSg+iCclNncgpPUrIlZUsgQ0fKdzNlVQUhRYbN3DPAS+Mg+G1aOm19wkpp10iWEfaOP+MzR/szPwsqJJP+E+Y1MjiKRBSGCE6XS0yORHLXOscoZDYkex5rqGMiBRkO1UD8/nKLxHDFOUJZjGA2/4aX7xXNGw1ujdmTiYO+oTB3EwPDn0nOsx5The/iq+MshlglaE5mrwHLEyzZlzHfwXR/20v3iTmdpV6DUT0hx2rgsd0aLpzdTXAQEJwvD64hLaL6LI2BZAEtb3KxZxTGaScGUbcTCFY4XZyjNQHEEFuiXLJxH+gDj6xvFuZopgs/AJnrfmUAyUcEo1IQoFwF6VmLZ2Tapw7lJzXA+AliTPC0UB6wVS/RT2Cr/MJ+lGXMQIPpI8JGwA9bOjTSFCeRwE55CBNBfDTv4uGAJi9Z6TyFrfBRc6T3fT5tt0QV+9LholJjFJdtnQbPcAJWLjXEZUaDHZl/PJhbn3y7gjYkAPP4xuIVectXNgJUlUMEBLpex1m/UrN5NuzhvW05O38EnVbczGBbl44Emmf/gNsXLWIquzKfGFMNtB4BzCN6KMdzo+Bq0XhWlm6WiUpB6dbgnmYeDeB3yHrkqa2wV+f3iPCXFIuyc5lmf9VbUzHtQTHseHW6mHXkERDzNUCm5UwzG/V7GMyqOS5w4snnIW+YCsISBSP8Q/095mc+EOOabp8/SeptfWX3BksvXuO5/j1+G+U+jn/pdGJByF3TwuWBgNNqPoXtDLm0+h1GrDqL5rS9WRt+a5TIvPkd3QcDbbnx+v2kM+wBbSpWxJFh9G+m4Yr0BgEW2A1TKmPql0Smd0DcPddDHpWwoCZZkHOql1zSuZ6DFTpYS1LBpMrdL8E3lLmZK+cqCJUz7epLPYje2E1OKObHbLDZF8Uh5AMDmoa7kM0HkBQJLBA32JB7FWglLj3lSw6RGkUqhXIG22QSDkqOhMHifTenp7xuFDVRc9/emNU6cTknTC1qj3HJVDJZkTPXxZYrMAQB2sSuocd40Jp15kD7KW6bAzTA3o3T6mFZcjlHyQC59rodlHkWL9MpqgJKyVVWzckFJ9Zs78Zt9v8YW++Jc+lwKA6TTWMNtH+rWvwtjV2iwRDl+ru4LzOa3OONwcxhjapEXI97jibP0tr2b6VhY+ZGA5Rrh/KiPrX5VN3+Ya4i84Y8CUDv8vAe5bJWEIwXLVZy9X8w7cOznWy4txvcLOMBx/2Bv4omoddYELNdIcRM79xhJtWPkXOrSI39juwqn8h5iS+8Z6qaaHUeoKVguKHJfb/SEuRoe0LW4mboGzfSrblrVb1L/xqXgI5ZWh7/Sqp90t6uqlhcgYyxgee2QS0MKd2HkigfuZa/ACRU5TLcMmxatMKgVYC7EO/sLuIplEY8Dd3QUo9qInGZROKQhZw+8cmsd/z/CqtkRNEO6JAAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/clear.673767b2.svg\";","module.exports = __webpack_public_path__ + \"static/media/rounded-plus-grey-icon.79d16bad.svg\";","module.exports = __webpack_public_path__ + \"static/media/video_upload_icon.2e8f1790.svg\";","module.exports = __webpack_public_path__ + \"static/media/audio_upload_icon.90c2a903.svg\";","module.exports = __webpack_public_path__ + \"static/media/document_upload_icon.4b7060a4.svg\";","module.exports = __webpack_public_path__ + \"static/media/images_upload_icon.ef6ffb94.svg\";","module.exports = __webpack_public_path__ + \"static/media/insert_emoticon.59472f8c.svg\";","module.exports = __webpack_public_path__ + \"static/media/send-blue-icon.70c145e8.svg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAAWCAYAAAArdgcFAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAF6ADAAQAAAABAAAAFgAAAAC4T9ojAAAB+ElEQVQ4EbVVPUjDQBQ2R6D+VaGD6CD4U7K6OQjuLVLdatusrjqI6OagKOIkOunkIB26iThkaDuou4p06iRIoBSsCBbb2vi9mMCZNMkh9iB57773ve9eLi8XqccxisWi3Gg0Qg7Ydwq+kUgkPpwkiYBcLjfcbDZ3JEmKYzppGIbsJArMa8gv4dpPp9PXxJcg3AfhR/hRAQEhChZYy2QyJ6zVaq3/pzCtjiffQ9ERBn+eAIFRQUWaAI8oYSwww3CbFkmA8CEeNQauLsJvt9tRhiShzkAR7yQKvmmDFoB4iLala8Ov5WiPL3F9Wqs/kcUTXDDGRiyf2nbBiruMpzgETtGv284MVVV3bQzCLJvN1jAP2xhvJQSfQRrnQcunvS3YlcOeYbE8+EfAxyzOBHJnLd9pVj0rB5OqWUKymQSbh0NXHL5iggG3rr5QEq8HFGCHpzRNG0DVozbgZ/HO6iRe9iNxsa1qtVrBfIjDPF0UUSbxgifDHeh3Qx2RV1mW75miKMfohIeOlD+A0DKwJRvJZPLNPM/xg+jVdX0TWjHqBBAisGaM1wduf1AE/4qD/4J4CfgBzqBbF4EAGujlO5DnfmbmefKFxBX0+bmNiVi/PjfzIUrdtAzhKxFBnhMkTr+uRQjf8Emivpe4BtFBvBg1lUqZB5aoIM/7BgM8sXwl2dytAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAABOwAAATsBH99vcQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAEPSURBVEiJ7ZLBTQNBDEW/0biESJSQw6YFBEsPFhHbA5TCBVEBq2haQOwhLSQHSoi0JXhW5rIjRcjZ2QMICfJPo/H4fY9t4Kw/L/Iu27ZdAngJIaxF5DAFiDEuVHVjZo9N0+y+xi+8JDN7NrPrlNJbjHExBU8pdQBqInry3rgGzHwHYGdmlapuY4yXJyp/N7MKwAcz33sst0XHAACrEXCT2zUVm21wCgRgmAsvGmSTlFJnZhUR7QEgn0MItYj0U/lFA+cnmFN5ljvk71TR4GgVV0S0H9u0LK1w1u8N+UfXdA5grok7A1XdYOw5M195iSLSM/Ntnomqvnos12AYhgcAXWnPRaQPIdQAujHnrP+oT+34zIhNCdZaAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/search-grey-icon.ee1802c6.svg\";","module.exports = __webpack_public_path__ + \"static/media/navigate_before.75589b27.svg\";","module.exports = __webpack_public_path__ + \"static/media/navigate_before.75589b27.svg\";","module.exports = __webpack_public_path__ + \"static/media/clear.673767b2.svg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAACRFdLHAAACj0lEQVQ4Ec2US2hTQRSGb94JhCAWBYWCgqAL3Qhu3IkWxJUIFUUwkIdBAqEYBCkKUhBBa7FuQl5oIEUMWNfdK4KCoCtxocRUF4VKI0TM2++PuZeb2lIXLjwwmTn/OfPPf87MjWH8Y3Os58tkMnt8Pt/udrv9OpFItNfHN/ILhcKkw+H4EI1G3zrtCblc7qzf73/lcrleMObsMa3z+fwEI2nHi8ViGgGVXq93SLhFSOJeSDJgOzqdjuF2u5OcfM6+2el0niLnsomxJ03eLNVMx2KxBeEWIeuTHo9ne7fbNfr9vgZVOOYg3WcSgHVQ0pCPsiter3e21Wpdj0Qit8ntC7cIAcYEmCZiNuyCZNrEdAL+N5Rd4vB7KLsRj8dvmXHNbptTJdnm/l7CsWID2xAdRuURlE1R5rwtNlhahJA9p3ffIQiJmN4YbHqG0hn7pmAwuHMNAztGO85QhbvZbD5B6QPlWSUDfMJfRIFwA2L1cZWn82MA8AP5YqPRuMvyIfFl5nfkvGGuMgY28g6z2ewBCF8S2UZZBjcKRzdJadlh/paTpVCZqHkP0U2IBhtZs3Td5xLOb8k0TBhRKKxSqbjq9XqJx3qBHhq8PZX/E6W6hGy5XA6B3yHVz5jhyXzUPtP+IFRAm2j0U8o/IVL1U0a/HjGNc9hx+TybZbA0n1xFvmxDQgVKpdIYqh5z2xMilenCIDD0JcmGrenTmnku61oqlWqO9HCQNfwJh8OrKJhkLIhIpbO2yJTGgQZkFOCYCgQC+4VtSqggl1Sv1WoXUZTGXePNWeUrLpNKSKvEvsjftGQF7cYjPojKq2CnaUPI7CuHfaUN3E1kSfl/TWiS688CwqP44xCt0N8lKvlsxv//+RdSDjjIN00QiwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAACRFdLHAAAB9klEQVQ4Ee2Tu0sjURTGZyaTl9qs2GmxrZaLqKDFNot/wFYKgpHEWLlY2dtZCVYZCImd3Xa7sIsIiwgigqKChVvuKlhYKIRMkpn4+8ZcGVMJWnrgzLnn9Z3HvWNZ7/TaDdgGoFKpjNu2vRKG4RQcGLuRjuMk4N0gCDby+fyxsXfLCLADtktCT6vVsgDujrPa7baVTCatZrN5S9xELpe7VJDneQOZTOZro9H4USgU/jkyEjzrum4PwVKjZLq0xAIyBUgSaD+2UcWVSqUR9F/ZbLZEkZxsBnCIUaQLwIdvBUKQuAnwIrytDlWA2LBcLk+m0+nfiUTiU71eV9Fe5UeAKKEUJXD+znGejnVusII5eA99zBSlSIuYJeIHY1O1heHqYwgAHe/p5g4psBmAtKsdfIMCpCOtAtUOkIp/Rs8A5WEkdZ3xfX8BsP+c/wDyQft7CUUjxwOp7HJb2s0R5zV8F4D95RwPU2FXO+6myNLpytzqx2q1Osw4fexnlbHzJHkaNUZSPHzX2ruIglFFU+JK1QiQ4zNgJ8h9bAdIPeJ1+TqJEg5T7LGWaeynPBvZapEj+jjONg7fVAMoCadj7KiBVCqlh31DwUPlFYvFM9bxpVarLWPfku1pMXpXAH4DeJIVPLajiA4BqF/vJze9ya93buzv8u038AAdggH5Kp0raQAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"static/media/call-end-white-icon.6677eaee.svg\";","module.exports = __webpack_public_path__ + \"static/media/ring.19371962.svg\";","module.exports = __webpack_public_path__ + \"static/media/clear.673767b2.svg\";","module.exports = __webpack_public_path__ + \"static/media/clear.673767b2.svg\";","module.exports = __webpack_public_path__ + \"static/media/shield.4190f32a.svg\";","module.exports = __webpack_public_path__ + \"static/media/lock.4675ae93.svg\";","module.exports = __webpack_public_path__ + \"static/media/search-grey-icon.ee1802c6.svg\";","module.exports = __webpack_public_path__ + \"static/media/navigate_before.75589b27.svg\";","module.exports = __webpack_public_path__ + \"static/media/edit-blue-icon.7024c158.svg\";","module.exports = __webpack_public_path__ + \"static/media/create.552fcd66.svg\";","module.exports = __webpack_public_path__ + \"static/media/done.ce59afd4.svg\";","module.exports = __webpack_public_path__ + \"static/media/clear.673767b2.svg\";","module.exports = __webpack_public_path__ + \"static/media/block.33efc060.svg\";","module.exports = __webpack_public_path__ + \"static/media/delete.a24d83e3.svg\";","module.exports = __webpack_public_path__ + \"static/media/clear.673767b2.svg\";","module.exports = __webpack_public_path__ + \"static/media/checkbox-inactive.15008e49.svg\";","module.exports = __webpack_public_path__ + \"static/media/checkbox-blue-active.51b71e5e.svg\";","module.exports = __webpack_public_path__ + \"static/media/search-grey-icon.ee1802c6.svg\";","module.exports = __webpack_public_path__ + \"static/media/clear.673767b2.svg\";","module.exports = __webpack_public_path__ + \"static/media/block.33efc060.svg\";","module.exports = __webpack_public_path__ + \"static/media/clear.673767b2.svg\";","module.exports = __webpack_public_path__ + \"static/media/navigate_before.75589b27.svg\";","module.exports = __webpack_public_path__ + \"static/media/navigate_before.75589b27.svg\";","module.exports = __webpack_public_path__ + \"static/media/notification-black-icon.d1851434.svg\";","module.exports = __webpack_public_path__ + \"static/media/privacy-black-icon.421ef801.svg\";","module.exports = __webpack_public_path__ + \"static/media/chat-black-icon.12c1e338.svg\";","module.exports = __webpack_public_path__ + \"static/media/help-black-icon.86ea7e67.svg\";","module.exports = __webpack_public_path__ + \"static/media/report-black-icon.b00d3682.svg\";","module.exports = __webpack_public_path__ + \"static/media/chat-grey-icon.f25d1076.svg\";","module.exports = __webpack_public_path__ + \"static/media/chat-blue-icon.f2b6b911.svg\";","module.exports = __webpack_public_path__ + \"static/media/people-grey-icon.771a9bfa.svg\";","module.exports = __webpack_public_path__ + \"static/media/people-blue-icon.92d29b43.svg\";","module.exports = __webpack_public_path__ + \"static/media/group-chat-grey-icon.46082016.svg\";","module.exports = __webpack_public_path__ + \"static/media/group-chat-blue-icon.41e7f079.svg\";","module.exports = __webpack_public_path__ + \"static/media/more-grey-icon.fdb25f0b.svg\";","module.exports = __webpack_public_path__ + \"static/media/more-blue-icon.ac4e5e40.svg\";","export const APP_ID = \"24984c06d507171\"\nexport const APP_REGION = \"eu\"\nexport const AUTH_KEY = \"87aa8d2c7d94499c6200045b63f9bb1b8b3d2d70\"\n","import React from \"react\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nimport {\n  imgStyle\n} from \"./style\";\n\nimport srcIcon from \"./resources/1px.png\";\n\nclass Avatar extends React.Component {\n\n  constructor(props) {\n    \n    super(props);\n    this.imgRef = React.createRef();\n  }\n\n  render() {\n\n    const borderWidth = this.props.borderWidth || '1px';\n    const borderColor = this.props.borderColor || '#AAA';\n    const cornerRadius = this.props.cornerRadius || '50%';\n    const image = this.props.image;\n\n    let img = new Image();\n    img.src = image;\n    img.onload = () => {\n\n      if (this.imgRef) {\n        this.imgRef.src = image;\n      }\n    }\n\n    const getStyle = () => ({ borderWidth: borderWidth, borderStyle: 'solid', borderColor: borderColor, 'borderRadius': cornerRadius });\n\n    return (\n      <img src={srcIcon} data-src={image} css={imgStyle()} alt=\"Avatar\" style={getStyle()} ref={el => { this.imgRef = el;}} />\n    );\n  }\n}\n\nexport default Avatar;","export const imgStyle = () => {\n\n    return {\n        overflow: \"hidden\",\n        display: \"inherit\",\n        width: \"100%\",\n        height: \"100%\"\n    }\n}","export const badgeStyle = (props) => {\n\n    return {\n        display: \"block\",\n        fontSize: \"12px\",\n        width: \"auto\",\n        height: \"18px\",\n        borderRadius: \"16px\",\n        backgroundColor: `${props.theme.backgroundColor.blue}`,\n        color: `${props.theme.color.white}`,\n        textAlign: \"center\",\n        fontWeight: \"700\",\n        lineHeight: \"18px\",\n        marginLeft: \"4px\",\n        padding: \"0 9px\",\n        marginRight: \"2px\",\n        opacity: \"1\",\n        transition: \"opacity .1s\",\n    }\n}","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nimport {\n  badgeStyle\n} from \"./style\";\n\nconst badgecount = (props) => {\n\n  let count = \"\";\n\n  if(props.count) {\n    count = (\n      <span css={badgeStyle(props)} className=\"unread-count\">{props.count}</span>\n    );\n  }\n  return count;\n}\n\nexport default badgecount;","import { CometChat } from \"@cometchat-pro/chat\";\n\nimport * as enums from '../../util/enums.js';\n\nexport class MessageHeaderManager {\n\n    userListenerId = \"head_user_\" + new Date().getTime();\n    msgListenerId = \"head_message_\" + new Date().getTime();\n    groupListenerId = \"head_group_\" + new Date().getTime();\n\n    attachListeners(callback) {\n        \n        CometChat.addUserListener(\n            this.userListenerId,\n            new CometChat.UserListener({\n                onUserOnline: onlineUser => {\n                    /* when someuser/friend comes online, user will be received here */\n                    callback(enums.USER_ONLINE, onlineUser);\n                },\n                onUserOffline: offlineUser => {\n                    /* when someuser/friend went offline, user will be received here */\n                    callback(enums.USER_OFFLINE, offlineUser);\n                }\n            })\n        );\n\n        CometChat.addMessageListener(\n            this.msgListenerId,\n            new CometChat.MessageListener({\n                onTypingStarted: typingIndicator => {\n                    callback(enums.TYPING_STARTED, typingIndicator);\n                },\n                onTypingEnded: typingIndicator => {\n                    callback(enums.TYPING_ENDED, typingIndicator);\n                }\n            })\n        );\n\n        CometChat.addGroupListener(\n            this.groupListenerId,\n            new CometChat.GroupListener({\n                onGroupMemberKicked: (message, kickedUser, kickedBy, kickedFrom) => {\n                    callback(enums.GROUP_MEMBER_KICKED, kickedFrom, kickedUser);\n                }, \n                onGroupMemberBanned: (message, bannedUser, bannedBy, bannedFrom) => {\n                    callback(enums.GROUP_MEMBER_BANNED, bannedFrom, bannedUser);\n                }, \n                onMemberAddedToGroup: (message, userAdded, userAddedBy, userAddedIn) => {\n                    callback(enums.GROUP_MEMBER_ADDED, userAddedIn);\n                }, \n                onGroupMemberLeft: (message, leavingUser, group) => {\n                    callback(enums.GROUP_MEMBER_LEFT, group, leavingUser);\n                }, \n                onGroupMemberJoined: (message, joinedUser, joinedGroup) => {\n                    callback(enums.GROUP_MEMBER_JOINED, joinedGroup);\n                }\n            })\n        );\n\n    }\n\n    removeListeners() {\n\n        CometChat.removeUserListener(this.userListenerId);\n        CometChat.removeMessageListener(this.msgListenerId);\n        CometChat.removeGroupListener(this.groupListenerId);\n    }\n}","export const USER_JOINED = 'onUserJoined';\nexport const USER_LEFT = 'onUserLeft';\n\nexport const TEXT_MESSAGE_RECEIVED = 'onTextMessageReceived';\nexport const MEDIA_MESSAGE_RECEIVED = 'onMediaMessageReceived';\nexport const CUSTOM_MESSAGE_RECEIVED = 'onCustomMessageReceived';\nexport const MESSAGE_DELIVERED = 'onMessagesDelivered';\nexport const MESSAGE_READ = 'onMessagesRead';\nexport const MESSAGE_DELETED = 'onMessageDeleted';\nexport const MESSAGE_EDITED = 'onMessageEdited';\n\nexport const INCOMING_CALL_RECEIVED = 'onIncomingCallReceived';\nexport const OUTGOING_CALL_ACCEPTED = 'onOutgoingCallAccepted';\nexport const OUTGOING_CALL_REJECTED = 'onOutgoingCallRejected';\nexport const INCOMING_CALL_CANCELLED = 'onIncomingCallCancelled';\n\nexport const CALL_ENDED = 'onCallEnded';\n\nexport const GROUP_MEMBER_SCOPE_CHANGED = \"onGroupMemberScopeChanged\";\nexport const GROUP_MEMBER_KICKED = \"onGroupMemberKicked\";\nexport const GROUP_MEMBER_BANNED = \"onGroupMemberBanned\";\nexport const GROUP_MEMBER_UNBANNED = \"onGroupMemberUnbanned\";\nexport const GROUP_MEMBER_ADDED = \"onMemberAddedToGroup\";\nexport const GROUP_MEMBER_LEFT = \"onGroupMemberLeft\";\nexport const GROUP_MEMBER_JOINED = \"onGroupMemberJoined\";\n\nexport const USER_ONLINE = \"onUserOnline\";\nexport const USER_OFFLINE = \"onUserOffline\";\n\nexport const TYPING_STARTED = \"onTypingStarted\";\nexport const TYPING_ENDED = \"onTypingEnded\";\n\nexport const CATEGORY_MESSAGE = \"message\";\nexport const MESSAGE_TYPE_TEXT = \"text\";\nexport const MESSAGE_TYPE_IMAGE = \"image\";\nexport const MESSAGE_TYPE_VIDEO = \"video\";\nexport const MESSAGE_TYPE_AUDIO = \"audio\";\nexport const MESSAGE_TYPE_FILE = \"file\";\n\nexport const CATEGORY_CUSTOM = \"custom\";\nexport const CUSTOM_TYPE_POLL = \"extension_poll\";\n\nexport const CATEGORY_ACTION = \"action\";\nexport const ACTION_TYPE_GROUPMEMBER = \"groupMember\";\nexport const ACTION_TYPE_MESSAGE = \"message\";\n\nexport const CATEGORY_CALL = \"call\";\nexport const CALL_TYPE_AUDIO = \"audio\";\nexport const CALL_TYPE_VIDEO = \"video\";\n","export const presenceStyle = (props) => {\n\n    let presenceStatus = {\n        backgroundColor: \"rgb(85, 85, 85)\"\n    }\n\n    if (props.status === \"online\" || props.status === \"available\") {\n        presenceStatus = {\n            backgroundColor: \"rgb(0, 255, 0)\"\n        }\n    }\n\n    return {\n        width: \"9px\",\n        height: \"9px\",\n        top: \"-12px\",\n        float: \"right\",\n        position: \"relative\",\n        ...presenceStatus\n    }\n}","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nimport {\n    presenceStyle\n} from \"./style\";\n\nconst statusindicator = (props) => {\n\n    if(props.hasOwnProperty(\"widgetsettings\") \n    && props.widgetsettings\n    && props.widgetsettings.hasOwnProperty(\"main\") \n    && props.widgetsettings.main.hasOwnProperty(\"show_user_presence\")\n    && props.widgetsettings.main[\"show_user_presence\"] === false) {\n        return null;\n    }\n\n    const borderWidth = props.borderWidth || '1px';\n    const borderColor = props.borderColor || '#AAA';\n    const cornerRadius = props.cornerRadius || '50%';\n  \n    const getStyle = () => ({borderWidth:borderWidth, borderStyle:'solid',borderColor:borderColor ,'borderRadius': cornerRadius})\n\n    return (\n        <span css={presenceStyle(props)} className=\"presence\" style={getStyle()}></span>\n    );\n}\n\nexport default statusindicator;","export class SvgAvatar {\n\n    static getAvatar = (generator, data) => {\n\n        const svg1 = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n        svg1.setAttribute(\"width\", \"200\");\n        svg1.setAttribute(\"height\", \"200\");\n\n        const rect = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n        rect.setAttribute('x', '0');\n        rect.setAttribute('y', '0');\n        rect.setAttribute('width', '200');\n        rect.setAttribute('height', '200');\n        rect.setAttribute('fill', SvgAvatar.stringToColour(generator));\n        const text = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n        text.setAttribute('x', '50%');\n        text.setAttribute('y', '54%');\n        text.setAttribute('dominant-baseline', 'middle');\n        text.setAttribute('text-anchor', 'middle');\n        text.setAttribute('fill', 'white');\n        text.setAttribute('font-size', '120');\n        text.setAttribute('font-family', \"'Inter', sans-serif\");\n        text.setAttribute('font-wight', \"600\");\n        text.textContent = data;\n        svg1.appendChild(rect);\n        svg1.appendChild(text);\n        let svgString = new XMLSerializer().serializeToString(svg1);\n\n\n        let decoded = unescape(encodeURIComponent(svgString));\n        let base64 = btoa(decoded);\n\n        let imgSource = `data:image/svg+xml;base64,${base64}`;\n        return imgSource;\n    }\n\n    static stringToColour = function (str) {\n        let hash = 0;\n        for (let i = 0; i < str.length; i++) {\n            hash = str.charCodeAt(i) + ((hash << 5) - hash);\n        }\n        let colour = '#';\n        for (let i = 0; i < 3; i++) {\n            let value = (hash >> (i * 8)) & 0xFF;\n            colour += ('00' + value.toString(16)).substr(-2);\n        }\n        return colour;\n    }\n}\n\nexport default SvgAvatar;","export const chatHeaderStyle = (props) => {\n\n    return {\n        padding: \"14px 16px\",\n        width: \"100%\",\n        backgroundColor: `${props.theme.backgroundColor.white}`,\n        zIndex: \"1\",\n        borderBottom: `1px solid ${props.theme.borderColor.primary}`,\n        display: \"flex\",\n        flexDirection: \"row\",\n        justifyContent: \"space-between\",\n    }\n}\n\nexport const chatDetailStyle = () => {\n\n    return {\n        display: \"flex\",\n        flexDirection: \"row\",\n        alignItems: \"center\",\n        width: \"calc(100% - 100px)\",\n    }\n}\n\nexport const chatSideBarBtnStyle = (img, props) => {\n\n    const displayValue = (props.hasOwnProperty(\"sidebar\") && props.sidebar === 0) ? { display: \"none!important\"} : {};\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n        cursor: \"pointer\",\n        display: \"none\",\n        background: `url(${img}) center center no-repeat`,\n        padding: \"20px\",\n        width: \"24px\",\n        height: \"24px\",\n        float: \"left\",\n        [mq[0]]: {\n            display: \"block\"\n        },\n        ...displayValue\n    }\n}\n\nexport const chatThumbnailStyle = () => {\n\n    return {\n        display: \"inline-block\",\n        width: \"36px\",\n        height: \"36px\",\n        flexShrink: \"0\",\n    }\n}\n\nexport const chatUserStyle = () => {\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n        width: \"calc(100% - 50px)\",\n        padding: \"0 14px\",\n        flexGrow: \"1\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        [mq[0]]: {\n            width: \"calc(100% - 80px)!important\"\n        }\n    }\n}\n\nexport const chatNameStyle = () => {\n\n    return {\n        margin: \"0\",\n        fontSize: \"15px\",\n        fontWeight: \"600\",\n        width: \"100%\",\n        overflow: \"hidden\",\n        textOverflow: \"ellipsis\",\n        whiteSpace: \"nowrap\",\n    }\n}\n\nexport const chatStatusStyle = (props, state) => {\n\n    let status = {};\n    if (props.type === \"user\") {\n\n\n\n        status = {\n            color: `${props.theme.color.blue}`,\n            textTransform: \"capitalize\",\n        };\n\n        if (state.presence === \"offline\") {\n            status = {\n                color: `${props.theme.color.helpText}`,\n                textTransform: \"capitalize\",\n            }\n        } \n\n        if (state.status.includes(\"typing\")) {\n\n            status = {\n                color: `${props.theme.color.helpText}`,\n                textTransform: \"none\",\n                fontStyle: \"italic\"\n            };\n        }\n        \n    } else if (props.type === \"group\") {\n\n        status = {\n            color: `${props.theme.color.helpText}`,\n        }\n\n        if (state.status.includes(\"typing\")) {\n\n            status = {\n                color: `${props.theme.color.helpText}`,\n                fontStyle: \"italic\"\n            };\n        }\n    }\n\n    return {\n        fontSize: \"13px\",\n        lineHeight: \"20px\",\n        width: \"100%\",\n        overflow: \"hidden\",\n        textOverflow: \"ellipsis\",\n        whiteSpace: \"nowrap\",\n        ...status\n    }\n}\n\nexport const chatOptionWrapStyle = () => {\n\n    return {\n        display: \"flex\",\n        flexDirection: \"row\",\n        justifyContent: \"flex-end\",\n        alignItems: \"center\",\n        width: \"100px\",\n    }\n}\n\nexport const chatOptionStyle = (img) => {\n\n    return {\n        display: \"inline-block\",\n        width: \"20px\",\n        height: \"20px\",\n        margin: \"0 10px\",\n        cursor: \"pointer\",\n        background: `url(${img}) center center no-repeat`,\n        '&:first-of-type': {\n            marginLeft: 0,\n        },\n        '&:last-of-type': {\n            marginRight: 0,\n        }\n    }\n}","import React from \"react\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core'\n\nimport { MessageHeaderManager } from \"./controller\";\n\nimport StatusIndicator from \"../StatusIndicator\";\nimport Avatar from \"../Avatar\";\nimport { SvgAvatar } from '../../util/svgavatar';\n\nimport * as enums from '../../util/enums.js';\n\nimport { \n  chatHeaderStyle, \n  chatDetailStyle, \n  chatSideBarBtnStyle, \n  chatThumbnailStyle,\n  chatUserStyle,\n  chatNameStyle,\n  chatStatusStyle,\n  chatOptionWrapStyle,\n  chatOptionStyle\n} from \"./style\";\n\nimport menuIcon from './resources/menu-icon.svg';\nimport audioCallIcon from './resources/call-blue-icon.svg';\nimport videoCallIcon from './resources/video-call-blue-icon.svg';\nimport detailPaneIcon from './resources/details-pane-blue-icon.svg';\n\nclass MessageHeader extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      status: \"\",\n      presence: \"offline\",\n    }\n  }\n\n  componentDidMount() {\n\n    this.MessageHeaderManager = new MessageHeaderManager();\n    this.MessageHeaderManager.attachListeners(this.updateHeader);\n\n    if(this.props.type === \"user\") {\n      this.setStatusForUser();\n    } else {\n      this.setStatusForGroup();\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n\n    this.MessageHeaderManager.removeListeners();\n    this.MessageHeaderManager = new MessageHeaderManager();\n    this.MessageHeaderManager.attachListeners(this.updateHeader);\n\n    if (this.props.type === 'user' && prevProps.item.uid !== this.props.item.uid) {\n      this.setStatusForUser();\n    } else if (this.props.type === 'group' \n    && (prevProps.item.guid !== this.props.item.guid \n      || (prevProps.item.guid === this.props.item.guid && prevProps.item.membersCount !== this.props.item.membersCount)) ) {\n      this.setStatusForGroup();\n    }\n  }\n\n  setStatusForUser = () => {\n\n    let status = this.props.item.status;\n    const presence = (this.props.item.status === \"online\") ? \"online\" : \"offline\";\n\n    if(this.props.item.status === \"offline\" && this.props.item.lastActiveAt) {\n      status = \"Last active at: \" + new Date(this.props.item.lastActiveAt * 1000).toLocaleTimeString('en-US', { year: 'numeric', month: 'long', day: 'numeric', hour: 'numeric', minute: 'numeric', hour12: true });\n    } else if(this.props.item.status === \"offline\") {\n      status = \"offline\";\n    }\n\n    this.setState({status: status, presence: presence});\n  }\n\n  setStatusForGroup = () => {\n\n    const status = `${this.props.item.membersCount} members`;\n    this.setState({status: status});\n  }\n\n  componentWillUnmount() {\n\n    this.MessageHeaderManager.removeListeners();\n    this.MessageHeaderManager = null;\n  }\n\n  updateHeader = (key, item, groupUser) => {\n    \n    switch(key) {\n\n      case enums.USER_ONLINE:\n      case enums.USER_OFFLINE: {\n        if(this.props.type === \"user\" && this.props.item.uid === item.uid) {\n\n          if(this.props.widgetsettings \n          && this.props.widgetsettings.hasOwnProperty(\"main\")\n          && this.props.widgetsettings.main.hasOwnProperty(\"show_user_presence\")\n          && this.props.widgetsettings.main[\"show_user_presence\"] === false) {\n            return false;\n          }\n          this.setState({ status: item.status, presence: item.status });\n        }\n        break;\n      }\n      case enums.GROUP_MEMBER_KICKED:\n      case enums.GROUP_MEMBER_BANNED:\n      case enums.GROUP_MEMBER_LEFT:\n        if(this.props.type === \"group\" \n        && this.props.item.guid === item.guid\n        && this.props.loggedInUser.uid !== groupUser.uid) {\n\n          let membersCount = parseInt(item.membersCount);\n          const status = `${membersCount} members`;\n          this.setState({status: status});\n        }\n      break;\n      case enums.GROUP_MEMBER_JOINED:\n        if(this.props.type === \"group\" && this.props.item.guid === item.guid) {\n\n          let membersCount = parseInt(item.membersCount);\n          const status = `${membersCount} members`;\n          this.setState({status: status});\n        }\n      break;\n      case enums.GROUP_MEMBER_ADDED:\n        if(this.props.type === \"group\" && this.props.item.guid === item.guid) {\n\n          let membersCount = parseInt(item.membersCount);\n          const status = `${membersCount} members`;\n          this.setState({status: status});\n        }\n      break;\n      case enums.TYPING_STARTED: {\n        \n        if (this.props.type === \"group\" && this.props.type === item.receiverType && this.props.item.guid === item.receiverId) {\n          this.setState({ status: `${item.sender.name} is typing...` });\n        } else if (this.props.type === \"user\" && this.props.type === item.receiverType && this.props.item.uid === item.sender.uid) {\n          this.setState({ status: \"typing...\" });\n        }\n        break;\n      }\n      case enums.TYPING_ENDED: {\n\n        if (this.props.type === \"group\" && this.props.type === item.receiverType && this.props.item.guid === item.receiverId) {\n          this.setStatusForGroup();\n        } else if (this.props.type === \"user\" && this.props.type === item.receiverType && this.props.item.uid === item.sender.uid) {\n          \n          if(this.state.presence === \"online\") {\n            this.setState({ status: \"online\", presence: \"online\" });\n          } else {\n            this.setStatusForUser();\n          }\n        }\n        break;\n      }\n      default:\n      break;\n    }\n  }\n    \n  toggleTooltip = (event, flag) => {\n\n    const elem = event.target;\n    const scrollWidth = elem.scrollWidth;\n    const clientWidth = elem.clientWidth;\n\n    if(scrollWidth <= clientWidth) {\n      return false;\n    }\n\n    if(flag) {\n      elem.setAttribute(\"title\", elem.textContent);\n    } else {\n      elem.removeAttribute(\"title\");\n    }\n    \n  }\n\n  render() {\n\n    let image, presence;\n    if(this.props.type === \"user\") {\n\n      if(!this.props.item.avatar) {\n\n        const uid = this.props.item.uid;\n        const char = this.props.item.name.charAt(0).toUpperCase();\n\n        this.props.item.avatar = SvgAvatar.getAvatar(uid, char);\n      }\n\n      image = this.props.item.avatar;\n      presence = (\n        <StatusIndicator\n        widgetsettings={this.props.widgetsettings}\n        status={this.state.presence}\n        cornerRadius=\"50%\" \n        borderColor={this.props.theme.borderColor.primary}\n        borderWidth=\"1px\" />\n      );\n\n    } else {\n\n      if(!this.props.item.icon) {\n        const guid = this.props.item.guid;\n        const char = this.props.item.name.charAt(0).toUpperCase();\n\n        this.props.item.icon = SvgAvatar.getAvatar(guid, char);\n      }\n      image = this.props.item.icon;\n    }\n\n    let status = (\n      <span css={chatStatusStyle(this.props, this.state)} className=\"user__status\"\n      onMouseEnter={event => this.toggleTooltip(event, true)}\n      onMouseLeave={event => this.toggleTooltip(event, false)}>{this.state.status}</span>\n    );\n\n    let audioCallBtn = (<span onClick={() => this.props.actionGenerated(\"audioCall\")} css={chatOptionStyle(audioCallIcon)}></span>);\n    let videoCallBtn = (<span onClick={() => this.props.actionGenerated(\"videoCall\")} css={chatOptionStyle(videoCallIcon)}></span>);\n    let viewDetailBtn = (<span onClick={() => this.props.actionGenerated(\"viewDetail\")} css={chatOptionStyle(detailPaneIcon)}></span>);\n    \n    if(this.props.viewdetail === false) {\n      viewDetailBtn = null;\n    }\n\n    if(this.props.item.blockedByMe === true || this.props.audiocall === false) {\n      audioCallBtn = null;\n    }\n\n    if(this.props.item.blockedByMe === true || this.props.videocall === false) {\n      videoCallBtn = null;\n    }\n\n    if(this.props.widgetsettings && this.props.widgetsettings.hasOwnProperty(\"main\")) {\n\n      if(this.props.widgetsettings.main.hasOwnProperty(\"enable_voice_calling\")\n      && this.props.widgetsettings.main[\"enable_voice_calling\"] === false) {\n        audioCallBtn = null;\n      }\n\n      if(this.props.widgetsettings.main.hasOwnProperty(\"enable_video_calling\")\n      && this.props.widgetsettings.main[\"enable_video_calling\"] === false) {\n        videoCallBtn = null;\n      }\n\n      if(this.props.widgetsettings.main.hasOwnProperty(\"show_user_presence\")\n      && this.props.widgetsettings.main[\"show_user_presence\"] === false\n      && this.props.type === \"user\") {\n        status = null;\n      }\n      \n    }\n\n    return (\n      <div css={chatHeaderStyle(this.props)} className=\"chat__header\">\n        <div css={chatDetailStyle()} className=\"chat__details\">\n          <div css={chatSideBarBtnStyle(menuIcon, this.props)} className=\"chat__sidebar-menu\" onClick={() => this.props.actionGenerated(\"menuClicked\")}></div>\n          <div css={chatThumbnailStyle()} className=\"chat__thumbnail\">\n            <Avatar \n            image={image} \n            cornerRadius=\"18px\" \n            borderColor={this.props.theme.borderColor.primary}\n            borderWidth=\"1px\" />\n            {presence}\n          </div>\n          <div css={chatUserStyle()} className=\"chat__user\">\n            <h6 css={chatNameStyle()} className=\"user__name\"\n            onMouseEnter={event => this.toggleTooltip(event, true)} \n            onMouseLeave={event => this.toggleTooltip(event, false)}>{this.props.item.name}</h6>\n            {status}\n          </div>\n        </div>\n        <div css={chatOptionWrapStyle()} className=\"chat__options\">\n          {audioCallBtn}\n          {videoCallBtn}\n          {viewDetailBtn}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default MessageHeader;","import { CometChat } from \"@cometchat-pro/chat\"\n\nexport class CometChatManager {\n\n    loggedInUser;\n    isUserLoggedIn;\n\n    getLoggedInUser() {\n\n        let timerCounter = 10000;\n        let timer = 0;\n        \n        return new Promise((resolve, reject) => {\n            \n            if(timerCounter === timer) reject(`timer reached ${timerCounter}`);\n\n            if(this.loggedInUser) resolve(this.loggedInUser);\n\n            if(!CometChat.isInitialized()) reject(\"CometChat not initialized\");\n\n            this.isUserLoggedIn = setInterval(() => {\n\n                CometChat.getLoggedinUser().then(user => {\n\n                    this.loggedInUser = user;\n                    clearInterval(this.isUserLoggedIn);\n                    resolve(user);\n                    \n                }, error => {\n                    console.log(error);\n                    reject(error);\n                });\n\n                timer += 100;\n            }, 100);\n\n        });\n    }\n\n    static blockUsers = (userList) => {\n\n        let promise = new Promise((resolve, reject) => {\n\n            CometChat.blockUsers(userList).then(\n                list => resolve(list),\n                error => reject(error)\n            );\n\n        });\n\n        return promise;\n    }\n\n    static unblockUsers = (userList) => {\n\n        let promise = new Promise((resolve, reject) => {\n\n            CometChat.unblockUsers(userList).then(\n                list => resolve(list),\n                error => reject(error)\n            );\n\n        });\n\n        return promise;\n    }\n\n    static call = (receiverID, receiverType, callType) => {\n\n        let promise = new Promise((resolve, reject) => {\n\n            const call = new CometChat.Call(receiverID, callType, receiverType);\n            CometChat.initiateCall(call).then(\n                call => resolve(call),\n                error => reject(error)\n            );\n\n        });\n\n        return promise;\n\n    }\n\n    static audioCall = (receiverID, receiverType, callType) => {\n\n        let promise = new Promise((resolve, reject) => {\n\n            const call = new CometChat.Call(receiverID, callType, receiverType);\n            CometChat.initiateCall(call).then(\n                call => resolve(call),\n                error => reject(error)\n            );\n\n        });\n\n        return promise;\n    \n    }\n\n    static videoCall = (receiverID, receiverType, callType) => {\n\n        let promise = new Promise((resolve, reject) => {\n\n            const call = new CometChat.Call(receiverID, callType, receiverType);\n            CometChat.initiateCall(call).then(\n                call => resolve(call),\n                error => reject(error)\n            );\n\n        });\n\n        return promise;\n    }\n\n    static acceptCall = (sessionId) => {\n\n        let promise = new Promise((resolve, reject) => {\n\n            CometChat.acceptCall(sessionId).then(\n                call => resolve(call),\n                error => reject(error)\n            );\n\n        });\n\n        return promise;\n    }\n\n    static rejectCall = (sessionId, rejectStatus) => {\n\n        let promise = new Promise((resolve, reject) => {\n\n            CometChat.rejectCall(sessionId, rejectStatus).then(\n                call => resolve(call),\n                error => reject(error)\n            );\n\n        });\n\n        return promise;\n    }\n}\n\nexport default CometChatManager;","\nconst emailPattern = new RegExp(\"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\\\.[A-Za-z]{2,6}\", \"gi\");///([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\\.[a-zA-Z0-9._-]+)/gi;\n// eslint-disable-next-line\nconst urlPattern = new RegExp(\"(^|[\\\\s.:;?\\\\-\\\\]<\\\\(])\"+\"((https?://|www\\\\.|pic\\\\.)[-\\\\w;/?:@&=+$\\\\|\\\\_.!~*\\\\|'()\\\\[\\\\]%#,☺]+[\\\\w/#](\\\\(\\\\))?)\"+\"(?=$|[\\\\s',\\\\|\\\\(\\\\).:;?\\\\-\\\\[\\\\]>\\\\)])\", \"gi\"); ///(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#/%?=~_|!:,.;]*[-A-Z0-9+&@#/%=~_|])/gi;\nconst phoneNumPattern = new RegExp(\"\\\\s*(?:\\\\+?(\\\\d{1,3}))?([-. (]*(\\\\d{3})[-. )]*)?((\\\\d{3})[-. ]*(\\\\d{2,4})(?:[-.x ]*(\\\\d+))?)\\\\s*\", \"g\");\n\nexport const linkify = (message) => {\n\n    let outputStr = message.replace(phoneNumPattern, \"<a target='blank' rel='noopener noreferrer' href='tel:$&'>$&</a>\");\n    outputStr = outputStr.replace(emailPattern, \"<a target='blank' rel='noopener noreferrer' href='mailto:$&'>$&</a>\");\n    outputStr = outputStr.replace(urlPattern, \"<a target='blank' rel='noopener noreferrer' href='$&'>$&</a>\");\n    \n    return outputStr;\n}\n\nexport const validateWidgetSettings = (wSettings, checkAgainst) => {\n\n    let output = null;\n\n    if (wSettings && wSettings.hasOwnProperty(\"main\")) {\n\n        if (wSettings.main.hasOwnProperty(checkAgainst)) {\n            output = wSettings.main[checkAgainst];\n        }\n    } \n    \n    return output;\n}\n","import * as enums from \"../../util/enums\";\nimport { validateWidgetSettings } from \"../../util/common\";\n\nclass MessageFilter {\n\n    categories = {};\n    types = null;\n\n    constructor() {\n\n        this.categories = { \n            [enums.CATEGORY_MESSAGE]: enums.CATEGORY_MESSAGE, \n            [enums.CATEGORY_CUSTOM]: enums.CATEGORY_CUSTOM,\n            [enums.CATEGORY_ACTION]: enums.CATEGORY_ACTION,\n            [enums.CATEGORY_CALL]: enums.CATEGORY_CALL,\n        };\n\n        this.types = {\n            [enums.MESSAGE_TYPE_TEXT]: enums.MESSAGE_TYPE_TEXT,\n            [enums.MESSAGE_TYPE_IMAGE]: enums.MESSAGE_TYPE_IMAGE,\n            [enums.MESSAGE_TYPE_VIDEO]: enums.MESSAGE_TYPE_VIDEO,\n            [enums.MESSAGE_TYPE_AUDIO]: enums.MESSAGE_TYPE_AUDIO,\n            [enums.MESSAGE_TYPE_FILE]: enums.MESSAGE_TYPE_FILE,\n            [enums.CUSTOM_TYPE_POLL]: enums.CUSTOM_TYPE_POLL,\n            [enums.ACTION_TYPE_GROUPMEMBER]: enums.ACTION_TYPE_GROUPMEMBER,\n            [enums.CALL_TYPE_AUDIO]: enums.CALL_TYPE_AUDIO,\n            [enums.CALL_TYPE_VIDEO]: enums.CALL_TYPE_VIDEO\n        }\n\n        // console.log(\"this.categories \", this.categories);\n        // console.log(\"this.types\", this.types);\n    }\n\n    getCategories = (widgetSettings) => {\n\n        if (validateWidgetSettings(widgetSettings, \"hide_join_leave_notifications\") === true) {\n            delete this.categories[enums.CATEGORY_ACTION];\n        }\n\n        if (validateWidgetSettings(widgetSettings, \"show_call_notifications\") === false) {\n            delete this.categories[enums.CATEGORY_CALL];\n        }\n\n        //console.log(\"this.categories \", this.categories);\n        \n        return Object.keys(this.categories);\n    }\n\n    getTypes = (widgetSettings) => {\n\n        if (validateWidgetSettings(widgetSettings, \"hide_join_leave_notifications\") === true) {\n            delete this.types[enums.ACTION_TYPE_GROUPMEMBER];\n        }\n\n        if (validateWidgetSettings(widgetSettings, \"show_call_notifications\") === false) {\n            delete this.types[enums.CALL_TYPE_AUDIO];\n            delete this.types[enums.CALL_TYPE_VIDEO];\n        }\n\n        //console.log(\"this.types\", this.types);\n\n        return Object.keys(this.types);\n    }\n}\n\nexport default MessageFilter;","import { CometChat } from \"@cometchat-pro/chat\";\n\nimport * as enums from '../../util/enums.js';\nimport MessageFilter from \"./MessageFilter\";\n\nexport class MessageListManager {\n\n    item = {};\n    type = \"\";\n    parentMessageId = null;\n    messageRequest = null;\n    limit = 30;\n    categories = [enums.CATEGORY_MESSAGE, enums.CATEGORY_CUSTOM, enums.CATEGORY_ACTION, enums.CATEGORY_CALL];\n    //categories = [enums.CATEGORY_CUSTOM];\n    types = [\n        enums.MESSAGE_TYPE_TEXT, \n        enums.MESSAGE_TYPE_IMAGE, \n        enums.MESSAGE_TYPE_VIDEO, \n        enums.MESSAGE_TYPE_AUDIO, \n        enums.MESSAGE_TYPE_FILE, \n        enums.CUSTOM_TYPE_POLL,\n        enums.ACTION_TYPE_GROUPMEMBER,\n        enums.CALL_TYPE_AUDIO,\n        enums.CALL_TYPE_VIDEO\n    ];\n    //types = [];\n\n    msgListenerId = \"message_\" + new Date().getTime();\n    groupListenerId = \"group_\" + new Date().getTime();\n    callListenerId = \"call_\" + new Date().getTime(); \n\n    constructor(widgetSettings, item, type, parentMessageId) {\n\n        this.item = item;\n        this.type = type;\n        this.parentMessageId = parentMessageId;\n\n        const messageFilterManager = new MessageFilter();\n        const categories = messageFilterManager.getCategories(widgetSettings);\n        const types = messageFilterManager.getTypes(widgetSettings);\n\n        if (type === \"user\") {\n\n            if(this.parentMessageId) {\n                this.messageRequest = new CometChat.MessagesRequestBuilder()\n                                            .setUID(item.uid)\n                                            .setParentMessageId(this.parentMessageId)\n                                            .setCategories(categories)\n                                            .setTypes(types)\n                                            .setLimit(this.limit)\n                                            .build();\n            } else {\n                this.messageRequest = new CometChat.MessagesRequestBuilder()\n                                            .setUID(item.uid)\n                                            .setCategories(categories)\n                                            .setTypes(types)\n                                            .hideReplies(true)\n                                            .setLimit(this.limit)\n                                            .build();\n            }\n\n        } else if (type === \"group\") {\n\n            if(this.parentMessageId) {\n                this.messageRequest = new CometChat.MessagesRequestBuilder()\n                                            .setGUID(item.guid)\n                                            .setParentMessageId(this.parentMessageId)\n                                            .setCategories(categories)\n                                            .setTypes(types)\n                                            .setLimit(this.limit)\n                                            .build();\n            } else {\n                this.messageRequest = new CometChat.MessagesRequestBuilder()\n                                            .setGUID(item.guid)\n                                            .setCategories(categories)\n                                            .setTypes(types)\n                                            .hideReplies(true)\n                                            .setLimit(this.limit)\n                                            .build();\n            }\n        }\n    }\n\n    fetchPreviousMessages() {\n        return this.messageRequest.fetchPrevious();\n    }\n\n    attachListeners(callback) {\n        \n        CometChat.addMessageListener(\n            this.msgListenerId,\n            new CometChat.MessageListener({\n                onTextMessageReceived: textMessage => {\n                    callback(enums.TEXT_MESSAGE_RECEIVED, textMessage);\n                },\n                onMediaMessageReceived: mediaMessage => {\n                    callback(enums.MEDIA_MESSAGE_RECEIVED, mediaMessage);\n                },\n                onCustomMessageReceived: customMessage => {\n                    callback(enums.CUSTOM_MESSAGE_RECEIVED, customMessage);\n                },\n                onMessagesDelivered: messageReceipt => {\n                    callback(enums.MESSAGE_DELIVERED, messageReceipt);\n                },\n                onMessagesRead: messageReceipt => {\n                    callback(enums.MESSAGE_READ, messageReceipt);\n                },\n                onMessageDeleted: deletedMessage => {\n                    callback(enums.MESSAGE_DELETED, deletedMessage);\n                },\n                onMessageEdited: editedMessage => {\n                    callback(enums.MESSAGE_EDITED, editedMessage);\n                }\n            })\n        );\n\n        CometChat.addGroupListener(\n            this.groupListenerId,\n            new CometChat.GroupListener({\n                onGroupMemberScopeChanged: (message, changedUser, newScope, oldScope, changedGroup) => {\n                    callback(enums.GROUP_MEMBER_SCOPE_CHANGED, message, changedGroup, {\"user\": changedUser, \"scope\": newScope});\n                }, \n                onGroupMemberKicked: (message, kickedUser, kickedBy, kickedFrom) => {\n                    callback(enums.GROUP_MEMBER_KICKED, message, kickedFrom, {\"user\": kickedUser, \"hasJoined\": false});\n                }, \n                onGroupMemberBanned: (message, bannedUser, bannedBy, bannedFrom) => {\n                    callback(enums.GROUP_MEMBER_BANNED, message, bannedFrom, {\"user\": bannedUser});\n                }, \n                onGroupMemberUnbanned: (message, unbannedUser, unbannedBy, unbannedFrom) => {\n                    callback(enums.GROUP_MEMBER_UNBANNED, message, unbannedFrom, {\"user\": unbannedUser});\n                }, \n                onMemberAddedToGroup: (message, userAdded, userAddedBy, userAddedIn) => {\n                    callback(enums.GROUP_MEMBER_ADDED, message, userAddedIn, {\"user\": userAdded, \"hasJoined\": true});\n                }, \n                onGroupMemberLeft: (message, leavingUser, group) => {\n                    callback(enums.GROUP_MEMBER_LEFT, message, group, {\"user\": leavingUser});\n                }, \n                onGroupMemberJoined: (message, joinedUser, joinedGroup) => {\n                    callback(enums.GROUP_MEMBER_JOINED, message, joinedGroup, {\"user\": joinedUser});\n                }\n            })\n        );\n        \n        CometChat.addCallListener(\n            this.callListenerId,\n            new CometChat.CallListener({\n                onIncomingCallReceived: call => {\n                  callback(enums.INCOMING_CALL_RECEIVED, call);\n                },\n                onIncomingCallCancelled: call => {\n                    callback(enums.INCOMING_CALL_CANCELLED, call);\n                },\n                onOutgoingCallAccepted: call => {\n                    callback(enums.OUTGOING_CALL_ACCEPTED, call);\n                },\n                onOutgoingCallRejected: call => {\n                  callback(enums.OUTGOING_CALL_REJECTED, call);\n                }\n            })\n        );\n    }\n\n    removeListeners() {\n\n        CometChat.removeMessageListener(this.msgListenerId);\n        CometChat.removeGroupListener(this.groupListenerId);\n        CometChat.removeCallListener(this.callListenerId);\n    }\n}","export const messageActionStyle = (props) => {\n\n    const topPos = (props.name) ? { top: \"0px\"} : { top: \"-20px\" };\n    const alignment = (props.message.messageFrom === \"receiver\") ? { alignSelf: \"flex-end\" } : { alignSelf: \"flex-start\" };\n\n    return {\n        position: \"absolute\",\n        zIndex: \"1\",\n        display: \"none\",\n        listStyleType: \"none\",\n        padding: \"0\",\n        margin: \"0\",\n        height: \"26px\",\n        border: `1px solid ${props.theme.borderColor.primary}`,\n        backgroundColor: `${props.theme.backgroundColor.white}`,\n        borderRadius: \"4px\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        ...alignment,\n        ...topPos,\n    }\n}\n\nexport const actionGroupStyle = (props) => {\n\n    return {\n        display: \"flex\",\n        position: \"relative\",\n    }\n}\n\nexport const groupButtonStyle = (img) => {\n\n    return {\n        outline: \"0\",\n        border: \"0\",\n        height: \"24px\",\n        width: \"24px\",\n        borderRadius: \"4px\",\n        alignItems: \"center\",\n        display: \"inline-flex\",\n        justifyContent: \"center\",\n        position: \"relative\",\n        background: `url(${img}) center center / 18px 19px no-repeat`,\n    }\n}","import React from \"react\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nimport { CometChat } from \"@cometchat-pro/chat\";\n\nimport {\n  messageActionStyle,\n  actionGroupStyle,\n  groupButtonStyle\n} from \"./style\";\n\nimport replyIcon from \"./resources/reply.svg\";\nimport deleteIcon from \"./resources/delete-message.svg\";\nimport editIcon from \"./resources/edit.svg\";\n\nclass Tooltip extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n\n    }\n  }\n\n  toggleTooltip = (event, flag) => {\n\n    const elem = event.target;\n\n    if (flag) {\n      elem.setAttribute(\"title\", elem.dataset.title);\n    } else {\n      elem.removeAttribute(\"title\");\n    }\n  }\n\n  render() {\n    \n    let threadedChats = (\n      <li css={actionGroupStyle(this.props)} className=\"action__group\">\n        <button\n        type=\"button\"\n        onMouseEnter={event => this.toggleTooltip(event, true)}\n        onMouseLeave={event => this.toggleTooltip(event, false)}\n        css={groupButtonStyle(replyIcon)}\n        className=\"group__button button__threadedchats\" \n        data-title={(this.props.message.replyCount) ? \"Reply to thread\" : \"Reply in thread\"}\n        onClick={() => this.props.actionGenerated(\"viewMessageThread\", this.props.message)}></button>\n      </li>\n    );\n\n    if ((this.props.hasOwnProperty(\"widgetconfig\")\n    && this.props.widgetconfig\n    && this.props.widgetconfig.hasOwnProperty(\"threaded-chats\")\n    && this.props.widgetconfig[\"threaded-chats\"] === false)\n    || this.props.message.category === \"custom\") {\n      threadedChats = null;\n    }\n\n    if ((this.props.hasOwnProperty(\"widgetsettings\")\n    && this.props.widgetsettings\n    && this.props.widgetsettings.hasOwnProperty(\"main\")\n    && this.props.widgetsettings.main.hasOwnProperty(\"enable_threaded_replies\")\n    && this.props.widgetsettings.main[\"enable_threaded_replies\"] === false)\n    || this.props.message.category === \"custom\") {\n      threadedChats = null;\n    }\n\n    if (this.props.message.parentMessageId) {\n      threadedChats = null;\n    }\n\n    let deleteMessage = (\n      <li css={actionGroupStyle(this.props)} className=\"action__group\">\n        <button\n        type=\"button\"\n        onMouseEnter={event => this.toggleTooltip(event, true)}\n        onMouseLeave={event => this.toggleTooltip(event, false)}\n        css={groupButtonStyle(deleteIcon)}\n        className=\"group__button button__delete\" \n        data-title=\"Delete message\"\n        onClick={() => this.props.actionGenerated(\"deleteMessage\", this.props.message)}></button>\n      </li>\n    );\n\n    if ((this.props.hasOwnProperty(\"widgetsettings\")\n    && this.props.widgetsettings\n    && this.props.widgetsettings.hasOwnProperty(\"main\")\n    && this.props.widgetsettings.main.hasOwnProperty(\"enable_deleting_messages\")\n    && this.props.widgetsettings.main[\"enable_deleting_messages\"] === false)) {\n      deleteMessage = null;\n    }\n\n    if (this.props.message.messageFrom === \"receiver\") {\n      deleteMessage = null;\n    }\n\n    let editMessage = (\n      <li css={actionGroupStyle(this.props)} className=\"action__group\">\n        <button\n          type=\"button\"\n          onMouseEnter={event => this.toggleTooltip(event, true)}\n          onMouseLeave={event => this.toggleTooltip(event, false)}\n          css={groupButtonStyle(editIcon)}\n          className=\"group__button button__edit\" \n          data-title=\"Edit message\"\n          onClick={() => this.props.actionGenerated(\"editMessage\", this.props.message)}></button>\n      </li>\n    );\n\n    if ((this.props.hasOwnProperty(\"widgetsettings\")\n      && this.props.widgetsettings\n      && this.props.widgetsettings.hasOwnProperty(\"main\")\n      && this.props.widgetsettings.main.hasOwnProperty(\"enable_editing_messages\")\n      && this.props.widgetsettings.main[\"enable_editing_messages\"] === false)\n      || this.props.message.messageFrom === \"receiver\"\n      || this.props.message.type !== CometChat.MESSAGE_TYPE.TEXT) {\n      editMessage = null;\n    }\n\n    let tooltip = (\n      <ul css={messageActionStyle(this.props)} className=\"message__actions\">\n        {threadedChats}\n        {editMessage}\n        {deleteMessage}\n      </ul>\n    );\n\n    if (threadedChats === null && deleteMessage === null && editMessage === null) {\n      tooltip = null;\n    }\n\n    return tooltip;\n  }\n}\n\nexport default Tooltip;","export const replyCountStyle = (props) => {\n\n    return {\n        display: \"inline-block\",\n        fontSize: \"11px\",\n        fontWeight: \"500\",\n        lineHeight: \"12px\",\n        textTransform: \"lowercase\",\n        padding: \"0 10px\",\n        cursor: \"pointer\",\n        color: props.theme.color.blue,\n        '&:hover': {\n            textDecoration: \"underline\",\n        }\n    }\n}","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nimport { replyCountStyle } from \"./style\";\n\nconst replycount = (props) => {\n\n    const replyCount = props.message.replyCount;\n    const replyText = (replyCount === 1) ? `${replyCount} reply` : `${replyCount} replies`;\n\n    let replies = (<span css={replyCountStyle(props)} className=\"replycount\" onClick={() => props.actionGenerated(\"viewMessageThread\", props.message)}>{replyText}</span>);\n\n    if(props.message.hasOwnProperty(\"replyCount\") === false) {\n        replies = null;\n    }\n\n    if(props.hasOwnProperty(\"widgetconfig\") \n    && props.widgetconfig\n    && props.widgetconfig.hasOwnProperty(\"threaded-chats\")\n    && props.widgetconfig[\"threaded-chats\"] === false) {\n        replies = null;\n    }\n\n    if(props.hasOwnProperty(\"widgetsettings\") \n    && props.widgetsettings\n    && props.widgetsettings.hasOwnProperty(\"main\")\n    && props.widgetsettings.main.hasOwnProperty(\"enable_threaded_replies\")\n    && props.widgetsettings.main[\"enable_threaded_replies\"] === false) {\n        replies = null;\n    }\n\n    return replies;\n}\n\nexport default replycount;","/** @jsx jsx */\nimport { jsx } from '@emotion/core'\n\nimport { msgTimestampStyle } from \"./style\";\n\nimport blueDoubleTick from \"./resources/blue-double-tick-icon.png\";\nimport greyDoubleTick from \"./resources/grey-double-tick-icon.png\";\nimport greyTick from \"./resources/grey-tick-icon.png\";\n\nconst readreceipt = (props) => {\n\n    let ticks = blueDoubleTick;\n    if(props.message.sentAt && !props.message.readAt && !props.message.deliveredAt){\n      ticks = greyTick;\n    } else if(props.message.sentAt && !props.message.readAt && props.message.deliveredAt){\n      ticks = greyDoubleTick;\n    }\n\n    if(props.hasOwnProperty(\"widgetsettings\") \n    && props.widgetsettings\n    && props.widgetsettings.hasOwnProperty(\"main\") \n    && props.widgetsettings.main.hasOwnProperty(\"show_delivery_read_indicators\")\n    && props.widgetsettings.main[\"show_delivery_read_indicators\"] === false) {\n      ticks = null;\n    }\n\n    const receipt = (ticks) ? <img src={ticks} alt=\"time\" /> : null;\n    const timestamp = new Date(props.message.sentAt * 1000).toLocaleTimeString('en-US', { hour: 'numeric', minute: 'numeric', hour12: true });\n\n    return (\n      <span css={msgTimestampStyle()} className=\"message__timestamp\">{timestamp}{receipt}</span>\n    );\n}\n\nexport default readreceipt;","export const msgTimestampStyle = () => {\n\n    return {\n        display: \"inline-block\",\n        fontSize: \"11px\",\n        fontWeight: \"500\",\n        lineHeight: \"12px\",\n        textTransform: \"uppercase\",\n        ' > img': {\n            marginLeft: \"3px\",\n            display: \"inline-block\",\n            verticalAlign: \"bottom\",\n        }\n    }\n}","export const messageContainerStyle = () => {\n\n    return {\n        alignSelf: \"flex-end\",\n        marginBottom: \"16px\",\n        paddingLeft: \"16px\",\n        paddingRight: \"16px\",\n        maxWidth: \"65%\",\n        clear: \"both\",\n        position: \"relative\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        flexShrink: \"0\",\n        \":hover\": {\n            \"ul.message__actions\": {\n                display: \"flex\"\n            }\n        }\n    }\n}\n\nexport const messageWrapperStyle = () => {\n\n    return {\n        width: \"auto\",\n        flex: \"1 1\",\n        alignSelf: \"flex-end\",\n        display: \"flex\",\n    }\n}\n\nexport const messageTxtWrapperStyle = (props) => {\n\n    return {\n        display: \"inline-block\",\n        borderRadius: \"12px\",\n        backgroundColor: `${props.theme.backgroundColor.blue}`,\n        color: `${props.theme.color.white}`,\n        padding: \"8px 12px\",\n        alignSelf: \"flex-end\",\n        width: \"auto\",\n    }\n}\n\nexport const messagePreviewContainerStyle = (props) => {\n\n    return {\n        display: \"inline-block\",\n        borderRadius: \"12px\",\n        backgroundColor: `${props.theme.backgroundColor.white}`,\n        boxShadow: \"0px 1px 2px 1px rgba(0,0,0,0.18)\",\n        alignSelf: \"flex-start\",\n        width: \"auto\",\n    }\n}\n\nexport const messagePreviewWrapperStyle = () => {\n\n    return {\n        display: \"flex\",\n        flexDirection: \"column\"\n    }\n}\n\nexport const previewImageStyle = (img) => {\n\n    return {\n        background: `url(${img}) no-repeat center center`,\n        backgroundSize: \"contain\",\n        height: \"150px\",\n        margin: \"12px 0\",\n    }\n}\n\nexport const previewDataStyle = (props) => {\n\n    return {\n        borderTop: `1px solid  ${props.theme.borderColor.primary}`,\n        borderBottom: `1px solid  ${props.theme.borderColor.primary}`,\n        padding: \"12px\",\n    }\n}\n\nexport const previewTitleStyle = (props) => {\n\n    return {\n        whiteSpace: \"pre-wrap\",\n        wordBreak: \"break-word\",\n        textAlign: \"left\",\n        width: \"auto\",\n        color: `${props.theme.color.helpText}`,\n        fontWeight: \"700\",\n        marginBottom: \"8px\",\n    }\n}\n\nexport const previewDescStyle = (props) => {\n\n    return {\n        whiteSpace: \"pre-wrap\",\n        wordBreak: \"break-word\",\n        textAlign: \"left\",\n        width: \"auto\",\n        color: `${props.theme.color.helpText}`,\n        fontStyle: \"italic\",\n        fontSize: \"13px\",\n    }\n}\n\nexport const previewTextStyle = (props) => {\n\n    return {\n        whiteSpace: \"pre-wrap\",\n        wordBreak: \"break-word\",\n        textAlign: \"left\",\n        width: \"auto\",\n        \".message__txt__wrapper\": {\n            backgroundColor: \"transparent\",\n            color: `${props.theme.color.helpText}`,\n            fontStyle: \"normal\",\n            padding: \"8px 0\",\n        }  \n    }\n}\n\nexport const previewLinkStyle = (props) => {\n\n    return {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        padding: \"12px\",\n        \"> a\": {\n            display: \"inline-block\",\n            color: `${props.theme.color.blue}`,\n            fontWeight: \"700\",\n        }\n    }\n}\n\nexport const messageTxtStyle = (props, parsedMessage, emojiMessage, showVariation) => {\n\n    let emojiAlignmentProp = {\n        \" > img\": {\n            width: \"24px\",\n            height: \"24px\",\n            display: \"inline-block\",\n            verticalAlign: \"top\",\n            zoom: \"1\",\n            margin: \"0 2px\"\n        }\n    };\n\n    let emojiProp = {};\n\n    if (parsedMessage.length === emojiMessage.length && emojiMessage.length === 1) {\n        emojiProp = {\n           \"> img\": {\n                width: \"48px\",\n                height: \"48px\",\n           }\n        };\n    } else if (parsedMessage.length === emojiMessage.length && emojiMessage.length === 2) {\n        emojiProp = {\n            \"> img\": {\n                width: \"36px\",\n                height: \"36px\",\n            }\n        };\n    } else if (parsedMessage.length === emojiMessage.length && emojiMessage.length > 2) {\n        emojiProp = {\n            \"> img\": {\n                width: \"24px\",\n                height: \"24px\",\n            }\n        };\n    }\n\n    if (showVariation === false) {\n        emojiProp = {\n            \"> img\": {\n                width: \"24px\",\n                height: \"24px\",\n            }\n        };\n    }\n\n    return {\n        margin: \"0\",\n        fontSize: \"14px\",\n        whiteSpace: \"pre-wrap\",\n        wordBreak: \"break-word\",\n        textAlign: \"left\",\n        width: \"auto\",\n        \" a\": {\n            color: \"#0432FF\",\n            \"&:hover\": {\n                color: \"#04009D\"\n            }\n        },\n        \" a[href^='mailto:']\": {\n            color: \"#F38C00\",\n            \"&:hover\": {\n                color: \"#F36800\"\n            }\n        },\n        \" a[href^='tel:']\": {\n            color: \"#3802DA\",\n            \"&:hover\": {\n                color: \"#2D038F\"\n            }\n        },\n        ...emojiAlignmentProp,\n        ...emojiProp\n    }\n}\n\nexport const messageInfoWrapperStyle = () => {\n\n    return {\n        alignSelf: \"flex-end\",\n    }\n}","import React from \"react\";\nimport twemoji from \"twemoji\";\nimport ReactHtmlParser from \"react-html-parser\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nimport { linkify } from \"../../util/common\";\n\nimport ToolTip from \"../ToolTip\";\nimport ReplyCount from \"../ReplyCount\";\nimport ReadReciept from \"../ReadReciept\";\n\nimport {\n  messageContainerStyle,\n  messageWrapperStyle,\n  messagePreviewContainerStyle,\n  messagePreviewWrapperStyle,\n  previewImageStyle,\n  previewDataStyle,\n  previewTitleStyle,\n  previewDescStyle,\n  previewLinkStyle,\n  messageTxtWrapperStyle,\n  messageTxtStyle,\n  previewTextStyle,\n  messageInfoWrapperStyle\n} from \"./style\";\n\nclass SenderMessageBubble extends React.Component {\n\n  messageFrom = \"sender\";\n\n  constructor(props) {\n\n    super(props);\n\n    const message = Object.assign({}, props.message, { messageFrom: this.messageFrom });\n\n    this.state = {\n      message: message\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n\n    const previousMessageStr = JSON.stringify(prevProps.message);\n    const currentMessageStr = JSON.stringify(this.props.message);\n\n    if (previousMessageStr !== currentMessageStr) {\n\n      const message = Object.assign({}, this.props.message, { messageFrom: this.messageFrom });\n      this.setState({ message: message })\n    }\n  }\n\n  getMessageText = () => {\n\n    let messageText = this.state.message.text;\n    const formattedText = linkify(messageText);\n\n    const emojiParsedMessage = twemoji.parse(formattedText, { folder: \"svg\", ext: \".svg\" });\n    const parsedMessage = ReactHtmlParser(emojiParsedMessage);\n    \n    const emojiMessage = parsedMessage.filter(message => (message instanceof Object && message.type === \"img\"));\n\n    let showVariation = true;\n    if (this.props.hasOwnProperty(\"widgetsettings\")\n      && this.props.widgetsettings\n      && this.props.widgetsettings.hasOwnProperty(\"main\")\n      && this.props.widgetsettings.main.hasOwnProperty(\"show_emojis_in_larger_size\")\n      && this.props.widgetsettings.main[\"show_emojis_in_larger_size\"] === false) {\n\n      showVariation = false;\n    }\n\n    messageText = (\n      <div css={messageTxtWrapperStyle(this.props)} className=\"message__txt__wrapper\">\n        <p css={messageTxtStyle(this.props, parsedMessage, emojiMessage, showVariation)} className=\"message__txt\">{parsedMessage}</p>\n      </div>\n    );\n\n    return messageText;\n  }\n\n  render() {\n\n    let messageText = this.getMessageText();\n    if (this.state.message.hasOwnProperty(\"metadata\")) {\n\n      const metadata = this.state.message.metadata;\n      const injectedObject = metadata[\"@injected\"];\n      if (injectedObject && injectedObject.hasOwnProperty(\"extensions\")) {\n\n        const extensionsObject = injectedObject[\"extensions\"];\n        if (extensionsObject && extensionsObject.hasOwnProperty(\"link-preview\")) {\n\n          const linkPreviewObject = extensionsObject[\"link-preview\"]\n          if (linkPreviewObject && linkPreviewObject.hasOwnProperty(\"links\") && linkPreviewObject[\"links\"].length) {\n\n            const linkObject = linkPreviewObject[\"links\"][0];\n\n            const pattern = /(http:|https:)?\\/\\/(www\\.)?(youtube.com|youtu.be)(\\S+)?/;\n            const linkText = (linkObject[\"url\"].match(pattern)) ? \"View on Youtube\" : \"Visit\";\n\n            const actualMessage = messageText;\n            messageText = (\n              <div css={messagePreviewContainerStyle(this.props)} className=\"message__preview\">\n                <div css={messagePreviewWrapperStyle()} className=\"preview__card\">\n                  <div css={previewImageStyle(linkObject[\"image\"])} className=\"card__image\"></div>\n                  <div css={previewDataStyle(this.props)} className=\"card__info\">\n                    <div css={previewTitleStyle(this.props)} className=\"card__title\"><span>{linkObject[\"title\"]}</span></div>\n                    <div css={previewDescStyle(this.props)} className=\"card__desc\"><span>{linkObject[\"description\"]}</span></div>\n                    <div css={previewTextStyle(this.props)} className=\"card__text\">{actualMessage}</div>\n                  </div>\n                  <div css={previewLinkStyle(this.props)} className=\"card__link\">\n                    <a href={linkObject[\"url\"]} target=\"_blank\" rel=\"noopener noreferrer\">{linkText}</a>\n                  </div>\n                </div>\n              </div>\n            );\n          } \n        } \n      }\n    } \n\n    return (\n      <div css={messageContainerStyle()} className=\"sender__message__container message__text\">\n        <ToolTip {...this.props} message={this.state.message} />\n        <div css={messageWrapperStyle()} className=\"message__wrapper\">{messageText}</div>\n        <div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\n          <ReplyCount theme={this.props.theme} {...this.props} message={this.state.message} />\n          <ReadReciept theme={this.props.theme} {...this.props} message={this.state.message} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default SenderMessageBubble;","export const messageContainerStyle = () => {\n\n    return {\n        alignSelf: \"flex-start\",\n        marginBottom: \"16px\",\n        paddingLeft: \"16px\",\n        paddingRight: \"16px\",\n        maxWidth: \"65%\",\n        clear: \"both\",\n        position: \"relative\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        flexShrink: \"0\",\n        \":hover\": {\n            \"ul.message__actions\": {\n                display: \"flex\"\n            }\n        }\n    }\n}\n\nexport const messageWrapperStyle = () => {\n\n    return {\n        width: \"auto\",\n        flex: \"1 1\",\n        alignSelf: \"flex-start\",\n        display: \"flex\",\n    }\n}\n\nexport const messageThumbnailStyle = () => {\n\n    return {\n        width: \"36px\",\n        height: \"36px\",\n        margin: \"10px 5px\",\n        float: \"left\",\n        flexShrink: \"0\",\n    }\n}\n\nexport const messageDetailStyle = () => {\n\n    return {\n        flex: \"1 1\",\n        display: \"flex\",\n        flexDirection: \"column\",\n    }\n}\n\nexport const nameWrapperStyle = (avatar) => {\n\n    const paddingValue = (avatar) ? {\n        padding: \"3px 5px\",\n    } : {};\n\n    return {\n        alignSelf: \"flex-start\",\n        ...paddingValue\n    }\n}\n\nexport const nameStyle = (props) => {\n\n    return {\n        fontSize: \"10px\",\n        color: `${props.theme.color.helpText}`,\n    }\n}\n\nexport const messageTxtContainerStyle = () => {\n\n    return {\n        width: \"auto\",\n        flex: \"1 1\",\n        alignSelf: \"flex-start\",\n        display: \"flex\",\n    }\n}\n\nexport const messagePreviewContainerStyle = (props) => {\n\n    return {\n        display: \"inline-block\",\n        borderRadius: \"12px\",\n        backgroundColor: `${props.theme.backgroundColor.white}`,\n        boxShadow: \"0px 1px 2px 1px rgba(0,0,0,0.18)\",\n        alignSelf: \"flex-start\",\n        width: \"auto\",\n    }\n}\n\nexport const messagePreviewWrapperStyle = () => {\n\n    return {\n        display: \"flex\",\n        flexDirection: \"column\"\n    }\n}\n\nexport const previewImageStyle = (img) => {\n\n    return {\n        background: `url(${img}) no-repeat center center`,\n        backgroundSize: \"contain\",\n        height: \"150px\",\n        margin: \"12px 0\",\n    }\n}\n\nexport const previewDataStyle = (props) => {\n\n    return {\n        borderTop: `1px solid  ${props.theme.borderColor.primary}`,\n        borderBottom: `1px solid  ${props.theme.borderColor.primary}`,\n        padding: \"12px\",\n    }\n}\n\nexport const previewTitleStyle = (props) => {\n\n    return {\n        whiteSpace: \"pre-wrap\",\n        wordBreak: \"break-word\",\n        textAlign: \"left\",\n        width: \"auto\",\n        color: `${props.theme.color.helpText}`,\n        fontWeight: \"700\",\n        marginBottom: \"8px\",\n    }\n}\n\nexport const previewDescStyle = (props) => {\n\n    return {\n        whiteSpace: \"pre-wrap\",\n        wordBreak: \"break-word\",\n        textAlign: \"left\",\n        width: \"auto\",\n        color: `${props.theme.color.helpText}`,\n        fontStyle: \"italic\",\n        fontSize: \"13px\",\n    }\n}\n\nexport const previewTextStyle = (props) => {\n\n    return {\n        whiteSpace: \"pre-wrap\",\n        wordBreak: \"break-word\",\n        textAlign: \"left\",\n        width: \"auto\",\n        \".message__txt__wrapper\": {\n            backgroundColor: \"transparent\",\n            color: `${props.theme.color.helpText}`,\n            fontStyle: \"normal\",\n            padding: \"8px 0\",\n        }\n    }\n}\n\n\nexport const previewLinkStyle = (props) => {\n\n    return {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        padding: \"12px\",\n        \"> a\": {\n            display: \"inline-block\",\n            color: `${props.theme.color.blue}`,\n            fontWeight: \"700\",\n        }\n    }\n}\n\nexport const messageTxtWrapperStyle = (props) => {\n\n    return {\n        display: \"inline-block\",\n        borderRadius: \"12px\",\n        backgroundColor: `${props.theme.backgroundColor.secondary}`,\n        padding: \"8px 12px\",\n        alignSelf: \"flex-start\",\n        width: \"auto\",\n    }\n}\n\nexport const messageTxtStyle = (parsedMessage, emojiMessage, showVariation) => {\n\n    let emojiAlignmentProp = {\n        \" > img\": {\n            width: \"24px\",\n            height: \"24px\",\n            display: \"inline-block\",\n            verticalAlign: \"top\",\n            zoom: \"1\",\n            margin: \"0 2px\"\n        }\n    };\n\n    let emojiProp = {};\n\n    if (parsedMessage.length === emojiMessage.length && emojiMessage.length === 1) {\n        emojiProp = {\n            \"> img\": {\n                width: \"48px\",\n                height: \"48px\",\n            }\n        };\n    } else if (parsedMessage.length === emojiMessage.length && emojiMessage.length === 2) {\n        emojiProp = {\n            \"> img\": {\n                width: \"36px\",\n                height: \"36px\",\n            }\n        };\n    } else if (parsedMessage.length === emojiMessage.length && emojiMessage.length > 2) {\n        emojiProp = {\n            \"> img\": {\n                width: \"24px\",\n                height: \"24px\",\n            }\n        };\n    }\n\n    if (showVariation === false) {\n        emojiProp = {\n            \"> img\": {\n                width: \"24px\",\n                height: \"24px\",\n            }\n        };\n    }\n\n    return {\n        margin: \"0\",\n        fontSize: \"14px\",\n        whiteSpace: \"pre-wrap\",\n        wordBreak: \"break-word\",\n        textAlign: \"left\",\n        width: \"auto\",\n        \" a\": {\n            color: \"#0432FF\",\n            \"&:hover\": {\n                color: \"#04009D\"\n            }\n        },\n        \" a[href^='mailto:']\": {\n            color: \"#F38C00\",\n            \"&:hover\": {\n                color: \"#F36800\"\n            }\n        },\n        \" a[href^='tel:']\": {\n            color: \"#3802DA\",\n            \"&:hover\": {\n                color: \"#2D038F\"\n            }\n        },\n        ...emojiAlignmentProp,\n        ...emojiProp\n    }\n}\n\nexport const messageInfoWrapperStyle = () => {\n\n    return {\n        alignSelf: \"flex-start\",\n        padding: \"3px 5px\",\n    }\n}\n\nexport const messageTimestampStyle = (props) => {\n\n    return {\n        display: \"inline-block\",\n        fontSize: \"11px\",\n        fontWeight: \"500\",\n        lineHeight: \"12px\",\n        textTransform: \"uppercase\",\n        color: `${props.theme.color.helpText}`,\n    }\n}","import React from \"react\";\nimport twemoji from \"twemoji\";\nimport ReactHtmlParser from \"react-html-parser\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nimport { linkify } from \"../../util/common\";\nimport { SvgAvatar } from '../../util/svgavatar';\n\nimport Avatar from \"../Avatar\";\nimport ToolTip from \"../ToolTip\";\nimport ReplyCount from \"../ReplyCount\";\n\nimport {\n  messageContainerStyle,\n  messageWrapperStyle,\n  messageThumbnailStyle,\n  messageDetailStyle,\n  nameWrapperStyle,\n  nameStyle,\n  messageTxtContainerStyle,\n  messagePreviewContainerStyle,\n  messagePreviewWrapperStyle,\n  previewImageStyle,\n  previewDataStyle,\n  previewTitleStyle,\n  previewDescStyle,\n  previewTextStyle,\n  previewLinkStyle,\n  messageTxtWrapperStyle,\n  messageTxtStyle,\n  messageInfoWrapperStyle,\n  messageTimestampStyle\n} from \"./style\";\n\nclass ReceiverMessageBubble extends React.Component {\n\n  messageFrom = \"receiver\";\n\n  constructor(props) {\n    super(props);\n\n    const message = Object.assign({}, props.message, { messageFrom: this.messageFrom });\n    if (message.receiverType === 'group') {\n\n      if (!message.sender.avatar) {\n\n        const uid = message.sender.getUid();\n        const char = message.sender.getName().charAt(0).toUpperCase();\n\n        message.sender.setAvatar(SvgAvatar.getAvatar(uid, char));\n      }\n    }\n\n    this.state = {\n      message: message\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n\n    const previousMessageStr = JSON.stringify(prevProps.message);\n    const currentMessageStr = JSON.stringify(this.props.message);\n\n    if (previousMessageStr !== currentMessageStr) {\n\n      const message = Object.assign({}, this.props.message, { messageFrom: this.messageFrom });\n      this.setState({ message: message })\n    }\n  }\n\n  getMessageText = () => {\n\n    let messageText = this.state.message.text;\n    const formattedText = linkify(this.state.message.text);\n\n    const emojiParsedMessage = twemoji.parse(formattedText, { folder: \"svg\", ext: \".svg\" });\n    const parsedMessage = ReactHtmlParser(emojiParsedMessage);\n    const emojiMessage = parsedMessage.filter(message => (message instanceof Object && message.type === \"img\"));\n\n    let showVariation = true;\n    if (this.props.hasOwnProperty(\"widgetsettings\")\n      && this.props.widgetsettings\n      && this.props.widgetsettings.hasOwnProperty(\"main\")\n      && this.props.widgetsettings.main.hasOwnProperty(\"show_emojis_in_larger_size\")\n      && this.props.widgetsettings.main[\"show_emojis_in_larger_size\"] === false) {\n\n      showVariation = false;\n    }\n\n    messageText = (\n      <div css={messageTxtWrapperStyle(this.props)} className=\"message__txt__wrapper\">\n        <p css={messageTxtStyle(parsedMessage, emojiMessage, showVariation)} className=\"message__txt\">{parsedMessage}</p>\n      </div>\n    );\n\n    return messageText;\n  }\n\n  render() {\n\n    let avatar = null, name = null;\n    if (this.state.message.receiverType === 'group') {\n\n      avatar = (\n        <div css={messageThumbnailStyle()} className=\"message__thumbnail\">\n          <Avatar\n          cornerRadius=\"50%\"\n          borderColor={this.props.theme.color.secondary}\n          borderWidth=\"1px\"\n          image={this.state.message.sender.avatar} />\n        </div>\n      );\n\n      name = (<div css={nameWrapperStyle(avatar)} className=\"message__name__wrapper\"><span css={nameStyle(this.props)} className=\"message__name\">{this.state.message.sender.name}</span></div>);\n    }\n\n    let messageText = this.getMessageText();\n    if (this.state.message.hasOwnProperty(\"metadata\")) {\n\n      const metadata = this.state.message.metadata;\n      const injectedObject = metadata[\"@injected\"];\n      if (injectedObject && injectedObject.hasOwnProperty(\"extensions\")) {\n\n        const extensionsObject = injectedObject[\"extensions\"];\n        if (extensionsObject && extensionsObject.hasOwnProperty(\"link-preview\")) {\n\n          const linkPreviewObject = extensionsObject[\"link-preview\"]\n          if (linkPreviewObject && linkPreviewObject.hasOwnProperty(\"links\") && linkPreviewObject[\"links\"].length) {\n\n            const linkObject = linkPreviewObject[\"links\"][0];\n\n            const pattern = /(http:|https:)?\\/\\/(www\\.)?(youtube.com|youtu.be)(\\S+)?/;\n            const linkText = (linkObject[\"url\"].match(pattern)) ? \"View on Youtube\" : \"Visit\";\n            messageText = (\n              <div css={messagePreviewContainerStyle(this.props)} className=\"message__preview\">\n                <div css={messagePreviewWrapperStyle()} className=\"preview__card\">\n                  <div css={previewImageStyle(linkObject[\"image\"])} className=\"card__image\"></div>\n                  <div css={previewDataStyle(this.props)} className=\"card__info\">\n                    <div css={previewTitleStyle(this.props)} className=\"card__title\"><span>{linkObject[\"title\"]}</span></div>\n                    <div css={previewDescStyle(this.props)} className=\"card__desc\"><span>{linkObject[\"description\"]}</span></div>\n                    <div css={previewTextStyle(this.props)} className=\"card__text\">{this.getMessageText()}</div>\n                  </div>\n                  <div css={previewLinkStyle(this.props)} className=\"card__link\"><a href={linkObject[\"url\"]} target=\"_blank\" rel=\"noopener noreferrer\">{linkText}</a></div>\n                </div>\n              </div>\n            );\n          }\n        }\n      }\n    }\n\n    return (\n      <div css={messageContainerStyle()} className=\"receiver__message__container message__text\">\n        <ToolTip {...this.props} message={this.state.message} name={name} />\n        <div css={messageWrapperStyle()} className=\"message__wrapper\">\n          {avatar}\n          <div css={messageDetailStyle()} className=\"message__details\">\n            {name}\n            <div css={messageTxtContainerStyle()} className=\"message__text__container\">{messageText}</div>\n            <div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\n              <span css={messageTimestampStyle(this.props)} className=\"message__timestamp\">{new Date(this.state.message.sentAt * 1000).toLocaleTimeString('en-US', { hour: 'numeric', minute: 'numeric', hour12: true })}</span>\n              <ReplyCount {...this.props} message={this.state.message} />\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default ReceiverMessageBubble;","import React from \"react\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core'\n\nimport ToolTip from \"../ToolTip\";\nimport ReplyCount from \"../ReplyCount\";\nimport ReadReciept from \"../ReadReciept\";\n\nimport {\n  messageContainerStyle,\n  messageWrapperStyle,\n  messageImgWrapper,\n  messageInfoWrapperStyle\n} from \"./style\";\n\nimport srcIcon from \"./resources/1px.png\";\n\nclass SenderImageBubble extends React.Component {\n\n  timer = null;\n  messageFrom = \"sender\";\n\n  constructor(props) {\n\n    super(props);\n\n    this.imgRef = React.createRef();\n    const message = Object.assign({}, props.message, { messageFrom: this.messageFrom });\n\n    this.state = {\n      message: message,\n      imageUrl: srcIcon,\n      fullScreenView: false\n    }\n  }\n\n  componentDidMount() {\n    this.setImage();\n  }\n\n  componentDidUpdate(prevProps) { \n\n    const previousMessageStr = JSON.stringify(prevProps.message);\n    const currentMessageStr = JSON.stringify(this.props.message);\n\n    if (previousMessageStr !== currentMessageStr) {\n\n      const message = Object.assign({}, this.props.message, { messageFrom: this.messageFrom });\n      this.setState({ message: message })\n    }\n  }\n\n  chooseImage = (thumbnailGenerationObject) => {\n\n    const smallUrl = thumbnailGenerationObject[\"url_small\"];\n    const mediumUrl = thumbnailGenerationObject[\"url_medium\"];\n\n    const mq = window.matchMedia(this.props.theme.breakPoints[0]);\n\n    let imageToDownload = mediumUrl;\n    if (mq.matches) {\n      imageToDownload = smallUrl;\n    }\n\n    return imageToDownload;\n  }\n\n  setImage = () => {\n\n    if (this.state.message.hasOwnProperty(\"metadata\")) {\n\n      const metadata = this.state.message.metadata;\n      const injectedObject = metadata[\"@injected\"];\n      if (injectedObject && injectedObject.hasOwnProperty(\"extensions\")) {\n\n        const extensionsObject = injectedObject[\"extensions\"];\n        if (extensionsObject && extensionsObject.hasOwnProperty(\"thumbnail-generation\")) {\n\n          const thumbnailGenerationObject = extensionsObject[\"thumbnail-generation\"];\n\n          const mq = window.matchMedia(this.props.theme.breakPoints[0]);\n          mq.addListener(() => {\n\n            const imageToDownload = this.chooseImage(thumbnailGenerationObject);\n            let img = new Image();\n            img.src = imageToDownload;\n            img.onload = () => this.setState({ imageUrl: img.src });\n\n          });\n\n          const imageToDownload = this.chooseImage(thumbnailGenerationObject);\n          this.downloadImage(imageToDownload).then(response => {\n\n            const url = URL.createObjectURL(response)\n            let img = new Image();\n            img.src = url;\n            img.onload = () => {\n\n              this.setState({ imageUrl: img.src });\n              URL.revokeObjectURL(img.src);\n            }\n\n          }).catch(error => console.error(error));\n        }\n      }\n\n    } else {\n\n      let img = new Image();\n      img.src = this.state.message.data.url;\n      img.onload = () => this.setState({ imageUrl: img.src });\n    }\n  }\n\n  downloadImage(imgUrl) {\n\n    const promise = new Promise((resolve, reject) => {\n\n      const xhr = new XMLHttpRequest();\n      xhr.open(\"GET\", imgUrl, true);\n      xhr.responseType = \"blob\";\n\n      xhr.onload = () => {\n\n        if (xhr.readyState === 4) {\n\n          if (xhr.status === 200) {\n\n            this.timer = null;\n            resolve(xhr.response);\n\n          } else if (xhr.status === 403) {\n\n            this.timer = setTimeout(() => {\n\n              this.downloadImage(imgUrl).then(response => resolve(response)).catch(error => reject(error));\n\n            }, 800);\n          }\n          \n        } else {\n          reject(xhr.statusText);\n        }\n\n      }\n\n      xhr.onerror = event => reject(new Error('There was a network error.', event));\n      xhr.ontimeout = event => reject(new Error('There was a timeout error.', event));\n      xhr.send();\n      \n    });\n\n    return promise;\n  }\n\n  open = () => {\n    this.props.actionGenerated(\"viewActualImage\", this.state.message);\n  }\n\n  render() {\n\n    return (\n      <React.Fragment>\n        <div css={messageContainerStyle()} className=\"sender__message__container message__image\">\n          <ToolTip {...this.props} message={this.state.message} />\n          <div css={messageWrapperStyle()} className=\"message__wrapper\">\n            <div css={messageImgWrapper(this.props)} onClick={this.open} className=\"message__img__wrapper\">\n              <img src={this.state.imageUrl} alt=\"message\" ref={el => { this.imgRef = el; }} />\n            </div>\n          </div>\n          <div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\n            <ReplyCount {...this.props} message={this.state.message} />\n            <ReadReciept {...this.props} />\n          </div>\n        </div>\n      </React.Fragment>\n    )\n  }\n}\n\nexport default SenderImageBubble;","export const messageContainerStyle = () => {\n\n    return {\n        alignSelf: \"flex-end\",\n        marginBottom: \"16px\",\n        paddingLeft: \"16px\",\n        paddingRight: \"16px\",\n        maxWidth: \"65%\",\n        clear: \"both\",\n        position: \"relative\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        flexShrink: \"0\",\n        \":hover\": {\n            \"ul.message__actions\": {\n                display: \"flex\"\n            }\n        }\n    }\n}\n\nexport const messageWrapperStyle = () => {\n\n    return {\n        width: \"auto\",\n        flex: \"1 1\",\n        alignSelf: \"flex-end\",\n        display: \"flex\",\n    }\n}\n\nexport const messageImgWrapper = (props) => {\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n        display: \"inline-block\",\n        alignSelf: \"flex-end\",\n        maxWidth: \"300px\",\n        height: \"200px\",\n        cursor: \"pointer\",\n        flexShrink: \"0\",\n        'img': {\n            borderRadius: \"8px\",\n            height: \"100%\",\n        },\n        [mq[0]]: {\n            minWidth: \"50px\",\n            maxWidth: \"150px\",\n            height: \"100px\",\n            padding: \"2px 2px\",\n        }\n    }\n}\n\nexport const messageInfoWrapperStyle = () => {\n\n    return {\n        alignSelf: \"flex-end\",\n    }\n}","export const messageContainerStyle = () => {\n\n    return {\n        alignSelf: \"flex-start\",\n        marginBottom: \"16px\",\n        paddingLeft: \"16px\",\n        paddingRight: \"16px\",\n        maxWidth: \"65%\",\n        clear: \"both\",\n        position: \"relative\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        flexShrink: \"0\",\n        \":hover\": {\n            \"ul.message__actions\": {\n                display: \"flex\"\n            }\n        }\n    }\n}\n\nexport const messageWrapperStyle = () => {\n\n    return {\n        width: \"auto\",\n        flex: \"1 1\",\n        alignSelf: \"flex-start\",\n        display: \"flex\",\n    }\n}\n\nexport const messageThumbnailStyle = () => {\n\n    return {\n        width: \"36px\",\n        height: \"36px\",\n        margin: \"10px 5px\",\n        float: \"left\",\n        flexShrink: \"0\",\n    }\n}\n\nexport const messageDetailStyle = () => {\n\n    return {\n        flex: \"1 1\",\n        display: \"flex\",\n        flexDirection: \"column\",\n    }\n}\n\nexport const nameWrapperStyle = (avatar) => {\n\n    const paddingValue = (avatar) ? {\n        padding: \"3px 5px\",\n    } : {};\n\n    return {\n        alignSelf: \"flex-start\",\n        ...paddingValue\n    }\n}\n\nexport const nameStyle = (props) => {\n\n    return {\n        fontSize: \"10px\",\n        color: `${props.theme.color.helpText}`,\n    }\n}\n\nexport const messageImgContainerStyle = () => {\n\n    return {\n        width: \"auto\",\n        flex: \"1 1\",\n        alignSelf: \"flex-start\",\n        display: \"flex\",\n    }\n}\n\nexport const messageImgWrapperStyle = (props) => {\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n        display: \"inline-block\",\n        alignSelf: \"flex-start\",\n        maxWidth: \"300px\",\n        height: \"200px\",\n        cursor: \"pointer\",\n        'img': {\n            borderRadius: \"8px\",\n            height: \"100%\",\n        },\n        [mq[0]]: {\n            minWidth: \"50px\",\n            maxWidth: \"150px\",\n            height: \"100px\",\n            padding: \"2px 2px\",\n        }\n    }\n}\n\nexport const messageInfoWrapperStyle = () => {\n\n    return {\n        alignSelf: \"flex-start\",\n        padding: \"3px 5px\",\n    }\n}\n\nexport const messageTimestampStyle = (props) => {\n\n    return {\n        display: \"inline-block\",\n        fontSize: \"11px\",\n        fontWeight: \"500\",\n        lineHeight: \"12px\",\n        textTransform: \"uppercase\",\n        color: `${props.theme.color.helpText}`,\n    }\n}","import React from \"react\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core'\n\nimport { SvgAvatar } from '../../util/svgavatar';\n\nimport Avatar from \"../Avatar\";\nimport ToolTip from \"../ToolTip\";\nimport ReplyCount from \"../ReplyCount\";\n\nimport {\n  messageContainerStyle,\n  messageWrapperStyle,\n  messageThumbnailStyle,\n  messageDetailStyle,\n  nameWrapperStyle,\n  nameStyle,\n  messageImgContainerStyle,\n  messageImgWrapperStyle,\n  messageInfoWrapperStyle,\n  messageTimestampStyle\n} from \"./style\";\n\nimport srcIcon from \"./resources/1px.png\";\n\nclass ReceiverImageBubble extends React.Component {\n\n  messageFrom = \"receiver\";\n\n  constructor(props) {\n\n    super(props);\n\n    this.imgRef = React.createRef();\n\n    const message = Object.assign({}, props.message, { messageFrom: this.messageFrom });\n    if (message.receiverType === 'group') {\n\n      if (!message.sender.avatar) {\n\n        const uid = message.sender.getUid();\n        const char = message.sender.getName().charAt(0).toUpperCase();\n\n        message.sender.setAvatar(SvgAvatar.getAvatar(uid, char));\n      }\n    }\n\n    this.state = {\n      message: message,\n      imageUrl: srcIcon\n    }\n  }\n\n  componentDidMount() {\n    this.setImage();\n  }\n\n  componentDidUpdate(prevProps) {\n\n    const previousMessageStr = JSON.stringify(prevProps.message);\n    const currentMessageStr = JSON.stringify(this.props.message);\n\n    if (previousMessageStr !== currentMessageStr) {\n\n      const message = Object.assign({}, this.props.message, { messageFrom: this.messageFrom });\n      this.setState({ message: message })\n    }\n  }\n  chooseImage = (thumbnailGenerationObject) => {\n\n    const smallUrl = thumbnailGenerationObject[\"url_small\"];\n    const mediumUrl = thumbnailGenerationObject[\"url_medium\"];\n\n    const mq = window.matchMedia(this.props.theme.breakPoints[0]);\n\n    let imageToDownload = mediumUrl;\n    if (mq.matches) {\n      imageToDownload = smallUrl;\n    }\n\n    return imageToDownload;\n  }\n\n  setImage = () => {\n\n    if (this.state.message.hasOwnProperty(\"metadata\")) {\n\n      const metadata = this.state.message.metadata;\n      const injectedObject = metadata[\"@injected\"];\n      if (injectedObject && injectedObject.hasOwnProperty(\"extensions\")) {\n\n        const extensionsObject = injectedObject[\"extensions\"];\n        if (extensionsObject && extensionsObject.hasOwnProperty(\"thumbnail-generation\")) {\n\n          const thumbnailGenerationObject = extensionsObject[\"thumbnail-generation\"];\n\n          const mq = window.matchMedia(this.props.theme.breakPoints[0]);\n          mq.addListener(() => {\n\n            const imageToDownload = this.chooseImage(thumbnailGenerationObject);\n            let img = new Image();\n            img.src = imageToDownload;\n            img.onload = () => this.setState({ imageUrl: img.src });\n\n          });\n\n          const imageToDownload = this.chooseImage(thumbnailGenerationObject);\n          this.downloadImage(imageToDownload).then(response => {\n\n            const url = URL.createObjectURL(response)\n            let img = new Image();\n            img.src = url;\n            img.onload = () => {\n\n              this.setState({ imageUrl: img.src });\n              URL.revokeObjectURL(img.src);\n\n            }\n\n          }).catch(error => console.error(error));\n\n        }\n      }\n\n    } else {\n\n      let img = new Image();\n      img.src = this.state.message.data.url;\n      img.onload = () => this.setState({ imageUrl: img.src });\n\n    }\n  }\n\n  downloadImage(imgUrl) {\n\n    const promise = new Promise((resolve, reject) => {\n\n      const xhr = new XMLHttpRequest();\n      xhr.open(\"GET\", imgUrl, true);\n      xhr.responseType = \"blob\";\n\n      xhr.onload = () => {\n\n        if (xhr.readyState === 4) {\n\n          if (xhr.status === 200) {\n\n            this.timer = null;\n            resolve(xhr.response);\n\n          } else if (xhr.status === 403) {\n\n            this.timer = setTimeout(() => {\n\n              this.downloadImage(imgUrl).then(response => resolve(response)).catch(error => reject(error));\n\n            }, 800);\n          }\n\n        } else {\n          reject(xhr.statusText);\n        }\n\n      }\n\n      xhr.onerror = event => reject(new Error('There was a network error.', event));\n      xhr.ontimeout = event => reject(new Error('There was a timeout error.', event));\n      xhr.send();\n\n    });\n\n    return promise;\n  }\n\n  open = () => {\n    this.props.actionGenerated(\"viewActualImage\", this.state.message);\n  }\n\n  render() {\n\n    let avatar = null, name = null;\n    if (this.props.message.receiverType === 'group') {\n\n      avatar = (\n        <div css={messageThumbnailStyle()} className=\"message__thumbnail\">\n          <Avatar\n            cornerRadius=\"50%\"\n            borderColor={this.props.theme.color.secondary}\n            borderWidth=\"1px\"\n            image={this.state.message.sender.avatar}></Avatar>\n        </div>\n      );\n\n      name = (<div css={(nameWrapperStyle(avatar))} className=\"message__name__wrapper\"><span css={nameStyle(this.props)} className=\"message__name\">{this.state.message.sender.name}</span></div>);\n    }\n\n    return (\n      <div css={messageContainerStyle()} className=\"receiver__message__container message__image\">\n        <ToolTip {...this.props} message={this.state.message} name={name} />\n        <div css={messageWrapperStyle()} className=\"message__wrapper\">\n          {avatar}\n          <div css={messageDetailStyle(name)} className=\"message__details\">\n            {name}\n            <div css={messageImgContainerStyle()} className=\"message__image__container\">\n              <div css={messageImgWrapperStyle(this.props)} onClick={this.open} className=\"message__image__wrapper\">\n                <img src={this.state.imageUrl} alt=\"message\" ref={el => { this.imgRef = el; }} />\n              </div>\n            </div>\n            <div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\n              <span css={messageTimestampStyle(this.props)} className=\"message__timestamp\">{new Date(this.props.message.sentAt * 1000).toLocaleTimeString('en-US', { hour: 'numeric', minute: 'numeric', hour12: true })}</span>\n              <ReplyCount {...this.props} message={this.state.message} />\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default ReceiverImageBubble;","export const messageContainerStyle = () => {\n\n    return {\n        alignSelf: \"flex-end\",\n        marginBottom: \"16px\",\n        paddingLeft: \"16px\",\n        paddingRight: \"16px\",\n        maxWidth: \"65%\",\n        clear: \"both\",\n        position: \"relative\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        flexShrink: \"0\",\n        \":hover\": {\n            \"ul.message__actions\": {\n                display: \"flex\"\n            }\n        }\n    }\n}\n\nexport const messageWrapperStyle = () => {\n\n    return {\n        width: \"auto\",\n        flex: \"1 1\",\n        alignSelf: \"flex-end\",\n        display: \"flex\",\n    }\n}\n\nexport const messageFileWrapper = (props) => {\n\n    return {\n        display: \"inline-block\",\n        borderRadius: \"12px\",\n        backgroundColor: `${props.theme.backgroundColor.blue}`,\n        color: `${props.theme.color.white}`,\n        padding: \"8px 12px\",\n        alignSelf: \"flex-end\",\n        maxWidth: \"100%\",\n        \"> a\": {\n            background: \"0 0\",\n            textDecoration: \"none\",\n            color: `${props.theme.color.white}`,\n            maxWidth: \"100%\",\n            fontSize: \"14px\",\n            \"&:visited, &:active, &:hover\": {\n                color: `${props.theme.color.white}`,\n                textDecoration: \"none\",\n            },\n            \"img\": {\n                backgroundColor: `${props.theme.backgroundColor.white}`,\n            }\n        }\n    }\n}\n\nexport const messageInfoWrapperStyle = () => {\n\n    return {\n        alignSelf: \"flex-end\",\n    }\n}","/** @jsx jsx */\nimport { jsx } from '@emotion/core'\n\nimport ToolTip from \"../ToolTip\";\nimport ReplyCount from \"../ReplyCount\";\nimport ReadReciept from \"../ReadReciept\";\n\nimport {\n  messageContainerStyle,\n  messageWrapperStyle,\n  messageFileWrapper,\n  messageInfoWrapperStyle\n} from \"./style\";\n\nimport blueFile from \"./resources/file-blue.svg\";\n\nconst senderfilebubble = (props) => {\n\n  const message = Object.assign({}, props.message, {messageFrom: \"sender\"});\n\n  return (\n    <div css={messageContainerStyle()} className=\"sender__message__container message__file\">\n      <ToolTip {...props} message={message} />\n      <div css={messageWrapperStyle()} className=\"message__wrapper\">\n        <div css={messageFileWrapper(props)} className=\"message__file__wrapper\">\n          <a href={props.message.data.attachments[0].url} target=\"_blank\" rel=\"noopener noreferrer\">{props.message.data.attachments[0].name} <img src={blueFile} alt=\"file\"/></a>                      \n        </div>\n      </div> \n      <div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\n        <ReplyCount {...props} message={message} />\n        <ReadReciept {...props} />\n      </div>                           \n    </div>\n  )\n}\n\nexport default senderfilebubble;","export const messageContainerStyle = () => {\n\n    return {\n        alignSelf: \"flex-start\",\n        marginBottom: \"16px\",\n        paddingLeft: \"16px\",\n        paddingRight: \"16px\",\n        maxWidth: \"65%\",\n        clear: \"both\",\n        position: \"relative\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        flexShrink: \"0\",\n        \":hover\": {\n            \"ul.message__actions\": {\n                display: \"flex\"\n            }\n        }\n    }\n}\n\nexport const messageWrapperStyle = () => {\n\n    return {\n        width: \"auto\",\n        flex: \"1 1\",\n        alignSelf: \"flex-start\",\n        display: \"flex\",\n    }\n}\n\nexport const messageThumbnailStyle = () => {\n\n    return {\n        width: \"36px\",\n        height: \"36px\",\n        margin: \"10px 5px\",\n        float: \"left\",\n        flexShrink: \"0\",\n    }\n}\n\nexport const messageDetailStyle = () => {\n\n    return {\n        flex: \"1 1\",\n        display: \"flex\",\n        flexDirection: \"column\",\n    }\n}\n\nexport const nameWrapperStyle = (avatar) => {\n\n    const paddingValue = (avatar) ? {\n        padding: \"3px 5px\",\n    } : {};\n\n    return {\n        alignSelf: \"flex-start\",\n        ...paddingValue\n    }\n}\n\nexport const nameStyle = (props) => {\n\n    return {\n        fontSize: \"10px\",\n        color: `${props.theme.color.helpText}`,\n    }\n}\n\nexport const messageFileContainerStyle = () => {\n\n    return {\n        width: \"auto\",\n        flex: \"1 1\",\n        alignSelf: \"flex-start\",\n        display: \"flex\",\n    }\n}\n\nexport const messageFileWrapperStyle = (props) => {\n\n    return {\n        display: \"inline-block\",\n        borderRadius: \"12px\",\n        color: `${props.theme.color.secondary}`,\n        backgroundColor: `${props.theme.backgroundColor.secondary}`,\n        padding: \"8px 12px\",\n        alignSelf: \"flex-start\",\n        width: \"auto\",\n        \"> a\": {\n            background: \"0 0\",\n            textDecoration: \"none\",\n            backgroundColor: \"transparent\",\n            color: `${props.theme.color.primary}`,\n            width: \"auto\",\n            fontSize: \"14px\",\n            \"&:visited, &:active, &:hover\": {\n                color: `${props.theme.color.primary}`,\n                textDecoration: \"none\",\n            },\n            \"img\": {\n                backgroundColor: `${props.theme.backgroundColor.white}`\n            }\n        }\n    }\n}\n\nexport const messageInfoWrapperStyle = () => {\n\n    return {\n        alignSelf: \"flex-start\",\n        padding: \"3px 5px\",\n    }\n}\n\nexport const messageTimestampStyle = (props) => {\n\n    return {\n        display: \"inline-block\",\n        fontSize: \"11px\",\n        fontWeight: \"500\",\n        lineHeight: \"12px\",\n        textTransform: \"uppercase\",\n        color: `${props.theme.color.helpText}`,\n    }\n}","/** @jsx jsx */\nimport { jsx } from '@emotion/core'\n\nimport { SvgAvatar } from '../../util/svgavatar';\n\nimport Avatar from \"../Avatar\";\nimport ToolTip from \"../ToolTip\";\nimport ReplyCount from \"../ReplyCount\";\n\nimport { \n  messageContainerStyle,\n  messageWrapperStyle,\n  messageThumbnailStyle,\n  messageDetailStyle,\n  nameWrapperStyle,\n  nameStyle,\n  messageFileContainerStyle,\n  messageFileWrapperStyle,\n  messageInfoWrapperStyle,\n  messageTimestampStyle\n} from \"./style\";\n\nimport blueFile from \"./resources/file-blue.svg\";\n\nconst receiverfilebubble = (props) => {\n\n  let avatar = null, name = null;\n  if(props.message.receiverType === 'group') {\n\n    if(!props.message.sender.avatar) {\n\n      const uid = props.message.sender.getUid();\n      const char = props.message.sender.getName().charAt(0).toUpperCase();\n\n      props.message.sender.setAvatar(SvgAvatar.getAvatar(uid, char));\n    } \n\n    avatar = (\n      <div css={messageThumbnailStyle()} className=\"message__thumbnail\">\n        <Avatar \n        cornerRadius=\"50%\" \n        borderColor={props.theme.color.secondary}\n        borderWidth=\"1px\"\n        image={props.message.sender.avatar} />\n      </div>\n    );\n\n    name = (<div css={nameWrapperStyle(avatar)} className=\"message__name__wrapper\"><span css={nameStyle(props)} className=\"message__name\">{props.message.sender.name}</span></div>);\n  }\n\n  const message = Object.assign({}, props.message, {messageFrom: \"receiver\"});\n\n  return (\n\n    <div css={messageContainerStyle()} className=\"receiver__message__container message__file\">\n      <ToolTip {...props} message={message} name={name} />    \n      <div css={messageWrapperStyle()} className=\"message__wrapper\">\n        {avatar}\n        <div css={messageDetailStyle()} className=\"message__details\">\n          {name}\n          <div css={messageFileContainerStyle(props)} className=\"message__file__container\">\n            <div css={messageFileWrapperStyle(props)} className=\"message__file__wrapper\">\n              <a href={props.message.data.attachments[0].url} target=\"_blank\" rel=\"noopener noreferrer\">{props.message.data.attachments[0].name} <img src={blueFile} alt=\"file\"/></a>                        \n            </div>\n          </div>\n          <div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\n            <span css={messageTimestampStyle(props)} className=\"message__timestamp\">{new Date(props.message.sentAt * 1000).toLocaleTimeString('en-US', { hour: 'numeric', minute: 'numeric', hour12: true })}</span>\n            <ReplyCount {...props} message={message} />\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default receiverfilebubble;","/** @jsx jsx */\nimport { jsx } from '@emotion/core'\n\nimport ToolTip from \"../ToolTip\";\nimport ReplyCount from \"../ReplyCount\";\nimport ReadReciept from \"../ReadReciept\";\n\nimport {\n  messageContainerStyle,\n  messageWrapperStyle,\n  messageAudioWrapperStyle,\n  messageInfoWrapperStyle\n} from \"./style\";\n\nconst senderaudiobubble = (props) => {\n\n  const message = Object.assign({}, props.message, {messageFrom: \"sender\"});\n\n  return (\n    <div css={messageContainerStyle()} className=\"sender__message__container message__audio\">\n      <ToolTip {...props} message={message} />\n      <div css={messageWrapperStyle()} className=\"message__wrapper\">\n        <div css={messageAudioWrapperStyle(props)} className=\"message__audio__wrapper\">\n          <audio controls>\n            <source src={props.message.data.url} />\n          </audio>                  \n        </div>\n      </div>\n      <div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\n        <ReplyCount {...props} message={message} />\n        <ReadReciept {...props} />\n      </div>                          \n    </div>\n  )\n}\n\nexport default senderaudiobubble;","export const messageContainerStyle = () => {\n\n    return {\n        alignSelf: \"flex-end\",\n        marginBottom: \"16px\",\n        paddingLeft: \"16px\",\n        paddingRight: \"16px\",\n        maxWidth: \"65%\",\n        clear: \"both\",\n        position: \"relative\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        flexShrink: \"0\",\n        \":hover\": {\n            \"ul.message__actions\": {\n                display: \"flex\"\n            }\n        }\n    }\n}\n\nexport const messageWrapperStyle = () => {\n\n    return {\n        width: \"auto\",\n        flex: \"1 1\",\n        alignSelf: \"flex-end\",\n        display: \"flex\",\n    }\n}\n\nexport const messageAudioWrapperStyle = (props) => {\n\n    return {\n        display: \"inline-block\",\n        borderRadius: \"12px\",\n        alignSelf: \"flex-end\",\n        ' > audio': {\n            maxWidth: \"250px\",\n            display: \"inherit\",\n        }\n    }\n}\n\nexport const messageInfoWrapperStyle = () => {\n\n    return {\n        alignSelf: \"flex-end\",\n    }\n}","export const messageContainerStyle = () => {\n\n    return {\n        alignSelf: \"flex-start\",\n        marginBottom: \"16px\",\n        paddingLeft: \"16px\",\n        paddingRight: \"16px\",\n        maxWidth: \"65%\",\n        clear: \"both\",\n        position: \"relative\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        flexShrink: \"0\",\n        \":hover\": {\n            \"ul.message__actions\": {\n                display: \"flex\"\n            }\n        }\n    }\n}\n\nexport const messageWrapperStyle = () => {\n\n    return {\n        width: \"auto\",\n        flex: \"1 1\",\n        alignSelf: \"flex-start\",\n        display: \"flex\",\n    }\n}\n\nexport const messageThumbnailStyle = () => {\n\n    return {\n        width: \"36px\",\n        height: \"36px\",\n        margin: \"10px 5px\",\n        float: \"left\",\n        flexShrink: \"0\",\n    }\n}\n\nexport const messageDetailStyle = () => {\n\n    return {\n        flex: \"1 1\",\n        display: \"flex\",\n        flexDirection: \"column\",\n    }\n}\n\nexport const nameWrapperStyle = (avatar) => {\n\n    const paddingValue = (avatar) ? {\n        padding: \"3px 5px\",\n    } : {};\n\n    return {\n        alignSelf: \"flex-start\",\n        ...paddingValue\n    }\n}\n\nexport const nameStyle = (props) => {\n\n    return {\n        fontSize: \"10px\",\n        color: `${props.theme.color.helpText}`,\n    }\n}\n\nexport const messageAudioContainerStyle = () => {\n\n    return {\n        width: \"auto\",\n        flex: \"1 1\",\n        alignSelf: \"flex-start\",\n        display: \"flex\",\n    }\n}\n\nexport const messageAudioWrapperStyle = (props) => {\n\n    return {\n        display: \"inline-block\",\n        borderRadius: \"12px\",\n        alignSelf: \"flex-start\",\n        \" > audio\": {\n            maxWidth: \"250px\",\n            display: \"inherit\",\n            outline: \"none\",\n        }\n    }\n}\n\nexport const messageInfoWrapperStyle = () => {\n\n    return {\n        alignSelf: \"flex-start\",\n        padding: \"3px 5px\",\n    }\n}\n\nexport const messageTimestampStyle = (props) => {\n\n    return {\n        display: \"inline-block\",\n        fontSize: \"11px\",\n        fontWeight: \"500\",\n        lineHeight: \"12px\",\n        textTransform: \"uppercase\",\n        color: `${props.theme.color.helpText}`,\n    }\n}","/** @jsx jsx */\nimport { jsx } from '@emotion/core'\n\nimport { SvgAvatar } from '../../util/svgavatar';\n\nimport Avatar from \"../Avatar\";\nimport ToolTip from \"../ToolTip\";\nimport ReplyCount from \"../ReplyCount\";\n\nimport {\n  messageContainerStyle,\n  messageWrapperStyle,\n  messageThumbnailStyle,\n  messageDetailStyle,\n  nameWrapperStyle,\n  nameStyle,\n  messageAudioContainerStyle,\n  messageAudioWrapperStyle,\n  messageInfoWrapperStyle,\n  messageTimestampStyle\n} from \"./style\";\n\nconst receiveraudiobubble = (props) => {\n\n  let avatar = null, name = null;\n  if(props.message.receiverType === 'group') {\n\n    if(!props.message.sender.avatar) {\n\n      const uid = props.message.sender.getUid();\n      const char = props.message.sender.getName().charAt(0).toUpperCase();\n\n      props.message.sender.setAvatar(SvgAvatar.getAvatar(uid, char));\n    } \n\n    avatar = (\n      <div css={messageThumbnailStyle()} className=\"message__thumbnail\">\n        <Avatar \n        cornerRadius=\"50%\" \n        borderColor={props.theme.color.secondary}\n        borderWidth=\"1px\"\n        image={props.message.sender.avatar} />\n      </div>\n    );\n    name = (<div css={nameWrapperStyle(avatar)} className=\"message__name__wrapper\"><span css={nameStyle(props)} className=\"message__name\">{props.message.sender.name}</span></div>);\n  }\n\n  const message = Object.assign({}, props.message, {messageFrom: \"receiver\"});\n\n  return (\n    <div css={messageContainerStyle()} className=\"receiver__message__container message__audio\">\n      <ToolTip {...props} message={message} name={name} />\n      <div css={messageWrapperStyle()} className=\"message__wrapper\">\n        {avatar}\n        <div css={messageDetailStyle()} className=\"message__details\">\n          {name}\n          <div css={messageAudioContainerStyle(props)} className=\"message__audio__container\">\n            <div css={messageAudioWrapperStyle(props)} className=\"message__audio__wrapper\">\n              <audio controls>\n                <source src={props.message.data.url} />\n              </audio>                        \n            </div>\n          </div>\n          <div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\n            <span css={messageTimestampStyle(props)} className=\"message__timestamp\">{new Date(props.message.sentAt * 1000).toLocaleTimeString('en-US', { hour: 'numeric', minute: 'numeric', hour12: true })}</span>\n            <ReplyCount {...props} message={message} />\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default receiveraudiobubble;","/** @jsx jsx */\nimport { jsx } from '@emotion/core'\n\nimport ToolTip from \"../ToolTip\";\nimport ReplyCount from \"../ReplyCount\";\nimport ReadReciept from \"../ReadReciept\";\n\nimport {\n  messageContainerStyle,\n  messageWrapperStyle,\n  messageVideoWrapperStyle,\n  messageInfoWrapperStyle\n} from \"./style\";\n\nconst sendervideobubble = (props) => {\n\n  const message = Object.assign({}, props.message, {messageFrom: \"sender\"});\n\n  return (\n    <div css={messageContainerStyle()} className=\"sender__message__container message__video\">\n      <ToolTip {...props} message={message} />\n      <div css={messageWrapperStyle()} className=\"message__wrapper\"> \n        <div css={messageVideoWrapperStyle(props)} className=\"message__video__wrapper\">\n          <video controls>\n            <source src={props.message.data.url} />\n          </video>                        \n        </div>\n      </div>\n      <div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\n        <ReplyCount {...props} message={message} />\n        <ReadReciept {...props} />\n      </div>                          \n    </div>\n  )\n}\n\nexport default sendervideobubble;","export const messageContainerStyle = () => {\n\n    return {\n        alignSelf: \"flex-end\",\n        marginBottom: \"16px\",\n        paddingLeft: \"16px\",\n        paddingRight: \"16px\",\n        maxWidth: \"65%\",\n        clear: \"both\",\n        position: \"relative\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        flexShrink: \"0\",\n        \":hover\": {\n            \"ul.message__actions\": {\n                display: \"flex\"\n            }\n        }\n    }\n}\n\nexport const messageWrapperStyle = () => {\n\n    return {\n        width: \"auto\",\n        flex: \"1 1\",\n        alignSelf: \"flex-end\",\n        display: \"flex\",\n    }\n}\n\nexport const messageVideoWrapperStyle = (props) => {\n\n    return {\n        display: \"inline-block\",\n        alignSelf: 'flex-end',\n        ' > video': {\n            maxWidth: \"250px\",\n            borderRadius: \"12px\",\n            display: \"inherit\",\n        }\n    }\n}\n\nexport const messageInfoWrapperStyle = () => {\n\n    return {\n        alignSelf: \"flex-end\",\n    }\n}","export const messageContainerStyle = () => {\n\n    return {\n        alignSelf: \"flex-start\",\n        marginBottom: \"16px\",\n        paddingLeft: \"16px\",\n        paddingRight: \"16px\",\n        maxWidth: \"65%\",\n        clear: \"both\",\n        position: \"relative\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        flexShrink: \"0\",\n        \":hover\": {\n            \"ul.message__actions\": {\n                display: \"flex\"\n            }\n        }\n    }\n}\n\nexport const messageWrapperStyle = () => {\n\n    return {\n        width: \"auto\",\n        flex: \"1 1\",\n        alignSelf: \"flex-start\",\n        display: \"flex\",\n    }\n}\n\nexport const messageThumbnailStyle = () => {\n\n    return {\n        width: \"36px\",\n        height: \"36px\",\n        margin: \"10px 5px\",\n        float: \"left\",\n        flexShrink: \"0\",\n    }\n}\n\nexport const messageDetailStyle = () => {\n\n    return {\n        flex: \"1 1\",\n        display: \"flex\",\n        flexDirection: \"column\",\n    }\n}\n\nexport const nameWrapperStyle = (avatar) => {\n\n    const paddingValue = (avatar) ? {\n        padding: \"3px 5px\",\n    } : {};\n\n    return {\n        alignSelf: \"flex-start\",\n        ...paddingValue\n    }\n}\n\nexport const nameStyle = (props) => {\n\n    return {\n        fontSize: \"10px\",\n        color: `${props.theme.color.helpText}`,\n    }\n}\n\nexport const messageVideoContainerStyle = () => {\n\n    return {\n        width: \"auto\",\n        flex: \"1 1\",\n        alignSelf: \"flex-start\",\n        display: \"flex\",\n    }\n}\n\nexport const messageVideoWrapperStyle = (props) => {\n\n    return {\n        display: \"inline-block\",\n        alignSelf: \"flex-start\",\n        '> video': {\n            maxWidth: \"250px\",\n            borderRadius: \"12px\",\n            display: \"inherit\",\n            outline: \"none\",\n        }\n    }\n}\n\nexport const messageInfoWrapperStyle = () => {\n\n    return {\n        alignSelf: \"flex-start\",\n        padding: \"3px 5px\",\n    }\n}\n\nexport const messageTimestampStyle = (props) => {\n\n    return {\n        display: \"inline-block\",\n        fontSize: \"11px\",\n        fontWeight: \"500\",\n        lineHeight: \"12px\",\n        textTransform: \"uppercase\",\n        color: `${props.theme.color.helpText}`,\n    }\n}","/** @jsx jsx */\nimport { jsx } from '@emotion/core'\n\nimport { SvgAvatar } from '../../util/svgavatar';\n\nimport Avatar from \"../Avatar\";\nimport ToolTip from \"../ToolTip\";\nimport ReplyCount from \"../ReplyCount\";\n\nimport {\n  messageContainerStyle,\n  messageWrapperStyle,\n  messageThumbnailStyle,\n  messageDetailStyle,\n  nameWrapperStyle,\n  nameStyle,\n  messageVideoContainerStyle,\n  messageVideoWrapperStyle,\n  messageInfoWrapperStyle,\n  messageTimestampStyle\n} from \"./style\";\n\nconst receivervideobubble = (props) => {\n  \n  let avatar = null, name = null;\n  if(props.message.receiverType === 'group') {\n\n    if(!props.message.sender.avatar) {\n\n      const uid = props.message.sender.getUid();\n      const char = props.message.sender.getName().charAt(0).toUpperCase();\n\n      props.message.sender.setAvatar(SvgAvatar.getAvatar(uid, char));\n    } \n\n    avatar = (\n      <div css={messageThumbnailStyle()} className=\"message__thumbnail\">\n        <Avatar \n        cornerRadius=\"50%\" \n        borderColor={props.theme.color.secondary}\n        borderWidth=\"1px\"\n        image={props.message.sender.avatar} />\n      </div>\n    );\n\n    name = (<div css={nameWrapperStyle(avatar)} className=\"message__name__wrapper\"><span css={nameStyle(props)} className=\"message__name\">{props.message.sender.name}</span></div>);\n  }\n\n  const message = Object.assign({}, props.message, {messageFrom: \"receiver\"});\n \n  return (\n\n    <div css={messageContainerStyle()} className=\"receiver__message__container message__video\">\n      <ToolTip {...props} message={message} name={name} />    \n      <div css={messageWrapperStyle()} className=\"message__wrapper\">\n        {avatar}\n        <div css={messageDetailStyle(name)} className=\"message__details\">\n          {name}\n          <div css={messageVideoContainerStyle()} className=\"message__video__container\">\n            <div css={messageVideoWrapperStyle(props)} className=\"message__video__wrapper\">\n              <video controls>\n                <source src={props.message.data.url} />\n              </video>                        \n            </div>\n          </div>\n          <div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\n            <span css={messageTimestampStyle(props)} className=\"message__timestamp\">{new Date(props.message.sentAt * 1000).toLocaleTimeString('en-US', { hour: 'numeric', minute: 'numeric', hour12: true })}</span>\n            <ReplyCount {...props} message={message} />\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default receivervideobubble;","export const messageContainerStyle = (props) => {\n\n    const alignment = (props.messageOf === \"sender\") ? {\n        alignSelf: \"flex-end\"\n    } : {\n        alignSelf: \"flex-start\"\n    };\n\n    return {\n        marginBottom: \"16px\",\n        paddingLeft: \"16px\",\n        paddingRight: \"16px\",\n        maxWidth: \"65%\",\n        clear: \"both\",\n        flexShrink: \"0\",\n        ...alignment\n    }\n}\n\nexport const messageWrapperStyle = (props) => {\n\n    const alignment = (props.messageOf === \"sender\") ? {\n        display: \"flex\",\n        flexDirection : \"column\",\n    } : {};\n\n    return {\n        flex: \"1 1\",\n        position: \"relative\",\n        width: \"100%\",\n        ...alignment\n    }\n}\n\nexport const messageTxtWrapperStyle = (props) => {\n\n    const alignment = (props.messageOf === \"sender\") ? {\n        alignSelf: \"flex-end\",\n    } : {\n        alignSelf: \"flex-start\",\n    };\n\n    return {\n        display: \"inline-block\",\n        borderRadius: \"12px\",\n        padding: \"8px 12px\",\n        alignSelf: \"flex-end\",\n        Width: \"100%\",\n        backgroundColor: `${props.theme.backgroundColor.secondary}`,\n        fontStyle: \"italic\",\n        ...alignment\n    }\n}\n\nexport const messageTxtStyle = (props) => {\n\n    return {\n        fontSize: \"14px!important\",\n        margin: \"0\",\n        lineHeight: \"20px!important\",\n        color: `${props.theme.color.helpText}`\n    }\n}\n\nexport const messageInfoWrapperStyle = (props) => {\n\n    const alignment = (props.messageOf === \"sender\") ? {\n        alignSelf : \"flex-end\",\n    } : {\n        alignSelf: \"flex-start\",\n    };\n\n    return alignment\n}\n\nexport const messageTimeStampStyle = (props) => {\n\n    return {\n        display: \"inline-block\",\n        fontSize: \"11px\",\n        fontWeight: 500,\n        lineHeight: \"12px\",\n        textTransform: \"uppercase\",\n        color: `${props.theme.color.helpText}`,\n    }\n}\n\nexport const messageThumbnailStyle = () => {\n\n    return {\n        width: \"36px\",\n        height: \"36px\",\n        margin: \"12px 0\",\n        float: \"left\",\n    }\n}\n\nexport const messageDetailStyle = (props) => {\n\n    let paddingSpace = {};\n    if (props.messageOf === \"receiver\" && props.message.receiverType === 'group') {\n\n        paddingSpace = {\n            paddingLeft: \"5px\"\n        };\n    }\n\n    return {\n        flex: \"1 1\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        position: \"relative\",\n        ...paddingSpace\n    }\n}\n\nexport const nameWrapperStyle = (props) => {\n\n    let paddingSpace = {};\n    if (props.messageOf === \"receiver\" && props.message.receiverType === 'group') {\n\n        paddingSpace = {\n            padding: \"3px 5px\"\n        };\n    }\n\n    return {\n        alignSelf: \"flex-start\",\n        ...paddingSpace,\n    }\n}\n\nexport const nameStyle = (props) => {\n    return {\n        fontSize: \"10px\",\n        color: `${props.theme.color.helpText}`,\n    }\n}","import React from \"react\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core'\n\nimport { SvgAvatar } from '../../util/svgavatar';\nimport Avatar from \"../Avatar\";\n\nimport {\n    messageContainerStyle,\n    messageWrapperStyle,\n    messageTxtWrapperStyle,\n    messageTxtStyle,\n    messageInfoWrapperStyle,\n    messageTimeStampStyle,\n    messageThumbnailStyle,\n    messageDetailStyle,\n    nameWrapperStyle,\n    nameStyle\n} from \"./style\";\n\nconst deletedmessagebubble = (props) => {\n\n    let message = null;\n    if(props.messageOf === \"sender\") {\n\n        message = (\n            <React.Fragment>\n                <div css={messageTxtWrapperStyle(props)} className=\"message__txt__wrapper\">\n                    <p css={messageTxtStyle(props)} className=\"message__txt\">You deleted this message.</p>                         \n                </div>\n                <div css={messageInfoWrapperStyle(props)} className=\"message__info__wrapper\">\n                    <span css={messageTimeStampStyle(props)} className=\"message__timestamp\">{new Date(props.message.sentAt * 1000).toLocaleTimeString('en-US', { hour: 'numeric', minute: 'numeric', hour12: true })}</span>\n                </div>\n            </React.Fragment>\n        );\n\n    } else if(props.messageOf === \"receiver\") {\n\n        let avatar = null, name = null;\n\n        if(props.message.receiverType === 'group') {\n\n            if (!props.message.sender.avatar) {\n\n                const uid = props.message.sender.getUid();\n                const char = props.message.sender.getName().charAt(0).toUpperCase();\n\n                props.message.sender.setAvatar(SvgAvatar.getAvatar(uid, char));\n            }\n\n            avatar = (\n                <div css={messageThumbnailStyle()} className=\"message__thumbnail\">\n                    <Avatar\n                    cornerRadius=\"50%\"\n                    borderColor={props.theme.color.secondary}\n                    borderWidth=\"1px\"\n                    image={props.message.sender.avatar} />\n                </div>\n            )\n            name = (<div css={nameWrapperStyle(props)} className=\"message__name__wrapper\"><span css={nameStyle(props)} className=\"message__name\">{props.message.sender.name}</span></div>);\n        } \n\n        message = (\n            <React.Fragment>\n                {avatar}\n                <div css={messageDetailStyle(props)} className=\"message__details\">\n                    {name}\n                    <div css={messageTxtWrapperStyle(props)} className=\"message__txt__wrapper\">\n                        <p css={messageTxtStyle(props)} className=\"message__txt\">This message was deleted.</p>\n                    </div>\n                    <div css={messageInfoWrapperStyle(props)} className=\"message__info__wrapper\">\n                        <span css={messageTimeStampStyle(props)} className=\"message__timestamp\">{new Date(props.message.sentAt * 1000).toLocaleTimeString('en-US', { hour: 'numeric', minute: 'numeric', hour12: true })}</span>\n                    </div>\n                </div>\n            </React.Fragment>\n        );\n    }\n\n    return (\n        <div css={messageContainerStyle(props)} className=\"message__deleted\">\n            <div css={messageWrapperStyle(props)} className=\"message__wrapper\">{message}</div>                            \n        </div>\n    )\n}\n\nexport default deletedmessagebubble;","export const messageContainerStyle = () => {\n\n    return {\n        alignSelf: \"flex-end\",\n        marginBottom: \"16px\",\n        paddingLeft: \"16px\",\n        paddingRight: \"16px\",\n        maxWidth: \"65%\",\n        clear: \"both\",\n        position: \"relative\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        flexShrink: \"0\",\n        \":hover\": {\n            \"ul.message__actions\": {\n                display: \"flex\"\n            }\n        }\n    }\n}\n\nexport const messageWrapperStyle = () => {\n\n    return {\n        width: \"auto\",\n        flex: \"1 1\",\n        alignSelf: \"flex-end\",\n        display: \"flex\",\n    }\n}\n\nexport const messageTxtWrapperStyle = (props) => {\n\n    return {\n        display: \"inline-block\",\n        borderRadius: \"12px\",\n        backgroundColor: `${props.theme.backgroundColor.blue}`,\n        color: `${props.theme.color.white}`,\n        padding: \"8px 12px\",\n        alignSelf: \"flex-end\",\n        width: \"auto\",\n    }\n}\n\nexport const pollQuestionStyle = () => {\n\n    return {\n        margin: \"0\",\n        whiteSpace: \"pre-wrap\",\n        wordWrap: \"break-word\",\n        textAlign: \"left\",\n        width: \"100%\",\n        fontSize: \"14px\",\n    }\n}\n\nexport const pollAnswerStyle = (props) => {\n\n    return {\n        listStyleType: \"none\",\n        padding: \"0\",\n        margin: \"0\",\n        width: \"100%\",\n        \"li\": {\n            backgroundColor: `${props.theme.backgroundColor.white}`,\n            margin: \"10px 0\",\n            borderRadius: \"8px\",\n            display: \"flex\",\n            width: \"100%\",\n            position: \"relative\",\n        }\n    }\n}\n\nexport const pollTotalStyle = () => {\n\n    return {\n        fontSize: \"13px\",\n        margin: \"0\",\n        alignSelf: \"flex-end\"\n    }\n}\n\n\nexport const pollPercentStyle = (props, width) => {\n\n    const curvedBorders = (width === \"100%\") ? { borderRadius: \"8px\" } : {\n        borderRadius: \"8px 0 0 8px\"\n    };\n\n    return {\n        maxWidth: \"100%\",\n        width: width,\n        ...curvedBorders,\n        backgroundColor: `${props.theme.backgroundColor.primary}`,\n        minHeight: \"35px\",\n        height: \"100%\",\n        position: \"absolute\",\n        zIndex: \"1\",\n    }\n}\n\nexport const answerWrapperStyle = (props, width) => {\n\n    return {\n        width: \"100%\",\n        color: `${props.theme.color.primary}`,\n        display: \"flex\",\n        alignItems: \"center\",\n        minHeight: \"35px\",\n        height: \"100%\",\n        zIndex: \"2\",\n        \"p\": {\n            margin: \"0\",\n            padding: \"6px 12px\",\n            width: \"calc(100% - 40px)\",\n            whiteSpace: \"pre-wrap\",\n            wordWrap: \"break-word\",\n            fontSize: \"14px\",\n        },\n        \"span\": {\n            width: \"40px\",\n            padding: \"6px 12px\",\n            fontWeight: \"bold\",\n            display: \"inline-block\",\n            fontSize: \"13px\",\n        }\n    }\n}\n\nexport const messageInfoWrapperStyle = () => {\n\n    return {\n        alignSelf: \"flex-end\",\n    }\n}","import React from \"react\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nimport ToolTip from \"../ToolTip\";\nimport ReplyCount from \"../ReplyCount\";\nimport ReadReciept from \"../ReadReciept\";\n\nimport {\n    messageContainerStyle,\n    messageWrapperStyle,\n    messageTxtWrapperStyle,\n    pollQuestionStyle,\n    pollAnswerStyle,\n    pollTotalStyle,\n    pollPercentStyle,\n    answerWrapperStyle,\n    messageInfoWrapperStyle\n} from \"./style\";\n\nclass SenderPollBubble extends React.Component {\n    pollId;\n    requestInProgress = null;\n\n    constructor(props) {\n        \n        super(props);\n        this.message = Object.assign({}, props.message, { messageFrom: \"sender\" });\n    }\n\n    componentDidMount() {\n\n        this.message = Object.assign({}, this.props.message, { messageFrom: \"sender\" });\n    }\n\n    componentDidUpdate() {\n        this.message = Object.assign({}, this.props.message, { messageFrom: \"sender\" });\n    }\n\n    render() {\n\n        if (!this.props.message.hasOwnProperty(\"metadata\")) {\n            return null;\n        }\n        \n        if (!this.props.message.metadata.hasOwnProperty(\"@injected\")) {\n            return null;\n        }\n\n        if (!this.props.message.metadata[\"@injected\"].hasOwnProperty(\"extensions\")) {\n            return null;\n        }\n\n        if (!this.props.message.metadata[\"@injected\"][\"extensions\"].hasOwnProperty(\"polls\")) {\n            return null;\n        }\n\n        const pollOptions = [];\n        const pollExtensionData = this.props.message.metadata[\"@injected\"][\"extensions\"][\"polls\"]; \n\n        this.pollId = pollExtensionData.id;\n        const total = pollExtensionData.results.total;\n        const totalText = (total === 1) ? `${total} vote` : `${total} votes`;\n\n        for (const option in pollExtensionData.results.options) {\n\n            const optionData = pollExtensionData.results.options[option];\n            const vote = optionData[\"count\"];\n\n            let width = \"0%\";\n            if(total) {\n\n                const fraction = (vote / total);\n                width = fraction.toLocaleString(\"en\", { style: 'percent' }); \n            }\n\n            const template = (\n                <li key={option}>\n                    <div css={pollPercentStyle(this.props, width)}> </div>\n                    <div css={answerWrapperStyle(this.props, width)}>\n                        <span>{width}</span>\n                        <p>{optionData.text}</p>\n                    </div>\n                </li>\n            );\n            pollOptions.push(template);\n        }\n\n        return (\n            <div css={messageContainerStyle()} className=\"sender__message__container message__poll\">\n                <ToolTip {...this.props} message={this.message} />    \n                <div css={messageWrapperStyle()} className=\"message__wrapper\">\n                    <div css={messageTxtWrapperStyle(this.props)} className=\"message__poll__wrapper\">\n                        <p css={pollQuestionStyle()} className=\"poll__question\">{pollExtensionData.question}</p>\n                        <ul css={pollAnswerStyle(this.props)} className=\"poll__options\">\n                            {pollOptions}\n                        </ul>\n                        <p css={pollTotalStyle()} className=\"poll__votes\">{totalText}</p>\n                    </div>\n                </div>\n                <div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\n                    <ReplyCount theme={this.props.theme} {...this.props} message={this.message} />\n                    <ReadReciept theme={this.props.theme} {...this.props} />\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default SenderPollBubble;","export const messageContainerStyle = () => {\n\n    return {\n        alignSelf: \"flex-start\",\n        marginBottom: \"16px\",\n        paddingLeft: \"16px\",\n        paddingRight: \"16px\",\n        maxWidth: \"65%\",\n        clear: \"both\",\n        position: \"relative\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        flexShrink: \"0\",\n        \":hover\": {\n            \"ul.message__actions\": {\n                display: \"flex\"\n            }\n        }\n    }\n}\n\nexport const messageWrapperStyle = () => {\n\n    return {\n        width: \"auto\",\n        flex: \"1 1\",\n        alignSelf: \"flex-start\",\n        display: \"flex\",\n    }\n}\n\nexport const messageThumbnailStyle = () => {\n\n    return {\n        width: \"36px\",\n        height: \"36px\",\n        margin: \"10px 5px\",\n        float: \"left\",\n        flexShrink: \"0\",\n    }\n}\n\nexport const messageDetailStyle = () => {\n\n    return {\n        flex: \"1 1\",\n        display: \"flex\",\n        flexDirection: \"column\",\n    }\n}\n\nexport const nameWrapperStyle = (avatar) => {\n\n    const paddingValue = (avatar) ? {\n        padding: \"3px 5px\",\n    } : {};\n\n    return {\n        alignSelf: \"flex-start\",\n        ...paddingValue\n    }\n}\n\nexport const nameStyle = (props) => {\n\n    return {\n        fontSize: \"10px\",\n        color: `${props.theme.color.helpText}`,\n    }\n}\n\nexport const messageTxtContainerStyle = () => {\n\n    return {\n        width: \"auto\",\n        flex: \"1 1\",\n        alignSelf: \"flex-start\",\n        display: \"flex\",\n    }\n}\n\nexport const messageTxtWrapperStyle = (props) => {\n\n    return {\n        display: \"flex\",\n        flexDirection: \"column\",\n        borderRadius: \"12px\",\n        backgroundColor: `${props.theme.backgroundColor.secondary}`,\n        padding: \"8px 12px\",\n        alignSelf: \"flex-start\",\n        width: \"100%\",\n    }\n}\n\nexport const pollQuestionStyle = () => {\n\n    return {\n        margin: \"0\",\n        whiteSpace: \"pre-wrap\",\n        wordWrap: \"break-word\",\n        textAlign: \"left\",\n        width: \"100%\",\n        fontSize: \"14px\",\n    }\n}\n\nexport const pollAnswerStyle = (props) => {\n\n    return {\n        listStyleType: \"none\",\n        padding: \"0\",\n        margin: \"0\",\n        \"li\": {\n            backgroundColor: `${props.theme.backgroundColor.white}`,\n            margin: \"10px 0\",\n            borderRadius: \"8px\",\n            display: \"flex\",\n            width: \"100%\",\n            cursor: \"pointer\",\n            position: \"relative\"\n        }\n    }\n}\n\nexport const pollTotalStyle = () => {\n\n    return {\n        fontSize: \"13px\",\n        margin: \"0\",\n        alignSelf: \"flex-end\"\n    }\n}\n\nexport const pollPercentStyle = (props, width) => {\n\n    const curvedBorders = (width === \"100%\") ? { borderRadius: \"8px\" } : {\n        borderRadius: \"8px 0 0 8px\"\n    };\n\n    return {\n        maxWidth: \"100%\",\n        width: width,\n        ...curvedBorders,\n        backgroundColor: `${props.theme.backgroundColor.primary}`,\n        minHeight: \"35px\",\n        height: \"100%\",\n        position: \"absolute\",\n        zIndex: \"1\",\n    }\n}\n\nexport const answerWrapperStyle = (props, optionData, img) => {\n\n    let bgImg = {};\n    let txtPadding = \"6px 12px\";\n    let countPadding = txtPadding;\n    if (optionData.hasOwnProperty(\"voters\") && optionData.voters.hasOwnProperty(props.user.uid)) {\n\n        bgImg = {\n            background: `url(${img}) no-repeat 10px center`,\n        };\n        txtPadding = \"6px 12px 6px 35px\";\n        countPadding = \"6px 6px 6px 40px\";\n    }\n    \n    return {\n        width: \"100%\",\n        color: `${props.theme.color.primary}`,\n        display: \"flex\",\n        alignItems: \"center\",\n        minHeight: \"35px\",\n        height: \"100%\",\n        ...bgImg,\n        zIndex: \"2\",\n        \"p\": {\n            margin: \"0\",\n            padding: txtPadding,\n            width: \"calc(100% - 40px)\",\n            whiteSpace: \"pre-wrap\",\n            wordWrap: \"break-word\",\n            fontSize: \"14px\",\n        },\n        \"span\": {\n            width: \"40px\",\n            padding: countPadding,\n            fontWeight: \"bold\",\n            display: \"inline-block\",\n            fontSize: \"13px\",\n        }\n    }\n}\n\nexport const messageInfoWrapperStyle = () => {\n\n    return {\n        alignSelf: \"flex-start\",\n        padding: \"3px 5px\",\n    }\n}\n\nexport const messageTimestampStyle = (props) => {\n\n    return {\n        display: \"inline-block\",\n        fontSize: \"11px\",\n        fontWeight: \"500\",\n        lineHeight: \"12px\",\n        textTransform: \"uppercase\",\n        color: `${props.theme.color.helpText}`,\n    }\n}","import React from \"react\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nimport { CometChat } from \"@cometchat-pro/chat\";\n\nimport ToolTip from \"../ToolTip\";\nimport ReplyCount from \"../ReplyCount\";\nimport Avatar from \"../Avatar\";\nimport { SvgAvatar } from '../../util/svgavatar';\n\nimport {\n    messageContainerStyle,\n    messageWrapperStyle,\n    messageThumbnailStyle,\n    messageDetailStyle,\n    nameWrapperStyle,\n    nameStyle,\n    messageTxtContainerStyle,\n    messageTxtWrapperStyle,\n    pollQuestionStyle,\n    pollAnswerStyle,\n    pollPercentStyle,\n    answerWrapperStyle,\n    pollTotalStyle,\n    messageInfoWrapperStyle,\n    messageTimestampStyle\n} from \"./style\";\n\nimport checkIcon from \"./resources/check.svg\";\n\nclass ReceiverPollBubble extends React.Component {\n\n    pollId;\n    requestInProgress = null;\n\n    answerPollQuestion = (event, selectedOption) => {\n\n        CometChat.callExtension('polls', 'POST', 'v1/vote', {\n            vote: selectedOption,\n            id: this.pollId,\n        })\n        .then(response => {\n            this.props.actionGenerated(\"pollAnswered\", response);\n        })\n        .catch(error => {\n            console.log(\"answerPollQuestion error\", error);\n        });\n    }\n\n    render() {\n\n        if (!this.props.message.hasOwnProperty(\"metadata\")) {\n            return null;\n        }\n        \n        if (!this.props.message.metadata.hasOwnProperty(\"@injected\")) {\n            return null;\n        }\n\n        if (!this.props.message.metadata[\"@injected\"].hasOwnProperty(\"extensions\")) {\n            return null;\n        }\n\n        if (!this.props.message.metadata[\"@injected\"][\"extensions\"].hasOwnProperty(\"polls\")) {\n            return null;\n        }\n\n        let avatar = null, name = null;\n        if (this.props.message.receiverType === 'group') {\n\n            if (!this.props.message.sender.avatar) {\n\n                const uid = this.props.message.sender.getUid();\n                const char = this.props.message.sender.getName().charAt(0).toUpperCase();\n\n                this.props.message.sender.setAvatar(SvgAvatar.getAvatar(uid, char));\n            }\n\n            avatar = (\n                <div css={messageThumbnailStyle} className=\"message__thumbnail\">\n                    <Avatar\n                    cornerRadius=\"50%\"\n                    borderColor={this.props.theme.color.secondary}\n                    borderWidth=\"1px\"\n                    image={this.props.message.sender.avatar} />\n                </div>\n            );\n\n            name = (<div css={nameWrapperStyle(avatar)} className=\"message__name__wrapper\"><span css={nameStyle(this.props)} className=\"message__name\">{this.props.message.sender.name}</span></div>);\n        }\n\n        const pollOptions = [];\n        const pollExtensionData = this.props.message.metadata[\"@injected\"][\"extensions\"][\"polls\"];\n        \n        this.pollId = pollExtensionData.id;\n        const total = pollExtensionData.results.total;\n        const totalText = (total === 1) ? `${total} vote` : `${total} votes`;\n        \n        for (const option in pollExtensionData.options) {\n\n            const optionData = pollExtensionData.results.options[option];\n            const vote = optionData[\"count\"];\n\n            let width = \"0%\";\n            if (total) {\n\n                const fraction = (vote / total);\n                width = fraction.toLocaleString(\"en\", { style: 'percent' });\n            }\n\n            const template = (\n                <li key={option} onClick={(event) => this.answerPollQuestion(event, option)}>\n                    <div css={pollPercentStyle(this.props, width)}> </div>\n                    <div css={answerWrapperStyle(this.props, optionData, checkIcon)}>\n                        <span>{width}</span>\n                        <p>{optionData.text}</p>\n                    </div>\n                </li>\n            );\n            pollOptions.push(template);\n        }\n\n        const message = Object.assign({}, this.props.message, { messageFrom: \"receiver\" });\n\n        return (\n            <div css={messageContainerStyle()} className=\"receiver__message__container message__poll\">\n                <ToolTip {...this.props} message={message} name={name} />    \n                <div css={messageWrapperStyle()} className=\"message__wrapper\">\n                    {avatar}\n                    <div css={messageDetailStyle()} className=\"message__details\">\n                        {name}\n                        <div css={messageTxtContainerStyle()} className=\"message__poll__container\">\n                            <div css={messageTxtWrapperStyle(this.props)} className=\"message__poll__wrapper\">\n                                <p css={pollQuestionStyle()} className=\"poll__question\">{pollExtensionData.question}</p>\n                                <ul css={pollAnswerStyle(this.props)} className=\"poll__options\">\n                                    {pollOptions}\n                                </ul>\n                                <p css={pollTotalStyle()} className=\"poll__votes\">{totalText}</p>\n                            </div>\n                        </div>\n                        <div css={messageInfoWrapperStyle()} className=\"message__info__wrapper\">\n                            <span css={messageTimestampStyle(this.props)} className=\"message__timestamp\">{new Date(this.props.message.sentAt * 1000).toLocaleTimeString('en-US', { hour: 'numeric', minute: 'numeric', hour12: true })}</span>\n                            <ReplyCount {...this.props} message={message} />\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default ReceiverPollBubble;","export const callMessageStyle = () => {\n\n    return {\n        padding: \"8px 12px\",\n        marginBottom: \"16px\",\n        textAlign: \"center\",\n    }\n}\n\nexport const callMessageTxtStyle = () => {\n\n    return {\n        fontSize: \"13px\",\n        fontWeight: \"500\",\n        margin: \"0\",\n    }\n}","import { useCallback } from \"react\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core'\n\nimport { CometChat } from \"@cometchat-pro/chat\";\n\nimport { callMessageStyle, callMessageTxtStyle } from \"./style\";\n\nconst CallMessage = (props) => {\n\n    const getMessage = useCallback(() => {\n\n        const call = props.message;\n        const loggedInUser = props.loggedInUser;\n\n        let message = null;\n        switch (call.status) {\n    \n            case CometChat.CALL_STATUS.INITIATED: {\n\n                message = \"Call initiated\";\n                if (call.type === \"audio\") {\n\n                    if (call.receiverType === \"user\") {\n                        message = (call.callInitiator.uid === loggedInUser.uid) ? \"Outgoing audio call\" : \"Incoming audio call\";\n                    } else if (call.receiverType === \"group\") {\n\n                        if (call.action === CometChat.CALL_STATUS.INITIATED) {\n                            message = (call.callInitiator.uid === loggedInUser.uid) ? \"Outgoing audio call\" : \"Incoming audio call\";\n                        } else if (call.action === CometChat.CALL_STATUS.REJECTED) {\n                            message = (call.sender.uid === loggedInUser.uid) ? \"Call rejected\" : `${call.sender.name} rejected call`;\n                        }\n                    }\n                    \n                } else if (call.type === \"video\") {\n\n                    if (call.receiverType === \"user\") {\n                        message = (call.callInitiator.uid === loggedInUser.uid) ? \"Outgoing video call\" : \"Incoming video call\";\n                    } else if (call.receiverType === \"group\") {\n\n                        if (call.action === CometChat.CALL_STATUS.INITIATED) {\n                            message = (call.callInitiator.uid === loggedInUser.uid) ? \"Outgoing video call\" : \"Incoming video call\";\n                        } else if (call.action === CometChat.CALL_STATUS.REJECTED) {\n                            message = (call.sender.uid === loggedInUser.uid) ? \"Call rejected\" : `${call.sender.name} rejected call`;\n                        }\n                    }\n                }\n                break;\n            }\n            case CometChat.CALL_STATUS.ONGOING: {\n\n                if (call.receiverType === \"user\") {\n                    message = \"Call accepted\";\n                } else if (call.receiverType === \"group\") {\n\n                    if (call.action === CometChat.CALL_STATUS.ONGOING) {\n                        message = (call.sender.uid === loggedInUser.uid) ? \"Call accepted\" : `${call.sender.name} joined`;\n                    } else if (call.action === CometChat.CALL_STATUS.REJECTED) {\n                        message = (call.sender.uid === loggedInUser.uid) ? \"Call rejected\" : `${call.sender.name} rejected call`;\n                    } else if(call.action === \"left\") {\n                        message = (call.sender.uid === loggedInUser.uid) ? \"You left the call\" : `${call.sender.name} left the call`;\n                    }\n                }\n\n                break;\n            }\n            case CometChat.CALL_STATUS.UNANSWERED: {\n\n                message = \"Call unanswered\";\n                if (call.type === \"audio\" && (call.receiverType === \"user\" || call.receiverType === \"group\")) {\n                    message = (call.callInitiator.uid === loggedInUser.uid) ? \"Unanswered audio call\" : \"Missed audio call\";\n                } else if (call.type === \"video\" && (call.receiverType === \"user\" || call.receiverType === \"group\")) {\n                    message = (call.callInitiator.uid === loggedInUser.uid) ? \"Unanswered video call\" : \"Missed video call\";\n                }\n                break;\n            }\n            case CometChat.CALL_STATUS.REJECTED: {\n                message = \"Call rejected\";\n                break;\n            }\n            case CometChat.CALL_STATUS.ENDED:\n                message = \"Call ended\";\n                break;\n            case CometChat.CALL_STATUS.CANCELLED:\n                message = \"Call cancelled\"\n                break;\n            case CometChat.CALL_STATUS.BUSY:\n                message = \"Call busy\";\n                break;\n            default:\n                break;\n        }\n\n        return <p css={callMessageTxtStyle}>{message}</p>\n    }, [props]);\n\n    return (\n        <div css={callMessageStyle()} className=\"call__message\">{getMessage()}</div>\n    )\n}\n\nexport default CallMessage;","export const chatListStyle = (props) => {\n\n    return {\n        backgroundColor: `${props.theme.backgroundColor.white}`,\n        zIndex: \"1\",\n        width: \"100%\",\n        flex: \"1 1 0\",\n        order: \"2\",\n        position: \"relative\",\n    }\n}\n\nexport const listWrapperStyle = () => {\n\n    return {\n        boxSizing: \"border-box\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        height: \"100%\",\n        overflowX: \"hidden\",\n        overflowY: \"scroll\",\n        position: \"absolute\",\n        top: \"0\",\n        transition: \"background .3s ease-out .1s\",\n        width: \"100%\",\n        zIndex: \"100\",\n        paddingTop: \"14px\"\n    }\n}\n\nexport const actionMessageStyle = () => {\n\n    return {\n        padding: \"8px 12px\",\n        marginBottom: \"16px\",\n        textAlign: \"center\",\n    }\n}\n\nexport const actionMessageTxtStyle = () => {\n\n    return {\n        fontSize: \"13.5px\",\n        margin: \"0\",\n        lineHeight: \"20px\",\n    }\n}\n\nexport const messageDateContainerStyle = () => {\n\n    return {\n        textAlign: \"center\",\n        marginBottom: \"16px\"\n    }\n}\n\nexport const messageDateStyle = (props) => {\n\n    return {\n        padding: \"8px 12px\",\n        backgroundColor: `${props.theme.backgroundColor.secondary}`,\n        color: `${props.theme.color.primary}`,\n        borderRadius: \"10px\"\n    }\n}\n\nexport const decoratorMessageStyle = () => {\n\n    return {\n        overflow: \"hidden\",\n        width: \"100%\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        position: \"absolute\",\n        top: \"50%\",\n    }\n}\n\nexport const decoratorMessageTxtStyle = (props) => {\n\n    return {\n        margin: \"0\",\n        height: \"30px\",\n        color: `${props.theme.color.secondary}`,\n        fontSize: \"24px!important\",\n        fontWeight: \"600\"\n    }\n}","import React from \"react\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core'\n\nimport { CometChat } from \"@cometchat-pro/chat\";\n\nimport { CometChatManager } from \"../../util/controller\";\nimport { MessageListManager } from \"./controller\";\n\nimport * as enums from \"../../util/enums.js\";\nimport { validateWidgetSettings } from \"../../util/common\";\n\nimport SenderMessageBubble from \"../SenderMessageBubble\";\nimport ReceiverMessageBubble from \"../ReceiverMessageBubble\";\nimport SenderImageBubble from \"../SenderImageBubble\";\nimport ReceiverImageBubble from \"../ReceiverImageBubble\";\nimport SenderFileBubble from \"../SenderFileBubble\";\nimport ReceiverFileBubble from \"../ReceiverFileBubble\";\nimport SenderAudioBubble from \"../SenderAudioBubble\";\nimport ReceiverAudioBubble from \"../ReceiverAudioBubble\";\nimport SenderVideoBubble from \"../SenderVideoBubble\";\nimport ReceiverVideoBubble from \"../ReceiverVideoBubble\";\nimport DeletedMessageBubble from \"../DeletedMessageBubble\";\nimport SenderPollBubble from \"../SenderPollBubble\";\nimport ReceiverPollBubble from \"../ReceiverPollBubble\";\n\nimport CallMessage from \"../CallMessage\";\n\nimport { \n  chatListStyle,\n  listWrapperStyle,\n  actionMessageStyle,\n  actionMessageTxtStyle,\n  messageDateContainerStyle,\n  messageDateStyle,\n  decoratorMessageStyle,\n  decoratorMessageTxtStyle\n} from \"./style\";\n\nclass MessageList extends React.PureComponent {\n  loggedInUser = null;\n  lastScrollTop = 0;\n  times = 0;\n  decoratorMessage = \"Loading...\";\n\n  constructor(props) {\n\n    super(props);\n    this.state = {\n      onItemClick: null,\n    }\n    \n    this.loggedInUser = this.props.loggedInUser;\n    this.messagesEnd = React.createRef();\n  }\n\n  componentDidMount() {\n\n    if(this.props.parentMessageId) {\n      this.MessageListManager = new MessageListManager(this.props.widgetsettings, this.props.item, this.props.type,this.props.parentMessageId);\n    } else {\n      this.MessageListManager = new MessageListManager(this.props.widgetsettings, this.props.item, this.props.type);\n    }\n    \n    this.getMessages();\n    this.MessageListManager.attachListeners(this.messageUpdated);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n   \n    const previousMessageStr = JSON.stringify(prevProps.messages);\n    const currentMessageStr = JSON.stringify(this.props.messages);\n\n    if (this.props.type === 'user' && prevProps.item.uid !== this.props.item.uid) {\n      \n      this.MessageListManager.removeListeners();\n\n      if (this.props.parentMessageId) {\n        this.MessageListManager = new MessageListManager(this.props.widgetsettings, this.props.item, this.props.type, this.props.parentMessageId);\n      } else {\n        this.MessageListManager = new MessageListManager(this.props.widgetsettings, this.props.item, this.props.type);\n      }\n\n      this.getMessages();\n      this.MessageListManager.attachListeners(this.messageUpdated);\n\n    } else if (this.props.type === 'group' && prevProps.item.guid !== this.props.item.guid){\n\n      this.MessageListManager.removeListeners();\n\n      if (this.props.parentMessageId) {\n        this.MessageListManager = new MessageListManager(this.props.widgetsettings, this.props.item, this.props.type, this.props.parentMessageId);\n      } else {\n        this.MessageListManager = new MessageListManager(this.props.widgetsettings, this.props.item, this.props.type);\n      }\n      \n      this.getMessages();\n      this.MessageListManager.attachListeners(this.messageUpdated);\n\n    } else if(prevProps.parentMessageId !== this.props.parentMessageId) {\n        \n      this.MessageListManager.removeListeners();\n      this.MessageListManager = new MessageListManager(this.props.widgetsettings, this.props.item, this.props.type, this.props.parentMessageId);\n      this.getMessages();\n      this.MessageListManager.attachListeners(this.messageUpdated);\n\n    } else if (previousMessageStr !== currentMessageStr) {\n      \n      if(this.props.scrollToBottom) {\n        this.scrollToBottom();\n      } else {\n        this.scrollToBottom(this.lastScrollTop);\n      }\n      \n    }\n  }\n\n  scrollToBottom = (scrollHeight = 0) => {\n    \n    if (this.messagesEnd) {\n      this.messagesEnd.scrollTop = (this.messagesEnd.scrollHeight - scrollHeight);\n    }\n  }\n\n  getMessages = (scrollToBottom = false) => {\n\n    const actionMessages = [];\n    \n    new CometChatManager().getLoggedInUser().then((user) => {\n      \n      //this.loggedInUser = user;\n      this.MessageListManager.fetchPreviousMessages().then(messageList => {\n\n        if (messageList.length === 0) {\n          this.decoratorMessage = \"No messages found\";\n        }\n\n        messageList.forEach((message) => {\n          \n          if (message.category === \"action\" && message.sender.uid === \"app_system\") {\n            actionMessages.push(message);\n          }\n\n          //if the sender of the message is not the loggedin user, mark it as read.\n          if (message.getSender().getUid() !== user.getUid() && !message.getReadAt()) {\n            \n            if(message.getReceiverType() === \"user\") {\n\n              CometChat.markAsRead(message.getId().toString(), message.getSender().getUid(), message.getReceiverType());\n\n            } else if(message.getReceiverType() === \"group\") {\n\n              CometChat.markAsRead(message.getId().toString(), message.getReceiverId(), message.getReceiverType());\n            }\n          }\n          this.props.actionGenerated(\"messageRead\", message);\n        });\n\n        let actionGenerated = \"messageFetched\";\n        if (scrollToBottom === true) {\n          actionGenerated = \"messageFetchedAgain\";\n        }\n      \n        ++this.times;\n\n          if ((this.times === 1 && actionMessages.length > 5)\n            || (this.times > 1 && actionMessages.length === 30)) {\n\n            this.props.actionGenerated(\"messageFetched\", messageList);\n            this.getMessages(true);\n\n          } else {\n\n            this.lastScrollTop = this.messagesEnd.scrollHeight;\n            this.props.actionGenerated(actionGenerated, messageList);\n          }\n          \n      }).catch((error) => {\n        //TODO Handle the erros in contact list.\n        console.error(\"[MessageList] getMessages fetchPrevious error\", error);\n        this.decoratorMessage = \"Error\";\n      });\n\n    }).catch((error) => {\n      console.log(\"[MessageList] getMessages getLoggedInUser error\", error);\n      this.decoratorMessage = \"Error\";\n    });\n\n  }\n\n  //callback for listener functions\n  messageUpdated = (key, message, group, options) => {\n\n    switch(key) {\n\n      case enums.MESSAGE_DELETED:\n        this.messageDeleted(message);\n        break;\n      case enums.MESSAGE_EDITED:\n        this.messageEdited(message);\n        break;\n      case enums.MESSAGE_DELIVERED:\n      case enums.MESSAGE_READ:\n        this.messageReadAndDelivered(message);\n        break;\n      case enums.TEXT_MESSAGE_RECEIVED:\n      case enums.MEDIA_MESSAGE_RECEIVED:\n        this.messageReceived(message);\n        break;\n      case enums.CUSTOM_MESSAGE_RECEIVED:\n        this.customMessageReceived(message);\n        break;\n      case enums.GROUP_MEMBER_SCOPE_CHANGED:\n      case enums.GROUP_MEMBER_JOINED:\n      case enums.GROUP_MEMBER_LEFT:\n      case enums.GROUP_MEMBER_ADDED:\n      case enums.GROUP_MEMBER_KICKED:\n      case enums.GROUP_MEMBER_BANNED:\n      case enums.GROUP_MEMBER_UNBANNED:\n        this.groupUpdated(key, message, group, options);\n        break;\n      case enums.INCOMING_CALL_RECEIVED:\n      case enums.INCOMING_CALL_CANCELLED:\n      case enums.OUTGOING_CALL_ACCEPTED:\n      case enums.OUTGOING_CALL_REJECTED:\n        this.callUpdated(message);\n        break;\n      default:\n        break;\n    }\n  }\n\n  messageDeleted = (message) => {\n\n    if (this.props.type === 'group' \n    && message.getReceiverType() === 'group'\n    && message.getReceiver().guid === this.props.item.guid) {\n\n      this.props.actionGenerated(\"messageDeleted\", [message]);\n        \n    } else if (this.props.type === 'user' \n    && message.getReceiverType() === 'user'\n      && message.getSender().uid === this.props.item.uid) {\n\n      this.props.actionGenerated(\"messageDeleted\", [message]);\n    }\n  }\n\n  messageEdited = (message) => {\n\n    if ((this.props.type === 'group' && message.getReceiverType() === 'group' && message.getReceiver().guid === this.props.item.guid) \n      || (this.props.type === 'user' && message.getReceiverType() === 'user' && message.getSender().uid === this.props.item.uid)) {\n\n      const messageList = [...this.props.messages];\n      let messageKey = messageList.findIndex((m, k) => m.id === message.id);\n      \n      if (messageKey > -1) {\n\n        const messageObj = messageList[messageKey];\n        const newMessageObj = Object.assign({}, messageObj, message);\n\n        messageList.splice(messageKey, 1, newMessageObj);\n        this.props.actionGenerated(\"messageUpdated\", messageList);\n      } \n    } \n  }\n\n  messageReadAndDelivered = (message) => {\n\n    //read receipts\n    if (message.getReceiverType() === 'user'\n    && message.getSender().getUid() === this.props.item.uid\n    && message.getReceiver() === this.loggedInUser.uid) {\n\n      let messageList = [...this.props.messages];\n      if (message.getReceiptType() === \"delivery\") {\n\n        //search for message\n        let messageKey = messageList.findIndex(m => m.id === message.messageId);\n\n        if (messageKey > -1) {\n\n          let messageObj = { ...messageList[messageKey] };\n          let newMessageObj = Object.assign({}, messageObj, { deliveredAt: message.getDeliveredAt() });\n          messageList.splice(messageKey, 1, newMessageObj);\n\n          this.props.actionGenerated(\"messageUpdated\", messageList);\n        }\n\n      } else if (message.getReceiptType() === \"read\") {\n\n        //search for message\n        let messageKey = messageList.findIndex(m => m.id === message.messageId);\n\n        if (messageKey > -1) {\n\n          let messageObj = { ...messageList[messageKey] };\n          let newMessageObj = Object.assign({}, messageObj, { readAt: message.getReadAt() });\n          messageList.splice(messageKey, 1, newMessageObj);\n\n          this.props.actionGenerated(\"messageUpdated\", messageList);\n        }\n\n      }\n\n    } else if (message.getReceiverType() === 'group' \n      && message.getReceiver().guid === this.props.item.guid) {\n      //not implemented\n    }\n\n  }\n\n  messageReceived = (message) => {\n\n    //new messages\n    if (this.props.type === 'group' \n      && message.getReceiverType() === 'group'\n      && message.getReceiverId() === this.props.item.guid) {\n\n      if(!message.getReadAt()) {\n        CometChat.markAsRead(message.getId().toString(), message.getReceiverId(), message.getReceiverType());\n      }\n      \n      this.props.actionGenerated(\"messageReceived\", [message]);\n        \n    } else if (this.props.type === 'user' \n      && message.getReceiverType() === 'user'\n      && message.getSender().uid === this.props.item.uid) {\n\n      if(!message.getReadAt()) {\n        CometChat.markAsRead(message.getId().toString(), message.getSender().uid, message.getReceiverType());\n      }\n\n      this.props.actionGenerated(\"messageReceived\", [message]);\n    }\n  }\n\n  customMessageReceived = (message) => {\n\n    //new messages\n    if (this.props.type === 'group'\n      && message.getReceiverType() === 'group'\n      && message.getReceiverId() === this.props.item.guid) {\n\n      if (!message.getReadAt()) {\n        CometChat.markAsRead(message.getId().toString(), message.getReceiverId(), message.getReceiverType());\n      }\n\n      if (message.hasOwnProperty(\"metadata\")) {\n\n        this.props.actionGenerated(\"customMessageReceived\", [message]);\n\n      } else if (message.type === \"extension_poll\") {//customdata (poll extension) does not have metadata\n\n        const newMessage = this.addMetadataToCustomData(message);\n        this.props.actionGenerated(\"customMessageReceived\", [newMessage]);\n      }\n\n    } else if (this.props.type === 'user'\n      && message.getReceiverType() === 'user'\n      && message.getSender().uid === this.props.item.uid) {\n\n      if (!message.getReadAt()) {\n        CometChat.markAsRead(message.getId().toString(), message.getSender().uid, message.getReceiverType());\n      }\n\n      if (message.hasOwnProperty(\"metadata\")) {\n\n        this.props.actionGenerated(\"customMessageReceived\", [message]);\n\n      } else if (message.type === \"extension_poll\") {//customdata (poll extension) does not have metadata\n\n        const newMessage = this.addMetadataToCustomData(message);\n        this.props.actionGenerated(\"customMessageReceived\", [newMessage]);\n      }\n    }\n\n  }\n\n  addMetadataToCustomData = (message) => {\n\n    const customData = message.data.customData;\n    const options = customData.options;\n\n    const resultOptions = {};\n    for (const option in options) {\n\n      resultOptions[option] = {\n        text: options[option],\n        count: 0,\n      }\n    }\n\n    const polls = {\n      \"id\": message.id,\n      \"options\": options,\n      \"results\": {\n        \"total\": 0,\n        \"options\": resultOptions,\n        \"question\": customData.question\n      },\n      \"question\": customData.question\n    };\n\n    return { ...message, \"metadata\": { \"@injected\": { \"extensions\": { \"polls\": polls } } } };\n  }\n\n  callUpdated = (message) => {\n\n    if (validateWidgetSettings(this.props.widgetsettings, \"show_call_notifications\") === false) {\n      return false;\n    }\n    \n    if (this.props.type === 'group'\n      && message.getReceiverType() === 'group'\n      && message.getReceiverId() === this.props.item.guid) {\n\n      if (!message.getReadAt()) {\n        CometChat.markAsRead(message.getId().toString(), message.getReceiverId(), message.getReceiverType());\n      }\n      \n      this.props.actionGenerated(\"callUpdated\", message);\n\n    } else if (this.props.type === 'user'\n      && message.getReceiverType() === 'user'\n      && message.getSender().uid === this.props.item.uid) {\n\n      if (!message.getReadAt()) {\n        CometChat.markAsRead(message.getId().toString(), message.getSender().uid, message.getReceiverType());\n      }\n      \n      this.props.actionGenerated(\"callUpdated\", message);\n    }\n\n  }\n\n  groupUpdated = (key, message, group, options) => {\n    \n    if (this.props.type === 'group' \n    && message.getReceiverType() === 'group'\n    && message.getReceiver().guid === this.props.item.guid) {\n\n      // if(!message.getReadAt()) {\n      //   CometChat.markAsRead(message.getId().toString(), message.getReceiverId(), message.getReceiverType());\n      // }\n      \n      this.props.actionGenerated(\"groupUpdated\", message, key, group, options);\n    }\n  }\n\n  handleScroll = (e) => {\n\n    const scrollTop = e.currentTarget.scrollTop;\n    this.lastScrollTop = this.messagesEnd.scrollHeight - scrollTop;\n    \n    const top = Math.round(scrollTop) === 0;\n    if (top && this.props.messages.length) {\n      this.getMessages();\n    }\n  }\n\n  handleClick = (message) => {\n    this.props.onItemClick(message, 'message');\n  }\n\n  getSenderMessageComponent = (message, key) => {\n\n    let component;\n    \n    if(message.hasOwnProperty(\"deletedAt\")) {\n      \n      component = (<DeletedMessageBubble theme={this.props.theme} key={key} item={this.props.item} type={this.props.type} message={message} messageOf=\"sender\" />);\n\n    } else {\n\n      switch (message.type) {\n        case CometChat.MESSAGE_TYPE.TEXT:\n          component = (message.text ? <SenderMessageBubble theme={this.props.theme} key={key} item={this.props.item} type={this.props.type} message={message} widgetsettings={this.props.widgetsettings} widgetconfig={this.props.widgetconfig} actionGenerated={this.props.actionGenerated} /> : null);\n        break;\n        case CometChat.MESSAGE_TYPE.IMAGE:\n          component = (message.data.url ? <SenderImageBubble theme={this.props.theme} key={key} item={this.props.item} type={this.props.type} message={message} widgetsettings={this.props.widgetsettings} widgetconfig={this.props.widgetconfig} actionGenerated={this.props.actionGenerated} /> : null);\n        break;\n        case CometChat.MESSAGE_TYPE.FILE:\n          component = (message.data.attachments ? <SenderFileBubble theme={this.props.theme} key={key} item={this.props.item} type={this.props.type} message={message} widgetsettings={this.props.widgetsettings} widgetconfig={this.props.widgetconfig} actionGenerated={this.props.actionGenerated} /> : null);\n        break;\n        case CometChat.MESSAGE_TYPE.VIDEO:\n          component = (message.data.url ? <SenderVideoBubble theme={this.props.theme} key={key} item={this.props.item} type={this.props.type} message={message} widgetsettings={this.props.widgetsettings} widgetconfig={this.props.widgetconfig} actionGenerated={this.props.actionGenerated} /> : null);\n        break;\n        case CometChat.MESSAGE_TYPE.AUDIO:\n          component = (message.data.url ? <SenderAudioBubble theme={this.props.theme} key={key} item={this.props.item} type={this.props.type} message={message} widgetsettings={this.props.widgetsettings} widgetconfig={this.props.widgetconfig} actionGenerated={this.props.actionGenerated} /> : null);\n        break;\n        default:\n        break;\n      }\n\n    }\n    \n    return component;\n  }\n\n  getReceiverMessageComponent = (message, key) => {\n\n    let component;\n\n    if(message.hasOwnProperty(\"deletedAt\")) {\n\n      component = (<DeletedMessageBubble theme={this.props.theme} key={key} message={message} messageOf=\"receiver\" />);\n\n    } else {\n\n      switch (message.type) {\n        case \"message\":\n        case CometChat.MESSAGE_TYPE.TEXT:\n          component = (message.text ? <ReceiverMessageBubble theme={this.props.theme} key={key} item={this.props.item} type={this.props.type} message={message} widgetsettings={this.props.widgetsettings} widgetconfig={this.props.widgetconfig} actionGenerated={this.props.actionGenerated} /> : null);\n        break;\n        case CometChat.MESSAGE_TYPE.IMAGE:\n          component = (message.data.url ? <ReceiverImageBubble theme={this.props.theme} key={key} item={this.props.item} type={this.props.type} message={message} widgetsettings={this.props.widgetsettings} widgetconfig={this.props.widgetconfig} actionGenerated={this.props.actionGenerated} /> : null);\n        break;\n        case CometChat.MESSAGE_TYPE.FILE:\n          component = (message.data.attachments ? <ReceiverFileBubble theme={this.props.theme} key={key} item={this.props.item} type={this.props.type} message={message} widgetsettings={this.props.widgetsettings} widgetconfig={this.props.widgetconfig} actionGenerated={this.props.actionGenerated} /> : null);\n        break;\n        case CometChat.MESSAGE_TYPE.AUDIO:\n          component = (message.data.url ? <ReceiverAudioBubble theme={this.props.theme} key={key} item={this.props.item} type={this.props.type} message={message} widgetsettings={this.props.widgetsettings} widgetconfig={this.props.widgetconfig} actionGenerated={this.props.actionGenerated} /> : null);\n        break;\n        case CometChat.MESSAGE_TYPE.VIDEO:\n          component = (message.data.url ? <ReceiverVideoBubble theme={this.props.theme} key={key} item={this.props.item} type={this.props.type} message={message} widgetsettings={this.props.widgetsettings} widgetconfig={this.props.widgetconfig} actionGenerated={this.props.actionGenerated} /> : null);\n        break;\n        default:\n        break;\n      }\n    }\n    return component;\n  }\n\n  getSenderCustomMessageComponent = (message, key) => {\n\n    let component;\n    if (message.hasOwnProperty(\"deletedAt\")) {\n      component = (<DeletedMessageBubble theme={this.props.theme} key={key} item={this.props.item} type={this.props.type} message={message} messageOf=\"sender\" />);\n    } else {\n\n      switch (message.type) {\n        case \"extension_poll\":\n          component = <SenderPollBubble theme={this.props.theme} key={key} item={this.props.item} type={this.props.type} message={message} widgetsettings={this.props.widgetsettings} actionGenerated={this.props.actionGenerated} />;\n          break;\n        default:\n          break;\n      }\n    }\n\n    return component;\n  }\n\n  getReceiverCustomMessageComponent = (message, key) => {\n\n    let component;\n    if (message.hasOwnProperty(\"deletedAt\")) {\n      component = (<DeletedMessageBubble theme={this.props.theme} key={key} item={this.props.item} type={this.props.type} message={message} messageOf=\"receiver\" />);\n    } else {\n\n      switch (message.type) {\n        case \"extension_poll\":\n          component = <ReceiverPollBubble user={this.loggedInUser} theme={this.props.theme} key={key} item={this.props.item} type={this.props.type} message={message} widgetsettings={this.props.widgetsettings} actionGenerated={this.props.actionGenerated} />;\n          break;\n        default:\n          break;\n      }\n    }\n\n    return component;\n  }\n\n  getCallMessageComponent = (message, key) => {\n    return (\n      <CallMessage message={message} key={key} theme={this.props.theme} loggedInUser={this.loggedInUser} />\n    );\n  }\n\n  getActionMessageComponent = (message, key) => {\n\n    let component = null;\n    //console.log(\"getActionMessageComponent message\", message);\n    if(message.message) {\n\n      component = (\n        <div css={actionMessageStyle()} className=\"message__action\" key={key}><p css={actionMessageTxtStyle()}>{message.message}</p></div>\n      );\n\n      //if action messages are set to hide in config\n      if(this.props.messageconfig) {\n\n        const found = this.props.messageconfig.find(cfg => {\n          return (cfg.action === message.action && cfg.category === message.category);\n        });\n  \n        if(found && found.enabled === false) {\n          component = null;\n        }\n      }\n      \n    }\n\n    return component;\n  }\n  \n  getComponent = (message, key) => {\n\n    let component;\n    \n    switch(message.category) {\n      case \"action\":\n        component = this.getActionMessageComponent(message, key);\n      break;\n      case \"call\":\n        component = this.getCallMessageComponent(message, key);\n      break;\n      case \"message\":\n        if(this.loggedInUser.uid === message.sender.uid) {\n          component = this.getSenderMessageComponent(message, key);\n        } else {\n          component = this.getReceiverMessageComponent(message, key);\n        }\n      break;\n      case \"custom\":\n        if (this.loggedInUser.uid === message.sender.uid) {\n          component = this.getSenderCustomMessageComponent(message, key);\n        } else {\n          component = this.getReceiverCustomMessageComponent(message, key);\n        }\n      break;\n      default:\n      break;\n    }\n\n    return component;\n  }\n\n  render() {\n\n    let messageContainer = null;\n    if (this.props.messages.length === 0) {\n      messageContainer = (\n        <div css={decoratorMessageStyle()} className=\"messages__decorator-message\">\n          <p css={decoratorMessageTxtStyle(this.props)} className=\"decorator-message\">{this.decoratorMessage}</p>\n        </div>\n      );\n    }\n\n    let cDate = null;\n    const messages = this.props.messages.map((message, key) => {\n\n      let dateSeparator = null;\n      const messageSentDate = new Date(message.sentAt * 1000).toLocaleDateString();\n      if (cDate !== messageSentDate) {\n        dateSeparator = (<div css={messageDateContainerStyle()} className=\"message__date\"><span css={messageDateStyle(this.props)}>{messageSentDate}</span></div>);\n      }\n      cDate = messageSentDate;\n\n      return (\n        <React.Fragment key={key}>\n          {dateSeparator}\n          {this.getComponent(message, key)}\n        </React.Fragment>\n      )\n    });\n\n    return (\n      <div className=\"chat__list\" css={chatListStyle(this.props)}>\n        {messageContainer}\n        <div className=\"list__wrapper\" css={listWrapperStyle()} ref={(el) => { this.messagesEnd = el; }} onScroll={this.handleScroll}>\n          {messages}\n        </div>\n      </div>\n    );\n  }\n\n  componentWillUnmount() {\n    this.MessageListManager.removeListeners();\n    this.MessageListManager = null;\n  }\n}\n\nexport default MessageList;\n","\n\nexport const previewWrapperStyle = (props, keyframes) => {\n\n    const slideAnimation = keyframes`\n    from {\n        bottom: -55px\n    }\n    to {\n        bottom: 0px\n    }`;\n\n    return {\n        padding: \"7px\",\n        backgroundColor: `${props.theme.backgroundColor.white}`,\n        border: `1px solid ${props.theme.borderColor.primary}`,\n        fontSize: \"13px\",\n        display: \"flex\",\n        flexDirection: \"row-reverse\",\n        justifyContent: \"space-between\",\n        animation: `${slideAnimation} 0.5s ease-out`,\n        position: \"relative\",\n    }\n}\n\nexport const previewHeadingStyle = () => {\n\n    return {\n        alignSelf: \"flex-start\",\n        display: \"flex\",\n        alignItems: \"baseline\",\n        justifyContent: \"space-between\"\n    }\n}\n\nexport const previewCloseStyle = (img) => {\n\n    return {\n        width: \"24px\",\n        height: \"24px\",\n        borderRadius: \"50%\",\n        background: `url(${img}) center center no-repeat`,\n        cursor: \"pointer\",\n    }\n}\n\nexport const previewOptionsWrapperStyle = () => {\n\n    return {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"space-around\",\n        width: \"100%\",\n    }\n}\n\nexport const previewOptionStyle = (props) => {\n\n    return {\n        padding: \"10px\",\n        backgroundColor: `${props.theme.backgroundColor.grey}`,\n        border: `1px solid ${props.theme.borderColor.primary}`,\n        borderRadius: \"10px\",\n        cursor: \"pointer\",\n    }\n}","/** @jsx jsx */\nimport { jsx, keyframes } from '@emotion/core';\n\nimport {\n    previewWrapperStyle,\n    previewHeadingStyle,\n    previewCloseStyle,\n    previewOptionsWrapperStyle,\n    previewOptionStyle,\n} from \"./style\";\n\nimport closeIcon from \"./resources/clear.png\";\n\nconst ReplyPreview = (props) => {\n\n    const options = props.options.map((option, key) => {\n\n        return (<div key={key} css={previewOptionStyle(props)} className=\"option\" onClick={() => props.clicked(option)}>{option}</div>)\n    })\n\n    return (\n        <div css={previewWrapperStyle(props, keyframes)} className=\"reply__preview__wrapper\">\n            <div css={previewHeadingStyle()} className=\"preview__heading\">\n                <div css={previewCloseStyle(closeIcon)} onClick={props.close} className=\"preview__close\"></div>\n            </div>\n            <div css={previewOptionsWrapperStyle()} className=\"preview__options\">{options}</div>\n        </div>\n    )\n}\n\nexport default ReplyPreview;\n","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nimport {\n    backdropStyle\n} from \"./style\";\n\nconst backdrop = (props) => (\n    props.show ? <div css={backdropStyle()} className=\"modal__backdrop\" onClick={props.clicked}></div> : null\n);\n\nexport default backdrop;","export const backdropStyle = () => {\n\n    return {\n        zIndex: \"1000\",\n        backgroundColor: \"#000\",\n        opacity: \".3\",\n        position: \"fixed\",\n        width: \"100%\",\n        height: \"100%\",\n        top: \"0\",\n        left: \"0\",\n        cursor: \"pointer\",\n        transition: \"background .3s ease-out 0\",\n    }\n}","export const modalWrapperStyle = (props) => {\n\n    const show = (props.open) ? {\n        display: \"block\",\n    } : {};\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n        minWidth: \"350px\",\n        minHeight: \"450px\",\n        width: \"50%\",\n        height: \"40%\",\n        overflow: \"hidden\",\n        backgroundColor: `${props.theme.backgroundColor.white}`,\n        position: \"fixed\",\n        left: \"50%\",\n        top: \"50%\",\n        transform: \"translate(-50%, -50%)\",\n        zIndex: \"1002\",\n        margin: \"0 auto\",\n        boxShadow: \"rgba(20, 20, 20, 0.2) 0 16px 32px, rgba(20, 20, 20, 0.04) 0 0 0 1px\",\n        borderRadius: \"12px\",\n        display: \"none\",\n        ...show,\n        [mq[0]]: {\n            width: \"100%\",\n            height: \"100%\"\n        }\n    }\n}\n\nexport const modalCloseStyle = (img) => {\n\n    return {\n        position: \"absolute\",\n        width: \"32px\",\n        height: \"32px\",\n        borderRadius: \"50%\",\n        top: \"16px\",\n        right: \"16px\",\n        background: `url(${img}) center center no-repeat`,\n        cursor: \"pointer\",\n    }\n}\n\nexport const modalBodyStyle = () => {\n\n    return {\n        padding: \"25px\",\n        height: \"100%\",\n        width: \"100%\"\n    }\n}\n\nexport const modalErrorStyle = () => {\n\n    return {\n        fontSize: \"12px\",\n        color: \"red\",\n        textAlign: \"center\",\n    }\n}\n\nexport const modalTableStyle = (props) => {\n\n    return {\n        borderCollapse: \"collapse\",\n        margin: \"0\",\n        padding: \"0\",\n        width: \"100%\",\n        height: \"90%\",\n        \"tr\": {\n            borderBottom: `1px solid ${props.theme.borderColor.primary}`,\n            display: \"table\",\n            width: \"100%\",\n            tableLayout: \"fixed\",\n        }\n    }\n}\n\nexport const tableCaptionStyle = () => {\n\n    return {\n        fontSize: \"20px\",\n        marginBottom: \"15px\",\n        fontWeight: \"bold\",\n        textAlign: \"left\",\n    }\n}\n\nexport const tableBodyStyle = () => {\n\n    return {\n        height: \"calc(100% - 40px)\",\n        overflowY: \"auto\",\n        display: \"block\",\n        \"tr\": {\n            \"td\": {\n                padding: \"6px 12px\",\n                fontSize: \"14px\",\n                \"input\": {\n                    width: \"100%\",\n                    border: \"none\",\n                    padding: \"6px 12px\",\n                    fontSize: \"14px\",\n                    \"&:focus\": {\n                        outline: \"none\"\n                    }\n                },\n                \"label\": {\n                    padding: \"6px 12px\", \n                },\n                \":first-of-type\": {\n                    width: \"90px\"\n                }\n            }\n        }\n    }\n}\n\n\nexport const tableFootStyle = (props) => {\n\n    return {\n        display: \"inline-block\",\n        \"button\": {\n            cursor: \"pointer\",\n            padding: \"10px 20px\",\n            backgroundColor: `${props.theme.backgroundColor.blue}`,\n            borderRadius: \"5px\",\n            color: `${props.theme.color.white}`,\n            fontSize: \"14px\",\n            outline: \"0\",\n            border: \"0\",\n        },\n        \"tr\": {\n            border: \"none\",\n            \"td\": {\n                textAlign: \"center\",\n            }\n        },\n    }\n}\n\nexport const iconWrapperStyle = () => {\n\n    return {\n        width: \"50px\"\n    }\n}\n\nexport const addOptionIconStyle = (img) => {\n\n    return {\n        background: `url(${img}) right center no-repeat`,\n        backgroundSize: \"28px 28px\",\n        cursor: \"pointer\",\n        display: \"block\",\n        height: \"28px\",\n        width: \"28px\",\n    }\n}","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nimport { removeOptionIconStyle } from \"./style\";\n\nimport removeIcon from \"./resources/remove.png\";\nimport { iconWrapperStyle } from \"../CometChatCreatePoll/style\";\n\nconst createpollview = (props) => {\n\n    return (\n        <tr className=\"poll__options\">\n            <td>&nbsp;</td>\n            <td>\n                <input \n                autoFocus\n                type=\"text\" \n                autoComplete=\"off\" \n                placeholder=\"Enter your option\" \n                value={props.value}\n                onChange={(event) => props.optionChangeHandler(event, props.option)} />\n            </td>\n            <td css={iconWrapperStyle()} className=\"option__remove\">\n                <span css={removeOptionIconStyle(removeIcon)} onClick={() => props.removePollOption(props.option)}></span>\n            </td>\n        </tr>\n    );\n}\n\nexport default createpollview;","export const removeOptionIconStyle = (img) => {\n\n    return {\n        background: `url(${img}) right center no-repeat`,\n        backgroundSize: \"28px 28px\",\n        cursor: \"pointer\",\n        display: \"block\",\n        height: \"28px\",\n        width: \"28px\",\n    };\n}\n\nexport const iconWrapperStyle = () => {\n    return {\n        width: \"50px\"\n    }\n}","import React from \"react\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nimport { CometChat } from \"@cometchat-pro/chat\";\n\nimport { CometChatManager } from \"../../util/controller\";\n\nimport Backdrop from '../Backdrop';\nimport CreatePollView from \"../CreatePollView\";\n\nimport {\n    modalWrapperStyle,\n    modalCloseStyle,\n    modalBodyStyle,\n    modalErrorStyle,\n    modalTableStyle,\n    tableCaptionStyle,\n    tableBodyStyle,\n    tableFootStyle,\n    iconWrapperStyle,\n    addOptionIconStyle\n} from \"./style\";\n\nimport addIcon from \"./resources/add.png\";\nimport clearIcon from \"./resources/clear.svg\";\n\nclass CometChatCreatePoll extends React.Component {\n\n    loggedInUser = null;\n\n    constructor(props) {\n\n        super(props);\n        this.state = {\n            error: null,\n            options: []\n        }\n        this.questionRef = React.createRef();\n        this.optionOneRef = React.createRef();\n        this.optionTwoRef = React.createRef();\n        this.optionRef = React.createRef();\n    }\n\n    componentDidMount() {\n        new CometChatManager().getLoggedInUser().then(user => {\n            this.loggedInUser = user;\n        }).catch((error) => {\n            console.error(\"[CometChatCreatePoll] getLoggedInUser error\", error);\n        });\n    }\n\n    addPollOption = () => {\n\n        const options = [...this.state.options];\n        options.push({ value: \"\", id: new Date().getTime() });\n        this.setState({options: options});\n    }\n\n    removePollOption = (option) => {\n\n        const options = [...this.state.options];\n        const optionKey = options.findIndex(opt => opt.id === option.id);\n        if (optionKey > -1) {\n\n            options.splice(optionKey, 1);\n            this.setState({ options: options});\n        }\n    }\n\n    optionChangeHandler = (event, option) => {\n\n        const options = [...this.state.options];\n        const optionKey = options.findIndex(opt => opt.id === option.id); \n        if (optionKey > -1) {\n\n            const newOption = { ...option, value: event.target.value}\n            options.splice(optionKey, 1, newOption);\n            this.setState({ options: options });\n        }\n    }\n\n    createPoll = () => {\n\n        const question = this.questionRef.current.value.trim();\n        const firstOption = this.optionOneRef.current.value.trim();\n        const secondOption = this.optionTwoRef.current.value.trim();\n        const optionItems = [firstOption, secondOption];\n\n        if (question.length === 0) {\n\n            this.setState({ error: \"Question cannnot be blank.\" })\n            return false;\n        }\n\n        if (firstOption.length === 0 || secondOption.length === 0) {\n\n            this.setState({ error: \"Option cannnot be blank.\" })\n            return false;\n        }\n\n        this.state.options.forEach(function (option) {\n            optionItems.push(option.value)\n        })\n\n        let receiverId;\n        let receiverType = this.props.type;\n        if (this.props.type === \"user\") {\n            receiverId = this.props.item.uid;\n        } else if (this.props.type === \"group\") {\n            receiverId = this.props.item.guid;\n        }\n\n        CometChat.callExtension('polls', 'POST', 'v1/create', {\n            \"question\": question,\n            \"options\": optionItems,\n            \"receiver\": receiverId,\n            \"receiverType\": receiverType\n        }).then(response => {\n\n            const data = response.message.data;\n            const customData = data.data.customData;\n            const options = customData.options;\n\n            const resultOptions = {};\n            for (const option in options) {\n\n                resultOptions[option] = {\n                    text: options[option],\n                    count: 0,\n                }\n            }\n\n            const polls = {\n                \"id\": data.id,\n                \"options\": options,\n                \"results\": {\n                    \"total\": 0,\n                    \"options\": resultOptions,\n                    \"question\": customData.question\n                },\n                \"question\": customData.question\n            };\n\n            const message = { ...data, \"sender\": { \"uid\": data.sender }, \"metadata\": { \"@injected\": { \"extensions\": { \"polls\": polls } } } };\n            this.props.actionGenerated(\"pollCreated\", message);\n            this.setState({ error: null });\n\n        }).catch(error => {\n            console.log(\"error\", error);\n            this.setState({ error: error });\n        });\n    }\n\n    render() {\n\n        const optionList = [...this.state.options];\n        const pollOptionView = optionList.map((option, index) => {\n            return (\n                <CreatePollView \n                key={index} \n                option={option} \n                optionChangeHandler={this.optionChangeHandler}\n                removePollOption={this.removePollOption} />\n            );\n        });\n\n        return (\n            <React.Fragment>\n                <Backdrop show={this.props.open} clicked={this.props.close} />\n                <div css={modalWrapperStyle(this.props)} className=\"modal__createpoll\">\n                    <span css={modalCloseStyle(clearIcon)} className=\"modal__close\" onClick={this.props.close}></span>\n                    <div css={modalBodyStyle()} className=\"modal__body\">\n                        <table css={modalTableStyle(this.props)}>\n                            <caption css={tableCaptionStyle()} className=\"modal__title\">Create Poll</caption>\n                            <tbody css={tableBodyStyle()}>\n                                <tr className=\"error\">\n                                    <td colSpan=\"3\"><div css={modalErrorStyle()}>{this.state.error}</div></td>\n                                </tr>\n                                <tr className=\"poll__question\">\n                                    <td><label>Question</label></td>\n                                    <td colSpan=\"2\">\n                                        <input type=\"text\" autoFocus tabIndex=\"1\" placeholder=\"Enter your question\" ref={this.questionRef} />\n                                    </td>\n                                </tr>\n                                <tr className=\"poll__options\">\n                                    <td><label>Options</label></td>\n                                    <td colSpan=\"2\">\n                                        <input type=\"text\" placeholder=\"Enter your option\" ref={this.optionOneRef} />\n                                    </td>\n                                </tr>\n                                <tr ref={this.optionRef} className=\"poll__options\">\n                                    <td>&nbsp;</td>\n                                    <td colSpan=\"2\">\n                                        <input type=\"text\" placeholder=\"Enter your option\" ref={this.optionTwoRef} />\n                                    </td>\n                                </tr>\n                                {pollOptionView}\n                                <tr>\n                                    <td>&nbsp;</td>\n                                    <td><label>Add new option</label></td>\n                                    <td css={iconWrapperStyle()}>\n                                        <span css={addOptionIconStyle(addIcon)} className=\"option__add\" onClick={this.addPollOption}></span>\n                                    </td>\n                                </tr>\n                            </tbody>\n                            <tfoot css={tableFootStyle(this.props)}>\n                                <tr className=\"createpoll\">\n                                    <td colSpan=\"2\"><button onClick={this.createPoll}>Create</button></td>\n                                </tr>\n                            </tfoot>\n                        </table>\n                    </div>\n                </div>\n            </React.Fragment>\n        )\n    }\n}\n\nexport default CometChatCreatePoll;","export const chatComposerStyle = (props) => {\n\n    return {\n        padding: \"14px 16px\",\n        backgroundColor: `${props.theme.backgroundColor.white}`,\n        zIndex: \"1\",\n        order: \"3\",\n        position: \"relative\",\n        flex: \"none\",\n        minHeight: \"105px\",\n    }\n}\n\nexport const editPreviewContainerStyle = (props, keyframes) => {\n\n    const slideAnimation = keyframes`\n    from {\n        bottom: -60px\n    }\n    to {\n        bottom: 0px\n    }`;\n\n    return {\n        padding: \"7px\",\n        backgroundColor: `${props.theme.backgroundColor.white}`,\n        borderColor: `${props.theme.borderColor.primary}`,\n        borderWidth: \"1px 1px 1px 5px\",\n        borderStyle: \"solid\",\n        color: `${props.theme.color.helpText}`,\n        fontSize: \"13px\",\n        animation: `${slideAnimation} 0.5s ease-out`,\n        position: \"relative\",\n    }\n}\n\nexport const previewHeadingStyle = () => {\n\n    return {\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\"\n    }\n}\n\nexport const previewTextStyle = () => {\n\n    return {\n        padding: \"5px 0\",\n    }\n}\n\nexport const previewCloseStyle = (img) => {\n\n    return {\n        width: \"24px\",\n        height: \"24px\",\n        borderRadius: \"50%\",\n        background: `url(${img}) center center no-repeat`,\n        cursor: \"pointer\",\n    }\n}\n\nexport const composerInputStyle = () => {\n\n    return {\n        display: \"flex\",\n        width: \"100%\",\n        flexDirection: \"row\",\n        alignItems: \"flex-end\",\n        position: \"relative\",\n        zIndex: \"2\",\n        padding: \"0\",\n        minHeight: \"85px\",\n    }\n}\n\nexport const inputInnerStyle = (props) => {\n\n    return {\n        flex: \"1 1 auto\",\n        position: \"relative\",\n        outline: \"none\",\n        borderRadius: \"8px\",\n        border: `1px solid ${props.theme.borderColor.primary}`,\n        backgroundColor: `${props.theme.backgroundColor.white}`,\n        display: \"flex\",\n        flexDirection: \"column\",\n        width: \"100%\",\n        minHeight: \"85px\",\n    }\n}\n\nexport const messageInputStyle = (disabled) => {\n\n    const disabledState = (disabled) ? {\n        pointerEvents : \"none\",\n        opacity: \"0.4\"\n    } : {};\n\n    return {\n        width: \"100%\",\n        fontSize: \"15px\",\n        lineHeight: \"20px\",\n        fontWeight: \"400\",\n        padding: \"15px 10px\",\n        outline: \"none\",\n        overflowX: \"hidden\",\n        overflowY: \"auto\",\n        position: \"relative\",\n        whiteSpace: \"pre-wrap\",\n        wordWrap: \"break-word\",\n        zIndex: \"1\",\n        minHeight: \"50px\",\n        maxHeight: \"100px\",\n        userSelect: \"text\",\n        ...disabledState,\n        '&:empty:before': {\n            content: \"attr(placeholder)\",\n            color: \"rgb(153, 153, 153)\",\n            pointerEvents: \"none\",\n            display: \"block\", /* For Firefox */\n        }\n    }\n}\n\nexport const inputStickyStyle = (props) => {\n\n    return {\n        padding: \"7px 10px\",\n        height: \"35px\",\n        borderTop: `1px solid ${props.theme.borderColor.primary}`,\n        backgroundColor: `${props.theme.backgroundColor.grey}`,\n        display: \"flex\",\n        justifyContent: \"flex-end\",\n    }\n}\n\nexport const stickyAttachmentStyle = () => {\n\n    return {\n        display: \"flex\",\n        width: \"calc(100% - 50px)\",\n    }\n}\n\nexport const attachmentIconStyle = (img) => {\n\n    return {\n        margin: \"auto 0\",\n        ' > span': {\n            display: \"inline-block\",\n            width: \"20px\",\n            height: \"20px\",\n            background: `url(${img}) center center no-repeat`,\n            cursor: \"pointer\",\n            // 'img': {\n            //     display: \"none\", \n            // }\n        }\n    }\n}\n\nexport const filePickerStyle = (state) => {\n\n    const active = (state.showFilePicker) ? {\n        width: \"120px\",\n        opacity: \"1\",\n        margin: \"auto 10px\",\n    } : {};\n\n    return {\n        left: \"0\",\n        bottom: \"0\",\n        position: \"relative\",\n        width: \"0\",\n        borderRadius: \"8px\",\n        overflow: \"hidden\",\n        zIndex: \"1\",\n        textAlign: \"center\",\n        opacity: \"0\",\n        transition: \"width 0.5s linear\",\n        ...active\n    }\n}\n\nexport const fileListStyle = () => {\n\n    return {\n        width: \"100%\",\n        display: \"flex\",\n        flexDirection: \"row\",\n        alignItems: \"center\",\n    }\n}\n\nexport const fileItemStyle = (props, img) => {\n\n    const icon = {\n        background: `url(${img}) no-repeat 100% 100%`,\n        // maskSize: \"cover\",\n    }\n\n    return {\n        width: \"21px\",\n        height: \"21px\",\n        backgroundColor: `${props.theme.backgroundColor.secondary}`,\n        cursor: \"pointer\",\n        ' > input': {\n            display: \"none\",\n        },\n        ...icon\n    }\n}\n\nexport const stickyButtonStyle = () => {\n\n    return {\n        display: \"flex\",\n        flexDirection: \"row\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n    }\n}\n\nexport const emojiButtonStyle = () => {\n\n    return {\n        padding: \"0 5px\",\n        '> img': {\n            width: \"20px\",\n            height: \"20px\",\n            display: \"inline-block\",\n            cursor: \"pointer\",\n        }\n    }\n}\n\nexport const sendButtonStyle = () => {\n\n    return {\n        '> img': {\n            width: \"20px\",\n            height: \"18px\",\n            display: \"inline-block\",\n            cursor: \"pointer\",\n        }\n    }\n}","import React from \"react\";\n\n/** @jsx jsx */\nimport { jsx, keyframes } from \"@emotion/core\";\n\nimport { Picker } from \"emoji-mart\";\nimport { CometChat } from \"@cometchat-pro/chat\";\n\nimport \"emoji-mart/css/emoji-mart.css\";\n\nimport ReplyPreview from \"../ReplyPreview\";\nimport CometChatCreatePoll from \"../CometChatCreatePoll\";\n\nimport {\n  chatComposerStyle,\n  editPreviewContainerStyle,\n  previewHeadingStyle,\n  previewCloseStyle,\n  previewTextStyle,\n  composerInputStyle,\n  inputInnerStyle,\n  messageInputStyle,\n  inputStickyStyle,\n  stickyAttachmentStyle,\n  attachmentIconStyle,\n  filePickerStyle,\n  fileListStyle,\n  fileItemStyle,\n  stickyButtonStyle,\n  emojiButtonStyle,\n  sendButtonStyle\n} from \"./style\";\n\nimport roundedPlus from \"./resources/rounded-plus-grey-icon.svg\";\nimport videoIcon from \"./resources/video_upload_icon.svg\";\nimport audioIcon from \"./resources/audio_upload_icon.svg\";\nimport docIcon from \"./resources/document_upload_icon.svg\";\nimport imageIcon from \"./resources/images_upload_icon.svg\";\nimport insertEmoticon from \"./resources/insert_emoticon.svg\"\nimport sendBlue from \"./resources/send-blue-icon.svg\";\nimport pollIcon from \"./resources/poll.png\";\nimport closeIcon from \"./resources/clear.png\";\n\nimport { outgoingMessageAlert } from \"../../resources/audio/\";\n\nclass MessageComposer extends React.PureComponent {\n\n  constructor(props) {\n\n    super(props);\n  \n\t\tthis.imageUploaderRef = React.createRef();\n\t\tthis.fileUploaderRef = React.createRef();\n\t\tthis.audioUploaderRef = React.createRef();\n    this.videoUploaderRef = React.createRef();\n    this.messageInputRef = React.createRef();\n    this.messageSending = false;\n\n    this.node = React.createRef();\n    this.isTyping = false;\n\n    this.state = {\n      showFilePicker: false,\n      messageInput: \"\",\n      messageType: \"\",\n      emojiViewer: false,\n      createPoll: false,\n      messageToBeEdited: null,\n      replyPreview: null,\n    }\n\t}\n\n  componentDidMount() {\n    this.audio = new Audio(outgoingMessageAlert);\n  }\n\n  componentDidUpdate(prevProps) {\n\n    if (prevProps.messageToBeEdited !== this.props.messageToBeEdited) {\n\n      const messageToBeEdited = this.props.messageToBeEdited;\n\n      this.setState({ \"messageInput\": messageToBeEdited, \"messageToBeEdited\": messageToBeEdited });\n      \n      const element = this.messageInputRef.current;\n      if (messageToBeEdited) {\n\n        element.focus();\n        this.pasteHtmlAtCaret(messageToBeEdited.text, false);\n\n      } else {\n        element.textContent = \"\";\n      }\n    }\n\n    if (prevProps.replyPreview !== this.props.replyPreview) {\n\n      //const message = this.props.replyPreview;\n      this.setState({ replyPreview: this.props.replyPreview });  \n    }\n  }\n\n  playAudio = () => {\n\n    //if it is disabled for chat wigdet in dashboard\n    if (this.props.hasOwnProperty(\"widgetsettings\")\n    && this.props.widgetsettings\n    && this.props.widgetsettings.hasOwnProperty(\"main\")\n    && (this.props.widgetsettings.main.hasOwnProperty(\"enable_sound_for_messages\") === false \n    || (this.props.widgetsettings.main.hasOwnProperty(\"enable_sound_for_messages\") \n    && this.props.widgetsettings.main[\"enable_sound_for_messages\"] === false))) {\n      return false;\n    }\n\n    this.audio.currentTime = 0;\n    this.audio.play();\n  }\n\n  pasteHtmlAtCaret(html, selectPastedContent) {\n    var sel, range;\n    if (window.getSelection) {\n      // IE9 and non-IE\n      sel = window.getSelection();\n      if (this.props.widgetsettings && this.props.hasOwnProperty(\"widgetsettings\")) {\n        const parentnode = (this.props.widgetsettings.hasOwnProperty(\"parentNode\")) ? this.props.widgetsettings.parentNode : null;\n        if (parentnode) {\n          sel = parentnode.querySelector('iframe').contentWindow.getSelection();\n        }\n      }\n      if (sel.getRangeAt && sel.rangeCount) {\n        range = sel.getRangeAt(0);\n        range.deleteContents();\n\n        // Range.createContextualFragment() would be useful here but is\n        // only relatively recently standardized and is not supported in\n        // some browsers (IE9, for one)\n        var el = document.createElement(\"div\");\n        el.innerHTML = html;\n        var frag = document.createDocumentFragment(), node, lastNode;\n        while ( (node = el.firstChild) ) {\n          lastNode = frag.appendChild(node);\n        }\n        var firstNode = frag.firstChild;\n        range.insertNode(frag);\n        \n        // Preserve the selection\n        if (lastNode) {\n          range = range.cloneRange();\n          range.setStartAfter(lastNode);\n          if (selectPastedContent) {\n            range.setStartBefore(firstNode);\n          } else {\n            range.collapse(true);\n          }\n          sel.removeAllRanges();\n          sel.addRange(range);\n        }\n      }\n    } else if ( (sel = document.selection) && sel.type !== \"Control\") {\n      // IE < 9\n      var originalRange = sel.createRange();\n      originalRange.collapse(true);\n      sel.createRange().pasteHTML(html);\n      if (selectPastedContent) {\n        range = sel.createRange();\n        range.setEndPoint(\"StartToStart\", originalRange);\n        range.select();\n      }\n    }\n  }\n\n  emojiClicked = (emoji, event) => {\n\n    const element = this.messageInputRef.current;\n    element.focus();\n    this.pasteHtmlAtCaret(emoji.native, false);\n    this.setState({\"messageInput\": element.innerText, \"messageType\": \"text\"});\n  }\n  \n  changeHandler = (event) => {\n\n    this.startTyping();\n\n    const elem = event.currentTarget;\n    let messageInput = elem.textContent.trim();\n    \n    if(!messageInput.length) {\n      event.currentTarget.textContent = messageInput;\n      return false;\n    }\n\n    this.setState({\"messageInput\": elem.innerText, \"messageType\": \"text\"});\n  }\n\n  toggleFilePicker = () => {\n    const currentState = !this.state.showFilePicker;\n    this.setState({ showFilePicker: currentState });\n  }\n\n  openFileDialogue = (fileType) => {\n\n    switch (fileType) {\n      case \"image\":\n        this.imageUploaderRef.current.click();\n        break;\n      case \"file\":\n          this.fileUploaderRef.current.click();\n        break;\n      case \"audio\":\n          this.audioUploaderRef.current.click();\n        break;\n      case \"video\":\n          this.videoUploaderRef.current.click();\n        break;\n      default:\n        break;\n    }\n  }\n\n  onImageChange = (e) => {; \n\n    if (!this.imageUploaderRef.current.files[\"0\"]) {\n      return false;\n    }\n\n    const uploadedFile = this.imageUploaderRef.current.files[\"0\"];\n\n    var reader = new FileReader(); // Creating reader instance from FileReader() API\n    reader.addEventListener(\"load\", () => { // Setting up base64 URL on image\n\n      const newFile = new File([reader.result], uploadedFile.name, uploadedFile);\n      this.sendMediaMessage(newFile, \"image\")\n\n    }, false);\n\n    reader.readAsArrayBuffer(uploadedFile)  \n  }\n\n  onFileChange = (e) => {\n\n    if (!this.fileUploaderRef.current.files[\"0\"]) {\n      return false;\n    }\n\n    const uploadedFile = this.fileUploaderRef.current.files[\"0\"];\n\n    var reader = new FileReader(); // Creating reader instance from FileReader() API\n    reader.addEventListener(\"load\", () => { // Setting up base64 URL on image\n\n      const newFile = new File([reader.result], uploadedFile.name, uploadedFile);\n      this.sendMediaMessage(newFile, \"file\")\n\n    }, false);\n\n    reader.readAsArrayBuffer(uploadedFile); \n  }\n\n  onAudioChange = (e) => {\n\n    if (!this.audioUploaderRef.current.files[\"0\"]) {\n      return false;\n    }\n\n    const uploadedFile = this.audioUploaderRef.current.files[\"0\"];\n\n    var reader = new FileReader(); // Creating reader instance from FileReader() API\n    reader.addEventListener(\"load\", () => { // Setting up base64 URL on image\n\n      const newFile = new File([reader.result], uploadedFile.name, uploadedFile);\n      this.sendMediaMessage(newFile, \"audio\")\n\n    }, false);\n\n    reader.readAsArrayBuffer(uploadedFile); \n  }\n\n  onVideoChange = (e) => {\n \n    if (!this.videoUploaderRef.current.files[\"0\"]) {\n      return false;\n    }\n\n    const uploadedFile = this.videoUploaderRef.current.files[\"0\"];\n\n    var reader = new FileReader(); // Creating reader instance from FileReader() API\n    reader.addEventListener(\"load\", () => { // Setting up base64 URL on image\n\n      const newFile = new File([reader.result], uploadedFile.name, uploadedFile);\n      this.sendMediaMessage(newFile, \"video\")\n\n    }, false);\n\n    reader.readAsArrayBuffer(uploadedFile);  \n  }\n\n  getReceiverDetails = () => {\n\n    let receiverId;\n    let receiverType;\n\n    if (this.props.type === \"user\") {\n\n      receiverId = this.props.item.uid;\n      receiverType = CometChat.RECEIVER_TYPE.USER;\n\n    } else if (this.props.type === \"group\") {\n\n      receiverId = this.props.item.guid;\n      receiverType = CometChat.RECEIVER_TYPE.GROUP;\n    }\n\n    return { \"receiverId\": receiverId, \"receiverType\": receiverType };\n  }\n\n  sendMediaMessage = (messageInput, messageType) => {\n\n    this.toggleFilePicker();\n\n    if(this.messageSending) {\n      return false;\n    }\n\n    this.messageSending = true;\n\n    let receiverId;\n    let receiverType = this.props.type;\n    if (this.props.type === \"user\") {\n      receiverId = this.props.item.uid;\n    } else if (this.props.type === \"group\") {\n      receiverId = this.props.item.guid;\n    }\n\n    let message = new CometChat.MediaMessage(receiverId, messageInput, messageType, receiverType);\n    \n    if(this.props.parentMessageId) {\n      message.setParentMessageId(this.props.parentMessageId);\n    }\n\n    this.endTyping();\n\n    CometChat.sendMessage(message).then(response => {\n\n      this.messageSending = false;\n      this.playAudio();\n      this.props.actionGenerated(\"messageComposed\", [response]);\n\n    }).catch(error => {\n\n      this.messageSending = false;\n      console.log(\"Message sending failed with error:\", error);\n    });\n  }\n\n  sendMessageOnEnter = (event) => {\n\n    if(event.keyCode === 13 && !event.shiftKey) {\n\n      event.preventDefault();\n      this.messageInputRef.current.textContent = \"\";\n      this.sendTextMessage();\n      return true;\n    }\n  }\n\n  sendTextMessage = () => {\n\n    if(this.state.emojiViewer) {\n      this.setState({emojiViewer: false});\n    }\n\n    if(!this.state.messageInput.trim().length) {\n      return false;\n    }\n\n    if(this.messageSending) {\n      return false;\n    }\n\n    this.messageSending = true;\n\n    if (this.state.messageToBeEdited) {\n      this.editMessage();\n      return false;\n    }\n    \n    let { receiverId, receiverType } = this.getReceiverDetails();\n    let messageInput = this.state.messageInput.trim();\n    let textMessage = new CometChat.TextMessage(receiverId, messageInput, receiverType);\n    if(this.props.parentMessageId) {\n      textMessage.setParentMessageId(this.props.parentMessageId);\n    }\n\n    this.endTyping();\n    \n    CometChat.sendMessage(textMessage).then(message => {\n\n      this.setState({messageInput: \"\"});\n      this.messageSending = false;\n      this.messageInputRef.current.textContent = \"\";\n      this.playAudio();\n      this.props.actionGenerated(\"messageComposed\", [message]);\n\n    }).catch(error => {\n\n      console.log(\"Message sending failed with error:\", error);\n      this.messageSending = false;\n    });\n  }\n\n  editMessage = () => {\n\n    const messageToBeEdited = this.props.messageToBeEdited;\n\n    let { receiverId, receiverType } = this.getReceiverDetails();\n    \n    let messageText = this.state.messageInput.trim();\n    let textMessage = new CometChat.TextMessage(receiverId, messageText, receiverType);\n    textMessage.setId(messageToBeEdited.id);\n\n    this.endTyping();\n\n    CometChat.editMessage(textMessage).then(message => {\n      \n      this.playAudio();\n      this.messageSending = false;\n\n      this.closeEditPreview();\n      \n      this.props.actionGenerated(\"messageEdited\", message);\n\n    }).catch(error => {\n\n      this.messageSending = false;\n      console.log(\"Message editing failed with error:\", error);\n    });\n  }\n\n  closeEditPreview = () => {\n    this.props.actionGenerated(\"clearEditPreview\");\n  }\n\n  startTyping = () => {\n\n    if (this.props.hasOwnProperty(\"widgetsettings\")\n      && this.props.widgetsettings\n      && this.props.widgetsettings.hasOwnProperty(\"main\")\n      && this.props.widgetsettings.main.hasOwnProperty(\"show_typing_indicators\")\n      && this.props.widgetsettings.main[\"show_typing_indicators\"] === false) {\n      return false;\n    }\n    \n    if(this.isTyping) {\n      return false;\n    }\n\n    let { receiverId, receiverType } = this.getReceiverDetails();\n\n    let typingNotification = new CometChat.TypingIndicator(receiverId, receiverType);\n    CometChat.startTyping(typingNotification);\n\n    this.isTyping = setTimeout(() => {\n      clearTimeout(this.isTyping);\n      this.isTyping = null;\n    }, 5000);\n  }\n\n  endTyping = () => {\n\n    if (this.props.hasOwnProperty(\"widgetsettings\")\n      && this.props.widgetsettings\n      && this.props.widgetsettings.hasOwnProperty(\"main\")\n      && this.props.widgetsettings.main.hasOwnProperty(\"show_typing_indicators\")\n      && this.props.widgetsettings.main[\"show_typing_indicators\"] === false) {\n      return false;\n    }\n\n    let { receiverId, receiverType } = this.getReceiverDetails();\n\n    let typingNotification = new CometChat.TypingIndicator(receiverId, receiverType);\n    CometChat.endTyping(typingNotification);\n  }\n\n  toggleEmojiPicker = () => {\n\n    if (!this.state.emojiViewer) {\n      // attach/remove event handler\n      document.addEventListener('click', this.handleOutsideClick, false);\n    } else {\n      document.removeEventListener('click', this.handleOutsideClick, false);\n    }\n\n    const emojiViewer = this.state.emojiViewer;\n    this.setState({emojiViewer: !emojiViewer})\n  }\n  \n  handleOutsideClick = (event) => {\n    // ignore clicks on the component itself\n    \n    if (this.node && this.node.contains(event.target)) {\n      return;\n    }\n    \n    this.toggleEmojiPicker();\n  }\n\n  toggleCreatePoll = () => {\n\n    const createPoll = this.state.createPoll;\n    this.setState({ createPoll: !createPoll });\n  }\n\n  closeCreatePoll = () => {\n\n    this.toggleCreatePoll();\n    this.toggleFilePicker();\n  }\n\n  actionHandler = (action, message) => {\n\n    switch(action) {\n      \n      case \"pollCreated\":\n        this.toggleCreatePoll();\n        this.toggleFilePicker();\n\n        //temporary check; custom data listener working for sender too\n        if (this.props.type === \"user\") {\n          this.props.actionGenerated(\"pollCreated\", [message]);\n        }\n        \n      break;\n      default:\n      break;\n    }\n  }\n\n  sendReplyMessage = (messageInput) => {\n\n    let { receiverId, receiverType } = this.getReceiverDetails();\n    let textMessage = new CometChat.TextMessage(receiverId, messageInput, receiverType);\n    if (this.props.parentMessageId) {\n      textMessage.setParentMessageId(this.props.parentMessageId);\n    }\n\n    CometChat.sendMessage(textMessage).then(message => {\n\n      this.playAudio();\n      this.setState({ replyPreview: null })\n      this.props.actionGenerated(\"messageComposed\", [message]);\n\n    }).catch(error => {\n\n      console.log(\"Message sending failed with error:\", error);\n    });\n  }\n\n  clearReplyPreview = () => {\n    this.setState({replyPreview: null})\n  }\n\n  render() {\n\n    let emojiPicker = null;\n    if(this.state.emojiViewer) {\n      emojiPicker = (\n        <Picker \n        title=\"Pick your emoji\" \n        emoji=\"point_up\"\n        native\n        onClick={this.emojiClicked}\n        style={{position: \"absolute\", bottom: \"20px\", right: \"50px\", \"zIndex\": \"2\", \"width\": \"280px\"}} />\n      );\n    }\n     \n    let disabled = false;\n    if(this.props.item.blockedByMe) {\n      disabled = true;\n    }\n\n    let docs = (\n      <span title=\"Attach File\" css={fileItemStyle(this.props, docIcon)} className=\"filelist__item item__file\" onClick={() => { this.openFileDialogue(\"file\") }}>\n        <input onChange={this.onFileChange} type=\"file\" id=\"file\" ref={this.fileUploaderRef} />\n      </span>\n    );\n\n    let avp = (\n      <React.Fragment>\n        <span title=\"Attach Video\" css={fileItemStyle(this.props, videoIcon)} className=\"filelist__item item__video\" onClick={() => { this.openFileDialogue(\"video\") }}>\n          <input onChange={this.onVideoChange} accept=\"video/*\" type=\"file\" ref={this.videoUploaderRef} />\n        </span>\n        <span title=\"Attach Audio\" css={fileItemStyle(this.props, audioIcon)} className=\"filelist__item item__audio\" onClick={() => { this.openFileDialogue(\"audio\") }}>\n          <input onChange={this.onAudioChange} accept=\"audio/*\" type=\"file\" ref={this.audioUploaderRef} />\n        </span>\n        <span title=\"Attach Image\" css={fileItemStyle(this.props, imageIcon)} className=\"filelist__item item__image\" onClick={() => { this.openFileDialogue(\"image\") }}>\n          <input onChange={this.onImageChange} accept=\"image/*\" type=\"file\" ref={this.imageUploaderRef} />\n        </span>\n      </React.Fragment>\n    );\n\n    let createPollBtn = (\n      <span\n      title=\"Create Poll\"\n      css={fileItemStyle(this.props, pollIcon)}\n      className=\"filelist__item item__poll\"\n      onClick={this.toggleCreatePoll}>&nbsp;</span>\n    );\n\n    let emojiBtn = (\n      <div \n      title=\"Emoji\"\n      css={emojiButtonStyle()}\n      className=\"button__emoji\" \n      onClick={this.toggleEmojiPicker}><img src={insertEmoticon} alt=\"Insert Emoticon\" /></div>\n    );\n\n    if(this.props.hasOwnProperty(\"widgetsettings\") \n    && this.props.widgetsettings\n    && this.props.widgetsettings.hasOwnProperty(\"main\")) {\n\n      if(this.props.widgetsettings.main.hasOwnProperty(\"send_photos_videos\")\n      && this.props.widgetsettings.main[\"send_photos_videos\"] === false) {\n        avp = null;\n      }\n\n      if(this.props.widgetsettings.main.hasOwnProperty(\"send_photos_videos\")\n      && this.props.widgetsettings.main[\"send_files\"] === false) {\n        docs = null;\n      }\n\n      if(this.props.widgetsettings.main.hasOwnProperty(\"send_emojis\")\n      && this.props.widgetsettings.main[\"send_emojis\"] === false) {\n        emojiBtn = null;\n      }\n\n      if ((this.props.widgetsettings.main.hasOwnProperty(\"allow_creating_polls\") === false)\n        || (this.props.widgetsettings.main.hasOwnProperty(\"allow_creating_polls\") \n        && this.props.widgetsettings.main[\"allow_creating_polls\"] === false)) {\n        createPollBtn = null;\n      }\n    }\n\n    if (this.props.parentMessageId) {\n      createPollBtn = null;\n    }\n\n    let attach = (\n      <div css={stickyAttachmentStyle()} className=\"input__sticky__attachment\">\n        <div css={attachmentIconStyle(roundedPlus)} className=\"attachment__icon\" onClick={this.toggleFilePicker}>\n          <span>&nbsp;</span>\n        </div>\n        <div css={filePickerStyle(this.state)} className=\"attachment__filepicker\">\n          <div css={fileListStyle()} className=\"filepicker__filelist\">\n            {avp}\n            {docs}\n            {createPollBtn}\n          </div>\n        </div>\n      </div>\n    );\n\n    if (avp === null && docs === null && createPollBtn === null) {\n      attach = null;\n    }\n\n    let createPoll = null;\n    if (this.state.createPoll) {\n      createPoll = (\n        <CometChatCreatePoll\n        theme={this.props.theme}\n        item={this.props.item}\n        type={this.props.type}\n        open={this.state.createPoll}\n        close={this.closeCreatePoll}\n        widgetsettings={this.props.widgetsettings}\n        actionGenerated={this.actionHandler} />\n      );\n    }\n\n    let editPreview = null;\n    if (this.state.messageToBeEdited) {\n      editPreview = (\n        <div css={editPreviewContainerStyle(this.props, keyframes)}>\n          <div css={previewHeadingStyle()}>\n            <div css={previewTextStyle()}>Edit message</div>\n            <span css={previewCloseStyle(closeIcon)} onClick={this.closeEditPreview}></span>\n          </div>\n          <div>{this.state.messageToBeEdited.text}</div>\n        </div>\n      );\n    }\n\n    let smartReplyPreview = null;\n    if(this.state.replyPreview) {\n\n      const message = this.state.replyPreview;\n      if (message.hasOwnProperty(\"metadata\")) {\n\n        const metadata = message.metadata;\n        if (metadata.hasOwnProperty(\"@injected\")) {\n\n          const injectedObject = metadata[\"@injected\"];\n          if (injectedObject.hasOwnProperty(\"extensions\")) {\n\n            const extensionsObject = injectedObject[\"extensions\"];\n            if (extensionsObject.hasOwnProperty(\"smart-reply\")) {\n              \n              const smartReplyObject = extensionsObject[\"smart-reply\"];\n              // const reply_positive = smartReplyObject[\"reply_positive\"];\n              // const reply_neutral = smartReplyObject[\"reply_neutral\"];\n              // const reply_negative = smartReplyObject[\"reply_negative\"];\n              // const category = smartReplyObject[\"category\"];\n              const options = [smartReplyObject[\"reply_positive\"], smartReplyObject[\"reply_neutral\"], smartReplyObject[\"reply_negative\"]];\n              \n              smartReplyPreview = (\n                <ReplyPreview {...this.props} options={options} clicked={this.sendReplyMessage} close={this.clearReplyPreview} />\n              );\n\n            }\n          }\n        }\n      }\n    }\n\n    return (\n      <div css={chatComposerStyle(this.props)} className=\"chat__composer\">\n        {editPreview}\n        {smartReplyPreview}\n        <div css={composerInputStyle()} className=\"composer__input\">\n          <div tabIndex=\"-1\" css={inputInnerStyle(this.props)} className=\"input__inner\">\n            <div\n            css={messageInputStyle(disabled)}\n            className=\"input__message-input\"\n            contentEditable=\"true\"\n            placeholder=\"Enter your message here\"\n            dir=\"ltr\"\n            onInput={this.changeHandler}\n            onBlur={this.endTyping}\n            onKeyDown={this.sendMessageOnEnter}\n            ref={this.messageInputRef}></div>\n            <div css={inputStickyStyle(this.props)} className=\"input__sticky\">\n              {attach}\n              <div css={stickyButtonStyle()} className=\"input__sticky__buttons\" ref={node => {this.node = node;}}>\n                {emojiPicker}\n                {emojiBtn}\n                <div title=\"Send Message\" css={sendButtonStyle()} className=\"button__send\" onClick={this.sendTextMessage}><img src={sendBlue} alt=\"Send Message\" /></div>\n              </div>\n            </div>\n          </div>\n        </div>\n        {createPoll}\n      </div>\n    );\n  }\n}\n\nexport default MessageComposer;","export const theme = {\n    fontFamily: \"Inter, sans-serif\",\n    fontSize: \"14px\",\n    color: {\n        primary: \"#141414\",\n        secondary: \"#cccccc\",\n        darkSecondary: \"#eaeaea\",\n        grey: \"rgba(20,20,20,0.04)\",\n        helpText: \"rgba(20, 20, 20, 0.6)\",\n        blue: \"#39f\",\n        white: \"#fff\",\n        red: \"#ff3b30\"\n    },\n    borderColor: {\n        primary: \"#eaeaea\",\n        white: \"#fff\"\n    },\n    backgroundColor: {\n        white: \"#fff\",\n        primary: \"#E6E6E6\",\n        secondary: \"#f6f6f6\",\n        blue: \"#39f\",\n        red: \"#ff3b30\",\n        grey: \"rgba(20,20,20,0.04)\",\n        lightGrey: \"rgba(20, 20, 20, 0.08)\",\n        darkGrey: \"rgba(20,20,20,0.9)\",\n        callScreenGrey: \"#444444\",\n    },\n    breakPoints: [\n        \"(min-width : 320px) and (max-width: 767px)\"\n    ]\n};","import React from \"react\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nimport { CometChat } from \"@cometchat-pro/chat\";\n\nimport MessageHeader from \"../MessageHeader\";\nimport MessageList from \"../MessageList\";\nimport MessageComposer from \"../MessageComposer\";\n\nimport { theme } from \"../../resources/theme\";\nimport { validateWidgetSettings } from \"../../util/common\";\n\nimport { chatWrapperStyle } from \"./style\";\n\nimport { incomingMessageAlert } from \"../../resources/audio/\";\n\nclass CometChatMessageListScreen extends React.PureComponent {\n\n  constructor(props) {\n\n    super(props);\n\n    this.state = {\n      messageList: [],\n      scrollToBottom: true,\n      messageToBeEdited: null,\n      replyPreview: null\n    }\n\n    this.theme = Object.assign({}, theme, this.props.theme);\n  }\n\n  componentDidMount() {\n    this.audio = new Audio(incomingMessageAlert);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n\n    if (this.props.type === 'user' && prevProps.item.uid !== this.props.item.uid) {\n      \n      this.setState({ messageList: [], scrollToBottom: true, messageToBeEdited: null});\n\n    } else if (this.props.type === 'group' && prevProps.item.guid !== this.props.item.guid) {\n      \n      this.setState({ messageList: [], scrollToBottom: true, messageToBeEdited: null });\n\n    } else if(prevProps.type !== this.props.type) {\n      \n      this.setState({ messageList: [], scrollToBottom: true, messageToBeEdited: null });\n\n    } else if(prevProps.composedthreadmessage !== this.props.composedthreadmessage) {\n\n      this.updateReplyCount(this.props.composedthreadmessage);\n\n    } else if(prevProps.callmessage !== this.props.callmessage) {\n\n      this.actionHandler(\"callUpdated\", this.props.callmessage);\n\n    } else if (prevProps.groupmessage !== this.props.groupmessage) {\n\n      if (validateWidgetSettings(this.props.widgetsettings, \"hide_join_leave_notifications\") !== true) {\n        this.appendMessage(this.props.groupmessage);\n      }\n    }\n  }\n\n  playAudio = () => {\n\n    //if it is disabled for chat wigdet in dashboard\n    if (this.props.hasOwnProperty(\"widgetsettings\")\n    && this.props.widgetsettings\n    && this.props.widgetsettings.hasOwnProperty(\"main\")\n    && (this.props.widgetsettings.main.hasOwnProperty(\"enable_sound_for_messages\") === false\n    || (this.props.widgetsettings.main.hasOwnProperty(\"enable_sound_for_messages\")\n    && this.props.widgetsettings.main[\"enable_sound_for_messages\"] === false))) {\n      return false;\n    }\n\n    this.audio.currentTime = 0;\n    this.audio.play();\n  }\n\n  actionHandler = (action, messages, key, group, options) => {\n    \n    switch(action) {\n      case \"customMessageReceived\":\n      case \"messageReceived\": {\n\n        const message = messages[0];\n        if(message.parentMessageId) {\n          this.updateReplyCount(messages);\n        } else {\n\n          this.smartReplyPreview(messages);\n          this.appendMessage(messages);\n        }\n\n        this.playAudio();\n      }\n      break;\n      case \"messageRead\":\n        this.props.actionGenerated(action, messages);\n      break;\n      case \"messageComposed\": {\n        this.appendMessage(messages);\n        this.props.actionGenerated(\"messageComposed\", messages);\n        break;\n      }\n      case \"messageUpdated\":\n        this.updateMessages(messages);\n      break;\n      case \"messageFetched\":\n        this.prependMessages(messages);\n      break;\n      case \"messageFetchedAgain\": \n        this.prependMessagesAndScrollBottom(messages);\n      break;\n      case \"messageDeleted\":\n        this.removeMessages(messages);\n      break;\n      case \"viewMessageThread\":\n        this.props.actionGenerated(\"viewMessageThread\", messages);\n      break;\n      case \"deleteMessage\":\n        this.deleteMessage(messages);\n      break;\n      case \"editMessage\":\n        this.editMessage(messages);\n      break;\n      case \"messageEdited\":\n        this.messageEdited(messages);\n        break;\n      case \"clearEditPreview\":\n        this.clearEditPreview();\n        break;\n      case \"groupUpdated\":\n        this.groupUpdated(messages, key, group, options);\n      break;\n      case \"callUpdated\":\n        this.callUpdated(messages);\n      break;\n      case \"pollAnswered\": \n        this.updatePollMessage(messages)\n      break;\n      case \"pollCreated\":\n        this.appendPollMessage(messages)\n      break;\n      case \"viewActualImage\":\n        this.props.actionGenerated(\"viewActualImage\", messages);\n      break;\n      default:\n      break;\n    }\n  }\n\n  deleteMessage = (message) => {\n\n    const messageId = message.id;\n    CometChat.deleteMessage(messageId).then(deletedMessage => {\n\n      this.removeMessages([deletedMessage]);\n\n      const messageList = [...this.state.messageList];\n      let messageKey = messageList.findIndex(m => m.id === message.id);\n\n      if (messageList.length - messageKey === 1 && !message.replyCount) {\n        this.props.actionGenerated(\"messageDeleted\", [deletedMessage]);\n      }\n      \n    }).catch(error => {\n      console.log(\"Message delete failed with error:\", error);\n    });\n  }\n\n  editMessage = (message) => {\n    this.setState({ messageToBeEdited: message, replyPreview: null });\n  }\n\n  messageEdited = (message) => {\n    \n    const messageList = [...this.state.messageList];\n    let messageKey = messageList.findIndex(m => m.id === message.id);\n    if (messageKey > -1) {\n\n      const messageObj = messageList[messageKey];\n\n      const newMessageObj = { ...messageObj, ...message };\n\n      messageList.splice(messageKey, 1, newMessageObj);\n      this.updateMessages(messageList);\n\n      if (messageList.length - messageKey === 1 && !message.replyCount) {\n        this.props.actionGenerated(\"messageEdited\", [newMessageObj]);\n      }\n      \n    }\n  }\n\n  updatePollMessage = (message) => {\n\n    const messageList = [...this.state.messageList];\n    const messageId = message.poll.id;\n    let messageKey = messageList.findIndex((m, k) => m.id === messageId);\n    if (messageKey > -1) {\n\n      const messageObj = messageList[messageKey]; \n\n      const metadataObj = { \"@injected\": { \"extensions\": { \"polls\": message.poll }}};\n\n      const newMessageObj = { ...messageObj, \"metadata\": metadataObj };\n\n      messageList.splice(messageKey, 1, newMessageObj);\n      this.updateMessages(messageList);\n    }\n  }\n\n  appendPollMessage = (messages) => {\n\n    this.appendMessage(messages); \n  }\n\n  //messages are deleted\n  removeMessages = (messages) => {\n\n    const deletedMessage = messages[0];\n    const messagelist = [...this.state.messageList];\n\n    let messageKey = messagelist.findIndex(message => message.id === deletedMessage.id);\n    if (messageKey > -1) {\n\n      let messageObj = { ...messagelist[messageKey] };\n      let newMessageObj = Object.assign({}, messageObj, deletedMessage);\n\n      messagelist.splice(messageKey, 1, newMessageObj);\n      this.setState({ messageList: messagelist, scrollToBottom: false });\n    }\n  }\n\n  //messages are fetched from backend\n  prependMessages = (messages) => {\n\n    const messageList = [...messages, ...this.state.messageList];\n    this.setState({ messageList: messageList, scrollToBottom: false });\n  }\n\n  prependMessagesAndScrollBottom = (messages) => {\n    const messageList = [...messages, ...this.state.messageList];\n    this.setState({ messageList: messageList, scrollToBottom: true });\n  }\n\n  //message is received or composed & sent\n  appendMessage = (message) => {\n\n    let messages = [...this.state.messageList];\n    messages = messages.concat(message);\n    this.setState({ messageList: messages, scrollToBottom: true });\n  }\n\n  //message status is updated\n  updateMessages = (messages) => {\n    this.setState({ messageList: messages, scrollToBottom: false });\n  }\n\n  groupUpdated = (message, key, group, options) => {\n\n    if (validateWidgetSettings(this.props.widgetsettings, \"hide_join_leave_notifications\") !== true) {\n      this.appendMessage([message]);\n    }\n\n    this.props.actionGenerated(\"groupUpdated\", message, key, group, options);\n  }\n\n  callUpdated = (message) => {\n\n    if (validateWidgetSettings(this.props.widgetsettings, \"show_call_notifications\") === false) {\n      return false;\n    }\n\n    this.appendMessage([message]);\n  }\n\n  updateReplyCount = (messages) => {\n\n    const receivedMessage = messages[0];\n  \n    let messageList = [...this.state.messageList];\n    let messageKey = messageList.findIndex(m => m.id === receivedMessage.parentMessageId);\n    if (messageKey > -1) {\n\n      const messageObj = messageList[messageKey];\n      let replyCount = (messageObj.replyCount) ? messageObj.replyCount : 0;\n      replyCount = replyCount + 1;\n      const newMessageObj = Object.assign({}, messageObj, { \"replyCount\": replyCount });\n      \n      messageList.splice(messageKey, 1, newMessageObj);\n      this.setState({ messageList: messageList, scrollToBottom: false });\n    }\n  }\n\n  smartReplyPreview = (messages) => {\n\n    const message = messages[0];\n    \n    if (message.hasOwnProperty(\"metadata\")) {\n\n      const metadata = message.metadata;\n      if (metadata.hasOwnProperty(\"@injected\")) {\n\n        const injectedObject = metadata[\"@injected\"];\n        if (injectedObject.hasOwnProperty(\"extensions\")) {\n\n          const extensionsObject = injectedObject[\"extensions\"];\n          if (extensionsObject.hasOwnProperty(\"smart-reply\")) {\n\n            const smartReply = extensionsObject[\"smart-reply\"];\n            if (smartReply.hasOwnProperty(\"error\") === false) {\n              this.setState({ replyPreview: message });\n            } else {\n              this.setState({ replyPreview: null });\n            }\n            \n          }\n        }\n      }\n    }\n  }\n\n  clearEditPreview = () => {\n    this.setState({ \"messageToBeEdited\":  null });\n  }\n\n  render() {\n\n    let messageComposer = (\n      <MessageComposer \n      theme={this.theme}\n      item={this.props.item} \n      type={this.props.type}\n      widgetsettings={this.props.widgetsettings}\n      messageToBeEdited={this.state.messageToBeEdited}\n      replyPreview={this.state.replyPreview}\n      actionGenerated={this.actionHandler} />\n    );\n\n    if(this.props.hasOwnProperty(\"widgetsettings\")\n    && this.props.widgetsettings\n    && this.props.widgetsettings.hasOwnProperty(\"main\") \n    && this.props.widgetsettings.main.hasOwnProperty(\"enable_sending_messages\")\n    && this.props.widgetsettings.main[\"enable_sending_messages\"] === false) {\n      messageComposer = null;\n    }\n    \n    return (\n      <div css={chatWrapperStyle(this.theme)} className=\"main__chat\">\n        <MessageHeader \n        sidebar={this.props.sidebar}\n        theme={this.theme}\n        item={this.props.item} \n        type={this.props.type} \n        viewdetail={this.props.viewdetail === false ? false : true}\n        audiocall={this.props.audiocall === false ? false : true}\n        videocall={this.props.videocall === false ? false : true}\n        widgetsettings={this.props.widgetsettings}\n        loggedInUser={this.props.loggedInUser}\n        actionGenerated={this.props.actionGenerated} />\n        <MessageList \n        theme={this.theme}\n        messages={this.state.messageList} \n        item={this.props.item} \n        type={this.props.type}\n        scrollToBottom={this.state.scrollToBottom}\n        messageconfig={this.props.messageconfig}\n        widgetsettings={this.props.widgetsettings}\n        widgetconfig={this.props.widgetconfig}\n        loggedInUser={this.props.loggedInUser}\n        actionGenerated={this.actionHandler} />\n        {messageComposer}\n      </div>\n    )\n  }\n}\n\nexport default CometChatMessageListScreen;","export const chatWrapperStyle = (theme) => {\n\n    return {\n        display: \"flex\",\n        flexDirection: \"column\",\n        height: \"100%\",\n        width: \"100%\",\n        boxSizing: \"border-box\",\n        fontFamily: `${theme.fontFamily}`,\n        \"*\": {\n            boxSizing: \"border-box\",\n            fontFamily: `${theme.fontFamily}`,\n        }\n    }\n}","import { CometChat } from \"@cometchat-pro/chat\";\n\nexport class UserListManager {\n\n    userRequest = null;\n    userListenerId = \"userlist_\" + new Date().getTime();\n\n    constructor(friendsOnly, searchKey) {\n\n        if (searchKey) {\n            this.usersRequest = new CometChat.UsersRequestBuilder().setLimit(30).friendsOnly(friendsOnly).setSearchKeyword(searchKey).build();\n        } else {\n            this.usersRequest = new CometChat.UsersRequestBuilder().setLimit(30).friendsOnly(friendsOnly).build();\n        }\n    }\n\n    fetchNextUsers() {\n        return this.usersRequest.fetchNext();\n    }\n\n    attachListeners(callback) {\n        \n        CometChat.addUserListener(\n            this.userListenerId,\n            new CometChat.UserListener({\n                onUserOnline: onlineUser => {\n                    /* when someuser/friend comes online, user will be received here */\n                    callback(onlineUser);\n                },\n                onUserOffline: offlineUser => {\n                    /* when someuser/friend went offline, user will be received here */\n                    callback(offlineUser);\n                }\n            })\n        );\n    }\n\n    removeListeners() {\n\n        CometChat.removeUserListener(this.userListenerId);\n    }\n}","export const listItem = (props) => {\n\n    const selectedState = (props.selectedUser && props.selectedUser.uid === props.user.uid) ? {\n        backgroundColor: `${props.theme.backgroundColor.primary}`\n    } : {};\n\n    return {\n        display: \"flex\",\n        flexDirection: \"row\",\n        justifyContent: \"left\",\n        alignItems: \"center\",\n        cursor: \"pointer\",\n        width: \"100%\",\n        padding: \"10px 20px\",\n        ...selectedState,\n        '&:hover': {\n            backgroundColor: `${props.theme.backgroundColor.primary}`\n        }\n    }\n}\n\nexport const itemThumbnailStyle = () => {\n    \n    return {\n        display: \"inline-block\",\n        width: \"36px\",\n        height: \"36px\",\n        flexShrink: \"0\"\n    }\n}\n\nexport const itemDetailStyle = () => {\n    \n    return {\n        width: \"calc(100% - 45px)\",\n        flexGrow: 1,\n        paddingLeft: \"15px\"\n    }\n}\n\nexport const itemNameStyle = () => { \n    \n    return {\n        fontSize: \"15px\",\n        fontWeight: \"600\",\n        overflow: \"hidden\",\n        textOverflow: \"ellipsis\",\n        whiteSpace: \"nowrap\",\n        width: \"100%\",\n        margin: \"5px 0 0 0\" \n    }\n};\n\nexport const itemDescStyle = (theme) => { \n    return {\n        marginTop: \"10px\",\n        borderBottom: `1px solid ${theme.borderColor.primary}` \n    }\n};\n\n","/** @jsx jsx */\nimport { jsx } from '@emotion/core'\n\nimport Avatar from \"../Avatar\";\nimport StatusIndicator from \"../StatusIndicator\";\n\nimport { listItem, itemThumbnailStyle, itemDetailStyle, itemNameStyle, itemDescStyle } from \"./style\";\n\nconst userview = (props) => {\n\n  let userPresence = (\n    <StatusIndicator\n    widgetsettings={props.widgetsettings}\n    status={props.user.status}\n    cornerRadius=\"50%\" \n    borderColor={props.theme.color.darkSecondary}\n    borderWidth=\"1px\" />\n  );\n\n  const toggleTooltip = (event, flag) => {\n\n    const elem = event.target;\n\n    const scrollWidth = elem.scrollWidth;\n    const clientWidth = elem.clientWidth;\n\n    if(scrollWidth <= clientWidth) {\n      return false;\n    }\n\n    if(flag) {\n      elem.setAttribute(\"title\", elem.textContent);\n    } else {\n      elem.removeAttribute(\"title\");\n    }\n  } \n  \n  return (\n    <div css={listItem(props)} onClick={() => props.clickeHandler(props.user)} className=\"list__item\">\n      <div css={itemThumbnailStyle()} className=\"list__item__thumbnail\">\n        <Avatar \n        image={props.user.avatar} \n        cornerRadius=\"50%\" \n        borderColor={props.theme.color.secondary}\n        borderWidth=\"1px\" />\n        {userPresence}\n      </div>\n      <div css={itemDetailStyle()} className=\"list__item__details\">\n        <div css={itemNameStyle()} className=\"item__details__name\"  \n        onMouseEnter={event => toggleTooltip(event, true)} \n        onMouseLeave={event => toggleTooltip(event, false)}>{props.user.name}</div>\n        <div css={itemDescStyle(props.theme)} className=\"item__details__desc\"></div>\n      </div>\n    </div>\n  )\n}\n\nexport default userview;\n","export const contactWrapperStyle = () => {\n    return {\n        display: \"flex\",\n        flexDirection: \"column\",\n        height: \"100%\",\n        boxSizing: \"border-box\",\n        \"*\": {\n            boxSizing: \"border-box\",\n        }\n    }\n}\n\nexport const contactHeaderStyle = (theme) => {\n\n    return {\n        padding: \"19px 16px\",\n        position: \"relative\",\n        display: \"flex\",\n        alignItems: \"center\",\n        borderBottom: `1px solid ${theme.color.darkSecondary}`\n    }\n}\n\nexport const contactHeaderCloseStyle = (img) => {\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n        cursor: \"pointer\",\n        display: \"none\",\n        background: `url(${img}) left center no-repeat`,\n        height: \"24px\",\n        width: \"33%\",\n        [mq[0]]: {\n            display: \"block!important\"\n        }\n    }\n}\n\nexport const contactHeaderTitleStyle = (props) => {\n\n    const alignment = (props.hasOwnProperty(\"enableCloseMenu\") && props.enableCloseMenu.length > 0) ? {\n        width: \"33%\",\n        textAlign: \"center\"\n    } : {};\n\n    return {\n        margin: \"0\",\n        fontWeight: \"700\",\n        display: \"inline-block\",\n        width: \"66%\",\n        textAlign: \"left\",\n        fontSize: \"20px\",\n        ...alignment\n    }\n}\n\nexport const contactSearchStyle = () => {\n    \n    return {\n        padding: \"16px 16px\",\n        position: \"relative\"\n    }\n}\n\nexport const contactSearchInputStyle = (theme, img) => {\n\n    return {\n        display: \"block\",\n        width: \"100%\",\n        border: \"0\",\n        boxShadow: \"rgba(20, 20, 20, 0.04) 0 0 0 1px inset\",\n        borderRadius: \"8px\",\n        padding: \"6px 8px 6px 35px\",\n        fontSize: \"15px\",\n        outline: \"none\",\n        color: `${theme.color.primary}`,\n        background: `url(${img}) 10px center no-repeat ${theme.backgroundColor.grey}`,\n    }\n}\n\nexport const contactMsgStyle = () => {\n\n    return {\n        overflow: \"hidden\",\n        width: \"100%\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        position: \"absolute\",\n        top: \"50%\",\n    }\n}\n\nexport const contactMsgTxtStyle = (theme) => {\n\n    return {\n        margin: \"0\",\n        height: \"30px\",\n        color: `${theme.color.secondary}`,\n        fontSize: \"24px!important\",\n        fontWeight: \"600\"\n    }\n}\n\nexport const contactListStyle = () => {\n    \n    return {\n        height: \"calc(100% - 125px)\",\n        overflowY: \"auto\",\n        margin: \"0\",\n        padding: \"0\"\n    }\n}\n\nexport const contactAlphabetStyle = () => {\n    \n    return {\n        padding: \"0 15px\",\n        margin: \"5px 0\",\n        width: \"100%\",\n        fontSize: \"14px\"\n    }\n}","import React from \"react\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core'\n\nimport { CometChatManager } from \"../../util/controller\";\nimport { SvgAvatar } from '../../util/svgavatar';\nimport { UserListManager } from \"./controller\";\n\nimport UserView from \"../UserView\";\n\nimport { theme } from \"../../resources/theme\";\n\nimport { \n  contactWrapperStyle, \n  contactHeaderStyle, \n  contactHeaderCloseStyle, \n  contactHeaderTitleStyle,\n  contactSearchStyle,\n  contactSearchInputStyle,\n  contactMsgStyle,\n  contactMsgTxtStyle,\n  contactListStyle,\n  contactAlphabetStyle\n} from \"./style\";\n\nimport searchIcon from './resources/search-grey-icon.svg';\nimport navigateIcon from './resources/navigate_before.svg';\n\nclass CometChatUserList extends React.PureComponent {\n  timeout;\n  friendsOnly = false;\n  decoratorMessage = \"Loading...\";\n\n  constructor(props) {\n\n    super(props);\n\n    this.state = {\n      userlist: [],\n      selectedUser: null\n    }\n    this.userListRef = React.createRef();\n    this.theme = Object.assign({}, theme, this.props.theme);\n  }\n\n  componentDidMount() {\n\n    if(this.props.hasOwnProperty(\"friendsOnly\")) {\n      this.friendsOnly = this.props.friendsOnly;\n    }\n\n    if(this.props.hasOwnProperty(\"widgetsettings\") \n    && this.props.widgetsettings\n    && this.props.widgetsettings.hasOwnProperty(\"sidebar\") \n    && this.props.widgetsettings.sidebar.hasOwnProperty(\"user_listing\")) {\n\n      switch(this.props.widgetsettings.sidebar[\"user_listing\"]) {\n        case \"friends\":\n          this.friendsOnly = true;\n        break;\n        default:\n        break;\n      }\n    }\n\n    this.UserListManager = new UserListManager(this.friendsOnly);\n    this.getUsers();\n    this.UserListManager.attachListeners(this.userUpdated);\n  }\n\n  componentDidUpdate(prevProps) {\n\n    const previousItem = JSON.stringify(prevProps.item);\n    const currentItem = JSON.stringify(this.props.item);\n\n    if (previousItem !== currentItem) {\n\n      if (Object.keys(this.props.item).length === 0) {\n\n        this.userListRef.scrollTop = 0;\n        this.setState({ selectedUser: {} });\n\n      } else {\n\n        let userlist = [...this.state.userlist];\n\n        //search for user\n        let userKey = userlist.findIndex(u => u.uid === this.props.item.uid);\n        if (userKey > -1) {\n\n          let userObj = { ...userlist[userKey] };\n          this.setState({ selectedUser: userObj });\n        }\n      }\n    }\n\n    //if user is blocked/unblocked, update userlist in state\n    if(prevProps.item \n    && Object.keys(prevProps.item).length \n    && prevProps.item.uid === this.props.item.uid \n    && prevProps.item.blockedByMe !== this.props.item.blockedByMe) {\n\n      let userlist = [...this.state.userlist];\n\n      //search for user\n      let userKey = userlist.findIndex((u, k) => u.uid === this.props.item.uid);\n      if(userKey > -1) {\n\n        let userObj = {...userlist[userKey]};\n        let newUserObj = Object.assign({}, userObj, {blockedByMe: this.props.item.blockedByMe});\n        userlist.splice(userKey, 1, newUserObj);\n\n        this.setState({ userlist: userlist });\n      }\n    }\n  }\n\n  componentWillUnmount() {\n\n    this.UserListManager.removeListeners();\n    this.UserListManager = null;\n  }\n\n  userUpdated = (user) => {\n    \n    let userlist = [...this.state.userlist];\n\n    //search for user\n    let userKey = userlist.findIndex((u, k) => u.uid === user.uid);\n    \n    //if found in the list, update user object\n    if(userKey > -1) {\n\n      let userObj = {...userlist[userKey]};\n      let newUserObj = {...userObj, ...user};\n      userlist.splice(userKey, 1, newUserObj);\n\n      this.setState({ userlist: userlist });\n\n    }\n  }\n\n  handleScroll = (e) => {\n\n    const bottom =\n      Math.round(e.currentTarget.scrollHeight - e.currentTarget.scrollTop) === Math.round(e.currentTarget.clientHeight);\n    if (bottom) this.getUsers();\n  }\n\n  handleClick = (user) => {\n\n    if(!this.props.onItemClick)\n      return;\n\n    //this.setState({selectedUser: {...user}});\n    this.props.onItemClick(user, 'user');\n  }\n\n  handleMenuClose = () => {\n\n    if(!this.props.actionGenerated) {\n      return false;\n    }\n\n    this.props.actionGenerated(\"closeMenuClicked\")\n  }\n  \n  searchUsers = (e) => {\n\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n    }\n\n    let val = e.target.value;\n    this.timeout = setTimeout(() => {\n\n      this.UserListManager = new UserListManager(this.friendsOnly, val);\n      this.setState({ userlist: [] }, () => this.getUsers())\n    }, 500)\n\n  }\n\n  getUsers = () => {\n\n    new CometChatManager().getLoggedInUser().then((user) => {\n\n      this.UserListManager.fetchNextUsers().then((userList) => {\n\n        if(userList.length === 0) {\n          this.decoratorMessage = \"No users found\";\n        }\n        \n        userList.forEach(user => user = this.setAvatar(user));\n        this.setState({ userlist: [...this.state.userlist, ...userList] });\n          \n      }).catch((error) => {\n\n        this.decoratorMessage = \"Error\";\n        console.error(\"[CometChatUserList] getUsers fetchNext error\", error);\n      });\n\n    }).catch((error) => {\n\n      this.decoratorMessage = \"Error\";\n      console.log(\"[CometChatUserList] getUsers getLoggedInUser error\", error);\n    });\n  }\n\n  setAvatar(user) {\n\n    if(!user.getAvatar()) {\n\n      const uid = user.getUid();\n      const char = user.getName().charAt(0).toUpperCase();\n      user.setAvatar(SvgAvatar.getAvatar(uid, char))\n    }\n\n  }\n\n  render() {\n\n    let messageContainer = null;\n    if(this.state.userlist.length === 0) {\n      messageContainer = (\n        <div css={contactMsgStyle()} className=\"contacts__decorator-message\">\n          <p css={contactMsgTxtStyle(this.theme)} className=\"decorator-message\">{this.decoratorMessage}</p>\n        </div>\n      );\n    }\n\n    const userList = [...this.state.userlist];\n    let currentLetter = \"\";\n    const users = userList.map((user, key) => {\n      \n      const chr = user.name[0].toUpperCase();\n      let firstChar = null;\n      if (chr !== currentLetter) {\n        currentLetter = chr;\n        firstChar = (<div css={contactAlphabetStyle()} className=\"contacts__list__alphabet-filter\">{currentLetter}</div>);\n      } else {\n        firstChar = null;\n      }\n\n      return (\n        <React.Fragment key={key}>\n          {firstChar}\n          <UserView \n          theme={this.theme}\n          user={user} \n          selectedUser={this.state.selectedUser}\n          widgetsettings={this.props.widgetsettings} \n          clickeHandler={this.handleClick}  />\n        </React.Fragment>\n      );\n\n    });\n\n    let closeBtn = (<div css={contactHeaderCloseStyle(navigateIcon)} className=\"header__close\" onClick={this.handleMenuClose}></div>);\n    if (!this.props.hasOwnProperty(\"enableCloseMenu\") || (this.props.hasOwnProperty(\"enableCloseMenu\") && this.props.enableCloseMenu === 0)) {\n      closeBtn = null;\n    }\n\n    return (\n      <div css={contactWrapperStyle()} className=\"contacts\">\n        <div css={contactHeaderStyle(this.theme)} className=\"contacts__header\">\n          {closeBtn}\n          <h4 css={contactHeaderTitleStyle(this.props)} className=\"header__title\">Contacts</h4>\n          <div></div>\n        </div>\n        <div css={contactSearchStyle()} className=\"contacts__search\">\n          <input\n          type=\"text\" \n          autoComplete=\"off\" \n          css={contactSearchInputStyle(this.theme, searchIcon)}\n          className=\"search__input\" \n          placeholder=\"Search\"\n          onChange={this.searchUsers} />\n        </div>\n        {messageContainer}\n        <div css={contactListStyle()} className=\"contacts__list\" onScroll={this.handleScroll} ref={el => this.userListRef = el}>{users}</div>\n      </div>\n    );\n  }\n}\n\nexport default CometChatUserList;\n","import { CometChat } from \"@cometchat-pro/chat\";\n\nimport * as enums from '../../util/enums.js';\n\nexport class SharedMediaManager {\n\n    mediaMessageListenerId = new Date().getTime();\n    mediaMessageRequest = null;\n\n    constructor(item, type, messagetype) {\n\n        if(type === \"user\") {\n\n            this.mediaMessageRequest = new CometChat.MessagesRequestBuilder()\n            .setUID(item.uid)\n            .setLimit(10).setCategory(\"message\").setType(messagetype).build();\n\n        } else {\n\n            this.mediaMessageRequest = new CometChat.MessagesRequestBuilder()\n            .setGUID(item.guid)\n            .setLimit(10).setCategory(\"message\").setType(messagetype).build();\n        }\n    }\n\n    fetchPreviousMessages() {\n        return this.mediaMessageRequest.fetchPrevious();\n    }\n    \n    attachListeners(callback) {\n\n        CometChat.addMessageListener(\n            this.msgListenerId,\n            new CometChat.MessageListener({\n                onMediaMessageReceived: mediaMessage => {\n                    callback(enums.MEDIA_MESSAGE_RECEIVED, mediaMessage);\n                },\n                onMessageDeleted: deletedMessage => {\n                    callback(enums.MESSAGE_DELETED, deletedMessage);\n                }\n            })\n        );\n    }\n\n    removeListeners() {\n        CometChat.removeMessageListener(this.mediaMessageListenerId);\n    }\n\n}","export const sectionStyle = (props) => {\n\n    const containerHeightProp = (props.containerHeight) ? {\n        height: `calc(100% - ${props.containerHeight})`\n    } : {\n        height: \"calc(100% - 20px)\"\n    };\n\n    \n    return {\n        width: \"100%\",\n        ...containerHeightProp\n    }\n}\n\nexport const sectionHeaderStyle = (props) => {\n\n    return {\n        margin: \"0\",\n        width: \"100%\",\n        fontSize: \"12px\",\n        fontWeight: \"500!important\",\n        lineHeight: \"20px\",\n        color: `${props.theme.color.secondary}`,\n        textTransform: \"uppercase\",\n    }\n}\n\nexport const sectionContentStyle = () => {\n\n    return {\n        width: \"100%\",\n        margin: \"6px 0\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        height: \"calc(100% - 20px)\"\n    }\n}\n\nexport const mediaBtnStyle = () => {\n\n    return {\n        borderRadius: \"8px\",\n        backgroundColor: \"rgba(20, 20, 20, 0.08)\",\n        width: \"100%\",\n        padding: \"2px\",\n        margin: \"6px 0\",\n        clear: \"both\",\n    }\n}\n\nexport const buttonStyle = (state, type) => {\n\n    const activeBtn = (state.messagetype === type) ? {\n        backgroundColor : \"#fff\",\n        boxShadow: \"rgba(20, 20, 20, 0.04) 0 3px 1px, rgba(20, 20, 20, 0.12) 0 3px 8px\",\n        borderRadius: \"7px\",\n        \"&::before\": {\n            display: \"none\",\n        }\n    } : {};\n\n    return {\n        display: \"inline-block\",\n        width: \"33.33%\",\n        float: \"left\",\n        fontSize: \"13px\",\n        fontWeight: \"500\",\n        lineHeight: \"18px\",\n        padding: \"5px\",\n        position: \"relative\",\n        textAlign: \"center\",\n        cursor: \"pointer\",\n        ...activeBtn,\n        \"&:before\": {\n            \"`content`\": \"\",\n            position: \"absolute\",\n            display: \"block\",\n            width: \"2px\",\n            height: \"16px\",\n            backgroundColor: \"rgba(20, 20, 20, 0.12)\",\n            right: \"-2px\",\n            top: \"6px\",\n        },\n        \"&:last-of-type::before\": {\n            display: \"none\",\n        }\n    }\n}\n\nexport const mediaItemStyle = () => {\n\n    return {\n        height: \"calc(100% - 45px)\",\n        overflowY: \"auto\",\n        overflowX: \"hidden\",\n        display: \"flex\",\n        flexWrap: \"wrap\",\n        fontSize: \"14px\",\n    }\n}\n\nexport const itemStyle = (state, props, img) => {\n\n    let itemTypeStyle = {};\n    let bgColor = `${props.theme.backgroundColor.lightGrey}`;\n\n    if (state.messagetype === \"image\") {\n\n        itemTypeStyle = {\n            height: \"120px\",\n            width: \"120px\",\n            backgroundColor: bgColor,\n            \"> img\": {\n                display: \"block\",\n                width: \"100%\",\n                height: \"100%\",\n                objectFit: \"contain\",\n            }\n        }\n        \n    } else if (state.messagetype === \"video\") {\n\n        itemTypeStyle = {\n            \"> video\": {\n                height: \"120px\",\n                width: \"120px\",\n                margin: \"auto\",\n            }\n        }\n\n    } else if (state.messagetype === \"file\") {\n\n        itemTypeStyle = {\n            backgroundColor: bgColor,\n            \"> a\": {\n                maxWidth: \"100%\",\n                maxHeight: \"100%\",\n                margin: \"auto\",\n                backgroundColor: bgColor,\n                display: \"inline-block\",\n                padding: \"10px\",\n                paddingLeft: \"35px\",\n                fontSize: \"13px\",\n                color: `${props.theme.color.primary}`,\n                background: `url(${img}) no-repeat 10px center`,\n                whiteSpace: \"pre-wrap\",\n                wordWrap: \"break-word\",\n                textAlign: \"left\",\n                \"&:hover, &:visited\": {\n                    color: `${props.theme.color.primary}`,\n                }\n\n            }\n        }\n\n    }\n\n    return {\n        margin: \"0.5rem\",\n        textAlign: \"center\",\n        flex: \"1 0 auto\",\n        ...itemTypeStyle,\n        \"@for $i from 1 through 36\": {\n            \"&:nth-of-type(#{$i})\": {\n            maxWidth: \"100%\",\n            }\n        }\n    }\n}","import React from \"react\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nimport { CometChatManager } from \"../../util/controller\";\nimport { SharedMediaManager } from \"./controller\";\n\nimport * as enums from '../../util/enums.js';\n\nimport {\n    sectionStyle,\n    sectionHeaderStyle,\n    sectionContentStyle,\n    mediaBtnStyle,\n    buttonStyle,\n    mediaItemStyle,\n    itemStyle,\n\n} from \"./style\";\n\nimport fileIcon from \"./resources/file-blue.svg\";\n\nclass SharedMediaView extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            messagetype: \"image\",\n            messageList: []\n        }\n\n        this.messageContainer = React.createRef();\n    }\n\n    componentDidMount() {\n\n        this.SharedMediaManager = new SharedMediaManager(this.props.item, this.props.type, this.state.messagetype);\n        this.getMessages(true);\n        this.SharedMediaManager.attachListeners(this.messageUpdated);\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n\n        if(prevState.messagetype !== this.state.messagetype) {\n\n            this.SharedMediaManager = null;\n            this.SharedMediaManager = new SharedMediaManager(this.props.item, this.props.type, this.state.messagetype);\n            this.getMessages(true);\n            this.SharedMediaManager.attachListeners(this.messageUpdated);\n        }\n    }\n\n    //callback for listener functions\n    messageUpdated = (key, message) => {\n\n        switch(key) {\n\n            case enums.MESSAGE_DELETED:\n              this.messageDeleted(message);\n              break;\n            case enums.MEDIA_MESSAGE_RECEIVED:\n              this.messageReceived(message);\n              break;\n            default:\n              break;\n        }\n    }\n\n    messageDeleted = (deletedMessage) => {\n  \n        const messageType = deletedMessage.data.type;\n        if (this.props.type === 'group' \n        && deletedMessage.getReceiverType() === 'group'\n        && deletedMessage.getReceiver().guid === this.props.item.guid\n        && messageType === this.state.messagetype) {\n\n            const messageList = [...this.state.messageList];\n            const filteredMessages = messageList.filter(message => message.id !== deletedMessage.id);\n            this.setState({ messageList: filteredMessages, scrollToBottom: false });\n        }\n    }\n    \n    //message is received or composed & sent\n    messageReceived = (message) => {\n\n        const messageType = message.data.type;\n        if (this.props.type === 'group' \n        && message.getReceiverType() === 'group'\n        && message.getReceiver().guid === this.props.item.guid\n        && messageType === this.state.messagetype) {\n\n            let messages = [...this.state.messageList];\n            messages = messages.concat(message);\n            this.setState({ messageList: messages, scrollToBottom: true });\n        }\n    }\n\n    getMessages = (scrollToBottom = false) => {\n        \n        new CometChatManager().getLoggedInUser().then((user) => {\n          \n          this.loggedInUser = user;\n          \n          this.SharedMediaManager.fetchPreviousMessages().then((messages) => {\n    \n            const messageList = [...messages, ...this.state.messageList];\n            this.setState({ messageList: messageList });\n\n            if(scrollToBottom) {\n                this.scrollToBottom();\n            }\n    \n        }).catch((error) => {\n            //TODO Handle the erros in contact list.\n            console.error(\"[SharedMediaView] getMessages fetchPrevious error\", error);\n          });\n    \n        }).catch((error) => {\n            console.log(\"[SharedMediaView] getMessages getLoggedInUser error\", error);\n        });\n    \n    }\n\n    scrollToBottom = () => {\n      \n        if (this.messageContainer) {\n            this.messageContainer.scrollTop = this.messageContainer.scrollHeight;\n        }\n    }\n\n    handleScroll = (e) => {\n\n        const top = Math.round(e.currentTarget.scrollTop) === 0;\n        if (top && this.state.messageList.length) {\n            this.getMessages();\n        }\n    }\n\n    mediaClickHandler = (type) => {\n        this.setState({messagetype: type, messageList: []});\n    }\n\n    lazyLoad = (target) => {\n        const obs = new IntersectionObserver((entries, observer) => {\n            entries.forEach(entry => {\n                if (entry.isIntersecting) {\n                    const img = entry.target.querySelector(\"img\");\n                    const src = img.getAttribute('data-lazy');\n                    \n                    img.setAttribute('src', src);\n                    img.classList.add('fadeIn');\n\n                    observer.disconnect();\n                }\n            });\n        });\n        obs.observe(target);\n    }\n\n    render() {\n\n        const template = (message, key) => {\n\n            if(this.state.messagetype === \"image\" && message.data.url) {\n\n                return (\n                    <div id={message.id} key={key} css={itemStyle(this.state, this.props, fileIcon)} className=\"item item__image\">\n                        <img src={message.data.url} alt=\"Media Item\" />\n                    </div>\n                );\n\n            } else if (this.state.messagetype === \"video\" && message.data.url) {\n\n                return (\n                    <div id={message.id} key={key} css={itemStyle(this.state, this.props, fileIcon)} className=\"item item__video\">\n                        <video src={message.data.url} />\n                    </div>\n                );\n\n            } else if (this.state.messagetype === \"file\" && message.data.attachments) {\n\n                return (\n                    <div id={message.id} key={key} css={itemStyle(this.state, this.props, fileIcon)} className=\"item item__file\">\n                    <a href={message.data.attachments[0].url} \n                    target=\"_blank\" \n                    rel=\"noopener noreferrer\">{message.data.attachments[0].name}</a>\n                    </div>\n                );\n            }\n        }\n\n        const messages = [...this.state.messageList];\n        const messageList = messages.map((message, key) => {\n            return (template(message, key));\n        });\n\n        return (\n            <div css={sectionStyle(this.props)} className=\"section section__sharedmedia\">\n                <h6 css={sectionHeaderStyle(this.props)} className=\"section__header\">Shared Media</h6>\n                <div css={sectionContentStyle(this.props)} data-id=\"sharedmedia\" className=\"section__content\">\n                    <div css={mediaBtnStyle()} className=\"media__button\">\n                        <span css={buttonStyle(this.state, \"image\")} onClick={() => this.mediaClickHandler(\"image\")}>Photos</span>\n                        <span css={buttonStyle(this.state, \"video\")} onClick={() => this.mediaClickHandler(\"video\")}>Videos</span>\n                        <span css={buttonStyle(this.state, \"file\")} onClick={() => this.mediaClickHandler(\"file\")}>Docs</span>\n                    </div>\n                    <div css={mediaItemStyle()} className=\"media_items\" \n                    ref={el => this.messageContainer = el}\n                    onScroll={this.handleScroll}>{(messageList.length) ? messageList : \"No records found.\"}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    componentWillUnmount() {\n      this.SharedMediaManager.removeListeners();\n      this.SharedMediaManager = null;\n    }\n}\n\nexport default SharedMediaView;\n","export const userDetailStyle = (props) => {\n\n    return {\n        display: \"flex\",\n        flexDirection: \"column\",\n        height: \"100%\",\n        boxSizing: \"border-box\",\n        fontFamily: `${props.theme.fontFamily}`,\n        \"*\": {\n            boxSizing: \"border-box\",\n            fontFamily: `${props.theme.fontFamily}`,\n        }\n    }\n}\n\nexport const headerStyle = (props) => {\n\n    return {\n        padding: \"19px 16px\",\n        position: \"relative\",\n        borderBottom: `1px solid ${props.theme.borderColor.primary}`,\n        display: \"flex\",\n        justifyContent: \"flex-start\",\n        alignItems: \"center\",\n    }\n}\n\nexport const headerCloseStyle = (img) => {\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n        cursor: \"pointer\",\n        display: \"none\",\n        background: `url(${img}) center center no-repeat`,\n        width: \"24px\",\n        height: \"24px\",\n        [mq[0]]: {\n            display: \"block\"\n        },\n    }\n}\n\nexport const headerTitleStyle = () => {\n\n    return {\n        margin: \"0\",\n        fontWeight: \"700\",\n        fontSize: \"20px\"\n    }\n}\n\nexport const sectionStyle = () => {\n\n    return {\n        margin: \"0\",\n        padding: \"16px\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"space-between\",\n        alignItems: \"flex-start\",\n        height: \"calc(100% - 70px)\",\n        '&:not(:last-of-type)': {\n            marginBottom: \"16px\",\n        }\n    }\n}\n\nexport const privacySectionStyle = (props) => {\n\n    return {\n        width: \"100%\",\n        \"> div\": {\n            color: `${props.theme.color.red}`,\n            fontWeight: \"600\",\n            cursor: \"pointer\",\n            fontSize: \"12px\"\n        }\n    }\n}\n\nexport const sectionHeaderStyle = (props) => {\n\n    return {\n        margin: \"0\",\n        width: \"100%\",\n        fontSize: \"12px\",\n        fontWeight: \"500!important\",\n        lineHeight: \"20px\",\n        color: `${props.theme.color.secondary}`,\n        textTransform: \"uppercase\",\n    }\n}\n\nexport const sectionContentStyle = () => {\n\n    return {\n        width: \"100%\",\n        margin: \"6px 0\",\n    }\n}\n\nexport const contentItemStyle = () => {\n\n    return {\n        width: 100%\"\",\n        '&:not(:first-of-type):not(:last-of-type)': {\n            padding: \"6px 0\",\n        }\n    }\n}\n\nexport const itemLinkStyle = (deleteLink, props) => {\n\n    const deleteCss = (deleteLink) ? {\n        color: `${props.theme.color.red}`,\n    } : {};\n\n    return {\n        fontSize: \"15px\",\n        lineHeight: \"20px\",\n        fontWeight: \"600\",\n        display: \"inline-block\",\n        ...deleteCss\n    }\n}","import React from \"react\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nimport SharedMediaView from \"../SharedMediaView\";\n\nimport {\n    userDetailStyle,\n    headerStyle,\n    headerCloseStyle,\n    headerTitleStyle,\n    sectionStyle,\n    privacySectionStyle,\n    sectionHeaderStyle,\n    sectionContentStyle,\n    contentItemStyle,\n    itemLinkStyle\n} from \"./style\";\n\nimport navigateIcon from \"./resources/navigate_before.svg\";\n\nclass CometChatUserDetail extends React.Component {\n\n    render () {\n\n        let blockUserText;\n        if(this.props.item.blockedByMe) {\n            blockUserText = (\n                <div css={itemLinkStyle(1, this.props)} className=\"item__link\" onClick={() => this.props.actionGenerated(\"unblockUser\")}>Unblock User</div>\n            );\n        } else {\n            blockUserText = (\n                <div css={itemLinkStyle(1, this.props)} className=\"item__link\" onClick={() => this.props.actionGenerated(\"blockUser\")}>Block User</div>\n            );\n        }\n\n        let blockUserView = (\n            <div css={privacySectionStyle(this.props)} className=\"section section__privacy\">\n                <h6 css={sectionHeaderStyle(this.props)} className=\"section__header\">Options</h6>\n                <div css={sectionContentStyle()} className=\"section__content\">\n                    <div css={contentItemStyle()} className=\"content__item\">{blockUserText}</div>\n                </div>\n            </div>\n        );\n        \n        let sharedmediaView = (\n            <SharedMediaView theme={this.props.theme} containerHeight=\"50px\" item={this.props.item} type={this.props.type} widgetsettings={this.props.widgetsettings} />\n        );\n\n        if(this.props.hasOwnProperty(\"widgetsettings\") \n        && this.props.widgetsettings\n        && this.props.widgetsettings.hasOwnProperty(\"main\")) {\n\n            //if block_user is disabled in chatwidget\n            if(this.props.widgetsettings.main.hasOwnProperty(\"block_user\")\n            && this.props.widgetsettings.main[\"block_user\"] === false) {\n                blockUserView = null;\n            }\n\n            //if view_shared_media is disabled in chatwidget\n            if(this.props.widgetsettings.main.hasOwnProperty(\"view_shared_media\")\n            && this.props.widgetsettings.main[\"view_shared_media\"] === false) {\n                sharedmediaView = null;\n            }\n        }\n\n        return (\n            <div css={userDetailStyle(this.props)} className=\"detailpane detailpane--user\">\n                <div css={headerStyle(this.props)} className=\"detailpane__header\">\n                    <div css={headerCloseStyle(navigateIcon)} className=\"header__close\" onClick={() => this.props.actionGenerated(\"closeDetailClicked\")}></div>\n                    <h4 css={headerTitleStyle()} className=\"header__title\">Details</h4>\n                </div>\n                <div css={sectionStyle()} className=\"detailpane__section\">\n                    {blockUserView}\n                    {sharedmediaView}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default CometChatUserDetail;","export const wrapperStyle = (props) => {\n\n    return {\n        display: \"flex\",\n        flexDirection: \"column\",\n        height: \"100%\",\n        boxSizing: \"border-box\",\n        fontFamily: `${props.theme.fontFamily}`,\n        \"*\": {\n            boxSizing: \"border-box\",\n            fontFamily: `${props.theme.fontFamily}`,\n        }\n    }\n}\n\nexport const headerStyle = (props) => {\n\n    return {\n        padding: \"12px 16px\",\n        width: \"100%\",\n        backgroundColor: `${props.theme.backgroundColor.white}`,\n        zIndex: \"1\",\n        borderBottom: `1px solid ${props.theme.borderColor.primary}`,\n    }\n}\n\nexport const headerWrapperStyle = () => {\n\n    return {\n        display: \"flex\",\n        flexDirection: \"row\",\n        alignItems: \"center\",\n        justifyContent: \"space-between\",\n        width: \"100%\",\n    }\n}\n\nexport const headerDetailStyle = () => {\n\n    return {\n        display: \"flex\",\n        flexDirection: \"column\",\n        width: \"calc(100% - 40px)\",\n    }\n}\n\nexport const headerTitleStyle = () => {\n\n    return {\n        margin: \"0\",\n        fontSize: \"15px\",\n        fontWight: \"600\",\n        lineHeight: \"22px\",\n        width: \"100%\",\n    }\n}\n\nexport const headerNameStyle = () => {\n\n    return {\n        fontSize: \"13px\",\n        lineHeight: \"20px\",\n        width: \"100%\",\n        overflow: \"hidden\",\n        textOverflow: \"ellipsis\",\n        whiteSpace: \"nowrap\",\n    }\n}\n\nexport const headerCloseStyle = (img) => {\n\n    return {\n        cursor: \"pointer\",\n        background: `url(${img}) center center no-repeat`,\n        width: \"24px\",\n        height: \"24px\",\n    }\n}\n\nexport const messageContainerStyle = () => {\n\n    return {\n        display: \"flex\",\n        flexDirection: \"column\",\n        height: \"100%\",\n        overflowX: \"hidden\",\n        overflowY: \"auto\",\n        transition: \"background .3s ease-out .1s\",\n        width: \"100%\",\n        zIndex: \"100\",\n        minHeight: \"calc(100% - 68px)\",\n        order: \"2\",\n        \".chat__list\": {\n            minHeight: \"250px\",\n            \".list__wrapper\": {\n                \"::-webkit-scrollbar\": {\n                    display: \"none\"\n                },\n            }\n        },\n    }\n}\n\nexport const parentMessageStyle = (message) => {\n\n    const alignment = (message.messageFrom === \"sender\") ? {\n        justifyContent: \"flex-end\",\n    } : {\n        justifyContent: \"flex-start\",\n    };\n\n    return {\n        padding: \"14px 16px\",\n        display: \"flex\",\n        alignItems: \"center\",\n        ...alignment,\n        \".sender__message__container, .receiver__message__container\": {\n            maxWidth: \"100%\",\n            \"&:hover\": {\n                \".message__actions\": {\n                    display: \"none\"\n                }\n            }\n        },\n        \".replycount\": {\n            display: \"none\"\n        }\n    }\n}\n\nexport const messageSeparatorStyle = (props) => {\n\n    return {\n        display: \"flex\",\n        alignItems: \"center\",\n        position: \"relative\",\n        margin: \"7px 16px\",\n        height: \"15px\",\n        \"hr\": {\n            flex: \"1\",\n            margin: \"1px 0 0 0\",\n            borderTop: `1px solid ${props.theme.borderColor.primary}`,\n        }\n    }\n}\n\nexport const messageReplyStyle = () => {\n\n    return {\n        marginRight: \"12px\",\n        fontSize: \"12px\",\n    }\n}","import React from \"react\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nimport { CometChat } from \"@cometchat-pro/chat\";\n\nimport MessageList from \"../MessageList\";\nimport MessageComposer from \"../MessageComposer\";\n\nimport SenderMessageBubble from \"../SenderMessageBubble\";\nimport ReceiverMessageBubble from \"../ReceiverMessageBubble\";\nimport SenderImageBubble from \"../SenderImageBubble\";\nimport ReceiverImageBubble from \"../ReceiverImageBubble\";\nimport SenderFileBubble from \"../SenderFileBubble\";\nimport ReceiverFileBubble from \"../ReceiverFileBubble\";\nimport SenderAudioBubble from \"../SenderAudioBubble\";\nimport ReceiverAudioBubble from \"../ReceiverAudioBubble\";\nimport SenderVideoBubble from \"../SenderVideoBubble\";\nimport ReceiverVideoBubble from \"../ReceiverVideoBubble\";\n\nimport {\n  wrapperStyle,\n  headerStyle,\n  headerWrapperStyle,\n  headerDetailStyle,\n  headerTitleStyle,\n  headerNameStyle,\n  headerCloseStyle,\n  messageContainerStyle,\n  parentMessageStyle,\n  messageSeparatorStyle,\n  messageReplyStyle,\n} from \"./style\";\n\nimport clearIcon from \"./resources/clear.svg\";\n\nclass MessageThread extends React.Component {\n\n    constructor(props) {\n      super(props);\n\n      this.state = {\n        messageList: [],\n        scrollToBottom: false,\n        replyCount: 0,\n        replyPreview: null,\n        messageToBeEdited: null,\n      }\n    }\n\n    componentDidMount() {\n\n      if(this.props.parentMessage.replyCount) {\n        this.setState({replyCount: this.props.parentMessage.replyCount});\n      }\n    }\n\n    componentDidUpdate(prevProps) {\n\n      if(prevProps.parentMessage.id !== this.props.parentMessage.id) {\n\n        this.setState({ messageList: [], scrollToBottom: true });\n\n        if(this.props.parentMessage.replyCount) {\n          this.setState({replyCount: this.props.parentMessage.replyCount});\n        } else {\n          this.setState({ replyCount: 0 });\n        }\n\n      } \n    }\n\n    actionHandler = (action, messages) => {\n        \n      switch(action) {\n\n        case \"messageReceived\": {\n          const message = messages[0];\n          if(message.parentMessageId && message.parentMessageId === this.props.parentMessage.id) {\n\n            const replyCount = this.state.replyCount + 1;\n            this.setState({ replyCount: replyCount });\n            this.smartReplyPreview(messages);\n            this.appendMessage(messages);\n          }\n        }\n        break;\n        case \"messageComposed\": {\n\n          let replyCount = this.state.replyCount;\n\n          this.setState({replyCount: ++replyCount})\n          this.appendMessage(messages);\n          this.props.actionGenerated(\"threadMessageComposed\", messages);\n        }\n        break;\n        case \"messageUpdated\":\n          this.updateMessages(messages);\n        break;\n        case \"messageFetched\":\n          this.prependMessages(messages);\n        break;\n        case \"messageDeleted\":\n          this.removeMessages(messages);\n        break;\n        case \"editMessage\":\n          this.editMessage(messages);\n          break;\n        case \"messageEdited\":\n          this.messageEdited(messages);\n        break;\n        case \"clearEditPreview\":\n          this.clearEditPreview();\n        break;\n        case \"deleteMessage\":\n          this.deleteMessage(messages);\n          break;\n        case \"viewActualImage\":\n          this.props.actionGenerated(\"viewActualImage\", messages);\n          break;\n        default:\n        break;\n      }\n    }\n\n    editMessage = (message) => {\n      this.setState({ \"messageToBeEdited\": message });\n    }\n\n    messageEdited = (message) => {\n\n      const messageList = [...this.state.messageList];\n      let messageKey = messageList.findIndex(m => m.id === message.id);\n      if (messageKey > -1) {\n\n        const messageObj = messageList[messageKey];\n\n        const newMessageObj = { ...messageObj, ...message };\n\n        messageList.splice(messageKey, 1, newMessageObj);\n        this.updateMessages(messageList);\n\n        if (messageList.length - messageKey === 1) {\n          this.props.actionGenerated(\"messageEdited\", [newMessageObj]);\n        }\n\n      }\n    }\n\n    clearEditPreview = () => {\n      this.setState({ \"messageToBeEdited\": null });\n    }\n\n    deleteMessage = (message) => {\n\n      const messageId = message.id;\n      CometChat.deleteMessage(messageId).then(deletedMessage => {\n\n        this.removeMessages([deletedMessage]);\n\n        const messageList = [...this.state.messageList];\n        let messageKey = messageList.findIndex(m => m.id === message.id);\n\n        if (messageList.length - messageKey === 1 && !message.replyCount) {\n          this.props.actionGenerated(\"messageDeleted\", [deletedMessage]);\n        }\n\n      }).catch(error => {\n        console.log(\"Message delete failed with error:\", error);\n      });\n    }\n\n    smartReplyPreview = (messages) => {\n\n      const message = messages[0];\n      \n      if (message.hasOwnProperty(\"metadata\")) {\n\n        const metadata = message.metadata;\n        if (metadata.hasOwnProperty(\"@injected\")) {\n\n          const injectedObject = metadata[\"@injected\"];\n          if (injectedObject.hasOwnProperty(\"extensions\")) {\n\n            const extensionsObject = injectedObject[\"extensions\"];\n            if (extensionsObject.hasOwnProperty(\"smart-reply\")) {\n\n              const smartReply = extensionsObject[\"smart-reply\"];\n              if (smartReply.hasOwnProperty(\"error\") === false) {\n                this.setState({ replyPreview: message });\n              } else {\n                this.setState({ replyPreview: null });\n              }\n\n            }\n          }\n        }\n      }\n    }\n\n    //message is received or composed & sent\n    appendMessage = (message) => {\n      let messages = [...this.state.messageList];\n      messages = messages.concat(message);\n      this.setState({ messageList: messages, scrollToBottom: true });\n    }\n\n    //message status is updated\n    updateMessages = (messages) => {\n      this.setState({ messageList: messages });\n    }\n\n    //messages are fetched from backend\n    prependMessages = (messages) => {\n      const messageList = [...messages, ...this.state.messageList];\n      this.setState({ messageList: messageList, scrollToBottom: false });\n    }\n\n    //messages are deleted\n    removeMessages = (messages) => {\n  \n      const deletedMessage = messages[0];\n      const messagelist = [...this.state.messageList];\n\n      let messageKey = messagelist.findIndex(message => message.id === deletedMessage.id);\n      if (messageKey > -1) {\n\n        let messageObj = { ...messagelist[messageKey] };\n        let newMessageObj = Object.assign({}, messageObj, deletedMessage);\n\n        messagelist.splice(messageKey, 1, newMessageObj);\n        this.setState({ messageList: messagelist, scrollToBottom: false });\n      }\n  }\n\n  getSenderMessageComponent = (message, key) => {\n\n    let component;\n\n    switch (message.type) {\n      case CometChat.MESSAGE_TYPE.TEXT:\n        component = <SenderMessageBubble theme={this.props.theme} key={key} item={this.props.item} type={this.props.type} message={message} widgetsettings={this.props.widgetsettings} actionGenerated={this.props.actionGenerated} />;\n        break;\n      case CometChat.MESSAGE_TYPE.IMAGE:\n        component = <SenderImageBubble theme={this.props.theme} key={key} item={this.props.item} type={this.props.type} message={message} widgetsettings={this.props.widgetsettings} actionGenerated={this.props.actionGenerated} />;\n        break;\n      case CometChat.MESSAGE_TYPE.FILE:\n        component = <SenderFileBubble theme={this.props.theme} key={key} item={this.props.item} type={this.props.type} message={message} widgetsettings={this.props.widgetsettings} actionGenerated={this.props.actionGenerated} />;\n        break;\n      case CometChat.MESSAGE_TYPE.VIDEO:\n        component = <SenderVideoBubble theme={this.props.theme} key={key} item={this.props.item} type={this.props.type} message={message} widgetsettings={this.props.widgetsettings} actionGenerated={this.props.actionGenerated} />;\n        break;\n      case CometChat.MESSAGE_TYPE.AUDIO:\n        component = <SenderAudioBubble theme={this.props.theme} key={key} item={this.props.item} type={this.props.type} message={message} widgetsettings={this.props.widgetsettings} actionGenerated={this.props.actionGenerated} />;\n        break;\n      default:\n        break;\n    }\n\n    return component;\n  }\n\n  getReceiverMessageComponent = (message, key) => {\n\n    let component;\n\n    switch (message.type) {\n      case \"message\":\n      case CometChat.MESSAGE_TYPE.TEXT:\n        component = <ReceiverMessageBubble theme={this.props.theme} key={key} item={this.props.item} type={this.props.type} message={message} widgetsettings={this.props.widgetsettings} actionGenerated={this.props.actionGenerated} />;\n        break;\n      case CometChat.MESSAGE_TYPE.IMAGE:\n        component = <ReceiverImageBubble theme={this.props.theme} key={key} item={this.props.item} type={this.props.type} message={message} widgetsettings={this.props.widgetsettings} actionGenerated={this.props.actionGenerated} />;\n        break;\n      case CometChat.MESSAGE_TYPE.FILE:\n        component = <ReceiverFileBubble theme={this.props.theme} key={key} item={this.props.item} type={this.props.type} message={message} widgetsettings={this.props.widgetsettings} actionGenerated={this.props.actionGenerated} />;\n        break;\n      case CometChat.MESSAGE_TYPE.AUDIO:\n        component = <ReceiverAudioBubble theme={this.props.theme} key={key} item={this.props.item} type={this.props.type} message={message} widgetsettings={this.props.widgetsettings} actionGenerated={this.props.actionGenerated} />;\n        break;\n      case CometChat.MESSAGE_TYPE.VIDEO:\n        component = <ReceiverVideoBubble theme={this.props.theme} key={key} item={this.props.item} type={this.props.type} message={message} widgetsettings={this.props.widgetsettings} actionGenerated={this.props.actionGenerated} />;\n        break;\n      default:\n        break;\n    }\n\n    return component;\n  }\n\n    getMessageComponent = (message) => {\n\n      let component = null;\n      const key = 1;\n      \n      if (this.props.loggedInUser.uid === message.sender.uid) {\n        component = this.getSenderMessageComponent(message, key);\n      } else {\n        component = this.getReceiverMessageComponent(message, key);\n      }\n      \n      return component;\n    }\n\n    render() {\n\n      let parentMessage = this.getMessageComponent(this.props.parentMessage);\n      \n      let seperator = (<div css={messageSeparatorStyle(this.props)}><hr/></div>);\n      if(this.state.replyCount) {\n\n        const replyCount = this.state.replyCount;\n        const replyText = (replyCount === 1) ? `${replyCount} reply` : `${replyCount} replies`;\n\n        seperator = (\n          <div css={messageSeparatorStyle(this.props)} className=\"message__separator\">\n            <span css={messageReplyStyle()} className=\"message__replies\">{replyText}</span>\n            <hr/>\n          </div>\n        );\n      }\n\n      return (\n        <div css={wrapperStyle(this.props)} className=\"thread__chat\">\n          <div css={headerStyle(this.props)} className=\"chat__header\">\n            <div css={headerWrapperStyle()} className=\"header__wrapper\">    \n              <div css={headerDetailStyle()} className=\"header__details\">\n                <h6 css={headerTitleStyle()} className=\"header__title\">Thread</h6>\n                <span css={headerNameStyle()} className=\"header__username\">{this.props.item.name}</span>\n              </div>\n              <div css={headerCloseStyle(clearIcon)} className=\"header__close\" onClick={() => this.props.actionGenerated(\"closeThreadClicked\")}></div>\n            </div>\n          </div>\n          <div css={messageContainerStyle()} className=\"chat__message__container\">\n            <div css={parentMessageStyle(this.props.parentMessage)} className=\"parent__message\">{parentMessage}</div>\n            {seperator}\n            <MessageList\n            theme={this.props.theme}\n            messages={this.state.messageList} \n            item={this.props.item} \n            type={this.props.type}\n            scrollToBottom={this.state.scrollToBottom}\n            config={this.props.config}\n            widgetsettings={this.props.widgetsettings}\n            parentMessageId={this.props.parentMessage.id}\n            loggedInUser={this.props.loggedInUser}\n            actionGenerated={this.actionHandler} />\n            <MessageComposer\n            theme={this.props.theme}\n            item={this.props.item} \n            type={this.props.type}\n            widgetsettings={this.props.widgetsettings}\n            parentMessageId={this.props.parentMessage.id}\n            messageToBeEdited={this.state.messageToBeEdited}\n            replyPreview={this.state.replyPreview}\n            actionGenerated={this.actionHandler} />\n          </div>\n        </div>\n      );\n    }\n}\n\nexport default MessageThread;","import { CometChat } from \"@cometchat-pro/chat\";\n\nimport * as enums from '../../util/enums.js';\n\nexport class CallAlertManager {\n\n    callListenerId = \"incoming_call_\" + new Date().getTime();\n\n    attachListeners(callback) {\n\n        CometChat.addCallListener(\n            this.callListenerId,\n            new CometChat.CallListener({\n                onIncomingCallReceived: call => {\n                    callback(enums.INCOMING_CALL_RECEIVED, call);\n                },\n                onIncomingCallCancelled: call => {\n                    callback(enums.INCOMING_CALL_CANCELLED, call);\n                }\n            })\n        );\n    }\n\n    removeListeners() {\n        CometChat.removeCallListener(this.callListenerId);\n    }\n}","export const incomingCallWrapperStyle = (props, keyframes) => {\n\n    const slideDown = keyframes`\n    0% { transform: translateY(-50px); }\n    100% { transform: translateY(0px); }\n    `;\n\n    let positionValue = \"absolute\";\n    let leftPos = \"0\";\n    let rightPos = \"0\";\n    let topPos = \"0\";\n    let bottomPos = \"unset\";\n    let zIndexValue = \"999\";\n    \n    if (props.hasOwnProperty(\"widgetsettings\")) {\n\n        if (props.widgetsettings.hasOwnProperty(\"dockedview\") && props.widgetsettings.dockedview) {\n\n            //if chat window is open\n            if (props.widgetsettings.hasOwnProperty(\"launched\") && props.widgetsettings.launched) {\n\n                zIndexValue = \"2147483000\";\n                positionValue = \"fixed\";\n                topPos = \"unset\";\n                bottomPos = \"100px\";\n                \n                if (props.widgetsettings.hasOwnProperty(\"alignment\") && props.widgetsettings.alignment === \"left\") {\n\n                    rightPos = \"unset\";\n                    leftPos = \"20px\";\n\n                    if (props.widgetsettings.hasOwnProperty(\"width\")) {\n\n                        if (props.widgetsettings.width.includes(\"px\")) {\n\n                            const widgetWidth = props.widgetsettings.width.replace(\"px\", \"\");\n                            rightPos = parseInt(widgetWidth) - 250 - 15;\n                            rightPos = rightPos + \"px\";\n                        }\n                    }\n\n                    if (props.widgetsettings.hasOwnProperty(\"height\")) {\n\n                        if (props.widgetsettings.height.includes(\"px\")) {\n\n                            const widgetHeight = props.widgetsettings.height.replace(\"px\", \"\");\n                            bottomPos = parseInt(widgetHeight) - 140 + 100;\n                            bottomPos = bottomPos + \"px\";\n                        }\n                    }\n                    \n                } else {\n\n                    leftPos = \"unset\";\n                    rightPos = \"20px\";\n                    \n                    if(props.widgetsettings.hasOwnProperty(\"width\")) {\n\n                        if (props.widgetsettings.width.includes(\"px\")) {\n\n                            const widgetWidth = props.widgetsettings.width.replace(\"px\", \"\");\n                            rightPos = parseInt(widgetWidth) - 250 - 15;\n                            rightPos = rightPos + \"px\";\n                        }\n                    }\n\n                    if (props.widgetsettings.hasOwnProperty(\"height\")) {\n\n                        if (props.widgetsettings.height.includes(\"px\")) {\n\n                            const widgetHeight = props.widgetsettings.height.replace(\"px\", \"\"); \n                            bottomPos = parseInt(widgetHeight) - 140 + 100;\n                            bottomPos = bottomPos + \"px\";\n                        }\n                    }\n                }\n                \n            } else {\n\n                leftPos = \"unset\";\n                positionValue = \"fixed\";\n            }\n        } \n    }\n\n    return {\n        position: positionValue,\n        top: topPos,\n        left: leftPos,\n        bottom: bottomPos,\n        right: rightPos,\n        borderRadius: \"10px\",\n        margin: \"15px\",\n        backgroundColor: `${props.theme.backgroundColor.callScreenGrey}`,\n        zIndex: zIndexValue,\n        color: `${props.theme.color.white}`,\n        textAlign: \"center\",\n        boxSizing: \"border-box\",\n        fontFamily: `${props.theme.fontFamily}`,\n        animation: `${slideDown} 250ms ease`,\n        width: \"250px\",\n        \"*\": {\n            boxSizing: \"border-box\",\n            fontFamily: `${props.theme.fontFamily}`,\n        },\n    }\n}\n\nexport const callContainerStyle = () => {\n\n    return {\n        display: \"flex\",\n        flexDirection: \"column\",\n        width: \"100%\",\n        padding: \"15px\",\n    }\n}\n\nexport const headerWrapperStyle = () => {\n\n    return {\n        width: \"100%\",\n        display: \"flex\",\n    }\n}\n\nexport const callDetailStyle = () => {\n\n    return {\n        width: \"calc(100% - 36px)\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        textAlign: \"left\"\n    }\n}\n\nexport const nameStyle = () => {\n\n    return {\n        fontSize: \"15px\",\n        fontWeight: \"600\",\n        display: \"block\",\n        width: \"100%\",\n        overflow: \"hidden\",\n        textOverflow: \"ellipsis\",\n        whiteSpace: \"nowrap\",\n        lineHeight: \"20px\",\n    }\n}\n\nexport const callTypeStyle = (props) => {\n\n    return {\n        fontSize: \"13px\",\n        width: \"100%\",\n        overflow: \"hidden\",\n        textOverflow: \"ellipsis\",\n        whiteSpace: \"nowrap\",\n        textTransform: \"capitalize\",\n        lineHeight: \"20px\",\n        color: \"#8A8A8A\",\n        display: \"flex\",\n        justifyContent: \"start\",\n        alignItems: \"center\",\n        padding: \"2px 0 0 0px\",\n        \"span\": {\n            padding: \"0 5px\"\n        }\n    }\n}\n\nexport const thumbnailStyle = () => {\n\n    return {\n        width: \"36px\",\n        height: \"36px\",\n        display: \"flex\",\n        justifyContent: \"center\",\n    }\n}\n\nexport const headerButtonStyle = () => {\n\n    return {\n        width: \"100%\",\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        margin: \"10px 0 0 0\",\n    }\n}\n\nexport const ButtonStyle = (props, action) => {\n\n    const backgroundColor = (action) ? `${props.theme.backgroundColor.blue}` : `${props.theme.backgroundColor.red}`;\n\n    return {\n        cursor: \"pointer\",\n        padding: \"6px 20px\",\n        backgroundColor: backgroundColor,\n        borderRadius: \"5px\",\n        color: `${props.theme.color.white}`,\n        fontSize: \"14px\",\n        outline: \"0\",\n        border: \"0\",\n        width: \"45%\",\n    }\n}\n","import React from \"react\";\n\n/** @jsx jsx */\nimport { jsx, keyframes } from \"@emotion/core\";\nimport { CometChat } from \"@cometchat-pro/chat\";\n\nimport { CometChatManager } from \"../../util/controller\";\nimport * as enums from '../../util/enums.js';\n\nimport Avatar from \"../Avatar\";\nimport { SvgAvatar } from '../../util/svgavatar';\n\nimport { CallAlertManager } from \"./controller\";\n\nimport {\n    incomingCallWrapperStyle,\n    callContainerStyle,\n    headerWrapperStyle,\n    callDetailStyle,\n    nameStyle,\n    callTypeStyle,\n    thumbnailStyle,\n    headerButtonStyle,\n    ButtonStyle\n} from \"./style\";\n\nimport audioCallIcon from \"./resources/incomingaudiocall.png\";\nimport videoCallIcon from \"./resources/incomingvideocall.png\";\nimport { incomingCallAlert } from \"../../resources/audio/\";\n\nclass CallAlert extends React.PureComponent {\n\n    constructor(props) {\n\n        super(props);\n\n        this.state = {\n            incomingCall: null,\n            callInProgress: null\n        }\n    }\n\n    componentDidMount() {\n\n        this.incomingAlert = new Audio(incomingCallAlert);\n\n        this.CallAlertManager = new CallAlertManager();\n        this.CallAlertManager.attachListeners(this.callScreenUpdated);\n    }\n\n    playIncomingAlert = () => {\n\n        //if it is disabled for chat wigdet in dashboard\n        if (this.props.hasOwnProperty(\"widgetsettings\")\n        && this.props.widgetsettings\n        && this.props.widgetsettings.hasOwnProperty(\"main\")\n        && (this.props.widgetsettings.main.hasOwnProperty(\"enable_sound_for_calls\") === false\n        || (this.props.widgetsettings.main.hasOwnProperty(\"enable_sound_for_calls\")\n        && this.props.widgetsettings.main[\"enable_sound_for_calls\"] === false))) {\n            return false;\n        }\n\n        this.incomingAlert.currentTime = 0;\n        if (typeof this.incomingAlert.loop == 'boolean') {\n            this.incomingAlert.loop = true;\n        } else {\n            this.incomingAlert.addEventListener('ended', function () {\n                this.currentTime = 0;\n                this.play();\n            }, false);\n        }\n        this.incomingAlert.play();\n    }\n\n    pauseIncomingAlert = () => {\n\n        //if it is disabled for chat wigdet in dashboard\n        if (this.props.hasOwnProperty(\"widgetsettings\")\n        && this.props.widgetsettings\n        && this.props.widgetsettings.hasOwnProperty(\"main\")\n        && (this.props.widgetsettings.main.hasOwnProperty(\"enable_sound_for_calls\") === false\n        || (this.props.widgetsettings.main.hasOwnProperty(\"enable_sound_for_calls\")\n        && this.props.widgetsettings.main[\"enable_sound_for_calls\"] === false))) {\n            return false;\n        }\n        \n        this.incomingAlert.pause();\n    }\n\n    callScreenUpdated = (key, call) => {\n        \n        switch (key) {\n\n            case enums.INCOMING_CALL_RECEIVED://occurs at the callee end\n                this.incomingCallReceived(call);\n                break;\n            case enums.INCOMING_CALL_CANCELLED://occurs(call dismissed) at the callee end, caller cancels the call\n                this.incomingCallCancelled(call);\n                break;\n            default:\n                break;\n        }\n    }\n\n    incomingCallReceived = (incomingCall) => {\n\n        const activeCall = CometChat.getActiveCall();\n        //if there is another call in progress\n        if (activeCall) {\n\n            CometChat.rejectCall(incomingCall.sessionId, CometChat.CALL_STATUS.BUSY).then(rejectedCall => {\n\n                //mark as read incoming call message\n                this.markMessageAsRead(incomingCall);\n                this.props.actionGenerated(\"rejectedIncomingCall\", incomingCall, rejectedCall);\n\n            }).catch(error => {\n                \n                this.props.actionGenerated(\"callError\", error);\n                console.log(\"Call rejection failed with error:\", error);\n            });\n\n        } else if (this.state.incomingCall === null) {\n\n            this.playIncomingAlert();\n\n            if (incomingCall.sender.avatar === false) {\n\n                const uid = incomingCall.sender.uid;\n                const char = incomingCall.sender.name.charAt(0).toUpperCase();\n\n                incomingCall.sender.avatar = SvgAvatar.getAvatar(uid, char);\n            }\n\n            this.setState({ incomingCall: incomingCall });\n        }\n    }\n\n    incomingCallCancelled = (call) => {\n\n        //we are not marking this as read as it will done in messagelist component\n        this.pauseIncomingAlert();\n        this.setState({ incomingCall: null });\n    }\n\n    markMessageAsRead = (message) => {\n\n        const receiverType = message.receiverType;\n        const receiverId = (receiverType === \"user\") ? message.sender.uid : message.receiverId;\n\n        if (message.hasOwnProperty(\"readAt\") === false) {\n            CometChat.markAsRead(message.id, receiverId, receiverType);\n        }\n    }\n\n    rejectCall = () => {\n\n        this.pauseIncomingAlert();\n        CometChatManager.rejectCall(this.state.incomingCall.sessionId, CometChat.CALL_STATUS.REJECTED).then(rejectedCall => {\n\n            this.props.actionGenerated(\"rejectedIncomingCall\", this.state.incomingCall, rejectedCall);\n            this.setState({ incomingCall: null });\n\n        }).catch(error => {\n\n            this.props.actionGenerated(\"callError\", error);\n            this.setState({ incomingCall: null });\n        });\n    }\n\n    acceptCall = () => {\n        \n        this.setState({ incomingCall: null, callInProgress: this.props.callInProgress });\n        this.pauseIncomingAlert();\n        this.props.actionGenerated(\"acceptIncomingCall\", this.state.incomingCall);\n    }\n\n    render() {\n        \n        let callScreen = null;\n        if (this.state.incomingCall) {\n            \n            let callType = (\n                <React.Fragment>\n                    <img src={audioCallIcon} alt=\"Incoming audio call\" /><span>Incoming audio call</span>\n                </React.Fragment>\n            );\n            if (this.state.incomingCall.type === \"video\") {\n                callType = (\n                    <React.Fragment>\n                        <img src={videoCallIcon} alt=\"Incoming video call\" /><span>Incoming video call</span>\n                    </React.Fragment>\n                );\n            }\n            \n            callScreen = (\n                <div css={incomingCallWrapperStyle(this.props, keyframes)} className=\"callalert__wrapper\">\n                    <div css={callContainerStyle()} className=\"callalert__container\">\n                        <div css={headerWrapperStyle()} className=\"callalert__header\">\n                            <div css={callDetailStyle()} className=\"header__detail\">\n                                <div css={nameStyle()} className=\"name\">{this.state.incomingCall.sender.name}</div>\n                                <div css={callTypeStyle(this.props)} className=\"calltype\">{callType}</div>\n                            </div>\n                            <div css={thumbnailStyle()} className=\"header__thumbnail\"><Avatar cornerRadius=\"50%\" image={this.state.incomingCall.sender.avatar} /></div>\n                        </div>\n                        <div css={headerButtonStyle()} className=\"callalert__buttons\">\n                            <button css={ButtonStyle(this.props, 0)} className=\"button button__decline\" onClick={this.rejectCall}>Decline</button>\n                            <button css={ButtonStyle(this.props, 1)} className=\"button button__accept\" onClick={this.acceptCall}>Accept</button>\n                        </div>\n                    </div>\n                </div>\n            );\n        }\n        \n        return callScreen;\n    }\n}\n\nexport default CallAlert;\n","import { CometChat } from \"@cometchat-pro/chat\";\n\nimport * as enums from '../../util/enums.js';\n\nexport class CallScreenManager {\n\n  callListenerId = \"callscreen_\" + new Date().getTime();\n\n  attachListeners(callback) {\n    \n    CometChat.addCallListener(\n      this.callListenerId,\n      new CometChat.CallListener({\n        onOutgoingCallAccepted: call => {\n          callback(enums.OUTGOING_CALL_ACCEPTED, call);\n        },\n        onOutgoingCallRejected: call => {\n          callback(enums.OUTGOING_CALL_REJECTED, call);\n        },\n        onIncomingCallCancelled: call => {\n          callback(enums.INCOMING_CALL_CANCELLED, call);\n        }\n      })\n    );\n  }\n\n  removeListeners() {\n    CometChat.removeCallListener(this.callListenerId);\n  }\n}","export const callScreenWrapperStyle = (props, keyframes) => {\n\n    const fadeAnimation = keyframes`\n    from {\n        opacity: 0;\n    }\n    to {\n        opacity: 1;\n    }`;\n\n    return {\n        width: \"inherit\",\n        height: \"inherit\",\n        position: \"absolute\",\n        top: \"0\",\n        right: \"0\",\n        bottom: \"0\",\n        left: \"0\",\n        backgroundColor: `${props.theme.backgroundColor.darkGrey}`,\n        zIndex: \"999\",\n        color: `${props.theme.color.white}`,\n        textAlign: \"center\",\n        boxSizing: \"border-box\",\n        animation: `${fadeAnimation} 250ms ease`,\n        fontFamily: `${props.theme.fontFamily}`,\n        \"*\": {\n            boxSizing: \"border-box\",\n            fontFamily: `${props.theme.fontFamily}`,\n        },\n    }\n}\n\nexport const callScreenContainerStyle = () => {\n\n    return {\n        display: \"flex\",\n        flexDirection: \"column\",\n        height: \"100%\",\n        width: \"100%\"\n    }\n}\n\nexport const headerStyle = () => {\n\n    return {\n        padding: \"20px 10px\",\n        width: \"100%\",\n        height: \"20%\",\n    }\n}\n\nexport const headerDurationStyle = () => {\n\n    return {\n        fontSize: \"13px\",\n        display: \"inline-block\",\n        padding: \"5px\"\n    }\n}\n\nexport const headerNameStyle = () => {\n\n    return {\n        margin: \"0\",\n        fontWeight: \"700\",\n        textTransform: \"capitalize\",\n        fontSize: \"16px\",\n    }\n}\n\nexport const thumbnailWrapperStyle = () => {\n\n    return {\n        width: \"100%\",\n        height: \"50%\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\"\n    }\n}\n\nexport const thumbnailStyle = () => {\n\n    return {\n        width: \"200px\",\n        flexShrink: \"0\",\n    }\n}\n\nexport const headerIconStyle = () => {\n    \n    return {\n        width: \"100%\",\n        height: \"15%\",\n        padding: \"10px\",\n        display: \"flex\",\n        justifyContent: \"center\"\n    }\n}\n\nexport const iconWrapperStyle = () => {\n\n    return {\n        display: \"flex\"\n    }\n}\n\nexport const iconStyle = (img, callAction) => {\n\n    const bgColor = (callAction) ? \"#008000\" : \"#ff3b30\";\n\n    return {\n        width: \"50px\",\n        height: \"50px\",\n        borderRadius: \"27px\",\n        backgroundColor: \"rgba(255, 255, 255, 0.2)\",\n        display: \"block\",\n        margin: \"auto 10px\",\n        cursor: \"pointer\",\n        background: `url(${img}) center center no-repeat ${bgColor}`,\n    }\n}\n\nexport const errorContainerStyle = () => {\n\n    return {\n        color: \"#fff\",\n        textAlign: \"center\",\n        borderRadius: \"2px\",\n        padding: \"13px 10px\",\n        fontSize: \"13px\",\n        width: \"100%\",\n        height: \"10%\",\n        backgroundColor: \"#333\",\n    }\n}\n","import React from \"react\";\n\n/** @jsx jsx */\nimport { jsx, keyframes } from \"@emotion/core\";\n\nimport { CometChat } from \"@cometchat-pro/chat\";\n\nimport { CometChatManager } from \"../../util/controller\";\nimport * as enums from '../../util/enums.js';\nimport { SvgAvatar } from '../../util/svgavatar';\n\nimport { CallScreenManager } from \"./controller\";\n\nimport Avatar from \"../Avatar\";\n\nimport {\n  callScreenWrapperStyle,\n  callScreenContainerStyle,\n  headerStyle,\n  headerDurationStyle,\n  headerNameStyle,\n  thumbnailWrapperStyle,\n  thumbnailStyle,\n  headerIconStyle,\n  iconWrapperStyle,\n  iconStyle,\n  errorContainerStyle\n} from \"./style\";\n\nimport callIcon from \"./resources/call-end-white-icon.svg\";\nimport { outgoingCallAlert } from \"../../resources/audio/\";\n\nclass CallScreen extends React.PureComponent {\n\n  constructor(props) {\n\n    super(props);\n\n    this.callScreenFrame = React.createRef();\n\n    this.state = {\n      errorScreen: false,\n      errorMessage: null,\n      outgoingCallScreen: false,\n      callInProgress: null\n    }\n  }\n\n  playOutgoingAlert = () => {\n\n    //if it is disabled for chat wigdet in dashboard\n    if (this.props.hasOwnProperty(\"widgetsettings\")\n    && this.props.widgetsettings\n    && this.props.widgetsettings.hasOwnProperty(\"main\")\n    && (this.props.widgetsettings.main.hasOwnProperty(\"enable_sound_for_calls\") === false\n    || (this.props.widgetsettings.main.hasOwnProperty(\"enable_sound_for_calls\")\n    && this.props.widgetsettings.main[\"enable_sound_for_calls\"] === false))) {\n      return false;\n    }\n\n    this.outgoingAlert.currentTime = 0;\n    if (typeof this.outgoingAlert.loop == 'boolean') {\n      this.outgoingAlert.loop = true;\n    } else {\n      this.outgoingAlert.addEventListener('ended', function () {\n        this.currentTime = 0;\n        this.play();\n      }, false);\n    }\n    this.outgoingAlert.play();\n  }\n\n  pauseOutgoingAlert = () => {\n\n    //if it is disabled for chat wigdet in dashboard\n    if (this.props.hasOwnProperty(\"widgetsettings\")\n    && this.props.widgetsettings\n    && this.props.widgetsettings.hasOwnProperty(\"main\")\n    && (this.props.widgetsettings.main.hasOwnProperty(\"enable_sound_for_calls\") === false\n    || (this.props.widgetsettings.main.hasOwnProperty(\"enable_sound_for_calls\")\n    && this.props.widgetsettings.main[\"enable_sound_for_calls\"] === false))) {\n      return false;\n    }\n    \n    this.outgoingAlert.pause();\n  }\n\n  componentDidMount() {\n\n    this.outgoingAlert = new Audio(outgoingCallAlert);\n\n    this.CallScreenManager = new CallScreenManager();\n    this.CallScreenManager.attachListeners(this.callScreenUpdated);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n\n    if (prevProps.outgoingCall !== this.props.outgoingCall && this.props.outgoingCall) {\n\n      this.playOutgoingAlert(); \n\n      let call = this.props.outgoingCall;\n\n      if (call.receiverType === \"group\" && call.receiver.hasOwnProperty(\"icon\") === false) {\n\n        const uid = call.receiver.guid;\n        const char = call.receiver.name.charAt(0).toUpperCase();\n        call.receiver.icon = SvgAvatar.getAvatar(uid, char);\n\n      } else if (call.receiverType === \"user\" && call.receiver.hasOwnProperty(\"avatar\") === false) {\n\n        const uid = call.receiver.uid;\n        const char = call.receiver.name.charAt(0).toUpperCase();\n        call.receiver.avatar = SvgAvatar.getAvatar(uid, char);\n      }\n      \n      this.setState({ outgoingCallScreen: true, callInProgress: call, errorScreen: false, errorMessage: null });\n    }\n\n    if (prevProps.incomingCall !== this.props.incomingCall && this.props.incomingCall) {\n      this.acceptCall();\n    }\n  }\n\n  componentWillUnmount() {\n    this.CallScreenManager.removeListeners();\n    this.CallScreenManager = null;\n  }\n\n  callScreenUpdated = (key, call) => {\n\n    switch(key) {\n\n      case enums.INCOMING_CALL_CANCELLED:\n        this.incomingCallCancelled(call);\n      break;\n      case enums.OUTGOING_CALL_ACCEPTED://occurs at the caller end\n        this.outgoingCallAccepted(call);\n      break;\n      case enums.OUTGOING_CALL_REJECTED://occurs at the caller end, callee rejects the call\n        this.outgoingCallRejected(call);\n      break;\n      default:\n      break;\n    }\n  }\n\n  incomingCallCancelled = (call) => {\n\n    this.setState({ outgoingCallScreen: false, callInProgress: null });\n  }\n\n  outgoingCallAccepted = (call) => {\n    \n    if (this.state.outgoingCallScreen === true) {\n      this.pauseOutgoingAlert();\n      this.setState({ outgoingCallScreen: false, callInProgress: call });\n      this.startCall(call);\n    }\n  }\n\n  outgoingCallRejected = (call) => {\n    \n    if (call.hasOwnProperty(\"status\") && call.status === CometChat.CALL_STATUS.BUSY) {\n\n      //show busy message.\n      const errorMessage = `${call.sender.name} is on another call.`;\n      this.setState({ errorScreen: true, errorMessage: errorMessage});\n\n    } else {\n\n      this.pauseOutgoingAlert();\n      this.props.actionGenerated(\"outgoingCallRejected\", call);\n      this.setState({ outgoingCallScreen: false, callInProgress: null });\n    }\n\n  }\n\n  //accepting incoming call, occurs at the callee end\n  acceptCall = () => {\n\n    CometChatManager.acceptCall(this.props.incomingCall.sessionId).then(call => {\n\n      if (call.receiver.hasOwnProperty(\"uid\") && call.receiver.hasOwnProperty(\"avatar\") === false) {\n\n        const uid = call.receiver.uid;\n        const char = call.receiver.name.charAt(0).toUpperCase();\n\n        call.receiver.avatar = SvgAvatar.getAvatar(uid, char);\n\n      } else if (call.receiver.hasOwnProperty(\"guid\") && call.receiver.hasOwnProperty(\"icon\") === false) {\n\n        const guid = call.receiver.guid;\n        const char = call.receiver.name.charAt(0).toUpperCase();\n\n        call.receiver.icon = SvgAvatar.getAvatar(guid, char);\n      }\n      \n      this.props.actionGenerated(\"acceptedIncomingCall\", call);\n      this.setState({ outgoingCallScreen: false, callInProgress: call, errorScreen: false, errorMessage: null });\n      \n      this.startCall(call);\n\n    }).catch(error => {\n\n      console.log(\"[CallScreen] acceptCall -- error\", error);\n      this.props.actionGenerated(\"callError\", error);\n\n    });\n  }\n\n  startCall = (call) => {\n\n    const el = this.callScreenFrame;\n    CometChat.startCall(\n      call.getSessionId(),\n      el,\n      new CometChat.OngoingCallListener({\n        onUserJoined: user => {\n          /* Notification received here if another user joins the call. */\n          //console.log(\"User joined call:\", enums.USER_JOINED, user);\n          /* this method can be use to display message or perform any actions if someone joining the call */\n\n          //call initiator gets the same info in outgoingcallaccpeted event\n          if (call.callInitiator.uid !== this.props.loggedInUser.uid && call.callInitiator.uid !== user.uid) {\n\n            this.markMessageAsRead(call);\n\n            const callMessage = { \n              \"category\": call.category, \n              \"type\": call.type, \n              \"action\": call.action, \n              \"status\": call.status, \n              \"callInitiator\": call.callInitiator,\n              \"callReceiver\": call.callReceiver,\n              \"receiverId\": call.receiverId,\n              \"receiverType\": call.receiverType,\n              \"sentAt\": call.sentAt,\n              \"sender\": { ...user }\n            };\n            this.props.actionGenerated(\"userJoinedCall\", callMessage);\n          }\n        },\n        onUserLeft: user => {\n          /* Notification received here if another user left the call. */\n          //console.log(\"User left call:\", enums.USER_LEFT, user);\n          /* this method can be use to display message or perform any actions if someone leaving the call */\n\n          //call initiator gets the same info in outgoingcallaccpeted event\n          if (call.callInitiator.uid !== this.props.loggedInUser.uid && call.callInitiator.uid !== user.uid) {\n\n            this.markMessageAsRead(call);\n\n            const callMessage = {\n              \"category\": call.category,\n              \"type\": call.type,\n              \"action\": \"left\",\n              \"status\": call.status,\n              \"callInitiator\": call.callInitiator,\n              \"callReceiver\": call.callReceiver,\n              \"receiverId\": call.receiverId,\n              \"receiverType\": call.receiverType,\n              \"sentAt\": call.sentAt,\n              \"sender\": { ...user }\n            };\n\n            this.props.actionGenerated(\"userLeftCall\", callMessage);\n          }\n        },\n        onCallEnded: endedCall => {\n          \n          /* Notification received here if current ongoing call is ended. */\n          //console.log(\"call ended:\", enums.CALL_ENDED, call);\n\n          this.setState({ showOutgoingScreen: false, callInProgress: null });\n\n          this.markMessageAsRead(endedCall);\n          this.props.actionGenerated(\"callEnded\", endedCall);\n          /* hiding/closing the call screen can be done here. */\n        }\n      })\n    );\n  }\n\n  markMessageAsRead = (message) => {\n\n    const type = message.receiverType;\n    const id = (type === \"user\") ? message.sender.uid : message.receiverId;\n\n    if (message.hasOwnProperty(\"readAt\") === false) {\n      CometChat.markAsRead(message.id, id, type);\n    }\n\n  }\n\n  //cancelling an outgoing call\n  cancelCall = () => {\n\n    this.pauseOutgoingAlert();\n    CometChatManager.rejectCall(this.state.callInProgress.sessionId, CometChat.CALL_STATUS.CANCELLED).then(call => {\n\n      this.props.actionGenerated(\"outgoingCallCancelled\", call);\n      this.setState({ outgoingCallScreen: false, callInProgress: null });\n\n    }).catch(error => {\n\n      this.props.actionGenerated(\"callError\", error);\n      this.setState({ outgoingCallScreen: false, callInProgress: null });\n    });\n  }\n\n  render() {\n\n    let callScreen = null, outgoingCallScreen = null, errorScreen = null;\n    if (this.state.callInProgress) {\n\n      let avatar;\n      if(this.props.type === \"user\") {\n\n        avatar = (\n          <Avatar \n          image={this.state.callInProgress.receiver.avatar}\n          cornerRadius=\"50%\"\n          borderColor={this.props.theme.color.secondary}\n          borderWidth=\"1px\" />\n        );\n\n      } else if(this.props.type === \"group\") {\n\n        avatar = (\n          <Avatar \n          image={this.state.callInProgress.receiver.icon}\n          cornerRadius=\"50%\" \n          borderColor={this.props.theme.color.secondary}\n          borderWidth=\"1px\" />\n        );\n\n      }\n\n      if (this.state.errorScreen) {\n        errorScreen = (\n          <div css={errorContainerStyle()} className=\"callscreen__error__wrapper\"><div>{this.state.errorMessage}</div></div>\n        );\n      }\n\n      if (this.state.outgoingCallScreen) {\n        outgoingCallScreen = (\n          <div css={callScreenContainerStyle()} className=\"callscreen__container\">\n            <div css={headerStyle()} className=\"callscreen__header\">\n              <h6 css={headerNameStyle()} className=\"header__name\">{this.state.callInProgress.receiver.name}</h6>\n              <span css={headerDurationStyle()} className=\"header__calling\">calling...</span>\n            </div>\n            <div css={thumbnailWrapperStyle()} className=\"callscreen__thumbnail__wrapper\">\n              <div css={thumbnailStyle()} className=\"callscreen__thumbnail\">{avatar}</div>\n            </div>\n            {errorScreen}\n            <div css={headerIconStyle()} className=\"callscreen__icons\">\n              <div css={iconWrapperStyle()} className=\"icon__block\" onClick={this.cancelCall}>\n                <div css={iconStyle(callIcon, 0)} className=\"icon icon__end\"></div>\n              </div>\n            </div>\n          </div>\n        );\n      }\n    }\n\n    if (this.state.callInProgress) {\n\n      callScreen = (\n        <div css={callScreenWrapperStyle(this.props, keyframes)} className=\"callscreen__wrapper\" ref={(el) => { this.callScreenFrame = el; }}>\n          {outgoingCallScreen}\n        </div>\n      );\n    }\n\n    return callScreen;\n  }\n}\n\nexport default CallScreen;\n","export const imageWrapperStyle = (img) => {\n\n    return {\n        position: \"absolute\",\n        top: \"0\",\n        left: \"0\",\n        width: \"100%\",\n        height: \"100%\",\n        padding: \"2%\",\n        zIndex: \"9999\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        background: `url(${img}) no-repeat right top #fff`,\n        cursor: \"pointer\",\n    }\n}\n\nexport const imgStyle = () => {\n\n    return {\n        objectFit: \"contain\"\n    }\n}","import React, { useRef } from \"react\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nimport {\n    imageWrapperStyle,\n    imgStyle,\n} from \"./style\";\n\nimport srcIcon from \"./resources/ring.svg\";\nimport closeIcon from \"./resources/clear.svg\";\n\nimport Backdrop from \"../Backdrop\";\n\nconst ImageView = (props) => {\n\n    let imgRef = useRef();\n\n    let img = new Image();\n    img.src = props.message.data.url;\n    img.onload = () => {\n\n        if (imgRef) {\n            imgRef.src = img.src;\n        }\n    };\n\n    return(\n        <React.Fragment>\n            <Backdrop show={props.open} clicked={props.close} />\n            <div css={imageWrapperStyle(closeIcon)} onClick={props.close} className=\"image__wrapper\">\n                <img src={srcIcon} css={imgStyle()} alt=\"Full Screen View\" ref={el => { imgRef = el; }} />\n            </div>            \n        </React.Fragment>\n    )\n}\nexport default ImageView;","export const userScreenStyle = (theme) => {\n\n    return {\n        display: \"flex\",\n        height: \"100%\",\n        width: \"100%\",\n        boxSizing: \"border-box\",\n        fontFamily: `${theme.fontFamily}`,\n        \"*\": {\n            boxSizing: \"border-box\",\n            fontFamily: `${theme.fontFamily}`,\n        }\n    }\n}\n\nexport const userScreenSidebarStyle = (state, theme) => {\n\n    const sidebarView = (state.sidebarview) ? {\n        left: \"0\",\n        boxShadow: \"rgba(0, 0, 0, .4) -30px 0 30px 30px\"\n    } : {};\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n\n        width: \"280px\",\n        borderRight: `1px solid ${theme.borderColor.primary}`,\n        height: \"100%\",\n        position: \"relative\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        [mq[0]]: {\n            position: \"absolute!important\",\n            left: \"-100%\",\n            top: \"0\",\n            bottom: \"0\",\n            width: \"100%!important\",\n            zIndex: \"2\",\n            backgroundColor: `${theme.backgroundColor.white}`,\n            transition: \"all .3s ease-out\",\n            ...sidebarView\n        }\n    }\n}\n\nexport const userScreenMainStyle = (state) => {\n\n    const secondaryView = (state.threadmessageview || state.detailview) ? {\n        width: \"calc(100% - 680px)\"\n    } : {};\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n        width: \"calc(100% - 280px)\",\n        height: \"100%\",\n        order: \"2\",\n        ...secondaryView,\n        [mq[0]]: {\n            width: \"100%!important\",\n        }\n    }\n}\n\nexport const userScreenSecondaryStyle = (theme) => {\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n        float: \"right\",\n        borderLeft: `1px solid ${theme.borderColor.primary}`,\n        height: \"100%\",\n        width: \"400px\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        order: \"3\",\n        [mq[0]]: {\n            position: \"absolute!important\",\n            right: \"0!important\",\n            top: \"0\",\n            bottom: \"0\",\n            width: \"100%!important\",\n            zIndex: \"2\",\n            backgroundColor: `${theme.backgroundColor.white}`,\n        }\n    }\n}","import { CometChat } from \"@cometchat-pro/chat\";\n\nimport * as enums from '../../util/enums.js';\n\nexport class GroupListManager {\n\n    groupRequest = null;\n    groupListenerId = \"grouplist_\" + new Date().getTime();\n\n    constructor(searchKey) {\n\n        if (searchKey) {\n            this.groupRequest = new CometChat.GroupsRequestBuilder().setLimit(30).setSearchKeyword(searchKey).build();\n        } else {\n            this.groupRequest = new CometChat.GroupsRequestBuilder().setLimit(30).build();\n        }\n    }\n\n    fetchNextGroups() {\n        return this.groupRequest.fetchNext();\n    }\n\n    attachListeners(callback) {\n\n        CometChat.addGroupListener(\n            this.groupListenerId,\n            new CometChat.GroupListener({\n                onGroupMemberScopeChanged: (message, changedUser, newScope, oldScope, changedGroup) => {\n                    callback(enums.GROUP_MEMBER_SCOPE_CHANGED, message, changedGroup, {\"user\": changedUser, \"scope\": newScope});\n                }, \n                onGroupMemberKicked: (message, kickedUser, kickedBy, kickedFrom) => {\n                    callback(enums.GROUP_MEMBER_KICKED, message, kickedFrom, {\"user\": kickedUser, \"hasJoined\": false});\n                }, \n                onGroupMemberBanned: (message, bannedUser, bannedBy, bannedFrom) => {\n                    callback(enums.GROUP_MEMBER_BANNED, message, bannedFrom, {\"user\": bannedUser, \"hasJoined\": false});\n                }, \n                onGroupMemberUnbanned: (message, unbannedUser, unbannedBy, unbannedFrom) => {\n                    callback(enums.GROUP_MEMBER_UNBANNED, message, unbannedFrom, {\"user\": unbannedUser, \"hasJoined\": false});\n                }, \n                onMemberAddedToGroup: (message, userAdded, userAddedBy, userAddedIn) => {\n                    callback(enums.GROUP_MEMBER_ADDED, message, userAddedIn, {\"user\": userAdded, \"hasJoined\": true});\n                }, \n                onGroupMemberLeft: (message, leavingUser, group) => {\n                    callback(enums.GROUP_MEMBER_LEFT, message, group, {\"user\": leavingUser});\n                }, \n                onGroupMemberJoined: (message, joinedUser, joinedGroup) => {\n                    callback(enums.GROUP_MEMBER_JOINED, message, joinedGroup, {\"user\": joinedUser});\n                }\n            })\n        );\n    }\n\n    removeListeners() {\n        CometChat.removeGroupListener(this.groupListenerId);\n    }\n}","import React from \"react\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nimport { CometChat } from \"@cometchat-pro/chat\";\n\nimport { CometChatManager } from \"../../util/controller\";\n\nimport CometChatUserList from \"../CometChatUserList\";\nimport CometChatMessageListScreen from \"../CometChatMessageListScreen\";\nimport CometChatUserDetail from \"../CometChatUserDetail\";\nimport MessageThread from \"../MessageThread\";\nimport CallAlert from \"../CallAlert\";\nimport CallScreen from \"../CallScreen\";\nimport ImageView from \"../ImageView\";\n\nimport { theme } from \"../../resources/theme\";\n\nimport {\n  userScreenStyle,\n  userScreenSidebarStyle,\n  userScreenMainStyle,\n  userScreenSecondaryStyle\n} from \"./style\"\n\nclass CometChatUserListScreen extends React.Component {\n\n  loggedInUser = null;\n\n  constructor(props) {\n\n\t\tsuper(props);\n\n    this.state = {\n      darktheme: false,\n      viewdetailscreen: false,\n      item: {},\n      type: \"user\",\n      tab: \"contacts\",\n      threadmessageview: false,\n      threadmessagetype: null,\n      threadmessageitem: {},\n      threadmessageparent: {},\n      composedthreadmessage: {},\n      incomingCall: null,\n      outgoingCall: null,\n      callmessage: {},\n      sidebarview: false,\n      imageView: null,\n    }\n\n    this.theme = Object.assign({}, theme, this.props.theme);\n  }\n  \n  componentDidMount() {\n\n    if(!Object.keys(this.state.item).length) {\n      this.toggleSideBar();\n    }\n\n    new CometChatManager().getLoggedInUser().then((user) => {\n      this.loggedInUser = user;\n    }).catch((error) => {\n      console.log(\"[CometChatUnified] getLoggedInUser error\", error);\n\n    });\n  }\n\n  changeTheme = (e) => {\n\n    const theme = this.state.darktheme;\n    this.setState({darktheme: !theme});\n  }\n\n  itemClicked = (item, type) => {\n\n    this.toggleSideBar();\n    this.setState({ item: {...item}, type, viewdetailscreen: false });\n  }\n\n  actionHandler = (action, item, count) => {\n    \n    switch(action) {\n      case \"blockUser\":\n        this.blockUser();\n      break;\n      case \"unblockUser\":\n        this.unblockUser();\n      break;\n      case \"audioCall\":\n        this.audioCall();\n      break;\n      case \"videoCall\":\n        this.videoCall();\n      break;\n      case \"viewDetail\":\n      case \"closeDetailClicked\":\n        this.toggleDetailView();\n      break;\n      // eslint-disable-next-line no-lone-blocks\n      case \"menuClicked\": {\n        this.toggleSideBar();\n        this.setState({ item: {} });\n      }\n      break;\n      case \"closeMenuClicked\":\n        this.toggleSideBar();\n      break;\n      case \"viewMessageThread\":\n        this.viewMessageThread(item);\n      break;\n      case \"closeThreadClicked\":\n        this.closeThreadMessages();\n      break;\n      case \"threadMessageComposed\":\n        this.onThreadMessageComposed(item);\n      break;\n      case \"acceptIncomingCall\":\n        this.acceptIncomingCall(item);\n        break;\n      case \"acceptedIncomingCall\":\n        this.callInitiated(item);\n        break;\n      case \"rejectedIncomingCall\":\n        this.rejectedIncomingCall(item, count);\n        break;\n      case \"outgoingCallRejected\":\n      case \"outgoingCallCancelled\":\n      case \"callEnded\":\n        this.outgoingCallEnded(item);\n        break;\n      case \"userJoinedCall\":\n      case \"userLeftCall\":\n        //this.appendCallMessage(item);\n        break;\n      case \"viewActualImage\":\n        this.toggleImageView(item);\n        break;\n      default:\n      break;\n    }\n  }\n\n  blockUser = () => {\n\n    let usersList = [this.state.item.uid];\n    CometChatManager.blockUsers(usersList).then(list => {\n\n        this.setState({item: {...this.state.item, blockedByMe: true}});\n\n    }).catch(error => {\n      console.log(\"Blocking user fails with error\", error);\n    });\n\n  }\n\n  unblockUser = () => {\n    \n    let usersList = [this.state.item.uid];\n    CometChatManager.unblockUsers(usersList).then(list => {\n\n        this.setState({item: {...this.state.item, blockedByMe: false}});\n\n      }).catch(error => {\n      console.log(\"unblocking user fails with error\", error);\n    });\n\n  }\n\n  audioCall = () => {\n\n    let receiverId, receiverType;\n    if(this.state.type === \"user\") {\n\n      receiverId = this.state.item.uid;\n      receiverType = CometChat.RECEIVER_TYPE.USER;\n\n    } else if(this.state.type === \"group\") {\n\n      receiverId = this.state.item.guid;\n      receiverType = CometChat.RECEIVER_TYPE.GROUP;\n    }\n\n    CometChatManager.call(receiverId, receiverType, CometChat.CALL_TYPE.AUDIO).then(call => {\n\n      this.appendCallMessage(call);\n      this.setState({ outgoingCall: call });\n\n    }).catch(error => {\n      console.log(\"Call initialization failed with exception:\", error);\n    });\n\n  }\n\n  videoCall = () => {\n\n    let receiverId, receiverType;\n    if(this.state.type === \"user\") {\n\n      receiverId = this.state.item.uid;\n      receiverType = CometChat.RECEIVER_TYPE.USER;\n\n    } else if(this.state.type === \"group\") {\n      receiverId = this.state.item.guid;\n      receiverType = CometChat.RECEIVER_TYPE.GROUP;\n    }\n   \n    CometChatManager.call(receiverId, receiverType, CometChat.CALL_TYPE.VIDEO).then(call => {\n\n      this.appendCallMessage(call);\n      this.setState({ outgoingCall: call });\n\n    }).catch(error => {\n      console.log(\"Call initialization failed with exception:\", error);\n    });\n\n  }\n\n  toggleSideBar = () => {\n\n    const sidebarview = this.state.sidebarview;\n    this.setState({ sidebarview: !sidebarview });\n  }\n\n  toggleDetailView = () => {\n\n    let viewdetail = !this.state.viewdetailscreen;\n    this.setState({viewdetailscreen: viewdetail,  threadmessageview: false});\n  }\n\n  closeThreadMessages = () => {\n    this.setState({viewdetailscreen: false, threadmessageview: false});\n  }\n\n  viewMessageThread = (parentMessage) => {\n\n    const message = {...parentMessage};\n    const threaditem = {...this.state.item};\n    this.setState({\n      threadmessageview: true, \n      threadmessageparent: message, \n      threadmessageitem: threaditem,\n      threadmessagetype: this.state.type, \n      viewdetailscreen: false\n    });\n  }\n\n  onThreadMessageComposed = (composedMessage) => {\n\n    if(this.state.type !== this.state.threadmessagetype) {\n      return false;\n    }\n\n    if((this.state.threadmessagetype === \"group\" && this.state.item.guid !== this.state.threadmessageitem.guid)\n    || (this.state.threadmessagetype === \"user\" && this.state.item.uid !== this.state.threadmessageitem.uid)) {\n      return false;\n    }\n\n    const message = {...composedMessage};\n    this.setState({composedthreadmessage: message});\n  }\n\n  acceptIncomingCall = (call) => {\n\n    this.setState({ incomingCall: call });\n\n    const type = call.receiverType;\n    const id = (type === \"user\") ? call.sender.uid : call.receiverId;\n\n    CometChat.getConversation(id, type).then(conversation => {\n\n      this.itemClicked(conversation.conversationWith, type);\n\n    }).catch(error => {\n\n      console.log('error while fetching a conversation', error);\n    });\n\n  }\n\n  callInitiated = (message) => {\n    this.appendCallMessage(message);\n  }\n\n  rejectedIncomingCall = (incomingCallMessage, rejectedCallMessage) => {\n\n    let receiverType = incomingCallMessage.receiverType;\n    let receiverId = (receiverType === \"user\") ? incomingCallMessage.sender.uid : incomingCallMessage.receiverId;\n\n    //marking the incoming call message as read\n    if (incomingCallMessage.hasOwnProperty(\"readAt\") === false) {\n      CometChat.markAsRead(incomingCallMessage.id, receiverId, receiverType);\n    }\n\n    //updating unreadcount in chats list\n    this.setState({ messageToMarkRead: incomingCallMessage });\n\n    let item = this.state.item;\n    let type = this.state.type;\n\n    receiverType = rejectedCallMessage.receiverType;\n    receiverId = rejectedCallMessage.receiverId;\n\n    if ((type === 'group' && receiverType === 'group' && receiverId === item.guid)\n      || (type === 'user' && receiverType === 'user' && receiverId === item.uid)) {\n\n      this.appendCallMessage(rejectedCallMessage);\n    }\n  }\n\n  outgoingCallEnded = (message) => {\n\n    this.setState({ outgoingCall: null, incomingCall: null });\n    this.appendCallMessage(message);\n  }\n\n  appendCallMessage = (call) => {\n\n    this.setState({ callmessage: call });\n  }\n\n  toggleImageView = (message) => {\n    this.setState({ imageView: message });\n  }\n\n  render() {\n\n    let threadMessageView = null;\n    if(this.state.threadmessageview) {\n      threadMessageView = (\n        <div css={userScreenSecondaryStyle(this.theme)} className=\"contacts__secondary-view\">\n          <MessageThread\n          theme={this.theme}\n          tab={this.state.tab}\n          item={this.state.threadmessageitem}\n          type={this.state.threadmessagetype}\n          parentMessage={this.state.threadmessageparent}\n          loggedInUser={this.loggedInUser}\n          actionGenerated={this.actionHandler} />\n        </div>\n      );\n    }\n\n    let detailScreen;\n    if(this.state.viewdetailscreen) {\n      detailScreen = (\n        <div css={userScreenSecondaryStyle(this.theme)} className=\"contacts__secondary-view\">\n          <CometChatUserDetail\n            theme={this.theme}\n            item={this.state.item} \n            type={this.state.type}\n            actionGenerated={this.actionHandler} />\n        </div>);\n    }\n    \n    let messageScreen = null;\n    if(Object.keys(this.state.item).length) {\n      messageScreen = (<CometChatMessageListScreen\n      theme={this.theme}\n      item={this.state.item} \n      tab={this.state.tab}\n      type={this.state.type}\n      composedthreadmessage={this.state.composedthreadmessage}\n      callmessage={this.state.callmessage}\n      loggedInUser={this.loggedInUser}\n      actionGenerated={this.actionHandler} />);\n    }\n\n    let imageView = null;\n    if (this.state.imageView) {\n      imageView = (<ImageView open={true} close={() => this.toggleImageView(null)} message={this.state.imageView} />);\n    }\n\n    return (\n      <div css={userScreenStyle(this.theme)} className=\"cometchat cometchat--contacts\">\n        <div css={userScreenSidebarStyle(this.state, this.theme)} className=\"contacts__sidebar\">\n          <CometChatUserList\n          theme={this.theme}\n          item={this.state.item}\n          type={this.state.type}\n          onItemClick={this.itemClicked}\n          actionGenerated={this.actionHandler}\n          enableCloseMenu={Object.keys(this.state.item).length} />\n        </div>\n        <div css={userScreenMainStyle(this.state)} className=\"contacts__main\">{messageScreen}</div>\n        {detailScreen}\n        {threadMessageView}\n        <CallAlert\n        theme={this.theme}\n        actionGenerated={this.actionHandler} />\n        <CallScreen\n        theme={this.theme}\n        item={this.state.item} \n        type={this.state.type}\n        incomingCall={this.state.incomingCall}\n        outgoingCall={this.state.outgoingCall}\n        loggedInUser={this.loggedInUser}\n        actionGenerated={this.actionHandler} />\n        {imageView}\n      </div>\n    );\n  }\n}\n\nexport default CometChatUserListScreen;\n","export const modalWrapperStyle = (props) => {\n\n    const show = (props.open) ? {\n        display: \"block\",\n    } : {};\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n        minWidth: \"350px\",\n        minHeight: \"350px\",\n        width: \"40%\",\n        height: \"40%\",\n        overflow: \"hidden\",\n        backgroundColor: `${props.theme.backgroundColor.white}`,\n        position: \"fixed\",\n        left: \"50%\",\n        top: \"50%\",\n        transform: \"translate(-50%, -50%)\",\n        zIndex: \"1002\",\n        margin: \"0 auto\",\n        boxShadow: \"rgba(20, 20, 20, 0.2) 0 16px 32px, rgba(20, 20, 20, 0.04) 0 0 0 1px\",\n        borderRadius: \"12px\",\n        display: \"none\",\n        ...show,\n        [mq[0]]: {\n            width: \"100%\",\n            height: \"100%\",\n        }\n    }\n}\n\nexport const modalCloseStyle = (img) => {\n\n    return {\n        position: \"absolute\",\n        width: \"32px\",\n        height: \"32px\",\n        borderRadius: \"50%\",\n        top: \"16px\",\n        right: \"16px\",\n        background: `url(${img}) center center no-repeat`,\n        cursor: \"pointer\",\n    }\n}\n\nexport const modalBodyStyle = () => {\n\n    return {\n        padding: \"25px\",\n        height: \"100%\",\n        width: \"100%\"\n    }\n}\n\nexport const modalTableStyle = (props) => {\n\n    return {\n        borderCollapse: \"collapse\",\n        margin: \"0\",\n        padding: \"0\",\n        width: \"100%\",\n        height: \"90%\",\n        \"tr\": {\n            display: \"table\",\n            width: \"100%\",\n            tableLayout: \"fixed\",\n        }\n    }\n}\n\nexport const tableCaptionStyle = () => {\n\n    return {\n        fontSize: \"20px\",\n        marginBottom: \"15px\",\n        fontWeight: \"bold\",\n        textAlign: \"left\",\n    }\n}\n\nexport const tableBodyStyle = () => {\n\n    return {\n        height: \"calc(100% - 40px)\",\n        overflowY: \"auto\",\n        display: \"block\",\n        \"tr\": {\n            \"td\": {\n                padding: \"8px\",\n                fontSize: \"14px\",\n                \"input\": {\n                    width: \"100%\",\n                    border: \"none\",\n                    padding: \"10px 14px\",\n                    fontSize: \"14px\",\n                    outline: \"none\",\n                },\n                \"select\": {\n                    outline: \"none\",\n                    padding: \"10px\",\n                }\n            }\n        }\n    }\n}\n\nexport const tableErrorStyle = () => {\n\n    return {\n        fontSize: \"12px\",\n        color: \"red\",\n        textAlign: \"center\",\n        display: \"block\",\n    }\n}\n\nexport const tableFootStyle = (props) => {\n\n    return {\n        display: \"inline-block\",\n        \"button\": {\n            cursor: \"pointer\",\n            padding: \"10px 20px\",\n            backgroundColor: `${props.theme.backgroundColor.blue}`,\n            borderRadius: \"5px\",\n            color: `${props.theme.color.white}`,\n            fontSize: \"14px\",\n            outline: \"0\",\n            border: \"0\",\n        },\n        \"tr\": {\n            border: \"none\",\n            \"td\": {\n                textAlign: \"center\",\n            }\n        },\n    }\n}\n\nexport const inputStyle = (props) => {\n\n    return {\n        display: \"block\",\n        width: \"100%\",\n        border: '0',\n        boxShadow: \"rgba(20, 20, 20, 0.04) 0 0 0 1px inset\",\n        borderRadius: \"8px\",\n        backgroundColor: `${props.theme.backgroundColor.grey}`,\n        padding: \"6px 8px 6px 30px\",\n        color: `${props.theme.color.helpText}`,\n        fontSize: \"15px\",\n    }\n}","import React from 'react';\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nimport { CometChat } from \"@cometchat-pro/chat\";\n\nimport Backdrop from '../Backdrop';\n\nimport {\n    modalWrapperStyle,\n    modalCloseStyle,\n    modalBodyStyle,\n    modalTableStyle,\n    tableCaptionStyle,\n    tableBodyStyle,\n    tableErrorStyle,\n    inputStyle,\n    tableFootStyle,\n} from \"./style\";\n\nimport closeIcon from \"./resources/clear.svg\";\n\nclass CometChatCreateGroup extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            error: null,\n            passwordInput: false,\n            name: \"\",\n            type: \"\",\n            password: \"\"\n        }\n    }\n\n    passwordChangeHandler = (event) => {\n        this.setState({password: event.target.value})\n    }\n\n    nameChangeHandler = (event) => {\n        this.setState({name: event.target.value})\n    }\n\n    typeChangeHandler = (event) => {\n        \n        const type = event.target.value;\n        this.setState({type: event.target.value})\n\n        if(type === \"protected\") {\n            this.setState({\"passwordInput\": true});\n        } else {\n            this.setState({\"passwordInput\": false});\n        }\n    }\n\n    validate = () => {\n\n        const groupName = this.state.name.trim();\n        const groupType = this.state.type.trim();\n\n        if(!groupName) {\n            this.setState({error: \"Group name cannnot be blank.\"})\n            return false;\n        }\n\n        if(!groupType) {\n            this.setState({error: \"Group type cannnot be blank.\"})\n            return false;\n        }\n\n        let password = \"\";\n        if(groupType === \"protected\") {\n            password = this.state.password;\n\n            if(!password.length) {\n                this.setState({error: \"Group password cannnot be blank.\"})\n                return false;\n            }\n        }\n        return true;\n    }\n\n    createGroup = () => {\n\n        if(!this.validate()) {\n            return false;\n        }\n\n        const groupType = this.state.type.trim();\n        \n        const password = this.state.password;\n        const guid = \"group_\"+new Date().getTime();\n        const name = this.state.name.trim();\n        let type = CometChat.GROUP_TYPE.PUBLIC;\n\n        switch(groupType) {\n            case \"public\":\n                type = CometChat.GROUP_TYPE.PUBLIC;\n                break;\n            case \"private\":\n                type = CometChat.GROUP_TYPE.PRIVATE;\n                break;\n            case \"protected\":\n                type = CometChat.GROUP_TYPE.PASSWORD;\n                break;\n            default:\n                break;\n        }\n\n        const group = new CometChat.Group(guid, name, type, password);\n\n        CometChat.createGroup(group).then(group => {\n\n            console.log(\"Group created successfully:\", group);\n            this.setState({error: null, name: \"\", type: \"\", password: \"\", passwordInput: \"\"})\n            this.props.actionGenerated(\"groupCreated\", group);\n\n        }).catch(error => {\n            \n            console.log(\"Group creation failed with exception:\", error);\n            this.setState({error: error })\n        });\n    }\n\n    render() {\n\n        let password = null;\n        if(this.state.passwordInput) {\n            password = (\n                <tr>\n                    <td>\n                        <input \n                        autoComplete=\"off\" \n                        css={inputStyle(this.props)}\n                        placeholder=\"Enter group password\" \n                        type=\"password\"\n                        tabIndex=\"3\"\n                        onChange={this.passwordChangeHandler}\n                        value={this.state.password} />\n                    </td>\n                </tr>\n            );\n        } \n\n        return (\n            <React.Fragment>\n                <Backdrop show={this.props.open} clicked={this.props.close} />\n                <div css={modalWrapperStyle(this.props)} className=\"modal__creategroup\">\n                    <span css={modalCloseStyle(closeIcon)} className=\"modal__close\" onClick={this.props.close}></span>\n                    <div css={modalBodyStyle()} className=\"modal__body\">\n                        <table css={modalTableStyle(this.props)}>\n                            <caption css={tableCaptionStyle()} className=\"modal__title\">Create Group</caption>\n                            <tbody css={tableBodyStyle()} className=\"modal__search\">\n                                <tr className=\"error\">\n                                    <td><div css={tableErrorStyle()}>{this.state.error}</div></td>\n                                </tr>\n                                <tr>\n                                    <td>\n                                        <input\n                                        autoComplete=\"off\"\n                                        css={inputStyle(this.props)}\n                                        className=\"search__input\" \n                                        placeholder=\"Enter group name\"\n                                        type=\"text\"\n                                        tabIndex=\"1\"\n                                        onChange={this.nameChangeHandler}\n                                        value={this.state.name} />\n                                    </td>\n                                </tr>\n                                <tr>\n                                    <td>\n                                        <select\n                                            css={inputStyle(this.props)}\n                                            className=\"grouptype\" \n                                            onChange={this.typeChangeHandler}\n                                            value={this.state.type}\n                                            tabIndex=\"2\">\n                                            <option value=\"\">Select group type</option>\n                                            <option value=\"public\">Public</option>\n                                            <option value=\"private\">Private</option>\n                                            <option value=\"protected\">Password Protected</option>\n                                        </select>\n                                    </td>\n                                </tr>\n                                {password}\n                            </tbody>\n                            <tfoot css={tableFootStyle(this.props)}>\n                                <tr className=\"creategroup\">\n                                    <td><button tabIndex=\"4\" onClick={this.createGroup}>Create</button></td>\n                                </tr>\n                            </tfoot>\n                        </table>\n                    </div>\n                </div>\n            </React.Fragment>\n        );\n    }\n}\n\nexport default CometChatCreateGroup;","export const listItem = (props) => {\n\n    const selectedState = (props.selectedGroup && props.selectedGroup.guid === props.group.guid) ? {\n        backgroundColor: `${props.theme.backgroundColor.primary}`\n    } : {};\n\n    return {\n        display: \"flex\",\n        flexDirection: \"row\",\n        justifyContent: \"left\",\n        alignItems: \"center\",\n        cursor: \"pointer\",\n        width: \"100%\",\n        padding: \"10px 20px\",\n        ...selectedState,\n        '&:hover': {\n            backgroundColor: `${props.theme.backgroundColor.primary}`\n        }\n    }\n}\n\nexport const listItemIcon = () => {\n\n    return {\n        alignSelf: \"center\",\n        width: \"16px\",\n        height: \"16px\",\n    }\n}\n\nexport const itemThumbnailStyle = () => {\n\n    return {\n        display: \"inline-block\",\n        width: \"36px\",\n        height: \"36px\",\n        flexShrink: \"0\",\n    }\n}\n\nexport const itemDetailStyle = () => {\n\n    return {\n        width: \"calc(100% - 70px)\",\n        flexGrow: \"1\",\n        paddingLeft: \"15px\",\n    }\n}\n\nexport const itemNameStyle = () => { \n    return {\n        fontSize: \"15px\",\n        fontWeight: \"600\",\n        overflow: \"hidden\",\n        textOverflow: \"ellipsis\",\n        whiteSpace: \"nowrap\",\n        width: \"100%\",\n        margin: \"0\",\n        marginTop: \"5px\",\n    }\n}\n\nexport const itemDescStyle = (props) => { \n\n    return {\n        borderBottom: `1px solid ${props.theme.borderColor.primary}`,\n        marginTop: \"10px\",\n    }\n}","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nimport Avatar from \"../Avatar\";\n\nimport {\n  listItem,\n  listItemIcon,\n  itemThumbnailStyle,\n  itemDetailStyle,\n  itemNameStyle,\n  itemDescStyle\n\n} from \"./style\";\n\nimport shieldIcon from \"./resources/shield.svg\";\nimport lockIcon from \"./resources/lock.svg\";\n\nconst groupview = (props) => {\n\n  const toggleTooltip = (event, flag) => {\n\n    const elem = event.target;\n\n    const scrollWidth = elem.scrollWidth;\n    const clientWidth = elem.clientWidth;\n\n    if(scrollWidth <= clientWidth) {\n      return false;\n    }\n\n    if(flag) {\n      elem.setAttribute(\"title\", elem.textContent);\n    } else {\n      elem.removeAttribute(\"title\");\n    }\n  } \n\n  let groupTypeIcon = null;\n  if(props.group.type === \"private\") {\n\n    groupTypeIcon = (<div css={listItemIcon()} className=\"list__item__icon\"><img src={shieldIcon} alt=\"time\" /></div>);\n\n  } else if(props.group.type === \"password\") {\n\n    groupTypeIcon = (<div css={listItemIcon()} className=\"list__item__icon\"><img src={lockIcon} alt=\"time\" /></div>);\n  }\n\n  return (\n    <div css={listItem(props)} className=\"list__item\" onClick={() => props.clickHandler(props.group)}>\n      <div css={itemThumbnailStyle()} className=\"list__item__thumbnail\">\n        <Avatar \n        image={props.group.icon} \n        cornerRadius=\"18px\" \n        borderColor={props.theme.color.secondary}\n        borderWidth=\"1px\"></Avatar>\n      </div>\n      <div css={itemDetailStyle()} className=\"list__item__details\">\n        <div css={itemNameStyle()} className=\"item__details__name\"\n        onMouseEnter={event => toggleTooltip(event, true)} \n        onMouseLeave={event => toggleTooltip(event, false)}>{props.group.name}</div>\n        <div css={itemDescStyle(props)} className=\"item__details__desc\"></div>\n      </div>\n      {groupTypeIcon}\n    </div>\n  )\n}\n\nexport default groupview;","export const groupWrapperStyle = () => {\n    \n    return {\n        display: \"flex\",\n        flexDirection: \"column\",\n        height: \"100%\",\n        boxSizing: \"border-box\",\n        \"*\": {\n            boxSizing: \"border-box\",\n        }\n    }\n}\n\nexport const groupHeaderStyle = (theme) => {\n\n    return {\n        padding: \"19px 16px\",\n        position: \"relative\",\n        display: \"flex\",\n        alignItems: \"center\",\n        borderBottom: `1px solid ${theme.borderColor.primary}`\n    }\n}\n\nexport const groupHeaderCloseStyle = (img) => {\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n        cursor: \"pointer\",\n        display: \"none\",\n        background: `url(${ img}) left center no-repeat`,\n        height: \"24px\",\n        width: \"33%\",\n        [mq[0]]: {\n            display: \"block!important\"\n        }\n    }\n}\n\nexport const groupHeaderTitleStyle = (props) => {\n\n    const alignment = (props.hasOwnProperty(\"enableCloseMenu\") && props.enableCloseMenu.length > 0) ? {\n        width: \"33%\",\n        textAlign: \"center\"\n    } : {};\n\n    return {\n        margin: \"0\",\n        fontWeight: \"700\",\n        display: \"inline-block\",\n        width: \"66%\",\n        textAlign: \"left\",\n        fontSize: \"20px\",\n        ...alignment\n    }\n}\n\nexport const groupAddStyle = (img) => {\n    \n    return {\n        display: \"block\",\n        height: \"20px\",\n        background: `url(${img}) right center no-repeat`,\n        cursor: \"pointer\",\n        width: \"35%\"\n    }\n}\n\nexport const groupSearchStyle = () => {\n    \n    return {\n        padding: \"16px 16px\",\n        position: \"relative\",\n    }\n}\n\nexport const groupSearchInputStyle = (theme, img) => {\n\n    return {\n        display: \"block\",\n        width: \"100%\",\n        border: \"0\",\n        boxShadow: \"rgba(20, 20, 20, 0.04) 0 0 0 1px inset\",\n        borderRadius: \"8px\",\n        lineHeight: \"20px\",\n        padding: \"6px 8px 6px 30px\",\n        fontSize: \"15px\",\n        outline: \"none\",\n        color: `${theme.color.primary}`,\n        background: `url(${img}) 10px center no-repeat ${theme.backgroundColor.grey}`,\n    }\n}\n\nexport const groupMsgStyle = () => {\n    \n    return {\n        overflow: \"hidden\",\n        width: \"100%\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        position: \"absolute\",\n        top: \"50%\"\n    }\n}\n\nexport const groupMsgTxtStyle = (theme) => {\n\n    return {\n        margin: \"0\",\n        height: \"30px\",\n        color: `${theme.color.secondary}`,\n        fontSize: \"24px!important\",\n        fontWeight: \"600\"\n    }\n}\n\nexport const groupListStyle = () => {\n\n    return {\n        height: \"calc(100% - 125px)\",\n        overflowY: \"auto\",\n        margin: \"0\",\n        padding: \"0\"\n    }\n}","import React from \"react\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core'\n\nimport { CometChat } from \"@cometchat-pro/chat\";\n\nimport { CometChatManager } from \"../../util/controller\";\nimport { SvgAvatar } from '../../util/svgavatar';\n\nimport * as enums from '../../util/enums.js';\n\nimport { GroupListManager } from \"./controller\";\n\nimport CometChatCreateGroup from \"../CometChatCreateGroup\";\nimport GroupView from \"../GroupView\";\n\nimport { theme } from \"../../resources/theme\";\n\nimport {\n  groupWrapperStyle,\n  groupHeaderStyle,\n  groupHeaderCloseStyle,\n  groupHeaderTitleStyle,\n  groupAddStyle,\n  groupSearchStyle,\n  groupSearchInputStyle,\n  groupMsgStyle,\n  groupMsgTxtStyle,\n  groupListStyle\n} from \"./style\";\n\nimport searchIcon from './resources/search-grey-icon.svg';\nimport navigateIcon from './resources/navigate_before.svg';\nimport addIcon from './resources/edit-blue-icon.svg';\n\nclass CometChatGroupList extends React.Component {\n  timeout;\n  loggedInUser = null;\n  decoratorMessage = \"Loading...\";\n\n  constructor(props) {\n\n    super(props);\n\n    this.state = {\n      grouplist: [],\n      createGroup: false,\n      selectedGroup: null\n    }\n    this.groupListRef = React.createRef();\n    this.theme = Object.assign({}, theme, this.props.theme);\n  }\n\n  componentDidMount() {\n\n    this.GroupListManager = new GroupListManager();\n    this.getGroups();\n    this.GroupListManager.attachListeners(this.groupUpdated);\n  }\n\n  componentDidUpdate(prevProps) {\n\n    const previousItem = JSON.stringify(prevProps.item);\n    const currentItem = JSON.stringify(this.props.item);\n\n    //if different group is selected\n    if (previousItem !== currentItem) {\n\n      if (Object.keys(this.props.item).length === 0) {\n\n        this.groupListRef.scrollTop = 0;\n        this.setState({ selectedGroup: {} });\n\n      } else {\n\n        let grouplist = [...this.state.grouplist];\n\n        //search for user\n        let groupKey = grouplist.findIndex(g => g.guid === this.props.item.guid);\n        if (groupKey > -1) {\n\n          let groupObj = { ...grouplist[groupKey] };\n          this.setState({ selectedGroup: groupObj });\n        }\n      }\n    }\n\n    if(prevProps.groupToLeave && prevProps.groupToLeave.guid !== this.props.groupToLeave.guid) {\n      \n      const groups = [...this.state.grouplist];\n      const groupKey = groups.findIndex(member => member.guid === this.props.groupToLeave.guid);\n      \n      if(groupKey > -1) {\n\n        let groupObj = { ...groups[groupKey] };\n        let membersCount = parseInt(groupObj.membersCount) - 1;\n\n        let newgroupObj = Object.assign({}, groupObj, { membersCount: membersCount, hasJoined: false });\n\n        groups.splice(groupKey, 1, newgroupObj);\n        this.setState({grouplist: groups});\n      }\n    }\n\n    if(prevProps.groupToDelete && prevProps.groupToDelete.guid !== this.props.groupToDelete.guid) {\n            \n      const groups = [...this.state.grouplist];\n      const groupKey = groups.findIndex(member => member.guid === this.props.groupToDelete.guid);\n      if(groupKey > -1) {\n\n        groups.splice(groupKey, 1);\n        this.setState({grouplist: groups});\n        if(groups.length === 0) {\n          this.decoratorMessage = \"No groups found\";\n        }\n      }\n    }\n\n    if(prevProps.groupToUpdate \n    && (prevProps.groupToUpdate.guid !== this.props.groupToUpdate.guid \n    || (prevProps.groupToUpdate.guid === this.props.groupToUpdate.guid && (prevProps.groupToUpdate.membersCount !== this.props.groupToUpdate.membersCount || prevProps.groupToUpdate.scope !== this.props.groupToUpdate.scope)))) {\n            \n      const groups = [...this.state.grouplist];\n      const groupToUpdate = this.props.groupToUpdate;\n\n      const groupKey = groups.findIndex(group => group.guid === groupToUpdate.guid);\n      if(groupKey > -1) {\n        const groupObj = groups[groupKey];\n        const newGroupObj = Object.assign({}, groupObj, groupToUpdate, {scope: groupToUpdate[\"scope\"], membersCount: groupToUpdate[\"membersCount\"]});\n\n        groups.splice(groupKey, 1, newGroupObj);\n        this.setState({grouplist: groups});\n      }\n    }\n\n  }\n\n  componentWillUnmount() {\n    this.GroupListManager = null;\n  }\n\n  groupUpdated = (key, message, group, options) => {\n    \n    switch(key) {\n      case enums.GROUP_MEMBER_SCOPE_CHANGED:\n        this.updateMemberChanged(group, options);\n        break;\n      case enums.GROUP_MEMBER_KICKED:\n      case enums.GROUP_MEMBER_BANNED:\n      case enums.GROUP_MEMBER_LEFT:\n        this.updateMemberRemoved(group, options);\n        break;\n      case enums.GROUP_MEMBER_ADDED:\n        this.updateMemberAdded(group, options);\n        break;\n      case enums.GROUP_MEMBER_JOINED:\n        this.updateMemberJoined(group, options);\n        break;\n      default:\n        break;\n    }\n  }\n\n  updateMemberRemoved = (group, options) => {\n\n    let grouplist = [...this.state.grouplist];\n\n    //search for group\n    let groupKey = grouplist.findIndex((g, k) => g.guid === group.guid);\n\n    if (groupKey > -1) {\n\n      if (options && this.loggedInUser.uid === options.user.uid) {\n\n        let groupObj = { ...grouplist[groupKey] };\n        let membersCount = parseInt(group.membersCount);\n        \n        let newgroupObj = Object.assign({}, groupObj, { membersCount: membersCount, hasJoined: false });\n        \n        grouplist.splice(groupKey, 1, newgroupObj);\n        this.setState({ grouplist: grouplist });\n\n      } else {\n\n        let groupObj = { ...grouplist[groupKey] };\n        let membersCount = parseInt(group.membersCount);\n\n        let newgroupObj = Object.assign({}, groupObj, { membersCount: membersCount });\n\n        grouplist.splice(groupKey, 1, newgroupObj);\n        this.setState({ grouplist: grouplist });\n\n      }\n    }\n\n  }\n\n  updateMemberAdded = (group, options) => {\n\n    let grouplist = [...this.state.grouplist];\n\n    //search for group\n    let groupKey = grouplist.findIndex((g, k) => g.guid === group.guid);\n\n    if (groupKey > -1) {\n\n      let groupObj = { ...grouplist[groupKey] };\n\n      let membersCount = parseInt(group.membersCount);\n\n      let scope = group.hasOwnProperty(\"scope\") ? group.scope : \"\";\n      let hasJoined = group.hasOwnProperty(\"hasJoined\") ? group.hasJoined : false;\n      \n      if (options && this.loggedInUser.uid === options.user.uid) {\n        scope = CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT;\n        hasJoined = true;\n      }\n\n      let newgroupObj = Object.assign({}, groupObj, { membersCount: membersCount, scope: scope, hasJoined: hasJoined });\n\n      grouplist.splice(groupKey, 1, newgroupObj);\n      this.setState({ grouplist: grouplist });\n\n    } else {\n\n      let groupObj = { ...group };\n\n      let scope = groupObj.hasOwnProperty(\"scope\") ? groupObj.scope : {};\n      let hasJoined = groupObj.hasOwnProperty(\"hasJoined\") ? groupObj.hasJoined : false;\n      let membersCount = parseInt(groupObj.membersCount);\n      this.setAvatar(groupObj);\n      if (options && this.loggedInUser.uid === options.user.uid) {\n        scope = CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT;\n        hasJoined = true;\n      } \n\n      let newgroupObj = Object.assign({}, groupObj, { membersCount: membersCount, scope: scope, hasJoined: hasJoined });\n\n      const groupList = [newgroupObj, ...this.state.grouplist];\n      this.setState({ grouplist: groupList });\n    }\n  }\n\n  updateMemberJoined = (group, options) => {\n\n    let grouplist = [...this.state.grouplist];\n\n    //search for group\n    let groupKey = grouplist.findIndex((g, k) => g.guid === group.guid);\n\n    if (groupKey > -1) {\n\n      let groupObj = { ...grouplist[groupKey] };\n\n      let scope = groupObj.scope;\n      let membersCount = parseInt(group.membersCount);\n\n      if (options && this.loggedInUser.uid === options.user.uid) {\n        scope = CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT;\n      } \n\n      let newgroupObj = Object.assign({}, groupObj, { membersCount: membersCount, scope: scope });\n\n      grouplist.splice(groupKey, 1, newgroupObj);\n      this.setState({ grouplist: grouplist });\n    } \n  }\n\n  updateMemberChanged = (group, options) => {\n\n    let grouplist = [...this.state.grouplist];\n\n    //search for group\n    let groupKey = grouplist.findIndex((g, k) => g.guid === group.guid);\n\n    if (groupKey > -1) {\n\n      let groupObj = { ...grouplist[groupKey] };\n      if (options && this.loggedInUser.uid === options.user.uid) {\n\n        let newgroupObj = Object.assign({}, groupObj, { scope: options.scope });\n\n        grouplist.splice(groupKey, 1, newgroupObj);\n        this.setState({ grouplist: grouplist });\n      }\n    }\n  }\n  \n  handleScroll = (e) => {\n    const bottom =\n      Math.round(e.currentTarget.scrollHeight - e.currentTarget.scrollTop) === Math.round(e.currentTarget.clientHeight);\n    if (bottom) this.getGroups();\n  }\n\n  handleClick = (group) => {\n\n    if(!this.props.onItemClick)\n      return;\n\n    if (group.hasJoined === false) {\n\n      if(this.props.hasOwnProperty(\"widgetsettings\")\n      && this.props.widgetsettings\n      && this.props.widgetsettings.hasOwnProperty(\"main\") \n      && this.props.widgetsettings.main.hasOwnProperty(\"join_or_leave_groups\")\n      && this.props.widgetsettings.main[\"join_or_leave_groups\"] === false) {\n        \n        console.log(\"Group joining disabled in widget settings\");\n        return false;\n      }\n\n      let password = \"\";\n      if(group.type === CometChat.GROUP_TYPE.PASSWORD) {\n        password = prompt(\"Enter your password\");\n      } \n\n      const guid = group.guid;\n      const groupType = group.type;\n      \n      CometChat.joinGroup(guid, groupType, password).then(response => {\n\n        console.log(\"Group joining success with response\", response, \"group\", group);\n\n        const groups = [...this.state.grouplist];\n\n        let groupKey = groups.findIndex((g, k) => g.guid === guid);\n        if(groupKey > -1) {\n\n          const groupObj = groups[groupKey];\n          const newGroupObj = Object.assign({}, groupObj, response, {\"scope\":  CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT});\n\n          groups.splice(groupKey, 1, newGroupObj);\n          this.setState({grouplist: groups, selectedGroup: newGroupObj});\n\n          this.props.onItemClick(newGroupObj, 'group');\n        } \n        \n      }).catch(error => {\n        console.log(\"Group joining failed with exception:\", error);\n      });\n\n    } else {\n\n      this.setState({selectedGroup: group});\n      this.props.onItemClick(group, 'group');\n    }\n  }\n\n  handleMenuClose = () => {\n\n    if(!this.props.actionGenerated) {\n      return false;\n    }\n\n    this.props.actionGenerated(\"closeMenuClicked\")\n  }\n  \n  searchGroup = (e) => {\n\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n    }\n\n    let val = e.target.value;\n    this.timeout = setTimeout(() => {\n\n      this.GroupListManager = new GroupListManager(val);\n      this.setState({ grouplist: [] }, () => this.getGroups())\n    }, 500)\n\n  }\n\n  markMessagesRead = (message) => {\n\n    if (!(message.getReadAt() || message.getReadByMeAt())) {\n\n      if (message.getReceiverType() === 'user') {\n        CometChat.markAsRead(message.getId().toString(), message.getSender().getUid(), message.getReceiverType());\n      } else {\n        CometChat.markAsRead(message.getId().toString(), message.getReceiverId(), message.getReceiverType());\n      }\n    }\n  }\n\n  getGroups = () => {\n\n    new CometChatManager().getLoggedInUser().then(user => {\n\n      this.loggedInUser = user;\n      this.GroupListManager.fetchNextGroups().then(groupList => {\n\n        if(groupList.length === 0) {\n          this.decoratorMessage = \"No groups found\";\n        }\n\n        groupList.forEach(group => group = this.setAvatar(group));\n        this.setState({ grouplist: [...this.state.grouplist, ...groupList] });\n\n      }).catch(error => {\n\n        this.decoratorMessage = \"Error\";\n        console.error(\"[CometChatGroupList] getGroups fetchNextGroups error\", error);\n      });\n\n    }).catch(error => {\n\n      this.decoratorMessage = \"Error\";\n      console.log(\"[CometChatGroupList] getUsers getLoggedInUser error\", error);\n    });\n  }\n\n  createGroupHandler = (flag) => {\n    this.setState({\"createGroup\": flag});\n  }\n\n  setAvatar(group) {\n\n    if(group.hasOwnProperty(\"icon\") === false) {\n\n      const guid = group.guid;\n      const char = group.name.charAt(0).toUpperCase();\n      group.icon = SvgAvatar.getAvatar(guid, char);\n\n    }\n    return group;\n  }\n\n  createGroupActionHandler = (action, group) => {\n\n    if(action === \"groupCreated\") {\n\n      this.setAvatar(group);\n      const groupList = [group, ...this.state.grouplist];\n\n      this.handleClick(group);\n      this.setState({ grouplist: groupList, createGroup: false });\n    }\n  }\n\n  render() {\n\n    let messageContainer = null;\n    \n    if(this.state.grouplist.length === 0) {\n      messageContainer = (\n        <div css={groupMsgStyle()} className=\"groups__decorator-message\">\n          <p css={groupMsgTxtStyle(this.theme)} className=\"decorator-message\">{this.decoratorMessage}</p>\n        </div>\n      );\n    }\n\n    const groups = this.state.grouplist.map((group, key) => {\n      return (\n      <GroupView \n      key={key} \n      theme={this.theme}\n      group={group} \n      selectedGroup={this.state.selectedGroup}\n      clickHandler={this.handleClick} />);\n    });\n\n    let creategroup = (<div css={groupAddStyle(addIcon)} title=\"Create Group\" onClick={() => this.createGroupHandler(true)}></div>);\n    if(this.props.hasOwnProperty(\"config\") \n    && this.props.config\n    && this.props.config.hasOwnProperty(\"group-create\") \n    && this.props.config[\"group-create\"] === false) {\n      creategroup = null;\n    }\n\n    if(this.props.hasOwnProperty(\"widgetsettings\") \n    && this.props.widgetsettings\n    && this.props.widgetsettings.hasOwnProperty(\"main\") \n    && this.props.widgetsettings.main.hasOwnProperty(\"create_groups\")\n    && this.props.widgetsettings.main[\"create_groups\"] === false) {\n      creategroup = null;\n    }\n\n    let closeBtn = (<div css={groupHeaderCloseStyle(navigateIcon)} className=\"header__close\" onClick={this.handleMenuClose}></div>);\n    if (!this.props.hasOwnProperty(\"enableCloseMenu\") || (this.props.hasOwnProperty(\"enableCloseMenu\") && this.props.enableCloseMenu === 0)) {\n      closeBtn = null;\n    }\n\n    return (\n      <div css={groupWrapperStyle()} className=\"groups\">\n        <div css={groupHeaderStyle(this.theme)} className=\"groups__header\">\n          {closeBtn}\n          <h4 css={groupHeaderTitleStyle(this.props)} className=\"header__title\">Groups</h4>\n          {creategroup}\n        </div>\n        <div css={groupSearchStyle()} className=\"groups__search\">\n          <input \n          type=\"text\" \n          autoComplete=\"off\" \n          css={groupSearchInputStyle(this.theme, searchIcon)}\n          className=\"search__input\" \n          placeholder=\"Search\"\n          onChange={this.searchGroup} />\n        </div>\n        {messageContainer}\n        <div css={groupListStyle()} className=\"groups__list\" onScroll={this.handleScroll} ref={el => this.groupListRef = el}>{groups}</div>\n        <CometChatCreateGroup \n        theme={this.theme}\n        open={this.state.createGroup} \n        close={() => this.createGroupHandler(false)}\n        actionGenerated={this.createGroupActionHandler} />\n      </div>\n    );\n  }\n}\n\nexport default CometChatGroupList;","import { CometChat } from \"@cometchat-pro/chat\";\n\nimport * as enums from '../../util/enums.js';\n\nexport class GroupDetailManager {\n\n    guid = null;\n    groupMemberRequest = null;\n    bannedGroupMemberRequest = null;\n\n    userListenerId = \"group_detail_user_\" + new Date().getTime();\n    groupListenerId = \"group_detail_group_\" + new Date().getTime();\n\n    constructor(guid) {\n        this.guid = guid;\n        this.groupMemberRequest = new CometChat.GroupMembersRequestBuilder(guid).setLimit(10).build();\n        this.bannedGroupMemberRequest = new CometChat.BannedMembersRequestBuilder(guid).setLimit(10).build();\n    }\n\n    fetchNextGroupMembers() {\n        return this.groupMemberRequest.fetchNext();\n    }\n\n    fetchNextBannedGroupMembers() {\n        return this.bannedGroupMemberRequest.fetchNext();\n    }\n\n    attachListeners(callback) {\n\n        CometChat.addGroupListener(\n            this.groupListenerId,\n            new CometChat.GroupListener({\n                onGroupMemberScopeChanged: (message, changedUser, newScope, oldScope, changedGroup) => {\n                    callback(enums.GROUP_MEMBER_SCOPE_CHANGED, message, changedGroup, {\"user\": changedUser, \"scope\": newScope});\n                }, \n                onGroupMemberKicked: (message, kickedUser, kickedBy, kickedFrom) => {\n                    callback(enums.GROUP_MEMBER_KICKED, message, kickedFrom, {\"user\": kickedUser, \"hasJoined\": false});\n                }, \n                onGroupMemberBanned: (message, bannedUser, bannedBy, bannedFrom) => {\n                    callback(enums.GROUP_MEMBER_BANNED, message, bannedFrom, {\"user\": bannedUser});\n                }, \n                onGroupMemberUnbanned: (message, unbannedUser, unbannedBy, unbannedFrom) => {\n                    callback(enums.GROUP_MEMBER_UNBANNED, message, unbannedFrom, {\"user\": unbannedUser, \"hasJoined\": false});\n                }, \n                onMemberAddedToGroup: (message, userAdded, userAddedBy, userAddedIn) => {\n                    callback(enums.GROUP_MEMBER_ADDED, message, userAddedIn, {\"user\": userAdded, \"hasJoined\": true});\n                }, \n                onGroupMemberLeft: (message, leavingUser, group) => {\n                    callback(enums.GROUP_MEMBER_LEFT, message, group, {\"user\": leavingUser});\n                }, \n                onGroupMemberJoined: (message, joinedUser, joinedGroup) => {\n                    callback(enums.GROUP_MEMBER_JOINED, message, joinedGroup, {\"user\": joinedUser});\n                }\n            })\n        );\n\n        CometChat.addUserListener(\n            this.userListenerId,\n            new CometChat.UserListener({\n                onUserOnline: onlineUser => {\n                    /* when someuser/friend comes online, user will be received here */\n                    callback(enums.USER_ONLINE, null, {guid: this.guid}, {\"user\": onlineUser});\n                },\n                onUserOffline: offlineUser => {\n                    /* when someuser/friend went offline, user will be received here */\n                    callback(enums.USER_OFFLINE, null, {guid: this.guid}, {\"user\": offlineUser});\n                }\n            })\n        );\n    }\n\n    removeListeners() {\n\n        CometChat.removeUserListener(this.userListenerId);\n        CometChat.removeGroupListener(this.groupListenerId);\n    }\n}","import React from 'react';\n\nconst GroupDetailContext = React.createContext({\n    memberlist: [],\n    bannedmemberlist: [],\n    administratorslist: [],\n    moderatorslist: []\n});\n\nexport default GroupDetailContext;","export const tableRowStyle = (props) => {\n\n    return {\n        border: `1px solid ${props.theme.borderColor.primary}`,\n        display: \"table\",\n        width: \"100%\",\n        tableLayout: \"fixed\",\n        fontSize: \"14px\"\n    }\n}\n\nexport const tableColumnStyle = () => {\n\n    return {\n        padding: \"8px\",\n        \"img\": {\n            width: \"36px\",\n            height: \"36px\",\n            float: \"left\",\n        }\n    }\n}\n\nexport const avatarStyle = (participantView) => {\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n    \n    const displayProp = (participantView) ? {\n        display: \"none\"\n    } : {};\n\n    return {\n        display: \"inline-block\",\n        float: \"left\",\n        \"span\": {\n            top: \"26px\",\n            left: \"-8px\",\n        },\n        [mq[0]]: {\n            ...displayProp\n        }\n    }\n}\n\nexport const nameStyle = (participantView) => {\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    const widthProp = (participantView) ? {\n        width: \"100%\"\n    } : {};\n    \n    return {\n        margin: \"10px 0\",\n        width: \"calc(100% - 50px)\",\n        overflow: \"hidden\",\n        textOverflow: \"ellipsis\",\n        whiteSpace: \"nowrap\",\n        [mq[0]]: {\n            ...widthProp\n        }\n    }\n}\n\nexport const roleStyle = () => {\n\n    return {\n        padding: \"5px\",\n        float: \"left\",\n        fontSize: \"12px\",\n    }\n}\n\nexport const scopeStyle = () => {\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n        \"img\": {\n            width: \"20px\",\n            height: \"20px\",\n            cursor: \"pointer\",\n        },\n        [mq[0]]: {\n            width: \"170px\"\n        }\n    }\n}\n\nexport const actionColumnStyle = () => {\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n        width: \"70px\",\n        padding: \"8px\",\n        \"img\": {\n            width: \"20px\",\n            height: \"20px\",\n            cursor: \"pointer\",\n        },\n        [mq[0]]: {\n            width: \"55px\"\n        }\n    }\n}\n\nexport const scopeWrapperStyle = () => {\n\n    return {\n        float: \"left\",\n        width: \"100%\",\n        transition: \"opacity .1s linear\",\n        \"img\": {\n            margin: \"6px 3px\",\n            float: \"left\"\n        }\n    }\n}\n\nexport const scopeSelectionStyle = () => {\n\n    return {\n        width: \"65%\",\n        border: \"0\",\n        boxShadow: \"rgba(20, 20, 20, 0.04) 0 0 0 1px inset\",\n        borderRadius: \"8px\",\n        backgroundColor: `rgba(20, 20, 20, 0.04)`,\n        padding: \"6px\",\n        color: `rgba(20, 20, 20, 0.6)`,\n        float: \"left\",\n    }\n}","import React from \"react\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core'\n\nimport { CometChat } from \"@cometchat-pro/chat\";\n\nimport Avatar from \"../Avatar\";\nimport StatusIndicator from \"../StatusIndicator\";\n\nimport GroupDetailContext from '../CometChatGroupDetail/context';\n\nimport {\n    tableRowStyle,\n    tableColumnStyle,\n    avatarStyle,\n    nameStyle,\n    roleStyle,\n    scopeStyle,\n    actionColumnStyle,\n    scopeWrapperStyle,\n    scopeSelectionStyle\n} from \"./style\";\n\nimport scopeIcon from \"./resources/create.svg\";\nimport doneIcon from \"./resources/done.svg\";\nimport clearIcon from \"./resources/clear.svg\";\nimport banIcon from \"./resources/block.svg\";\nimport kickIcon from \"./resources/delete.svg\";\n\nclass MemberView extends React.Component {\n\n    static contextType = GroupDetailContext;\n\n    constructor(props) {\n        super(props);\n\n        this.changeScopeDropDown = (\n            <select \n            className=\"members-scope-select\"\n            onChange={this.scopeChangeHandler}\n            defaultValue={this.props.member.scope}></select>\n        )\n\n        this.roles = {}\n        this.roles[CometChat.GROUP_MEMBER_SCOPE.ADMIN] = \"Administrator\";\n        this.roles[CometChat.GROUP_MEMBER_SCOPE.MODERATOR] = \"Moderator\";\n        this.roles[CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT] = \"Participant\";\n    }\n    \n    state = {\n        showChangeScope: false,\n        scope: null\n    }\n\n    toggleChangeScope = (flag) => {\n        this.setState({ showChangeScope: flag });\n    }\n\n    scopeChangeHandler = (event) => {\n        this.setState({scope: event.target.value});\n    }\n\n    updateMemberScope = () => {\n        this.props.actionGenerated(\"changescope\", this.props.member, this.state.scope);\n        this.toggleChangeScope();\n    }\n\n    toggleTooltip = (event, flag) => {\n\n        const elem = event.currentTarget;\n        const nameContainer = elem.lastChild;\n    \n        const scrollWidth = nameContainer.scrollWidth;\n        const clientWidth = nameContainer.clientWidth;\n        \n        if(scrollWidth <= clientWidth) {\n          return false;\n        }\n    \n        if(flag) {\n            nameContainer.setAttribute(\"title\", nameContainer.textContent);\n        } else {\n            nameContainer.removeAttribute(\"title\");\n        }\n    }\n\n    render() {\n\n        const group = this.context;\n\n        let editClassName = \"\";\n    \n        let name = this.props.member.name;\n        let scope = (<span css={roleStyle()}>{this.roles[this.props.member.scope]}</span>);\n        let changescope = null;\n        let ban = (<img src={banIcon} alt=\"Ban\" onClick={() => {this.props.actionGenerated(\"ban\", this.props.member)}} />);\n        let kick = (<img src={kickIcon} alt=\"Kick\" onClick={() => {this.props.actionGenerated(\"kick\", this.props.member)}} />);\n        \n\n        if(this.state.showChangeScope) {\n\n            let options = (\n                <React.Fragment>\n                    <option value={CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT}>{this.roles[CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT]}</option>\n                    <option value={CometChat.GROUP_MEMBER_SCOPE.MODERATOR}>{this.roles[CometChat.GROUP_MEMBER_SCOPE.MODERATOR]}</option>\n                    <option value={CometChat.GROUP_MEMBER_SCOPE.ADMIN}>{this.roles[CometChat.GROUP_MEMBER_SCOPE.ADMIN]}</option>\n                </React.Fragment>\n            );\n\n            if (this.props.item.scope === CometChat.GROUP_MEMBER_SCOPE.MODERATOR\n                && this.props.member.scope === CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT) {\n\n                options = (\n                    <React.Fragment>\n                        <option value={CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT}>{this.roles[CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT]}</option>\n                        <option value={CometChat.GROUP_MEMBER_SCOPE.MODERATOR}>{this.roles[CometChat.GROUP_MEMBER_SCOPE.MODERATOR]}</option>\n                    </React.Fragment>\n                );\n            }\n\n            changescope = (\n                <div css={scopeWrapperStyle()} className=\"scope__wrapper\">\n                    <select \n                    css={scopeSelectionStyle()}\n                    className=\"scope__select\"\n                    onChange={this.scopeChangeHandler}\n                    defaultValue={this.props.member.scope}>{options}</select>\n                    <img src={doneIcon} alt=\"Change Scope\" onClick={this.updateMemberScope} />\n                    <img src={clearIcon} alt=\"Change Scope\" onClick={() => this.toggleChangeScope(false)} />\n                </div>\n            );\n\n        } else {\n\n            if(this.props.item.scope === CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT) {\n                changescope = scope;\n            } else {\n                changescope = (\n                    <React.Fragment>\n                        {scope}\n                        <img src={scopeIcon} alt=\"Change Scope\" onClick={() => this.toggleChangeScope(true)} />\n                    </React.Fragment>\n                );\n            }\n        }\n\n        //disable change scope, kick, ban of group owner\n        if(this.props.item.owner === this.props.member.uid) {\n            scope = (<span css={roleStyle()}>{\"Owner\"}</span>);\n            changescope = scope;\n            ban = null;\n            kick = null;\n        }\n\n        //disable change scope, kick, ban of self\n        if(group.loggedinuser.uid === this.props.member.uid) {\n            name = \"You\";\n            changescope = scope;\n            ban = null;\n            kick = null;\n        }\n\n        //if the loggedin user is moderator, don't allow to change scope, ban, kick group moderators or administrators\n        if(this.props.item.scope === CometChat.GROUP_MEMBER_SCOPE.MODERATOR \n        && (this.props.member.scope === CometChat.GROUP_MEMBER_SCOPE.ADMIN || this.props.member.scope === CometChat.GROUP_MEMBER_SCOPE.MODERATOR)) {\n            changescope = scope;\n            ban = null;\n            kick = null;\n        }\n\n        //if the loggedin user is administrator but not group owner, don't allow to change scope, ban, kick group administrators\n        if(this.props.item.scope === CometChat.GROUP_MEMBER_SCOPE.ADMIN\n        && this.props.item.owner !== group.loggedinuser.uid \n        && this.props.member.scope === CometChat.GROUP_MEMBER_SCOPE.ADMIN) {\n            changescope = scope;\n            ban = null;\n            kick = null;\n        }\n        \n        let editAccess = null;\n        //if the loggedin user is participant, don't show change scope, ban, kick group members\n        if(this.props.item.scope === CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT) {\n            editAccess = null;\n            editClassName = \"true\";\n        } else {\n\n            editAccess = (\n                <React.Fragment>\n                    <td css={actionColumnStyle()} className=\"ban\"><span>{ban}</span></td>\n                    <td css={actionColumnStyle()} className=\"kick\"><span>{kick}</span></td>\n                </React.Fragment>\n            );\n\n            if(this.props.hasOwnProperty(\"widgetsettings\") && this.props.widgetsettings && this.props.widgetsettings.hasOwnProperty(\"main\")) {\n    \n                //if kick_ban_members is disabled in chatwidget\n                if (this.props.widgetsettings.main.hasOwnProperty(\"allow_kick_ban_members\")\n                && this.props.widgetsettings.main[\"allow_kick_ban_members\"] === false) {\n    \n                    editAccess = null;\n                }\n\n                //if promote_demote_members is disabled in chatwidget\n                if (this.props.widgetsettings.main.hasOwnProperty(\"allow_promote_demote_members\")\n                && this.props.widgetsettings.main[\"allow_promote_demote_members\"] === false) {\n    \n                    changescope = scope;\n                }\n            }\n        }\n\n        let userPresence = (\n            <StatusIndicator\n            widgetsettings={this.props.widgetsettings}\n            status={this.props.member.status}\n            cornerRadius=\"50%\" \n            borderColor={this.props.theme.color.darkSecondary}\n            borderWidth=\"1px\" />\n        );\n        \n        return (\n            <tr css={tableRowStyle(this.props)}>\n                <td css={tableColumnStyle(editClassName)} className=\"userinfo\"\n                onMouseEnter={event => this.toggleTooltip(event, true)}\n                onMouseLeave={event => this.toggleTooltip(event, false)}>\n                    <div css={avatarStyle(editClassName)} className=\"thumbnail\">\n                        <Avatar \n                        image={this.props.member.avatar} \n                        cornerRadius=\"18px\" \n                        borderColor={this.props.theme.color.secondary}\n                        borderWidth=\"1px\" />\n                        {userPresence}\n                    </div>\n                    <div css={nameStyle(editClassName)} className=\"name\">{name}</div>\n                </td>\n                <td css={scopeStyle()} className=\"scope\">{changescope}</td>\n                {editAccess}\n            </tr>\n        );\n    }\n}\n\nexport default MemberView;","export const modalWrapperStyle = (props) => {\n\n    const show = (props.open) ? {\n        display: \"block\",\n    } : {};\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n        minWidth: \"350px\",\n        minHeight: \"450px\",\n        width: \"50%\",\n        height: \"40%\",\n        overflow: \"hidden\",\n        backgroundColor: `${props.theme.backgroundColor.white}`,\n        position: \"fixed\",\n        left: \"50%\",\n        top: \"50%\",\n        transform: \"translate(-50%, -50%)\",\n        zIndex: \"1002\",\n        margin: \"0 auto\",\n        boxShadow: \"rgba(20, 20, 20, 0.2) 0 16px 32px, rgba(20, 20, 20, 0.04) 0 0 0 1px\",\n        borderRadius: \"12px\",\n        display: \"none\",\n        ...show,\n        [mq[0]]: {\n            width: \"100%\",\n            height: \"100%\"\n        }\n    }\n}\n\nexport const modalCloseStyle = (img) => {\n\n    return {\n        position: \"absolute\",\n        width: \"32px\",\n        height: \"32px\",\n        borderRadius: \"50%\",\n        top: \"16px\",\n        right: \"16px\",\n        background: `url(${img}) center center no-repeat`,\n        cursor: \"pointer\",\n    }\n}\n\nexport const modalBodyCtyle = () => {\n\n    return {\n        padding: \"25px\",\n        height: \"100%\",\n        width: \"100%\"\n    }\n}\n\nexport const modalTableStyle = (props) => {\n\n    return {\n        borderCollapse: \"collapse\",\n        margin: \"0\",\n        padding: \"0\",\n        width: \"100%\",\n        height: \"90%\",\n        \"tr\": {\n            border: `1px solid ${props.theme.borderColor.primary}`,\n            display: \"table\",\n            width: \"100%\",\n            tableLayout: \"fixed\",\n            \"th\": {\n                padding: \"8px\",\n                fontSize: \"12px\",\n                textAlign: \"left\"\n            }\n        },\n    }\n}\n\nexport const tableCaptionStyle = () => {\n\n    return {\n        fontSize: \"20px\",\n        marginBottom: \"15px\",\n        fontWeight: \"bold\",\n        textAlign: \"left\",\n    }\n}\n\nexport const tableBodyStyle = (props) => {\n\n    return {\n        height: \"325px\",\n        overflowY: \"auto\",\n        display: \"block\",\n    }\n}\n\nexport const scopeColumnStyle = () => {\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n        [mq[0]]: {\n            width: \"170px\"\n        }\n    }\n}\n\nexport const actionColumnStyle = () => {\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n        width: \"70px\",\n        [mq[0]]: {\n            width: \"55px\"\n        }\n    }\n}","import React from \"react\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core'\n\nimport { CometChat } from \"@cometchat-pro/chat\";\n\nimport MemberView from \"../MemberView\";\nimport Backdrop from '../Backdrop';\n\nimport GroupDetailContext from '../CometChatGroupDetail/context';\n\nimport {\n    modalWrapperStyle,\n    modalCloseStyle,\n    modalBodyCtyle,\n    modalTableStyle,\n    tableCaptionStyle,\n    tableBodyStyle,\n    scopeColumnStyle,\n    actionColumnStyle\n} from \"./style\";\n\nimport clearIcon from \"./resources/clear.svg\";\n\nclass CometChatViewMembers extends React.Component {\n\n    static contextType = GroupDetailContext;\n\n    handleScroll = (e) => {\n\n        const bottom = Math.round(e.currentTarget.scrollHeight - e.currentTarget.scrollTop) === Math.round(e.currentTarget.clientHeight);\n        if (bottom) {\n            this.props.actionGenerated(\"fetchGroupMembers\");\n        }\n    }\n\n    updateMembers = (action, member, scope) => {\n\n        switch(action) {\n            case \"ban\":\n                this.banMember(member);\n                break;\n            case \"kick\":\n                this.kickMember(member);\n                break;\n            case \"changescope\":\n                this.changeScope(member, scope);\n                break;\n            default:\n                break;\n        }\n    }\n\n    banMember = (memberToBan) => {\n\n        const guid = this.props.item.guid;\n        CometChat.banGroupMember(guid, memberToBan.uid).then(response => {\n            \n            if(response) {\n                console.log(\"banGroupMember success with response: \", response);\n                this.props.actionGenerated(\"removeGroupParticipants\", memberToBan);\n            }\n\n        }).catch(error => {\n            console.log(\"banGroupMember failed with error: \", error);\n        });\n    }\n\n    kickMember = (memberToKick) => {\n\n        const guid = this.props.item.guid;\n        CometChat.kickGroupMember(guid, memberToKick.uid).then(response => {\n            \n            if(response) {\n                console.log(\"kickGroupMember success with response: \", response);\n                this.props.actionGenerated(\"removeGroupParticipants\", memberToKick);\n            }\n            \n        }).catch(error => {\n            console.log(\"kickGroupMember failed with error: \", error);\n        });\n    }\n\n    changeScope = (member, scope) => {\n\n        const guid = this.props.item.guid;\n\n        CometChat.updateGroupMemberScope(guid, member.uid, scope).then(response => {\n            \n            if(response) {\n                console.log(\"updateGroupMemberScope success with response: \", response);\n                const updatedMember = Object.assign({}, member, {scope: scope});\n                this.props.actionGenerated(\"updateGroupParticipants\", updatedMember);\n            }\n            \n        }).catch(error => {\n            console.log(\"updateGroupMemberScope failed with error: \", error);\n        });\n    }\n\n    render() {\n\n        const group = this.context;\n\n        const membersList = [...group.memberlist];\n\n        const groupMembers = membersList.map((member, key) => {\n        \n            return (<MemberView \n                theme={this.props.theme}\n                key={key} \n                member={member}\n                item={this.props.item}\n                widgetsettings={this.props.widgetsettings}\n                actionGenerated={this.updateMembers} />);\n        });\n\n        let editAccess = null;\n        if(this.props.item.scope !== CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT) {\n\n            editAccess = (\n                <React.Fragment>\n                    <th css={actionColumnStyle()} className=\"ban\">Ban</th>\n                    <th css={actionColumnStyle()} className=\"kick\">Kick</th>\n                </React.Fragment>\n            );\n\n            if(this.props.hasOwnProperty(\"widgetsettings\") && this.props.widgetsettings && this.props.widgetsettings.hasOwnProperty(\"main\")) {\n\n                //if kick_ban_members && promote_demote_members are disabled in chatwidget\n                if(this.props.widgetsettings.main.hasOwnProperty(\"allow_kick_ban_members\") \n                && this.props.widgetsettings.main[\"allow_kick_ban_members\"] === false) {\n\n                    editAccess = null;\n                }\n            }\n        }\n\n        return (\n            <React.Fragment>\n                <Backdrop show={this.props.open} clicked={this.props.close} />\n                <div css={modalWrapperStyle(this.props)} className=\"modal__viewmembers\">\n                    <span css={modalCloseStyle(clearIcon)} className=\"modal__close\" onClick={this.props.close} title=\"Close\"></span>\n                    <div css={modalBodyCtyle()} className=\"modal__body\">\n                        <table css={modalTableStyle(this.props)}>\n                            <caption css={tableCaptionStyle()} className=\"modal__title\">Group Members</caption>\n                            <thead> \n                                <tr>\n                                    <th className=\"name\">Name</th>\n                                    <th css={scopeColumnStyle()} className=\"scope\">Scope</th>\n                                    {editAccess}\n                                </tr>\n                            </thead>\n                            <tbody css={tableBodyStyle()} onScroll={this.handleScroll}>{groupMembers}</tbody>\n                        </table>\n                    </div>\n                </div>\n            </React.Fragment>\n        );\n    }\n}\n\nexport default CometChatViewMembers;","import { CometChat } from \"@cometchat-pro/chat\";\n\nexport class AddMembersManager {\n\n    membersRequest = null;\n    userListenerId = new Date().getTime();\n\n    constructor(friendsOnly, searchKey) {\n\n        if (searchKey) {\n            this.membersRequest = new CometChat.UsersRequestBuilder().setLimit(30).friendsOnly(friendsOnly).setSearchKeyword(searchKey).build();\n        } else {\n            this.membersRequest = new CometChat.UsersRequestBuilder().setLimit(30).friendsOnly(friendsOnly).build();\n        }\n    }\n\n    fetchNextUsers() {\n        return this.membersRequest.fetchNext();\n    }\n\n    attachListeners(callback) {\n        \n        CometChat.addUserListener(\n            this.userListenerId,\n            new CometChat.UserListener({\n                onUserOnline: onlineUser => {\n                    /* when someuser/friend comes online, user will be received here */\n                    callback(onlineUser);\n                },\n                onUserOffline: offlineUser => {\n                    /* when someuser/friend went offline, user will be received here */\n                    callback(offlineUser);\n                }\n            })\n        );\n    }\n\n    removeListeners() {\n        CometChat.removeUserListener(this.userListenerId);\n    }\n}","export const tableRowStyle = (props) => {\n\n    return {\n        border: `1px solid ${props.theme.borderColor.primary}`,\n        display: \"table\",\n        width: \"100%\",\n        tableLayout: \"fixed\",\n        fontSize: \"14px\"\n    }\n}\n\nexport const tableColumnStyle = () => {\n\n    return {\n        padding: \"8px\",\n        width: \"100%\",\n    }\n}\n\nexport const avatarStyle = () => {\n\n    return {\n        display: \"inline-block\",\n        float: \"left\",\n        width: \"36px\",\n        height: \"36px\",\n        marginRight: \"8px\",\n    }\n}\n\nexport const nameStyle = () => {\n\n    return {\n        margin: \"10px\",\n        width: \"calc(100% - 50px)\",\n        overflow: \"hidden\",\n        textOverflow: \"ellipsis\",\n        whiteSpace: \"nowrap\",\n    }\n}\n\nexport const selectionColumnStyle = () => {\n\n    return {\n        padding: \"8px\",\n        width: \"50px\",\n    }\n}\n\nexport const selectionBoxStyle = (inactiveStateImg, activeStateImg) => {\n\n    return {\n        display: \"none\",\n        \" + label\": {\n            display: \"block\",\n            cursor: \"pointer\",\n            background: `url(${inactiveStateImg}) right center / 16px no-repeat`,\n            userSelect: \"none\",\n            float: \"right\",\n            padding: \".625em\",\n        },\n        \"&:checked + label\": {\n            background: `url(${activeStateImg}) no-repeat right center`,\n            backgroundSize: \"16px\",\n        }\n    }\n}","import { useState } from \"react\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nimport Avatar from \"../Avatar\";\nimport StatusIndicator from \"../StatusIndicator\";\n\nimport {\n  tableRowStyle,\n  tableColumnStyle,\n  avatarStyle,\n  nameStyle,\n  selectionColumnStyle,\n  selectionBoxStyle\n} from \"./style\";\n\nimport inactiveIcon from \"./resources/checkbox-inactive.svg\";\nimport activeIcon from \"./resources/checkbox-blue-active.svg\";\n\nconst AddMemberView = (props) => {\n\n  const [checked, setChecked] = useState(() => {\n    const found = props.members.find(member => member.uid === props.user.uid);\n    const value = (found) ? true : false;\n\n    return value;\n  });\n\n  const handleCheck = (event) => {\n\n    const value = (checked === true) ? false : true;\n    setChecked(value);\n    props.changed(props.user, value);\n  }\n\n  const toggleTooltip = (event, flag) => {\n\n    const elem = event.currentTarget;\n    const nameContainer = elem.lastChild;\n\n    const scrollWidth = nameContainer.scrollWidth;\n    const clientWidth = nameContainer.clientWidth;\n    \n    if(scrollWidth <= clientWidth) {\n      return false;\n    }\n\n    if(flag) {\n      nameContainer.setAttribute(\"title\", nameContainer.textContent);\n    } else {\n      nameContainer.removeAttribute(\"title\");\n    }\n  }\n  \n  return (\n    <tr css={tableRowStyle(props)}>\n      <td css={tableColumnStyle()} className=\"userinfo\"\n      onMouseEnter={event => toggleTooltip(event, true)}\n      onMouseLeave={event => toggleTooltip(event, false)}>\n        <div css={avatarStyle()} className=\"avatar\">\n          <Avatar \n          image={props.user.avatar} \n          cornerRadius=\"50%\" \n          borderColor={props.theme.color.secondary}\n          borderWidth=\"1px\" />\n          <StatusIndicator\n          widgetsettings={props.widgetsettings}\n          status={props.user.status}\n          cornerRadius=\"50%\" \n          borderColor={props.theme.color.darkSecondary}\n          borderWidth=\"1px\" />\n        </div>\n        <div css={nameStyle()} className=\"name\">{props.user.name}</div>\n      </td>\n      <td css={selectionColumnStyle()} className=\"selection\">\n          <input \n          css={selectionBoxStyle(inactiveIcon, activeIcon)}\n          type=\"checkbox\" \n          checked={checked}\n          id={props.user.uid+\"sel\"} \n          onChange={handleCheck}  />\n          <label htmlFor={props.user.uid+\"sel\"}>&nbsp;</label>\n      </td>\n    </tr>\n  )\n}\n\nexport default AddMemberView;","export const modalWrapperStyle = (props) => {\n\n    const show = (props.open) ? {\n        display: \"block\",\n    } : {};\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n        minWidth: \"350px\",\n        minHeight: \"450px\",\n        width: \"40%\",\n        height: \"40%\",\n        overflow: \"hidden\",\n        backgroundColor: `${props.theme.backgroundColor.white}`,\n        position: \"fixed\",\n        left: \"50%\",\n        top: \"50%\",\n        transform: \"translate(-50%, -50%)\",\n        zIndex: \"1002\",\n        margin: \"0 auto\",\n        boxShadow: \"rgba(20, 20, 20, 0.2) 0 16px 32px, rgba(20, 20, 20, 0.04) 0 0 0 1px\",\n        borderRadius: \"12px\",\n        display: \"none\",\n        ...show,\n        [mq[0]]: {\n            width: \"100%\",\n            height: \"100%\"\n        }\n    }\n}\n\nexport const modalCloseStyle = (img) => {\n\n    return {\n        position: \"absolute\",\n        width: \"32px\",\n        height: \"32px\",\n        borderRadius: \"50%\",\n        top: \"16px\",\n        right: \"16px\",\n        background: `url(${img}) center center no-repeat`,\n        cursor: \"pointer\",\n    }\n}\n\nexport const modalBodyCtyle = () => {\n\n    return {\n        padding: \"25px\",\n        height: \"100%\",\n        width: \"100%\",\n    }\n}\n\nexport const modalTableStyle = () => {\n\n    return {\n        borderCollapse: \"collapse\",\n        margin: \"0\",\n        padding: \"0\",\n        width: \"100%\",\n        height: \"80%\",\n    }\n}\n\nexport const tableCaptionStyle = () => {\n\n    return {\n        fontSize: \"20px\",\n        marginBottom: \"15px\",\n        fontWeight: \"bold\",\n        textAlign: \"left\",\n    }\n}\n\nexport const tableSearchStyle = () => {\n\n    return {\n        fontWeight: \"normal\",\n        marginBottom: \"15px\",\n    }\n}\n\nexport const searchInputStyle = (props, img) => {\n\n    return {\n        width: \"100%\",\n        border: \"0\",\n        boxShadow: \"rgba(20, 20, 20, 0.04) 0 0 0 1px inset\",\n        borderRadius: \"8px\",\n        padding: \"6px 8px 6px 35px\",\n        fontSize: \"15px\",\n        outline: \"none\",\n        color: `${props.theme.color.primary}`,\n        background: `url(${img}) 10px center no-repeat ${props.theme.backgroundColor.grey}`,\n    }\n}\n\nexport const tableBodyStyle = (props) => {\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n    \n    return {\n        height: \"100%\",\n        overflowY: \"auto\",\n        display: \"block\",\n        \"tr\": {\n            border: `1px solid ${props.theme.borderColor.primary}`,\n            display: \"table\",\n            width: \"100%\",\n            tableLayout: \"fixed\",\n        },\n        [mq[0]]: {\n            height: \"100%\"\n        }\n    }\n}\n\nexport const tableFootStyle = (props) => {\n\n    return {\n\n        \"button\": {\n            cursor: \"pointer\",\n            padding: \"10px 20px\",\n            backgroundColor: `${props.theme.backgroundColor.blue}`,\n            borderRadius: \"5px\",\n            color: `${props.theme.color.white}`,\n            fontSize: \"14px\",\n            outline: \"0\",\n            border: \"0\",\n        },\n        \"tr\": {\n            border: \"none\",\n        },\n        \"td\": {\n            textAlign: \"center\",\n        }\n    }\n}\n\nexport const contactMsgStyle = () => {\n\n    return {\n        overflow: \"hidden\",\n        width: \"100%\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        height: \"55%\",\n    }\n}\n\nexport const contactMsgTxtStyle = (props) => {\n\n    return {\n        margin: \"0\",\n        height: \"30px\",\n        color: `${props.theme.color.secondary}`,\n        fontSize: \"24px!important\",\n        fontWeight: \"600\"\n    }\n}","import React from \"react\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nimport { CometChat } from \"@cometchat-pro/chat\";\n\nimport { CometChatManager } from \"../../util/controller\";\nimport { SvgAvatar } from '../../util/svgavatar';\nimport { AddMembersManager } from \"./controller\";\n\nimport AddMemberView from \"../AddMemberView\";\nimport Backdrop from '../Backdrop';\n\nimport GroupDetailContext from '../CometChatGroupDetail/context';\n\nimport {\n    modalWrapperStyle,\n    modalCloseStyle,\n    modalBodyCtyle,\n    modalTableStyle,\n    tableCaptionStyle,\n    tableSearchStyle,\n    searchInputStyle,\n    tableBodyStyle,\n    tableFootStyle,\n    contactMsgStyle,\n    contactMsgTxtStyle,\n} from \"./style\";\n\nimport searchIcon from './resources/search-grey-icon.svg';\nimport clearIcon from \"./resources/clear.svg\";\n\nclass CometChatAddMembers extends React.Component {\n\n    decoratorMessage = \"Loading...\";\n    static contextType = GroupDetailContext;\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            userlist: [],\n            membersToAdd: [],\n            filteredlist: []\n        }\n    }\n\n    componentDidMount() {\n  \n        if(this.props?.friendsOnly) {\n            this.friendsOnly = this.props.friendsOnly;\n        }\n\n        this.AddMembersManager = new AddMembersManager(this.friendsOnly);\n        this.getUsers();\n        this.AddMembersManager.attachListeners(this.userUpdated);\n    }\n\n    componentWillUnmount() {\n\n        this.AddMembersManager.removeListeners();\n        this.AddMembersManager = null;\n    }\n\n    userUpdated = (user) => {\n        \n        let userlist = [...this.state.userlist];\n  \n        //search for user\n        let userKey = userlist.findIndex((u, k) => u.uid === user.uid);\n      \n        //if found in the list, update user object\n        if(userKey > -1) {\n\n            let userObj = userlist[userKey];//{...userlist[userKey]};\n            let newUserObj = Object.assign({}, userObj, user);\n            userlist.splice(userKey, 1, newUserObj);\n    \n            this.setState({ userlist: userlist });\n        }\n    }\n\n    handleScroll = (e) => {\n      const bottom =\n        Math.round(e.currentTarget.scrollHeight - e.currentTarget.scrollTop) === Math.round(e.currentTarget.clientHeight);\n      if (bottom) this.getUsers();\n    }\n    \n    searchUsers = (e) => {\n  \n        if (this.timeout) {\n            clearTimeout(this.timeout);\n        }\n\n        let val = e.target.value;\n        this.timeout = setTimeout(() => {\n\n        this.AddMembersManager = new AddMembersManager(this.friendsOnly, val);\n            this.setState({ userlist: [], membersToAdd: [], membersToRemove: [] }, () => this.getUsers())\n        }, 500);\n  \n    }\n  \n    getUsers = () => {\n  \n        new CometChatManager().getLoggedInUser().then((user) => {\n  \n            this.AddMembersManager.fetchNextUsers().then(userList => {\n\n                userList.forEach(user => user = this.setAvatar(user));\n\n                const filteredUserList = userList.filter(user => {\n\n                    const found = this.context.memberlist.find(member => user.uid === member.uid);\n                    const foundbanned = this.context.bannedmemberlist.find(member => user.uid === member.uid);\n                    if (found || foundbanned) {\n                        return false;\n                    }\n                    return true;\n                });\n\n                if (filteredUserList.length === 0) {\n                    this.decoratorMessage = \"No users found\";\n                }\n\n                this.setState({ userlist: [...this.state.userlist, ...userList], filteredlist: [...this.state.filteredlist, ...filteredUserList] });\n                \n            }).catch((error) => {\n\n                this.decoratorMessage = \"Error\";\n                console.error(\"[CometChatAddMembers] getUsers fetchNext error\", error);\n            });\n  \n        }).catch((error) => {\n\n            this.decoratorMessage = \"Error\";\n            console.log(\"[CometChatAddMembers] getUsers getLoggedInUser error\", error);\n        });\n    }\n  \n    setAvatar(user) {\n  \n      if(!user.getAvatar()) {\n        const uid = user.getUid();\n        const char = user.getName().charAt(0).toUpperCase();\n        user.setAvatar(SvgAvatar.getAvatar(uid, char))\n      }\n  \n    }\n\n    membersUpdated = (user, userState) => {\n\n        if(userState) {\n\n            const members = [...this.state.membersToAdd];\n            members.push(user);\n            this.setState({membersToAdd: [...members]});\n\n        } else {\n\n            const membersToAdd = [...this.state.membersToAdd];\n            const IndexFound = membersToAdd.findIndex(member => member.uid === user.uid);\n            if(IndexFound > -1) {\n                membersToAdd.splice(IndexFound, 1);\n                this.setState({membersToAdd: [...membersToAdd]})\n            }\n        }\n    }\n\n    updateMembers = () => {\n        \n        const group = this.context;\n\n        const guid = this.props.item.guid;\n        const membersList = [];\n\n        this.state.membersToAdd.forEach(newmember => {\n            //if a selected member is already part of the member list, don't add\n            const IndexFound = group.memberlist.findIndex(member => member.uid === newmember.uid);\n            if(IndexFound === -1) {\n                \n                const newMember = new CometChat.GroupMember(newmember.uid, CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT);\n                membersList.push(newMember);\n\n                newmember[\"type\"] = \"add\";\n            }\n        });\n\n        if(membersList.length) {\n\n            const membersToAdd = [];\n            CometChat.addMembersToGroup(guid, membersList, []).then(response => {\n\n                if (Object.keys(response).length) {\n                        \n                    for (const member in response) {\n\n                        if(response[member] === \"success\") {\n\n                            const found = this.state.userlist.find(user => user.uid === member);\n                            found[\"scope\"] = CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT;\n                            membersToAdd.push(found);\n                        }\n                    }\n                    this.props.actionGenerated(\"addGroupParticipants\", membersToAdd);\n                }\n                this.props.close();\n            }).catch(error => {\n                console.log(\"addMembersToGroup failed with exception:\", error);\n            });\n        }\n    }\n\n    render() {\n\n        const group = this.context;\n\n        let messageContainer = null;\n        if (this.state.filteredlist.length === 0) {\n\n            messageContainer = (\n                <caption css={contactMsgStyle()} className=\"members__decorator-message\">\n                    <p css={contactMsgTxtStyle(this.props)} className=\"decorator-message\">{this.decoratorMessage}</p>\n                </caption>\n            );\n        }\n\n        let currentLetter = \"\";\n        const filteredUserList = [...this.state.filteredlist];\n        const users = filteredUserList.map((user, key) => {\n\n            const chr = user.name[0].toUpperCase();\n            let firstLetter = null;\n            if(chr !== currentLetter) {\n                currentLetter = chr;\n                firstLetter = currentLetter;\n            }\n\n            return (\n                <React.Fragment key={user.uid}>\n                    <AddMemberView \n                    theme={this.props.theme}\n                    firstLetter={firstLetter}\n                    loggedinuser={group.loggedinuser}\n                    user={user}\n                    members={group.memberlist}\n                    changed={this.membersUpdated}\n                    widgetsettings={this.props.widgetsettings} />\n                </React.Fragment>\n            )\n        });\n\n        return (\n            <React.Fragment>\n                <Backdrop show={this.props.open} clicked={this.props.close} />\n                <div css={modalWrapperStyle(this.props)} className=\"modal__addmembers\">\n                    <span css={modalCloseStyle(clearIcon)} className=\"modal__close\" onClick={this.props.close} title=\"Close\"></span>\n                    <div css={modalBodyCtyle()} className=\"modal__body\">\n                        <table css={modalTableStyle()}>\n                            <caption css={tableCaptionStyle()} className=\"modal__title\">Contacts</caption>\n                            <caption css={tableSearchStyle()} className=\"modal__search\">\n                                <input\n                                type=\"text\" \n                                autoComplete=\"off\" \n                                css={searchInputStyle(this.props, searchIcon)}\n                                className=\"search__input\" \n                                placeholder=\"Search\"\n                                onChange={this.searchUsers} />\n                            </caption>\n                            {messageContainer}\n                            <tbody css={tableBodyStyle(this.props)} onScroll={this.handleScroll}>{users}</tbody>\n                            <tfoot css={tableFootStyle(this.props)}>\n                                <tr>\n                                    <td colSpan=\"2\" className=\"addmembers\"><button onClick={this.updateMembers}>Add</button></td>\n                                </tr>\n                            </tfoot>\n                        </table>\n                    </div>\n                </div>\n            </React.Fragment>\n        );\n    }\n}\n\nexport default CometChatAddMembers;","export const tableRowStyle = (props) => {\n\n    return {\n        border: `1px solid ${props.theme.borderColor.primary}`,\n        display: \"table\",\n        width: \"100%\",\n        tableLayout: \"fixed\",\n        fontSize: \"14px\",\n        \"td\": {\n            padding: \".625em\",\n            \"img\": {\n                width: \"36px\",\n                height: \"36px\",\n                float: \"left\",\n            }\n        }\n    }\n}\n\nexport const avatarStyle = () => {\n\n    return {\n        display: \"inline-block\",\n        float: \"left\",\n        \"span\": {\n            top: \"26px\",\n            left: \"-8px\",\n        }\n    }\n}\n\nexport const nameStyle = () => {\n\n    return {\n        margin: \"10px 0 0 0\",\n        width: \"calc(100% - 50px)\",\n        overflow: \"hidden\",\n        textOverflow: \"ellipsis\",\n        whiteSpace: \"nowrap\"\n    }\n}\n\nexport const roleStyle = () => {\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n        width: \"150px\",\n        fontSize: \"12px\",\n        [mq[0]]: {\n            width: \"115px\"\n        }\n    }\n}\n\nexport const actionStyle = () => {\n\n    return {\n        width: \"70px\",\n        \"img\": {\n            width: \"20px!important\",\n            height: \"20px!important\",\n            cursor: \"pointer\",\n        },\n    }\n}","/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nimport { CometChat } from \"@cometchat-pro/chat\";\n\nimport Avatar from \"../Avatar\";\nimport StatusIndicator from \"../StatusIndicator\";\n\nimport {\n    tableRowStyle,\n    avatarStyle,\n    nameStyle,\n    roleStyle,\n    actionStyle\n} from \"./style\";\n\nimport unban from \"./resources/block.svg\";\n\nconst memberview = (props) => {\n\n    const roles = {}\n    roles[CometChat.GROUP_MEMBER_SCOPE.ADMIN] = \"Administrator\";\n    roles[CometChat.GROUP_MEMBER_SCOPE.MODERATOR] = \"Moderator\";\n    roles[CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT] = \"Participant\";\n\n    let name = props.member.name;\n    let scope = roles[props.member.scope];\n    let unBan = (<img src={unban} alt=\"Unban\" onClick={() => {props.actionGenerated(\"unban\", props.member)}} />);\n\n    //if the loggedin user is moderator, don't allow unban of banned moderators or administrators\n    if(props.item.scope === CometChat.GROUP_MEMBER_SCOPE.MODERATOR \n    && (props.member.scope === CometChat.GROUP_MEMBER_SCOPE.ADMIN || props.member.scope === CometChat.GROUP_MEMBER_SCOPE.MODERATOR)) {\n        unBan = null;\n    }\n\n    //if the loggedin user is administrator, don't allow unban of banned administrators\n    if(props.item.scope === CometChat.GROUP_MEMBER_SCOPE.ADMIN && props.member.scope === CometChat.GROUP_MEMBER_SCOPE.ADMIN) {\n        if(props.item.owner !== props.loggedinuser.uid) {\n            unBan = null;\n        }\n    }\n\n    const toggleTooltip = (event, flag) => {\n\n        const elem = event.currentTarget;\n        const nameContainer = elem.lastChild;\n    \n        const scrollWidth = nameContainer.scrollWidth;\n        const clientWidth = nameContainer.clientWidth;\n        \n        if(scrollWidth <= clientWidth) {\n          return false;\n        }\n    \n        if(flag) {\n          nameContainer.setAttribute(\"title\", nameContainer.textContent);\n        } else {\n          nameContainer.removeAttribute(\"title\");\n        }\n      }\n    \n    return (\n        <tr css={tableRowStyle(props)}>\n            <td \n            onMouseEnter={event => toggleTooltip(event, true)}\n            onMouseLeave={event => toggleTooltip(event, false)}>\n                <div css={avatarStyle()} className=\"avatar\">\n                    <Avatar \n                    image={props.member.avatar} \n                    cornerRadius=\"18px\" \n                    borderColor={props.theme.borderColor.primary}\n                    borderWidth=\"1px\" />\n                    <StatusIndicator\n                    widgetsettings={props.widgetsettings}\n                    status={props.member.status}\n                    cornerRadius=\"50%\" \n                    borderColor={props.theme.borderColor.primary}\n                    borderWidth=\"1px\" />\n                </div>\n                <div css={nameStyle()} className=\"name\">{name}</div>\n            </td>\n            <td css={roleStyle()} className=\"role\">{scope}</td>\n            <td css={actionStyle()} className=\"unban\">{unBan}</td>\n        </tr>\n    );\n}\n\nexport default memberview;","export const modalWrapperStyle = (props) => {\n\n    const show = (props.open) ? {\n        display: \"block\",\n    } : {};\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n        minWidth: \"350px\",\n        minHeight: \"450px\",\n        width: \"40%\",\n        height: \"40%\",\n        overflow: \"hidden\",\n        backgroundColor: `${props.theme.backgroundColor.white}`,\n        position: \"fixed\",\n        left: \"50%\",\n        top: \"50%\",\n        transform: \"translate(-50%, -50%)\",\n        zIndex: \"1002\",\n        margin: \"0 auto\",\n        boxShadow: \"rgba(20, 20, 20, 0.2) 0 16px 32px, rgba(20, 20, 20, 0.04) 0 0 0 1px\",\n        borderRadius: \"12px\",\n        display: \"none\",\n        ...show,\n        [mq[0]]: {\n            width: \"100%\",\n            height: \"100%\"\n        }\n    }\n}\n\nexport const modalCloseStyle = (img) => {\n\n    return {\n        position: \"absolute\",\n        width: \"32px\",\n        height: \"32px\",\n        borderRadius: \"50%\",\n        top: \"16px\",\n        right: \"16px\",\n        background: `url(${img}) center center no-repeat`,\n        cursor: \"pointer\",\n    }\n}\n\nexport const modalBodyStyle = () => {\n\n    return {\n        padding: \"25px\",\n        height: \"100%\",\n        width: \"100%\"\n    }\n}\n\nexport const modalTableStyle = (props) => {\n\n    return {\n        borderCollapse: \"collapse\",\n        margin: \"0\",\n        padding: \"0\",\n        width: \"100%\",\n        height: \"90%\",\n        \"tr\": {\n            border: `1px solid ${props.theme.borderColor.primary}`,\n            display: \"table\",\n            width: \"100%\",\n            tableLayout: \"fixed\",\n        },\n        \"th\": {\n            padding: \"8px\",\n            fontSize: \"12px\",\n            textAlign: \"left\"\n        }\n    }\n}\n\nexport const tableCaptionStyle = () => {\n\n    return {\n        fontSize: \"20px\",\n        marginBottom: \"15px\",\n        fontWeight: \"bold\",\n        textAlign: \"left\",\n    }\n}\n\nexport const tableBodyStyle = () => {\n\n    return {\n        height: \"340px\",\n        overflowY: \"auto\",\n        display: \"block\"\n    }\n}\n\nexport const roleColumnStyle = () => {\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n        width: \"150px\",\n        [mq[0]]: {\n            width: \"115px\"\n        }\n    }\n}\n\nexport const actionColumnStyle = () => {\n\n    return {\n        width: \"70px\"\n    }\n}\n\nexport const contactMsgStyle = () => {\n\n    return {\n        overflow: \"hidden\",\n        width: \"100%\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        height: \"55%\",\n    }\n}\n\nexport const contactMsgTxtStyle = (props) => {\n\n    return {\n        margin: \"0\",\n        height: \"30px\",\n        color: `${props.theme.color.secondary}`,\n        fontSize: \"24px!important\",\n        fontWeight: \"600\"\n    }\n}","import React from \"react\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core'\n\nimport { CometChat } from \"@cometchat-pro/chat\";\n\nimport BanMemberView from \"../BanMemberView\";\nimport Backdrop from '../Backdrop';\n\nimport GroupDetailContext from '../CometChatGroupDetail/context';\n\nimport {\n    modalWrapperStyle,\n    modalCloseStyle,\n    modalBodyStyle,\n    modalTableStyle,\n    tableCaptionStyle,\n    tableBodyStyle,\n    roleColumnStyle,\n    actionColumnStyle,\n    contactMsgStyle,\n    contactMsgTxtStyle\n} from \"./style\";\n\nimport clearIcon from \"./resources/clear.svg\";\n\nclass CometChatBanMembers extends React.Component {\n\n    decoratorMessage = \"Loading...\";\n    static contextType = GroupDetailContext;\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            membersToBan: [],\n            membersToUnBan: []\n        }\n    }\n\n    unbanMember = (memberToUnBan) => {\n\n        const group = this.context;\n\n        const guid = group.item.guid;\n        CometChat.unbanGroupMember(guid, memberToUnBan.uid).then(response => {\n            \n            if(response) {\n                console.log(\"Group member unbanning success with response\", response);\n                this.props.actionGenerated(\"unbanGroupMembers\", [memberToUnBan]);\n            }\n        }).catch(error => {\n            console.log(\"Group member banning failed with error\", error);\n        });\n    }\n\n    updateMembers = (action, member) => {\n\n        switch(action) {\n            case \"unban\":\n                this.unbanMember(member);\n                break;\n            default:\n                break;\n        }\n    }\n\n    handleScroll = (e) => {\n        const bottom = Math.round(e.currentTarget.scrollHeight - e.currentTarget.scrollTop) === Math.round(e.currentTarget.clientHeight);\n        if (bottom) {\n            this.props.actionGenerated(\"fetchBannedMembers\");\n        }\n    }\n    \n    render() {\n        \n        const group = this.context;\n        const membersList = [...group.bannedmemberlist];\n        const bannedMembers = membersList.map((member, key) => {\n\n            return (<BanMemberView \n                    theme={this.props.theme}\n                    key={key} \n                    member={member}\n                    item={this.props.item}\n                    loggedinuser={group.loggedinuser}\n                    widgetsettings={this.props.widgetsettings}\n                    actionGenerated={this.updateMembers} />);\n\n        });\n\n        let messageContainer = null;\n        if (bannedMembers.length === 0) {\n\n            this.decoratorMessage = \"No banned members found\";\n            messageContainer = (\n                <caption css={contactMsgStyle()} className=\"bannedmembers__decorator-message\">\n                    <p css={contactMsgTxtStyle(this.props)} className=\"decorator-message\">{this.decoratorMessage}</p>\n                </caption>\n            );\n        }\n        \n        return (\n            <React.Fragment>\n                <Backdrop show={this.props.open} clicked={this.props.close} />\n                <div css={modalWrapperStyle(this.props)} className=\"modal__addmembers\">\n                    <span css={modalCloseStyle(clearIcon)} className=\"modal__close\" onClick={this.props.close}></span>\n                    <div css={modalBodyStyle()} className=\"modal__body\">\n                        <table css={modalTableStyle(this.props)}>\n                            <caption css={tableCaptionStyle()} className=\"modal__title\">Banned Members</caption>\n                            <thead>\n                                <tr>\n                                    <th className=\"name\">Name</th>\n                                    <th css={roleColumnStyle()} className=\"role\">Scope</th>\n                                    <th css={actionColumnStyle()} className=\"unban\">Unban</th>\n                                </tr>\n                            </thead>\n                            {messageContainer}\n                            <tbody css={tableBodyStyle()} onScroll={this.handleScroll}>{bannedMembers}</tbody>\n                        </table>\n                    </div>\n                </div>\n            </React.Fragment>\n        );\n    }\n}\n\nexport default CometChatBanMembers;","export const detailStyle = (props) => {\n\n    return {\n        \"height\": \"100%\",\n        boxSizing: \"border-box\",\n        fontFamily: `${props.theme.fontFamily}`,\n        \"*\": {\n            boxSizing: \"border-box\",\n            fontFamily: `${props.theme.fontFamily}`,\n        }\n    }\n}\n\nexport const headerStyle = (props) => {\n\n    return {\n        padding: \"19px 16px\",\n        position: \"relative\",\n        borderBottom: `1px solid ${props.theme.borderColor.primary}`,\n        display: \"flex\",\n        justifyContent: \"flex-start\",\n        alignItems: \"center\",\n    }\n}\n\nexport const headerCloseStyle = (img) => {\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n        cursor: \"pointer\",\n        display: \"none\",\n        background: `url(${img}) center center no-repeat`,\n        width: \"24px\",\n        height: \"24px\",\n        [mq[0]]: {\n            display: \"block\"\n        },\n    }\n}\n\nexport const headerTitleStyle = () => {\n\n    return {\n        margin: \"0\",\n        fontWeight: \"700\",\n        fontSize: \"20px\"\n    }\n}\n\nexport const detailPaneStyle = () => {\n\n    return {\n        margin: \"0\",\n        padding: \"16px\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"space-between\",\n        alignItems: \"flex-start\",\n        height: \"calc(100% - 70px)\"\n    }\n}\n\nexport const sectionStyle = () => {\n\n    return {\n        width: \"100%\",\n    }\n}\n\nexport const sectionHeaderStyle = (props) => {\n\n    return {\n        margin: \"0\",\n        width: \"100%\",\n        fontSize: \"12px\",\n        lineHeight: \"20px\",\n        color: `${props.theme.color.secondary}`,\n        textTransform: \"uppercase\",\n    }\n}\n\nexport const sectionContentStyle = () => {\n\n    return {\n        width: \"100%\",\n        margin: \"6px 0\",\n        '&:not(:last-of-type)': {\n            marginBottom: \"16px\",\n        }\n    }\n}\n\nexport const contentItemStyle = () => {\n\n    return {\n        position: \"relative\",\n        display: \"flex\",\n        clear: \"both\",\n        width: \"100%\",\n        padding:\" 6px 0\",\n        '&:first-of-type': {\n            paddingTop: \"0\",\n        },\n        '&:last-of-type': {\n            paddingBottom: \"0\",\n        }\n    }\n}\n\nexport const itemLinkStyle = (props, deleteLink) => {\n\n    const deleteCss = (deleteLink) ? {\n        color: `${props.theme.color.red}`,\n    } : {};\n\n    return {\n        fontSize: \"15px\",\n        lineHeight: \"20px\",\n        display: \"inline-block\",\n        cursor: \"pointer\",\n        fontWeight: \"600\",\n        ...deleteCss\n    }\n}","import React from 'react';\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nimport { CometChat } from \"@cometchat-pro/chat\";\n\nimport { CometChatManager } from \"../../util/controller\";\nimport { SvgAvatar } from '../../util/svgavatar';\n\nimport * as enums from '../../util/enums.js';\n\nimport { GroupDetailManager } from \"./controller\";\nimport GroupDetailContext from './context';\n\nimport CometChatViewMembers from \"../CometChatViewMembers\";\nimport CometChatAddMembers from \"../CometChatAddMembers\";\nimport CometChatBanMembers from \"../CometChatBanMembers\";\n\nimport SharedMediaView from \"../SharedMediaView\";\n\nimport {\n    detailStyle,\n    headerStyle,\n    headerCloseStyle,\n    headerTitleStyle,\n    detailPaneStyle,\n    sectionStyle,\n    sectionHeaderStyle,\n    sectionContentStyle,\n    contentItemStyle,\n    itemLinkStyle\n} from \"./style\";\n\nimport navigateIcon from \"./resources/navigate_before.svg\";\n\nclass CometChatGroupDetail extends React.Component {\n\n    loggedInUser = null;\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            user: {},\n            memberlist: [],\n            bannedmemberlist: [],\n            administratorslist: [],\n            moderatorslist: [],\n            viewMember: false,\n            addMember: false,\n            banMember: false,\n            addAdministrator: false,\n            addModerator: false\n        }\n    }\n\n    componentDidMount() {\n\n        this.setState({\n            memberlist: [],\n            administratorslist: [],\n            moderatorslist: [],\n            bannedmemberlist: []\n        });\n\n        const guid = this.props.item.guid;\n        this.GroupDetailManager = new GroupDetailManager(guid);\n        this.getGroupMembers();\n        this.getBannedGroupMembers();\n        this.GroupDetailManager.attachListeners(this.groupUpdated);\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n\n        if (prevProps.item.guid !== this.props.item.guid) {\n\n            this.setState({\n                memberlist: [],\n                administratorslist: [],\n                moderatorslist: [],\n                bannedmemberlist: []\n            });\n\n            const guid = this.props.item.guid;\n            this.GroupDetailManager.removeListeners();\n            this.GroupDetailManager = new GroupDetailManager(guid);\n            this.getGroupMembers();\n            this.getBannedGroupMembers();\n            this.GroupDetailManager.attachListeners(this.groupUpdated);\n        }\n    }\n\n    componentWillUnmount() {\n\n        this.GroupDetailManager.removeListeners();\n        this.GroupDetailManager = null;\n    }\n\n    groupUpdated = (key, message, group, options) => {\n        \n        const guid = this.props.item.guid;\n        if(guid !== group.guid) {\n            return false;\n        }\n        \n        switch(key) {\n            case enums.USER_ONLINE:\n            case enums.USER_OFFLINE: \n                this.groupMemberUpdated(options.user);\n            break;\n            case enums.GROUP_MEMBER_ADDED:\n            case enums.GROUP_MEMBER_JOINED: {\n\n                const member = options.user;\n                this.setAvatar(member);\n                \n                const updatedMember = Object.assign({}, member, { scope: CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT });\n                \n                this.addParticipants([updatedMember], false);\n            }\n            break;\n            case enums.GROUP_MEMBER_LEFT:\n            case enums.GROUP_MEMBER_KICKED: {\n                const member = options.user;\n                this.removeParticipants(member, false);\n            }\n            break;\n            case enums.GROUP_MEMBER_BANNED: {\n                const member = options.user;\n                this.setAvatar(member);\n                this.banMembers([member]);\n                this.removeParticipants(member, false);\n            }\n            break;\n            case enums.GROUP_MEMBER_UNBANNED: {\n                const member = options.user;\n                this.unbanMembers([member]);\n            }\n            break;\n            case enums.GROUP_MEMBER_SCOPE_CHANGED: {\n                const member = options.user;\n                const updatedMember = Object.assign({}, member, {scope: options[\"scope\"]});\n                this.updateParticipants(updatedMember);\n            }\n            break;\n            default:\n            break;\n        }\n    }\n\n    groupMemberUpdated = (member) => {\n        \n        let memberlist = [...this.state.memberlist];\n        //search for user\n        let memberKey = memberlist.findIndex((m, k) => m.uid === member.uid);\n        //if found in the list, update user object\n        if(memberKey > -1) {\n    \n          let memberObj =  memberlist[memberKey];\n          let newMemberObj = Object.assign({}, memberObj, member);\n          memberlist.splice(memberKey, 1, newMemberObj);\n    \n          this.setState({ memberlist: memberlist });\n        }\n\n\n        let bannedmemberlist = [...this.state.bannedmemberlist];\n        //search for user\n        let bannedMemberKey = bannedmemberlist.findIndex((m, k) => m.uid === member.uid);\n        //if found in the list, update user object\n        if(bannedMemberKey > -1) {\n    \n          let bannedMemberObj =  bannedmemberlist[bannedMemberKey];\n          let newBannedMemberObj = Object.assign({}, bannedMemberObj, member);\n          bannedmemberlist.splice(bannedMemberKey, 1, newBannedMemberObj);\n    \n          this.setState({ bannedmemberlist: bannedmemberlist });\n        }\n    }\n\n    getGroupMembers = () => {\n\n        const administratorslist = [], moderatorslist = []; \n        new CometChatManager().getLoggedInUser().then(user => {\n\n            this.loggedInUser = user;\n            this.GroupDetailManager.fetchNextGroupMembers().then(groupMembers => {\n\n                groupMembers.forEach(member => {\n\n                    this.setAvatar(member);\n\n                    if(member.scope === \"admin\") {\n                        administratorslist.push(member);\n                    }\n        \n                    if(member.scope === \"moderator\") {\n                        moderatorslist.push(member);\n                    }\n                });\n                this.setState({ \n                    memberlist: [...this.state.memberlist, ...groupMembers], \n                    administratorslist: [...this.state.administratorslist, ...administratorslist], \n                    moderatorslist: [...this.state.moderatorslist, ...moderatorslist] \n                });\n\n            }).catch(error => {\n                console.error(\"[CometChatGroupDetail] getGroupMembers fetchNextGroupMembers error\", error);\n            });\n\n        }).catch(error => {\n            console.log(\"[CometChatGroupDetail] getGroupMembers getLoggedInUser error\", error);\n        });\n    }\n\n    getBannedGroupMembers = () => {\n\n        if(this.props.item.scope === CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT) {\n            return false;\n        }\n\n        new CometChatManager().getLoggedInUser().then(user => {\n\n            this.GroupDetailManager.fetchNextBannedGroupMembers().then(bannedMembers => {\n\n                bannedMembers.forEach(member => this.setAvatar(member));\n\n                this.setState({ \n                    bannedmemberlist: [...this.state.bannedmemberlist, ...bannedMembers] \n                });\n\n            }).catch(error => {\n                console.error(\"[CometChatGroupDetail] getGroupMembers fetchNextGroupMembers error\", error);\n            });\n\n        }).catch(error => {\n            console.log(\"[CometChatGroupDetail] getGroupMembers getLoggedInUser error\", error);\n        });\n    }\n    \n    setAvatar(member) {\n\n        if(!member.avatar) {\n    \n          const uid = member.uid;\n          const char = member.name.charAt(0).toUpperCase();\n\n          member.avatar = (SvgAvatar.getAvatar(uid, char));\n        }\n    }\n\n    deleteGroup = () => {\n\n        const guid = this.props.item.guid;\n        CometChat.deleteGroup(guid).then(response => {\n            console.log(\"Groups deleted successfully:\", response);\n            this.props.actionGenerated(\"groupDeleted\", this.props.item);\n        }).catch(error => {\n            console.log(\"Group delete failed with exception:\", error);\n        });\n    }\n\n    leaveGroup = () => {\n\n        const guid = this.props.item.guid;\n        CometChat.leaveGroup(guid).then(hasLeft => {\n            \n            console.log(\"Group left successfully:\", hasLeft);\n            this.props.actionGenerated(\"leftGroup\", this.props.item);\n        }).catch(error => {\n            console.log(\"Group leaving failed with exception:\", error);\n        });\n    }\n\n    clickHandler = (action, flag) => {\n\n        switch(action) {\n            case \"viewmember\":\n                this.setState({viewMember: flag});\n            break;\n            case \"addmember\":\n                this.setState({addMember: flag});\n            break;\n            case \"banmember\":\n                this.setState({banMember: flag});\n            break;\n            default:\n            break;\n        }\n    }\n\n    membersActionHandler = (action, members) => {\n        \n        switch(action) {\n            case \"banGroupMembers\":\n                this.banMembers(members);\n                break;\n            case \"unbanGroupMembers\":\n                this.unbanMembers(members);\n                break;\n            case \"addGroupParticipants\":\n                this.addParticipants(members);\n                break;\n            case \"removeGroupParticipants\":\n                this.removeParticipants(members);\n                break;\n            case \"updateGroupParticipants\":\n                this.updateParticipants(members);\n                break;\n            case \"fetchGroupMembers\":\n                this.getGroupMembers();\n                break;\n            case \"fetchBannedMembers\":\n                this.getBannedGroupMembers();\n                break;\n            default:\n                break;\n        }\n    }\n\n    banMembers = (members) => {\n        this.setState({\n            bannedmemberlist: [...this.state.bannedmemberlist, ...members],\n        });\n    }\n\n    unbanMembers = (members) => {\n\n        const bannedMembers = [...this.state.bannedmemberlist];\n        const unbannedMembers = [];\n\n        const filteredBannedMembers = bannedMembers.filter(bannedmember => {\n\n            const found = members.find(member => bannedmember.uid === member.uid);\n            if(found) {\n                unbannedMembers.push(found);\n                return false;\n            }\n            return true;\n        });\n\n        this.props.actionGenerated(\"memberUnbanned\", unbannedMembers);\n\n        this.setState({\n            bannedmemberlist: [...filteredBannedMembers]\n        });\n    }\n\n    addParticipants = (members, triggerUpdate = true) => {\n        \n        const memberlist = [...this.state.memberlist, ...members];\n\n        this.setState({\n            memberlist: memberlist,\n        });\n\n        this.props.actionGenerated(\"membersAdded\", members);\n        if(triggerUpdate) {\n            this.props.actionGenerated(\"membersUpdated\", this.props.item, memberlist.length);\n        }\n    }\n\n    removeParticipants = (member, triggerUpdate = true) => {\n        \n        const groupmembers = [...this.state.memberlist];\n        const filteredMembers = groupmembers.filter(groupmember => {\n\n            if(groupmember.uid === member.uid) {\n                return false;\n            }\n            return true;\n        });\n\n        this.setState({memberlist: filteredMembers});\n\n        if(triggerUpdate) {\n            this.props.actionGenerated(\"membersUpdated\", this.props.item, filteredMembers.length);\n        }\n    }\n\n    updateParticipants = (updatedMember) => {\n\n        const memberlist = [...this.state.memberlist];\n\n        const memberKey = memberlist.findIndex(member => member.uid === updatedMember.uid);\n        if(memberKey > -1) {\n\n            const memberObj = memberlist[memberKey];\n            const newMemberObj = Object.assign({}, memberObj, updatedMember, {\"scope\": updatedMember[\"scope\"]});\n\n            memberlist.splice(memberKey, 1, newMemberObj);\n\n            this.props.actionGenerated(\"memberScopeChanged\", [newMemberObj]);\n            this.setState({memberlist: memberlist});\n        }\n    }\n\n    render() {\n\n        let viewMembersBtn = (\n            <div css={contentItemStyle()} className=\"content__item\">\n                <div css={itemLinkStyle(this.props, 0)} className=\"item__link\" onClick={() => this.clickHandler(\"viewmember\", true)}>View Members</div>                                           \n            </div>\n        );\n\n        let addMembersBtn = null, deleteGroupBtn = null, bannedMembersBtn = null;\n        if(this.props.item.scope === CometChat.GROUP_MEMBER_SCOPE.ADMIN) {\n            addMembersBtn = (\n                <div css={contentItemStyle()} className=\"content__item\">\n                    <div css={itemLinkStyle(this.props, 0)} className=\"item__link\" onClick={() => this.clickHandler(\"addmember\", true)}>Add Members</div>                                           \n                </div>\n            );\n\n            deleteGroupBtn = (\n                <div css={contentItemStyle()} className=\"content__item\">\n                    <span css={itemLinkStyle(this.props, 1)} className=\"item__link\" onClick={this.deleteGroup}>Delete and Exit</span>\n                </div>\n            );\n        }\n        \n        if(this.props.item.scope !== CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT) {\n            bannedMembersBtn = (\n                <div css={contentItemStyle()} className=\"content__item\">\n                    <div css={itemLinkStyle(this.props, 0)} className=\"item__link\" onClick={() => this.clickHandler(\"banmember\", true)}>Banned Members</div>                                           \n                </div>\n            );\n        }\n\n        let leaveGroupBtn = (\n            <div css={contentItemStyle()} className=\"content__item\">\n                <span css={itemLinkStyle(this.props, 0)} className=\"item__link\" onClick={this.leaveGroup}>Leave Group</span>\n            </div>\n        );\n\n        let sharedmediaView = (\n            <SharedMediaView theme={this.props.theme} containerHeight=\"225px\" item={this.props.item} type={this.props.type} widgetsettings={this.props.widgetsettings} />\n        );\n\n        if(this.props.hasOwnProperty(\"widgetsettings\") \n        && this.props.widgetsettings\n        && this.props.widgetsettings.hasOwnProperty(\"main\")) {\n\n            //if view_group_members is disabled in chatwidget\n            if(this.props.widgetsettings.main.hasOwnProperty(\"view_group_members\")\n            && this.props.widgetsettings.main[\"view_group_members\"] === false\n            && this.props.widgetsettings.main.hasOwnProperty(\"allow_kick_ban_members\")\n            && this.props.widgetsettings.main[\"allow_kick_ban_members\"] === false\n            && this.props.widgetsettings.main.hasOwnProperty(\"allow_promote_demote_members\")\n            && this.props.widgetsettings.main[\"allow_promote_demote_members\"] === false) {\n                viewMembersBtn = null;\n            }\n\n            //if add_group_members is disabled in chatwidget\n            if(this.props.widgetsettings.main.hasOwnProperty(\"allow_add_members\")\n            && this.props.widgetsettings.main[\"allow_add_members\"] === false) {\n                addMembersBtn = null;\n            }\n\n            //if allow_kick_ban_members is disabled in chatwidget\n            if(this.props.widgetsettings.main.hasOwnProperty(\"allow_kick_ban_members\")\n            && this.props.widgetsettings.main[\"allow_kick_ban_members\"] === false) {\n                bannedMembersBtn = null;\n            }\n\n            //if delete_group is disabled in chatwidget\n            if(this.props.widgetsettings.main.hasOwnProperty(\"allow_delete_groups\")\n            && this.props.widgetsettings.main[\"allow_delete_groups\"] === false) {\n                deleteGroupBtn = null;\n            }\n\n            //if leave_group is disabled in chatwidgets\n            if(this.props.widgetsettings.main.hasOwnProperty(\"join_or_leave_groups\")\n            && this.props.widgetsettings.main[\"join_or_leave_groups\"] === false) {\n                leaveGroupBtn = null;\n            }\n\n            //if view_shared_media is disabled in chatwidget\n            if(this.props.widgetsettings.main.hasOwnProperty(\"view_shared_media\")\n            && this.props.widgetsettings.main[\"view_shared_media\"] === false) {\n                sharedmediaView = null;\n            }\n        }\n\n        let members = (\n            <div css={sectionStyle()} className=\"section section__members\">\n                <h6 css={sectionHeaderStyle(this.props)} className=\"section__header\">Members</h6>\n                <div css={sectionContentStyle()} className=\"section__content\">\n                    {viewMembersBtn}\n                    {addMembersBtn}\n                    {bannedMembersBtn}\n                </div>\n            </div>\n        );\n\n        let options = (\n            <div css={sectionStyle()} className=\"section section__options\">\n                <h6 css={sectionHeaderStyle(this.props)} className=\"section__header\">Options</h6>\n                <div css={sectionContentStyle()} className=\"section__content\">\n                    {leaveGroupBtn}\n                    {deleteGroupBtn}\n                </div>\n            </div>\n        );\n\n        if(viewMembersBtn === null && addMembersBtn === null && bannedMembersBtn === null) {\n            members = null;\n        }\n\n        if(leaveGroupBtn === null && deleteGroupBtn === null) {\n            options = null;\n        }\n\n        let viewMembers = null;\n        if(this.state.viewMember) {\n            viewMembers = (\n                <CometChatViewMembers \n                theme={this.props.theme}\n                item={this.props.item}\n                open={this.state.viewMember}\n                close={() => this.clickHandler(\"viewmember\", false)}\n                widgetsettings={this.props.widgetsettings}\n                actionGenerated={this.membersActionHandler} />\n            );\n        }\n\n        let addMembers = null;\n        if(this.state.addMember) {\n            addMembers = (\n                <CometChatAddMembers \n                theme={this.props.theme}\n                item={this.props.item}\n                open={this.state.addMember} \n                close={() => this.clickHandler(\"addmember\", false)}\n                widgetsettings={this.props.widgetsettings}\n                actionGenerated={this.membersActionHandler} />\n            );\n        }\n\n        let bannedMembers = null;\n        if(this.state.banMember) {\n            bannedMembers = (\n                <CometChatBanMembers\n                theme={this.props.theme}\n                item={this.props.item}\n                open={this.state.banMember} \n                close={() => this.clickHandler(\"banmember\", false)}\n                widgetsettings={this.props.widgetsettings}\n                actionGenerated={this.membersActionHandler}  />\n            );\n        }\n\n        return (\n            <div css={detailStyle(this.props)} className=\"detailpane\">\n                <GroupDetailContext.Provider \n                value={{\n                    memberlist: this.state.memberlist,\n                    bannedmemberlist: this.state.bannedmemberlist,\n                    administratorslist: this.state.administratorslist,\n                    moderatorslist: this.state.moderatorslist,\n                    loggedinuser: this.loggedInUser,\n                    item: this.props.item\n                }}>\n                    <div css={headerStyle(this.props)} className=\"detailpane__header\">\n                        <div css={headerCloseStyle(navigateIcon)} className=\"header__close\" onClick={() => this.props.actionGenerated(\"closeDetailClicked\")}></div>\n                        <h4 css={headerTitleStyle()} className=\"header__title\">Details</h4>\n                    </div>\n                    <div css={detailPaneStyle()} className=\"detailpane__section\">\n                        {members}\n                        {options}\n                        {sharedmediaView}\n                    </div>\n                    {viewMembers}\n                    {addMembers}\n                    {bannedMembers}\n                </GroupDetailContext.Provider>\n            </div>\n        );\n    }\n}\n\nexport default CometChatGroupDetail;","export const groupScreenStyle = (theme) => {\n\n    return {\n        display: \"flex\",\n        height: \"100%\",\n        width: \"100%\",\n        boxSizing: \"border-box\",\n        fontFamily: `${theme.fontFamily}`,\n        \"*\": {\n            boxSizing: \"border-box\",\n            fontFamily: `${theme.fontFamily}`,\n        }\n    }\n}\n\nexport const groupScreenSidebarStyle = (state, theme) => {\n\n    const sidebarView = (state.sidebarview) ? {\n        left: \"0\",\n        boxShadow: \"rgba(0, 0, 0, .4) -30px 0 30px 30px\"\n    } : {};\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n\n        width: \"280px\",\n        borderRight: `1px solid ${theme.borderColor.primary}`,\n        height: \"100%\",\n        position: \"relative\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        \".css-15jyeqi\": {\n            height: \"calc(100% - 130px)\",\n        },\n        [mq[0]]: {\n            position: \"absolute!important\",\n            left: \"-100%\",\n            top: \"0\",\n            bottom: \"0\",\n            width: \"100%!important\",\n            zIndex: \"2\",\n            backgroundColor: `${theme.backgroundColor.white}`,\n            transition: \"all .3s ease-out\",\n            ...sidebarView\n        }\n    }\n}\n\nexport const groupScreenMainStyle = (state) => {\n\n    const secondaryView = (state.threadmessageview || state.detailview) ? {\n        width: \"calc(100% - 680px)\"\n    } : {};\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n        width: \"calc(100% - 280px)\",\n        height: \"100%\",\n        order: \"2\",\n        ...secondaryView,\n        [mq[0]]: {\n            width: \"100%!important\",\n        }\n    }\n}\n\nexport const groupScreenSecondaryStyle = (theme) => {\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n        float: \"right\",\n        borderLeft: `1px solid ${theme.borderColor.primary}`,\n        height: \"100%\",\n        width: \"400px\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        order: \"3\",\n        [mq[0]]: {\n            position: \"absolute!important\",\n            right: \"0!important\",\n            top: \"0\",\n            bottom: \"0\",\n            width: \"100%!important\",\n            zIndex: \"2\",\n            backgroundColor: `${theme.backgroundColor.white}`,\n        }\n    }\n}","import React from \"react\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nimport { CometChat } from \"@cometchat-pro/chat\";\n\nimport { CometChatManager } from \"../../util/controller\";\nimport * as enums from '../../util/enums.js';\n\nimport CometChatGroupList from \"../CometChatGroupList\";\nimport CometChatMessageListScreen from \"../CometChatMessageListScreen\";\nimport CometChatGroupDetail from \"../CometChatGroupDetail\";\nimport MessageThread from \"../MessageThread\";\nimport CallAlert from \"../CallAlert\";\nimport CallScreen from \"../CallScreen\";\nimport ImageView from \"../ImageView\";\n\nimport { theme } from \"../../resources/theme\";\n\nimport {\n  groupScreenStyle,\n  groupScreenSidebarStyle,\n  groupScreenMainStyle,\n  groupScreenSecondaryStyle\n} from \"./style\"\n\nclass CometChatGroupListScreen extends React.Component {\n\n  loggedInUser = null;\n\n  constructor(props) {\n\n\t\tsuper(props);\n\n    this.state = {\n      darktheme: false,\n      viewdetailscreen: false,\n      item: {},\n      type: \"group\",\n      tab: \"groups\",\n      groupToDelete: {},\n      groupToLeave: {},\n      groupToUpdate: {},\n      threadmessageview: false,\n      threadmessagetype: null,\n      threadmessageitem: {},\n      threadmessageparent: {},\n      composedthreadmessage: {},\n      incomingCall: null,\n      outgoingCall: null,\n      callmessage: {},\n      sidebarview: false,\n      imageView: null,\n      groupmessage: {}\n    }\n\n    this.theme = Object.assign({}, theme, this.props.theme);\n  }\n\n  componentDidMount() {\n\n    if(!Object.keys(this.state.item).length) {\n      this.toggleSideBar();\n    }\n\n    new CometChatManager().getLoggedInUser().then((user) => {\n      this.loggedInUser = user;\n    }).catch((error) => {\n      console.log(\"[CometChatUnified] getLoggedInUser error\", error);\n      \n    });\n  }\n\n  changeTheme = (e) => {\n    const theme = this.state.darktheme;\n    this.setState({darktheme: !theme});\n  }\n\n  itemClicked = (item, type) => {\n    \n    this.toggleSideBar();\n    this.setState({ item: {...item}, type, viewdetailscreen: false });\n  }\n\n  actionHandler = (action, item, count, ...otherProps) => {\n    \n    switch(action) {\n      case \"blockUser\":\n        this.blockUser();\n      break;\n      case \"unblockUser\":\n        this.unblockUser();\n      break;\n      case \"audioCall\":\n        this.audioCall();\n      break;\n      case \"videoCall\":\n        this.videoCall();\n      break;\n      // eslint-disable-next-line no-lone-blocks\n      case \"menuClicked\": {\n        this.toggleSideBar();\n        this.setState({ item: {} });\n      }\n      break;\n      case \"closeMenuClicked\":\n        this.toggleSideBar();\n      break;\n      case \"viewDetail\":\n      case \"closeDetailClicked\":\n        this.toggleDetailView();\n      break;\n      case \"groupUpdated\":\n        this.groupUpdated(item, count, ...otherProps);\n        break;\n      case \"groupDeleted\": \n        this.deleteGroup(item);\n      break;\n      case \"leftGroup\":\n        this.leaveGroup(item, ...otherProps);\n      break;\n      case \"membersUpdated\":\n        this.updateMembersCount(item, count);\n      break;\n      case \"viewMessageThread\":\n        this.viewMessageThread(item);\n      break;\n      case \"closeThreadClicked\":\n        this.closeThreadMessages();\n      break;\n      case \"threadMessageComposed\":\n        this.onThreadMessageComposed(item);\n      break;\n      case \"acceptIncomingCall\":\n        this.acceptIncomingCall(item);\n        break;\n      case \"acceptedIncomingCall\":\n        this.callInitiated(item);\n        break;\n      case \"rejectedIncomingCall\":\n        this.rejectedIncomingCall(item, count);\n        break;\n      case \"outgoingCallRejected\":\n      case \"outgoingCallCancelled\":\n      case \"callEnded\":\n        this.outgoingCallEnded(item);\n        break;\n      case \"userJoinedCall\":\n      case \"userLeftCall\":\n        //this.appendCallMessage(item);\n        break;\n      case \"viewActualImage\":\n        this.toggleImageView(item);\n        break;\n      case \"membersAdded\":\n        this.membersAdded(item);\n        break;\n      case \"memberUnbanned\":\n        this.memberUnbanned(item);\n        break;\n      case \"memberScopeChanged\":\n        this.memberScopeChanged(item);\n        break;\n      default:\n      break;\n    }\n  }\n\n  blockUser = () => {\n\n    let usersList = [this.state.item.uid];\n    CometChatManager.blockUsers(usersList).then(list => {\n\n        this.setState({item: {...this.state.item, blockedByMe: true}});\n\n    }).catch(error => {\n      console.log(\"Blocking user fails with error\", error);\n    });\n\n  }\n\n  unblockUser = () => {\n    \n    let usersList = [this.state.item.uid];\n    CometChatManager.unblockUsers(usersList).then(list => {\n\n        this.setState({item: {...this.state.item, blockedByMe: false}});\n\n      }).catch(error => {\n      console.log(\"unblocking user fails with error\", error);\n    });\n  }\n\n  audioCall = () => {\n\n    let receiverId, receiverType;\n    if(this.state.type === \"user\") {\n\n      receiverId = this.state.item.uid;\n      receiverType = CometChat.RECEIVER_TYPE.USER;\n\n    } else if(this.state.type === \"group\") {\n\n      receiverId = this.state.item.guid;\n      receiverType = CometChat.RECEIVER_TYPE.GROUP;\n    }\n\n    CometChatManager.call(receiverId, receiverType, CometChat.CALL_TYPE.AUDIO).then(call => {\n\n      this.appendCallMessage(call);\n      this.setState({ outgoingCall: call });\n\n    }).catch(error => {\n      console.log(\"Call initialization failed with exception:\", error);\n    });\n\n  }\n\n  videoCall = () => {\n\n    let receiverId, receiverType;\n    if(this.state.type === \"user\") {\n\n      receiverId = this.state.item.uid;\n      receiverType = CometChat.RECEIVER_TYPE.USER;\n\n    } else if(this.state.type === \"group\") {\n      receiverId = this.state.item.guid;\n      receiverType = CometChat.RECEIVER_TYPE.GROUP;\n    }\n   \n    CometChatManager.call(receiverId, receiverType, CometChat.CALL_TYPE.VIDEO).then(call => {\n\n      this.appendCallMessage(call);\n      this.setState({ outgoingCall: call });\n\n    }).catch(error => {\n      console.log(\"Call initialization failed with exception:\", error);\n    });\n\n  }\n\n  toggleSideBar = () => {\n\n    const sidebarview = this.state.sidebarview;\n    this.setState({ sidebarview: !sidebarview });\n  }\n\n  toggleDetailView = () => {\n    let viewdetail = !this.state.viewdetailscreen;\n    this.setState({viewdetailscreen: viewdetail,  threadmessageview: false});\n  }\n\n  deleteGroup = (group) => {\n    this.setState({groupToDelete: group, item: {}, type: \"group\", viewdetailscreen: false});\n  }\n\n  leaveGroup = (group) => {\n    this.setState({groupToLeave: group, item: {}, type: \"group\", viewdetailscreen: false});\n  }\n\n  updateMembersCount = (item, count) => {\n    const group = Object.assign({}, this.state.item, {membersCount: count});\n    this.setState({item: group, groupToUpdate: group});\n  }\n\n  groupUpdated = (message, key, group, options) => {\n    \n    switch(key) {\n      case enums.GROUP_MEMBER_BANNED:\n      case enums.GROUP_MEMBER_KICKED: {\n        if(options.user.uid === this.loggedInUser.uid) {\n          this.setState({item: {}, type: \"group\", viewdetailscreen: false});\n        }\n        break;\n      }\n      case enums.GROUP_MEMBER_SCOPE_CHANGED: {\n        \n        if(options.user.uid === this.loggedInUser.uid) {\n\n          const newObj = Object.assign({}, this.state.item, {\"scope\": options[\"scope\"]})\n          this.setState({item: newObj, type: \"group\", viewdetailscreen: false});\n        }\n        break;\n      }\n      default:\n      break;\n    }\n  }\n\n  closeThreadMessages = () => {\n    this.setState({viewdetailscreen: false,  threadmessageview: false});\n  }\n\n  viewMessageThread = (parentMessage) => {\n\n    const message = {...parentMessage};\n    const threaditem = {...this.state.item};\n    this.setState({\n      threadmessageview: true, \n      threadmessageparent: message, \n      threadmessageitem: threaditem,\n      threadmessagetype: this.state.type, \n      viewdetailscreen: false\n    });\n  }\n\n  onThreadMessageComposed = (composedMessage) => {\n\n    if(this.state.type !== this.state.threadmessagetype) {\n      return false;\n    }\n\n    if((this.state.threadmessagetype === \"group\" && this.state.item.guid !== this.state.threadmessageitem.guid)\n    || (this.state.threadmessagetype === \"user\" && this.state.item.uid !== this.state.threadmessageitem.uid)) {\n      return false;\n    }\n\n    const message = {...composedMessage};\n    this.setState({composedthreadmessage: message});\n  }\n\n  acceptIncomingCall = (call) => {\n\n    this.setState({ incomingCall: call });\n\n    const type = call.receiverType;\n    const id = (type === \"user\") ? call.sender.uid : call.receiverId;\n\n    CometChat.getConversation(id, type).then(conversation => {\n\n      this.itemClicked(conversation.conversationWith, type);\n\n    }).catch(error => {\n\n      console.log('error while fetching a conversation', error);\n    });\n  }\n\n  callInitiated = (message) => {\n\n    this.appendCallMessage(message);\n  }\n\n  rejectedIncomingCall = (incomingCallMessage, rejectedCallMessage) => {\n\n    let receiverType = incomingCallMessage.receiverType;\n    let receiverId = (receiverType === \"user\") ? incomingCallMessage.sender.uid : incomingCallMessage.receiverId;\n\n    //marking the incoming call message as read\n    if (incomingCallMessage.hasOwnProperty(\"readAt\") === false) {\n      CometChat.markAsRead(incomingCallMessage.id, receiverId, receiverType);\n    }\n\n    //updating unreadcount in chats list\n    this.setState({ messageToMarkRead: incomingCallMessage });\n\n    let item = this.state.item;\n    let type = this.state.type;\n\n    receiverType = rejectedCallMessage.receiverType;\n    receiverId = rejectedCallMessage.receiverId;\n\n    if ((type === 'group' && receiverType === 'group' && receiverId === item.guid)\n      || (type === 'user' && receiverType === 'user' && receiverId === item.uid)) {\n\n      this.appendCallMessage(rejectedCallMessage);\n    }\n  }\n\n  outgoingCallEnded = (message) => {\n\n    this.setState({ outgoingCall: null, incomingCall: null });\n    this.appendCallMessage(message);\n  }\n\n  appendCallMessage = (call) => {\n\n    this.setState({ callmessage: call });\n  }\n\n  toggleImageView = (message) => {\n    this.setState({ imageView: message });\n  }\n\n  membersAdded = (members) => {\n\n    const messageList = [];\n    members.forEach(eachMember => {\n\n      const message = `${this.loggedInUser.name} added ${eachMember.name}`;\n      const sentAt = new Date() / 1000 | 0;\n      const messageObj = { \"category\": \"action\", \"message\": message, \"type\": enums.ACTION_TYPE_GROUPMEMBER, \"sentAt\": sentAt };\n      messageList.push(messageObj);\n    });\n\n    this.setState({ groupmessage: messageList });\n  }\n\n  memberUnbanned = (members) => {\n\n    const messageList = [];\n    members.forEach(eachMember => {\n\n      const message = `${this.loggedInUser.name} unbanned ${eachMember.name}`;\n      const sentAt = new Date() / 1000 | 0;\n      const messageObj = { \"category\": \"action\", \"message\": message, \"type\": enums.ACTION_TYPE_GROUPMEMBER, \"sentAt\": sentAt };\n      messageList.push(messageObj);\n    });\n\n    this.setState({ groupmessage: messageList });\n  }\n\n  memberScopeChanged = (members) => {\n\n    const messageList = [];\n\n    members.forEach(eachMember => {\n\n      const message = `${this.loggedInUser.name} made ${eachMember.name} ${eachMember.scope}`;\n      const sentAt = new Date() / 1000 | 0;\n      const messageObj = { \"category\": \"action\", \"message\": message, \"type\": enums.ACTION_TYPE_GROUPMEMBER, \"sentAt\": sentAt };\n      messageList.push(messageObj);\n    });\n\n    this.setState({ groupmessage: messageList });\n  }\n\n  render() {\n\n    let threadMessageView = null;\n    if(this.state.threadmessageview) {\n      threadMessageView = (\n        <div css={groupScreenSecondaryStyle(this.theme)} className=\"groups__secondary-view\">\n          <MessageThread\n          theme={this.theme}\n          tab={this.state.tab}\n          item={this.state.threadmessageitem}\n          type={this.state.threadmessagetype}\n          parentMessage={this.state.threadmessageparent}\n          loggedInUser={this.loggedInUser}\n          actionGenerated={this.actionHandler} />\n        </div>\n      );\n    }\n\n    let detailScreen;\n    if(this.state.viewdetailscreen) {\n\n      detailScreen = (\n        <div css={groupScreenSecondaryStyle(this.theme)} className=\"groups__secondary-view\">\n        <CometChatGroupDetail\n          theme={this.theme}\n          item={this.state.item} \n          type={this.state.type}\n          actionGenerated={this.actionHandler} />\n        </div>\n      );\n      \n    }\n\n    let messageScreen = null;\n    if(Object.keys(this.state.item).length) {\n      messageScreen = (\n        <CometChatMessageListScreen\n        theme={this.theme}\n        item={this.state.item} \n        tab={this.state.tab}\n        type={this.state.type}\n        composedthreadmessage={this.state.composedthreadmessage}\n        callmessage={this.state.callmessage}\n        groupmessage={this.state.groupmessage}\n        loggedInUser={this.loggedInUser}\n        actionGenerated={this.actionHandler} />\n      );\n    }\n\n    let imageView = null;\n    if (this.state.imageView) {\n      imageView = (<ImageView open={true} close={() => this.toggleImageView(null)} message={this.state.imageView} />);\n    }\n\n    return (\n      <div css={groupScreenStyle(this.theme)} className=\"cometchat cometchat--groups\">\n        <div css={groupScreenSidebarStyle(this.state, this.theme)} className=\"groups__sidebar\">\n          <CometChatGroupList\n          theme={this.theme}\n          item={this.state.item}\n          type={this.state.type}\n          groupToDelete={this.state.groupToDelete}\n          groupToLeave={this.state.groupToLeave}\n          groupToUpdate={this.state.groupToUpdate}\n          onItemClick={this.itemClicked}\n          actionGenerated={this.actionHandler}\n          enableCloseMenu={Object.keys(this.state.item).length} />\n        </div>\n        <div css={groupScreenMainStyle(this.state)} className=\"groups__main\">{messageScreen}</div>\n        {detailScreen}\n        {threadMessageView}\n        <CallAlert\n        theme={this.theme}\n        actionGenerated={this.actionHandler} />\n        <CallScreen\n        theme={this.theme}\n        item={this.state.item} \n        type={this.state.type}\n        incomingCall={this.state.incomingCall}\n        outgoingCall={this.state.outgoingCall}\n        loggedInUser={this.loggedInUser}\n        actionGenerated={this.actionHandler} />\n        {imageView}\n      </div>\n    );\n  }\n}\n\nexport default CometChatGroupListScreen;","import { CometChat } from \"@cometchat-pro/chat\";\n\nimport * as enums from '../../util/enums.js';\n\nexport class ConversationListManager {\n\n    conversationRequest = null;\n\n    conversationListenerId = \"chatlist_\" + new Date().getTime();\n    userListenerId = \"chatlist_user_\" + new Date().getTime();\n    groupListenerId = \"chatlist_group_\" + new Date().getTime();\n    callListenerId = \"chatlist_call_\" + new Date().getTime();\n\n    constructor() {\n        this.conversationRequest = new CometChat.ConversationsRequestBuilder().setLimit(30).build();\n    }\n\n    fetchNextConversation() {\n        return this.conversationRequest.fetchNext();\n    }\n\n    attachListeners(callback) {\n\n        CometChat.addUserListener(\n            this.userListenerId,\n            new CometChat.UserListener({\n                onUserOnline: onlineUser => {\n                    /* when someuser/friend comes online, user will be received here */\n                    callback(enums.USER_ONLINE, onlineUser);\n                },\n                onUserOffline: offlineUser => {\n                    /* when someuser/friend went offline, user will be received here */\n                    callback(enums.USER_OFFLINE, offlineUser);\n                }\n            })\n        );\n\n        CometChat.addGroupListener(\n            this.groupListenerId,\n            new CometChat.GroupListener({\n                onGroupMemberScopeChanged: (message, changedUser, newScope, oldScope, changedGroup) => {\n                    callback(enums.GROUP_MEMBER_SCOPE_CHANGED, changedGroup, message, {\"user\": changedUser, \"scope\": newScope});\n                }, \n                onGroupMemberKicked: (message, kickedUser, kickedBy, kickedFrom) => {\n                    callback(enums.GROUP_MEMBER_KICKED, kickedFrom, message, {\"user\": kickedUser, \"hasJoined\": false});\n                }, \n                onGroupMemberBanned: (message, bannedUser, bannedBy, bannedFrom) => {\n                    callback(enums.GROUP_MEMBER_BANNED, bannedFrom, message, {\"user\": bannedUser});\n                }, \n                onGroupMemberUnbanned: (message, unbannedUser, unbannedBy, unbannedFrom) => {\n                    callback(enums.GROUP_MEMBER_UNBANNED, unbannedFrom, message, {\"user\": unbannedUser});\n                }, \n                onMemberAddedToGroup: (message, userAdded, userAddedBy, userAddedIn) => {\n                    callback(enums.GROUP_MEMBER_ADDED, userAddedIn, message, {\"user\": userAdded, \"hasJoined\": true});\n                }, \n                onGroupMemberLeft: (message, leavingUser, group) => {\n                    callback(enums.GROUP_MEMBER_LEFT, group, message, {\"user\": leavingUser});\n                }, \n                onGroupMemberJoined: (message, joinedUser, joinedGroup) => {\n                    callback(enums.GROUP_MEMBER_JOINED, joinedGroup, message, {\"user\": joinedUser});\n                }\n            })\n        );\n\n        CometChat.addMessageListener(\n            this.conversationListenerId,\n            new CometChat.MessageListener({\n                onTextMessageReceived: textMessage => {\n                    callback(enums.TEXT_MESSAGE_RECEIVED, null, textMessage);\n                },\n                onMediaMessageReceived: mediaMessage => {\n                    callback(enums.MEDIA_MESSAGE_RECEIVED, null, mediaMessage);\n                },\n                onCustomMessageReceived: customMessage => {\n                    callback(enums.CUSTOM_MESSAGE_RECEIVED, null, customMessage);\n                },\n                onMessageDeleted: deletedMessage => {\n                    callback(enums.MESSAGE_DELETED, null, deletedMessage);\n                },\n                onMessageEdited: editedMessage => {\n                    callback(enums.MESSAGE_EDITED, null, editedMessage);\n                }\n            })\n        );\n\n        CometChat.addCallListener(\n            this.callListenerId,\n            new CometChat.CallListener({\n                onIncomingCallReceived: call => {\n                  callback(enums.INCOMING_CALL_RECEIVED, null, call);\n                },\n                onIncomingCallCancelled: call => {\n                    callback(enums.INCOMING_CALL_CANCELLED, null, call);\n                }\n            })\n        );\n    }\n\n    removeListeners() {\n        CometChat.removeMessageListener(this.conversationListenerId);\n        CometChat.removeUserListener(this.userListenerId);\n        CometChat.removeGroupListener(this.groupListenerId);\n        CometChat.removeCallListener(this.callListenerId);\n    }\n\n}\n","export const listItem = (props) => {\n\n    const selectedState = (props.selectedConversation && props.selectedConversation.conversationId === props.conversation.conversationId) ? {\n        backgroundColor: `${props.theme.backgroundColor.primary}`\n    } : {};\n\n    return {\n        display: \"flex\",\n        flexDirection: \"row\",\n        justifyContent: \"left\",\n        alignItems: \"center\",\n        cursor: \"pointer\",\n        width: \"100%\",\n        padding: \"10px 20px\",\n        ...selectedState,\n        '&:hover': {\n            backgroundColor: `${props.theme.backgroundColor.primary}`\n        }\n    }\n}\n\nexport const itemThumbnailStyle = () => {\n\n    return {\n        display: \"inline-block\",\n        width: \"36px\",\n        height: \"36px\",\n        flexShrink: \"0\",\n    }\n}\n\nexport const itemDetailStyle = () => {\n\n    return {\n        width: \"calc(100% - 45px)\",\n        flexGrow: \"1\",\n        paddingLeft: \"15px\",\n    }\n}\n\nexport const itemRowStyle = () => {\n\n    return {\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        alignItems: \"baseline\",\n    }\n}\n\nexport const itemNameStyle = () => {\n\n    return {\n        fontSize: \"15px\",\n        fontWeight: \"600\",\n        display: \"block\",\n        width: \"calc(100% - 60px)\",\n        overflow: \"hidden\",\n        textOverflow: \"ellipsis\",\n        whiteSpace: \"nowrap\",\n    }\n}\n\nexport const itemLastMsgStyle = (props) => {\n\n    return {\n        margin: \"0\",\n        fontSize: \"13px\",\n        width: \"calc(100% - 50px)\",\n        overflow: \"hidden\",\n        textOverflow: \"ellipsis\",\n        whiteSpace: \"nowrap\",\n        lineHeight: \"20px\",\n        color: `${props.theme.color.helpText }`,\n    }\n}\n\nexport const itemLastMsgTimeStyle = (props) => {\n\n    return {\n        fontSize: \"11px\",\n        textTransform: \"uppercase\",\n        color: `${props.theme.color.helpText}`,\n    }\n}","/** @jsx jsx */\nimport { jsx } from '@emotion/core'\n\nimport { CometChat } from '@cometchat-pro/chat';\n\nimport Avatar from \"../Avatar\";\nimport BadgeCount from \"../BadgeCount\";\nimport StatusIndicator from \"../StatusIndicator\";\n\nimport {\n  listItem,\n  itemThumbnailStyle,\n  itemDetailStyle,\n  itemRowStyle,\n  itemNameStyle,\n  itemLastMsgStyle,\n  itemLastMsgTimeStyle\n} from \"./style\";\n\nconst conversationview = (props) => {\n\n  const getMessage = () => {\n\n    let message = \"\";\n    const type = props.conversation.lastMessage.type;\n\n    switch(type) {\n      case CometChat.MESSAGE_TYPE.TEXT:\n        message = props.conversation.lastMessage.text;\n      break;\n      case CometChat.MESSAGE_TYPE.MEDIA:\n        message = \"Media message\";\n      break;\n      case CometChat.MESSAGE_TYPE.IMAGE:\n        message = \"📷 Image \";\n      break;\n      case CometChat.MESSAGE_TYPE.FILE:\n        message = \"📁 File\";\n      break;\n      case CometChat.MESSAGE_TYPE.VIDEO:\n        message = \"🎥 Video\";\n      break;\n      case CometChat.MESSAGE_TYPE.AUDIO:\n        message = \"🎵 Audio\";\n      break;\n      case CometChat.MESSAGE_TYPE.CUSTOM:\n        message = \"Custom message\";\n      break;\n      default:\n      break;\n    }\n\n    return message;\n  }\n\n  const getCallMessage = () => {\n\n    let message = \"\";\n    const type = props.conversation.lastMessage.type;\n\n    switch(type) {\n      case CometChat.MESSAGE_TYPE.VIDEO:\n        message = \"Video call\";\n      break;\n      case CometChat.MESSAGE_TYPE.AUDIO:\n        message = \"Audio call\";\n      break;\n      default:\n      break;\n    }\n    \n    return message;\n  }\n\n  const getActionMessage = () => {\n\n    let message = props.conversation.lastMessage.message;\n\n    //if action messages are set to hide in config\n    if(props.config) {\n\n      const found = props.config.find(cfg => {\n        return (cfg.action === message.action && cfg.category === message.category);\n      });\n\n      if(found && found.enabled === false) {\n        message = \"\";\n      }\n    }\n\n    return message;\n  }\n\n  const getCustomMessage = () => {\n\n    const message = \"Custom Message\";\n    return message;\n  }\n\n  const getLastMessage = () => {\n\n    if(!props.conversation.lastMessage)\n      return false;\n\n    const lastMessage = props.conversation.lastMessage;\n\n    let message = null;\n    if (lastMessage.hasOwnProperty(\"deletedAt\")) {\n\n      message = (props.loggedInUser.uid === lastMessage.sender.uid) ? \"⚠ You deleted this message.\" : \"⚠ This message was deleted.\";\n\n    } else {\n    \n      switch (lastMessage.category) {\n        case \"message\":\n          message = getMessage();\n        break;\n        case \"call\":\n          message = getCallMessage();\n        break;\n        case \"action\":\n          message = getActionMessage();\n        break;\n        case \"custom\":\n          message = getCustomMessage();\n        break;\n        default:\n        break;\n      }\n    }\n    return message;\n  }\n\n  const getAvatar = () => {\n\n    let avatar;\n    if(props.conversation.conversationType === \"user\") {\n      avatar = props.conversation.conversationWith.avatar;\n    } else if (props.conversation.conversationType === \"group\") {\n      avatar = props.conversation.conversationWith.icon;\n    }\n    return avatar;\n  }\n\n  let lastMessageTimeStamp = null;\n  if(props.conversation.lastMessage) {\n    lastMessageTimeStamp = (\n      <span css={itemLastMsgTimeStyle(props)} className=\"item__details__timestamp\">{new Date(props.conversation.lastMessage.sentAt * 1000).toLocaleTimeString('en-US', { hour: 'numeric', minute: 'numeric', hour12: true })}</span>\n    );\n  }\n\n  let presence;\n  if(props.conversation.conversationType === \"user\") {\n    const status = props.conversation.conversationWith.status;\n    presence = (\n      <StatusIndicator\n      widgetsettings={props.widgetsettings}\n      status={status}\n      cornerRadius=\"50%\" \n      borderColor={props.theme.color.darkSecondary}\n      borderWidth=\"1px\" />\n    );\n  }\n\n  const toggleTooltip = (event, flag) => {\n\n    const elem = event.target;\n\n    const scrollWidth = elem.scrollWidth;\n    const clientWidth = elem.clientWidth;\n    \n    if(scrollWidth <= clientWidth) {\n      return false;\n    }\n\n    if(flag) {\n      elem.setAttribute(\"title\", elem.textContent);\n    } else {\n      elem.removeAttribute(\"title\");\n    }\n  }\n\n  return (\n    <div css={listItem(props)} className=\"list__item\" onClick={() => props.handleClick(props.conversation, props.conversationKey)}>\n      <div css={itemThumbnailStyle()} className=\"list__item__thumbnail\">\n        <Avatar \n        image={getAvatar()}\n        cornerRadius=\"18px\" \n        borderColor={props.theme.color.secondary}\n        borderWidth=\"1px\" />\n        {presence}\n      </div>\n      <div css={itemDetailStyle()} className=\"list__item__details\">\n        <div css={itemRowStyle()} className=\"item__details_block_one\">\n          <div css={itemNameStyle()} className=\"item__details__name\"\n          onMouseEnter={event => toggleTooltip(event, true)} \n          onMouseLeave={event => toggleTooltip(event, false)}>{props.conversation.conversationWith.name}</div>\n          {lastMessageTimeStamp}\n        </div>\n        <div css={itemRowStyle()} className=\"item__details_block_two\">\n          <div css={itemLastMsgStyle(props)} className=\"item__details__last-message\"\n          onMouseEnter={event => toggleTooltip(event, true)} \n          onMouseLeave={event => toggleTooltip(event, false)}>{getLastMessage()}</div>\n          <BadgeCount theme={props.theme} count={props.conversation.unreadMessageCount} />\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default conversationview;","export const chatsWrapperStyle = () => {\n\n    return {\n        display: \"flex\",\n        flexDirection: \"column\",\n        height: \"100%\",\n        boxSizing: \"border-box\",\n        \"*\": {\n            boxSizing: \"border-box\",\n        }\n    }\n}\n\nexport const chatsHeaderStyle = (theme) => {\n\n    return {\n        padding: \"19px 16px\",\n        display: \"flex\",\n        alignItems: \"center\",\n        borderBottom: `1px solid ${theme.color.darkSecondary}`\n    }\n}\n\nexport const chatsHeaderCloseStyle = (img) => {\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n        cursor: \"pointer\",\n        display: \"none\",\n        background: `url(${img}) left center no-repeat`,\n        height: \"24px\",\n        width: \"33%\",\n        [mq[0]]: {\n            display: \"block!important\"\n        }\n    }\n}\n\nexport const chatsHeaderTitleStyle = (props) => {\n\n    const alignment = (props.hasOwnProperty(\"enableCloseMenu\") && props.enableCloseMenu.length > 0) ? {\n        width: \"33%\",\n        textAlign: \"center\"\n    } : {};\n    \n    return {\n        margin: \"0\",\n        display: \"inline-block\",\n        width: \"66%\",\n        textAlign: \"left\",\n        fontSize: \"20px\",\n        ...alignment\n    }\n}\n\nexport const chatsMsgStyle = () =>{\n\n    return {\n        overflow: \"hidden\",\n        width: \"100%\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        position: \"absolute\",\n        top: \"50%\",\n    }\n}\n\nexport const chatsMsgTxtStyle = (theme) => {\n\n    return {\n        margin: \"0\",\n        height: \"30px\",\n        color: `${theme.color.secondary}`,\n        fontSize: \"24px!important\",\n        fontWeight: \"600\",\n    }\n}\n\nexport const chatsListStyle = () => {\n\n    return {\n        height: \"calc(100% - 75px)\",\n        width: \"100%\",\n        overflowY: \"auto\",\n        margin: \"0\",\n        padding: \"0\",\n    }\n}","import React from \"react\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nimport { CometChat } from \"@cometchat-pro/chat\";\n\nimport { CometChatManager } from \"../../util/controller\";\nimport { ConversationListManager } from \"./controller\";\nimport { SvgAvatar } from '../../util/svgavatar';\nimport * as enums from '../../util/enums.js';\nimport { validateWidgetSettings } from \"../../util/common\";\n\nimport ConversationView from \"../ConversationView\";\n\nimport { theme } from \"../../resources/theme\";\n\nimport {\n  chatsWrapperStyle,\n  chatsHeaderStyle,\n  chatsHeaderCloseStyle,\n  chatsHeaderTitleStyle,\n  chatsMsgStyle,\n  chatsMsgTxtStyle,\n  chatsListStyle\n} from \"./style\";\n\nimport navigateIcon from './resources/navigate_before.svg';\n\nimport { incomingOtherMessageAlert } from \"../../resources/audio/\";\n\nclass CometChatConversationList extends React.Component {\n\n  loggedInUser = null;\n  decoratorMessage = \"Loading...\";\n\n  constructor(props) {\n\n    super(props);\n\n    this.state = {\n      conversationlist: [],\n      onItemClick: null,\n      selectedConversation: undefined\n    }\n    this.chatListRef = React.createRef();\n    this.theme = Object.assign({}, theme, this.props.theme);\n  }\n\n  componentDidMount() {\n\n    this.audio = new Audio(incomingOtherMessageAlert);\n\n    this.ConversationListManager = new ConversationListManager();\n    this.getConversations();\n    this.ConversationListManager.attachListeners(this.conversationUpdated);\n  }\n\n  componentDidUpdate(prevProps) {\n    \n    const previousItem = JSON.stringify(prevProps.item);\n    const currentItem = JSON.stringify(this.props.item);\n\n    //if different conversation is selected\n    if (previousItem !== currentItem) {\n\n      if (Object.keys(this.props.item).length === 0) {\n\n        this.chatListRef.scrollTop = 0;\n        this.setState({ selectedConversation: {} });\n\n      } else {\n\n        const conversationlist = [...this.state.conversationlist];\n        const conversationObj = conversationlist.find(c => {\n\n          if ((c.conversationType === this.props.type && this.props.type === \"user\" && c.conversationWith.uid === this.props.item.uid)\n            || (c.conversationType === this.props.type && this.props.type === \"group\" && c.conversationWith.guid === this.props.item.guid)) {\n\n            return c;\n          }\n\n          return false;\n        });\n        \n        if (conversationObj) {\n\n          let conversationKey = conversationlist.indexOf(conversationObj);\n          let newConversationObj = { ...conversationObj, unreadMessageCount: 0 };\n\n          conversationlist.splice(conversationKey, 1, newConversationObj);\n          this.setState({ conversationlist: conversationlist, selectedConversation: newConversationObj });\n        }\n      }\n    }\n\n    //if user is blocked/unblocked, update conversationlist in state\n    if(prevProps.item \n    && Object.keys(prevProps.item).length \n    && prevProps.item.uid === this.props.item.uid \n    && prevProps.item.blockedByMe !== this.props.item.blockedByMe) {\n\n      let conversationlist = [...this.state.conversationlist];\n\n      //search for user\n      let convKey = conversationlist.findIndex((c, k) => c.conversationType === \"user\" && c.conversationWith.uid === this.props.item.uid);\n      if(convKey > -1) {\n\n        conversationlist.splice(convKey, 1);\n\n        this.setState({ conversationlist: conversationlist });\n      }\n    }\n\n    if (prevProps.groupToUpdate\n      && (prevProps.groupToUpdate.guid !== this.props.groupToUpdate.guid\n        || (prevProps.groupToUpdate.guid === this.props.groupToUpdate.guid && (prevProps.groupToUpdate.membersCount !== this.props.groupToUpdate.membersCount || prevProps.groupToUpdate.scope !== this.props.groupToUpdate.scope)))) {\n\n      const conversationlist = [...this.state.conversationlist];\n      const groupToUpdate = this.props.groupToUpdate;\n\n      const convKey = conversationlist.findIndex(c => c.conversationType === \"group\" && c.conversationWith.guid === groupToUpdate.guid);\n      if (convKey > -1) {\n        \n        const convObj = conversationlist[convKey];\n\n        let convWithObj = { ...convObj.conversationWith };\n\n        let newConvWithObj = { ...convWithObj, scope: groupToUpdate[\"scope\"], membersCount: groupToUpdate[\"membersCount\"] };\n        let newConvObj = { ...convObj, conversationWith: newConvWithObj };\n\n        conversationlist.splice(convKey, 1, newConvObj);\n        this.setState({ conversationlist: conversationlist });\n      }\n    }\n\n    if (prevProps.messageToMarkRead !== this.props.messageToMarkRead) {\n\n      const message = this.props.messageToMarkRead;\n      this.makeConversation(message).then(response => {\n\n        const { conversationKey, conversationObj, conversationList } = response;\n\n        if (conversationKey > -1) {\n\n          let unreadMessageCount = this.makeUnreadMessageCount(conversationObj, \"decrement\");\n          let lastMessageObj = this.makeLastMessage(message, conversationObj);\n          \n          let newConversationObj = { ...conversationObj, lastMessage: lastMessageObj, unreadMessageCount: unreadMessageCount };\n          conversationList.splice(conversationKey, 1);\n          conversationList.unshift(newConversationObj);\n          this.setState({ conversationlist: conversationList });\n\n        }\n\n      }).catch(error => {\n        console.log('This is an error in converting message to conversation', error);\n      });\n\n    }\n\n    if (prevProps.lastMessage !== this.props.lastMessage) {\n\n      const lastMessage = this.props.lastMessage;\n      const conversationList = [...this.state.conversationlist];\n      const conversationKey = conversationList.findIndex(c => c.conversationId === lastMessage.conversationId);\n\n      if (conversationKey > -1) {\n\n        const conversationObj = conversationList[conversationKey];\n        let newConversationObj = { ...conversationObj, lastMessage: lastMessage };\n\n        conversationList.splice(conversationKey, 1);\n        conversationList.unshift(newConversationObj);\n        this.setState({ conversationlist: conversationList });\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    this.ConversationListManager.removeListeners();\n    this.ConversationListManager = null;\n  }\n\n  conversationUpdated = (key, item, message, options) => {\n\n    switch(key) {\n      case enums.USER_ONLINE:\n      case enums.USER_OFFLINE:\n        this.updateUser(item);\n        break;\n      case enums.TEXT_MESSAGE_RECEIVED:\n      case enums.MEDIA_MESSAGE_RECEIVED:\n      case enums.CUSTOM_MESSAGE_RECEIVED:\n        this.updateConversation(message);\n        break;\n      case enums.MESSAGE_EDITED:\n      case enums.MESSAGE_DELETED:\n        this.conversationEditedDeleted(message);\n        break;\n      case enums.INCOMING_CALL_RECEIVED:\n      case enums.INCOMING_CALL_CANCELLED:\n        this.updateConversation(message, false);\n        break;\n      case enums.GROUP_MEMBER_ADDED:\n        this.updateGroupMemberAdded(message, options);\n        break;\n      case enums.GROUP_MEMBER_KICKED:\n      case enums.GROUP_MEMBER_BANNED:\n      case enums.GROUP_MEMBER_LEFT:\n        this.updateGroupMemberRemoved(message, options);\n        break;\n      case enums.GROUP_MEMBER_SCOPE_CHANGED:\n        this.updateGroupMemberScopeChanged(message, options);\n        break;\n      case enums.GROUP_MEMBER_JOINED:\n        this.updateGroupMemberChanged(message, options, \"increment\");\n        break;\n      case enums.GROUP_MEMBER_UNBANNED:\n        this.updateGroupMemberChanged(message, options, \"\");\n        break;\n      default:\n        break;\n    }\n\n  }\n\n  updateUser = (user) => {\n\n    const conversationlist = [...this.state.conversationlist];\n    const conversationKey = conversationlist.findIndex(conversationObj => conversationObj.conversationType === \"user\" && conversationObj.conversationWith.uid === user.uid);\n\n    if(conversationKey > -1) {\n\n      let conversationObj = {...conversationlist[conversationKey]};\n      let conversationWithObj = {...conversationObj.conversationWith, status: user.getStatus()};\n      \n      let newConversationObj = {...conversationObj, conversationWith: conversationWithObj};\n      conversationlist.splice(conversationKey, 1, newConversationObj);\n      this.setState({conversationlist: conversationlist});\n    }\n  }\n\n  playAudio = (message) => {\n\n    //if it is disabled for chat wigdet in dashboard\n    if (this.props.hasOwnProperty(\"widgetsettings\")\n    && this.props.widgetsettings\n    && this.props.widgetsettings.hasOwnProperty(\"main\")\n    && (this.props.widgetsettings.main.hasOwnProperty(\"enable_sound_for_messages\") === false\n    || (this.props.widgetsettings.main.hasOwnProperty(\"enable_sound_for_messages\")\n    && this.props.widgetsettings.main[\"enable_sound_for_messages\"] === false))) {\n      return false;\n    }\n\n    if (message.category === enums.CATEGORY_ACTION \n      && message.type === enums.ACTION_TYPE_GROUPMEMBER \n      && validateWidgetSettings(this.props.widgetsettings, \"hide_join_leave_notifications\") === true) {\n      return false;\n    }\n\n    this.audio.currentTime = 0;\n    this.audio.play();\n  }\n\n  makeConversation = (message) => {\n\n    const promise = new Promise((resolve, reject) => {\n\n      CometChat.CometChatHelper.getConversationFromMessage(message).then(conversation => {\n\n        let conversationList = [...this.state.conversationlist];\n        let conversationKey = conversationList.findIndex(c => c.conversationId === conversation.conversationId);\n        \n        let conversationObj = { ...conversation };\n        if (conversationKey > -1) {\n          conversationObj = { ...conversationList[conversationKey] };\n        }\n\n        resolve({ \"conversationKey\": conversationKey, \"conversationObj\": conversationObj, \"conversationList\": conversationList });\n      \n      }).catch(error => reject(error));\n\n    });\n    \n    return promise;\n  }\n\n  makeUnreadMessageCount = (conversation = {}, operator) => {\n\n    if (Object.keys(conversation).length === 0) {\n      return 1;\n    }\n\n    let unreadMessageCount = parseInt(conversation.unreadMessageCount)\n    if (this.state.selectedConversation && this.state.selectedConversation.conversationId === conversation.conversationId) {\n\n      unreadMessageCount = 0;\n\n    } else if ((this.props.hasOwnProperty(\"item\") && this.props.item.hasOwnProperty(\"guid\") && conversation.conversationWith.hasOwnProperty(\"guid\") && this.props.item.guid === conversation.conversationWith.guid)\n      || (this.props.hasOwnProperty(\"item\") && this.props.item.hasOwnProperty(\"uid\") && conversation.conversationWith.hasOwnProperty(\"uid\") && this.props.item.uid === conversation.conversationWith.uid)) {\n\n      unreadMessageCount = 0;\n\n    } else {\n\n      if (operator && operator === \"decrement\") {\n         \n        unreadMessageCount = (unreadMessageCount) ? (unreadMessageCount - 1) : 0;\n      } else {\n        unreadMessageCount = unreadMessageCount + 1;\n      }\n    }\n\n    return unreadMessageCount;\n  }\n\n  makeLastMessage = (message, conversation = {}) => {\n\n    const newMessage = Object.assign({}, message);\n    return newMessage;\n  }\n\n  updateConversation = (message, notification = true) => {\n\n    this.makeConversation(message).then(response => {\n\n      const { conversationKey, conversationObj, conversationList } = response;\n      \n      if (conversationKey > -1) {\n\n        let unreadMessageCount = this.makeUnreadMessageCount(conversationObj);\n        let lastMessageObj = this.makeLastMessage(message, conversationObj);\n\n        let newConversationObj = { ...conversationObj, lastMessage: lastMessageObj, unreadMessageCount: unreadMessageCount };\n        conversationList.splice(conversationKey, 1);\n        conversationList.unshift(newConversationObj);\n        this.setState({ conversationlist: conversationList });\n\n        if (notification) {\n          this.playAudio(message);\n        }\n\n      } else {\n\n        let unreadMessageCount = this.makeUnreadMessageCount();\n        let lastMessageObj = this.makeLastMessage(message);\n\n        let newConversationObj = { ...conversationObj, lastMessage: lastMessageObj, unreadMessageCount: unreadMessageCount };\n        conversationList.unshift(newConversationObj);\n        this.setState({ conversationlist: conversationList });\n\n        if (notification) {\n          this.playAudio(message);\n        }\n      }\n\n    }).catch(error => {\n      console.log('This is an error in converting message to conversation', error);\n    });\n\n  }\n\n  conversationEditedDeleted = (message) => {\n\n    this.makeConversation(message).then(response => {\n\n      const { conversationKey, conversationObj, conversationList } = response;\n      \n      if (conversationKey > -1) {\n\n        let lastMessageObj = conversationObj.lastMessage;\n\n        if (lastMessageObj.id === message.id) {\n\n          const newLastMessageObj = Object.assign({}, lastMessageObj, message);\n          let newConversationObj = Object.assign({}, conversationObj, { lastMessage: newLastMessageObj }); \n          conversationList.splice(conversationKey, 1, newConversationObj);\n          this.setState({ conversationlist: conversationList });\n        }\n      }\n\n    }).catch(error => {\n      console.log('This is an error in converting message to conversation', error);\n    });\n\n  }\n\n  updateGroupMemberAdded = (message, options) => {\n\n    this.makeConversation(message).then(response => {\n\n      const { conversationKey, conversationObj, conversationList } = response;\n\n      if (conversationKey > -1) {\n\n        let unreadMessageCount = this.makeUnreadMessageCount(conversationObj);\n        let lastMessageObj = this.makeLastMessage(message, conversationObj);\n\n        let conversationWithObj = { ...conversationObj.conversationWith };\n        let membersCount = parseInt(conversationWithObj.membersCount) + 1;\n        let newConversationWithObj = { ...conversationWithObj, membersCount: membersCount };\n\n        let newConversationObj = { ...conversationObj, conversationWith: newConversationWithObj, lastMessage: lastMessageObj, unreadMessageCount: unreadMessageCount };\n        conversationList.splice(conversationKey, 1);\n        conversationList.unshift(newConversationObj);\n        this.setState({ conversationlist: conversationList });\n        this.playAudio(message);\n\n      } else {\n\n        if (options && this.loggedInUser.uid === options.user.uid) {\n\n          let avatar = this.setAvatar(conversationObj);\n          \n          let unreadMessageCount = this.makeUnreadMessageCount();\n          let lastMessageObj = this.makeLastMessage(message);\n\n          let conversationWithObj = { ...conversationObj.conversationWith };\n          let membersCount = parseInt(conversationWithObj.membersCount) + 1;\n          let scope = CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT;\n          let hasJoined = options.hasJoined;\n\n          let newConversationWithObj = { ...conversationWithObj, icon: avatar, membersCount: membersCount, scope: scope, hasJoined: hasJoined };\n          let newConversationObj = { ...conversationObj, conversationWith: newConversationWithObj, lastMessage: lastMessageObj, unreadMessageCount: unreadMessageCount };\n          conversationList.unshift(newConversationObj);\n          this.setState({ conversationlist: conversationList });\n          this.playAudio(message);\n        }\n\n      }\n\n    }).catch(error => {\n      console.log('This is an error in converting message to conversation', error);\n    });\n  }\n\n  updateGroupMemberRemoved = (message, options) => {\n\n    this.makeConversation(message).then(response => {\n\n      const { conversationKey, conversationObj, conversationList } = response;\n\n      if (conversationKey > -1) {\n\n        if (options && this.loggedInUser.uid === options.user.uid) {\n\n          conversationList.splice(conversationKey, 1);\n          this.setState({ conversationlist: conversationList });\n\n        } else {\n\n          let unreadMessageCount = this.makeUnreadMessageCount(conversationObj);\n          let lastMessageObj = this.makeLastMessage(message, conversationObj);\n\n          let conversationWithObj = { ...conversationObj.conversationWith };\n          let membersCount = parseInt(conversationWithObj.membersCount) - 1;\n          let newConversationWithObj = { ...conversationWithObj, membersCount: membersCount };\n\n          let newConversationObj = { ...conversationObj, conversationWith: newConversationWithObj, lastMessage: lastMessageObj, unreadMessageCount: unreadMessageCount };\n          conversationList.splice(conversationKey, 1);\n          conversationList.unshift(newConversationObj);\n          this.setState({ conversationlist: conversationList });\n          this.playAudio(message);\n        }\n      }\n\n    }).catch(error => {\n      console.log('This is an error in converting message to conversation', error);\n    });\n    \n  }\n\n  updateGroupMemberScopeChanged = (message, options) => {\n\n    this.makeConversation(message).then(response => {\n\n      const { conversationKey, conversationObj, conversationList } = response;\n\n      if (conversationKey > -1) {\n\n        let unreadMessageCount = this.makeUnreadMessageCount(conversationObj);\n        let lastMessageObj = this.makeLastMessage(message, conversationObj);\n\n        let conversationWithObj = { ...conversationObj.conversationWith };\n        let membersCount = parseInt(conversationWithObj.membersCount);\n        let scope = conversationWithObj.scope;\n\n        if (options && this.loggedInUser.uid === options.user.uid) {\n          scope = options.scope;\n        }\n\n        let newConversationWithObj = { ...conversationWithObj, membersCount: membersCount, scope: scope };\n        let newConversationObj = { ...conversationObj, conversationWith: newConversationWithObj, lastMessage: lastMessageObj, unreadMessageCount: unreadMessageCount };\n        conversationList.splice(conversationKey, 1);\n        conversationList.unshift(newConversationObj);\n        this.setState({ conversationlist: conversationList });\n        this.playAudio(message);\n\n      } \n\n    }).catch(error => {\n      console.log('This is an error in converting message to conversation', error);\n    });\n  }\n\n  updateGroupMemberChanged = (message, options, operator) => {\n\n    this.makeConversation(message).then(response => {\n\n      const { conversationKey, conversationObj, conversationList } = response;\n      if (conversationKey > -1) {\n\n        if (options && this.loggedInUser.uid !== options.user.uid) {\n\n          let unreadMessageCount = this.makeUnreadMessageCount(conversationObj);\n          let lastMessageObj = this.makeLastMessage(message, conversationObj);\n\n          let conversationWithObj = { ...conversationObj.conversationWith };\n          let membersCount = parseInt(conversationWithObj.membersCount);\n          if (operator === \"increment\") {\n            membersCount += 1;\n          }\n          \n          let newConversationWithObj = { ...conversationWithObj, membersCount: membersCount };\n          let newConversationObj = { ...conversationObj, conversationWith: newConversationWithObj, lastMessage: lastMessageObj, unreadMessageCount: unreadMessageCount };\n          conversationList.splice(conversationKey, 1);\n          conversationList.unshift(newConversationObj);\n          this.setState({ conversationlist: conversationList });\n          this.playAudio(message);\n        }\n      }\n\n    }).catch(error => {\n      console.log('This is an error in converting message to conversation', error);\n    });\n\n  }\n  \n  handleScroll = (e) => {\n\n    const bottom =\n      Math.round(e.currentTarget.scrollHeight - e.currentTarget.scrollTop) === Math.round(e.currentTarget.clientHeight);\n    if (bottom) this.getConversations();\n  }\n\n  //updating unread message count to zero\n  handleClick = (conversation, conversationKey) => {\n    \n    if(!this.props.onItemClick)\n      return;\n\n    this.props.onItemClick(conversation.conversationWith, conversation.conversationType);\n  }\n\n  handleMenuClose = () => {\n\n    if(!this.props.actionGenerated) {\n      return false;\n    }\n\n    this.props.actionGenerated(\"closeMenuClicked\")\n  }\n\n  getConversations = () => {\n\n    new CometChatManager().getLoggedInUser().then(user => {\n\n      this.loggedInUser = user;\n      this.ConversationListManager.fetchNextConversation().then(conversationList => {\n\n        if(conversationList.length === 0) {\n          this.decoratorMessage = \"No chats found\";\n        }\n\n        conversationList.forEach(conversation => {\n\n          if(conversation.conversationType === \"user\" && !conversation.conversationWith.avatar) {\n            conversation.conversationWith.avatar = this.setAvatar(conversation);\n          } else if(conversation.conversationType === \"group\" && !conversation.conversationWith.icon) {\n            conversation.conversationWith.icon = this.setAvatar(conversation);\n          }\n\n          \n          if (this.props.hasOwnProperty(\"type\") && this.props.hasOwnProperty(\"item\") && this.props.type === conversation.conversationType) {\n\n            if ((conversation.conversationType === \"user\" && this.props.item.uid === conversation.conversationWith.uid) ||\n              (conversation.conversationType === \"group\" && this.props.item.guid === conversation.conversationWith.guid)) {\n\n              conversation.unreadMessageCount = 0;\n            }\n          }\n          \n        });\n        this.setState({ conversationlist: [...this.state.conversationlist, ...conversationList] });\n\n      }).catch(error => {\n\n        this.decoratorMessage = \"Error\";\n        console.error(\"[CometChatConversationList] getConversations fetchNext error\", error);\n      });\n\n    }).catch(error => {\n\n      this.decoratorMessage = \"Error\";\n      console.log(\"[CometChatConversationList] getConversations getLoggedInUser error\", error);\n    });\n  }\n\n  setAvatar(conversation) {\n\n    if(conversation.conversationType === \"user\" && !conversation.conversationWith.avatar) {\n      \n      const uid = conversation.conversationWith.uid;\n      const char = conversation.conversationWith.name.charAt(0).toUpperCase();\n\n      return SvgAvatar.getAvatar(uid, char);\n\n    } else if(conversation.conversationType === \"group\" && !conversation.conversationWith.icon) {\n\n      const guid = conversation.conversationWith.guid;\n      const char = conversation.conversationWith.name.charAt(0).toUpperCase();\n\n      return SvgAvatar.getAvatar(guid, char)\n    }\n  }\n\n  render() {\n\n    const conversationList = this.state.conversationlist.map((conversation, key) => {\n      return (\n        <ConversationView \n        key={key}\n        theme={this.theme}\n        config={this.props.config}\n        conversationKey={key} \n        conversation={conversation}\n        selectedConversation={this.state.selectedConversation}\n        widgetsettings={this.props.widgetsettings}\n        loggedInUser={this.loggedInUser}\n        handleClick={this.handleClick} />\n      );\n    });\n\n    let messageContainer = null;\n    \n    if(this.state.conversationlist.length === 0) {\n      messageContainer = (\n        <div css={chatsMsgStyle()} className=\"chats__decorator-message\">\n          <p css={chatsMsgTxtStyle(this.theme)} className=\"decorator-message\">{this.decoratorMessage}</p>\n        </div>\n      );\n    }\n\n    let closeBtn = (<div css={chatsHeaderCloseStyle(navigateIcon)} className=\"header__close\" onClick={this.handleMenuClose}></div>);\n    if (!this.props.hasOwnProperty(\"enableCloseMenu\") || (this.props.hasOwnProperty(\"enableCloseMenu\") && this.props.enableCloseMenu === 0)) {\n      closeBtn = null;\n    }\n\n    return (\n      <div css={chatsWrapperStyle()} className=\"chats\">\n        <div css={chatsHeaderStyle(this.theme)} className=\"chats__header\">\n          {closeBtn}\n          <h4 css={chatsHeaderTitleStyle(this.props)} className=\"header__title\">Chats</h4>\n          <div></div>\n        </div>\n        {messageContainer}\n        <div css={chatsListStyle()} className=\"chats__list\" onScroll={this.handleScroll} ref={el => this.chatListRef = el}>{conversationList}</div>\n      </div>\n    );\n  }\n}\n\nexport default CometChatConversationList;\n","export const chatScreenStyle = (theme) => {\n\n    return {\n        display: \"flex\",\n        height: \"100%\",\n        width: \"100%\",\n        boxSizing: \"border-box\",\n        fontFamily: `${theme.fontFamily}`,\n        \"*\": {\n            boxSizing: \"border-box\",\n            fontFamily: `${theme.fontFamily}`,\n        }\n    }\n}\n\nexport const chatScreenSidebarStyle = (state, theme) => {\n\n    const sidebarView = (state.sidebarview) ? {\n        left: \"0\",\n        boxShadow: \"rgba(0, 0, 0, .4) -30px 0 30px 30px\"\n    } : {};\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n        width: \"280px\",\n        borderRight: `1px solid ${theme.borderColor.primary}`,\n        height: \"100%\",\n        position: \"relative\",\n        [mq[0]]: {\n            position: \"absolute!important\",\n            left: \"-100%\",\n            top: \"0\",\n            bottom: \"0\",\n            width: \"100%!important\",\n            zIndex: \"2\",\n            backgroundColor: `${theme.backgroundColor.white}`,\n            transition: \"all .3s ease-out\",\n            ...sidebarView\n        }\n    }\n}\n\nexport const chatScreenMainStyle = (state) => {\n\n    const secondaryView = (state.threadmessageview || state.detailview) ? {\n        width: \"calc(100% - 680px)\"\n    } : {};\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n        width: \"calc(100% - 280px)\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        height: \"100%\",\n        order: \"2\",\n        ...secondaryView,\n        [mq[0]]: {\n            width: \"100%!important\",\n        }\n    }\n}\n\nexport const chatScreenSecondaryStyle = (theme) => {\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n        float: \"right\",\n        borderLeft: `1px solid ${theme.borderColor.primary}`,\n        height: \"100%\",\n        width: \"400px\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        order: \"3\",\n        [mq[0]]: {\n            position: \"absolute!important\",\n            right: \"0!important\",\n            top: \"0\",\n            bottom: \"0\",\n            width: \"100%!important\",\n            zIndex: \"2\",\n            backgroundColor: `${theme.backgroundColor.white}`,\n        }\n    }\n}","export const userInfoScreenStyle = (theme) =>{\n\n    return {\n        display: \"flex\",\n        flexDirection: \"column!important\",\n        height: \"calc(100% - 50px)\",\n        fontFamily: `${theme.fontFamily}`,\n        \"*\": {\n            boxSizing: \"border-box\",\n            fontFamily: `${theme.fontFamily}`,\n        }\n    }\n}\n\nexport const headerStyle = (theme) => {\n\n    return {\n        padding: \"19px 16px\",\n        position: \"relative\",\n        borderBottom: `1px solid ${theme.borderColor.primary}`\n    }\n}\n\nexport const headerTitleStyle = () => {\n\n    return {\n        margin: \"0\",\n        fontWeight: \"700\",\n        fontSize: \"22px\"\n    }\n}\n\nexport const detailStyle = () => {\n\n    return {\n        padding: \"19px 16px\",\n        display: \"flex\",\n        flexDirection: \"row\",\n        justifyContent: \"left\",\n        alignItems: \"center\",\n    }\n}\n\nexport const thumbnailStyle = () => {\n\n    return {\n        display: \"inline-block\",\n        width: \"36px\",\n        height: \"36px\",\n        flexShrink: \"0\",\n    }\n}\n\nexport const userDetailStyle = () => {\n    \n    return {\n        width: \"calc(100% - 45px)\",\n        flexGrow: \"1\",\n        paddingLeft: \"15px\",\n    }\n}\n\nexport const userNameStyle = () => {\n\n    return {\n        margin: \"0\",\n        fontSize: \"15px\",\n        fontWeight: \"600\",\n        display: \"block\",\n        maxWidth: \"100%\",\n        overflow: \"hidden\",\n        textOverflow: \"ellipsis\",\n        whiteSpace: \"nowrap\",\n    }\n}\n\nexport const userStatusStyle = (theme) => {\n\n    return {\n        fontSize: \"13px\",\n        margin: \"0\",\n        color: `${theme.color.blue}`,\n    }\n}\n\nexport const optionsStyle = () => {\n\n    return {\n        height: \"calc(100% - 196px)\",\n        overflowY: \"auto\",\n        padding: \"0 16px\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"left\",\n        alignItems: \"flex-start\",\n    }\n}\n\nexport const optionTitleStyle = (theme) => {\n\n    return {\n        margin: \"5px 0\",\n        width: \"100%\",\n        fontSize: \"12px\",\n        color: `${theme.color.secondary}`,\n        textTransform: \"uppercase\",\n    }\n}\n\nexport const optionListStyle = () => {\n\n    return {\n        padding: \"10px 0\",\n        width: \"100%\",\n        fontSize: \"15px\"\n    }\n}\n\nexport const optionStyle = (img) => {\n\n    return {\n        width: \"100%\",\n        padding: \"15px 15px 15px 48px\",\n        fontWeight: 600,\n        background: `url(${img}) 16px center no-repeat`,\n    }\n}\n\nexport const optionNameStyle = () => {\n\n    return {\n        width: \"100%\",\n    }\n}","import React from \"react\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nimport { CometChat } from \"@cometchat-pro/chat\";\n\nimport { CometChatManager } from \"../../util/controller\";\nimport * as enums from '../../util/enums.js';\n\nimport CometChatConversationList from \"../CometChatConversationList\";\nimport CometChatMessageListScreen from \"../CometChatMessageListScreen\";\nimport CometChatUserDetail from \"../CometChatUserDetail\";\nimport CometChatGroupDetail from \"../CometChatGroupDetail\";\nimport MessageThread from \"../MessageThread\";\nimport CallAlert from \"../CallAlert\";\nimport CallScreen from \"../CallScreen\";\nimport ImageView from \"../ImageView\";\n\nimport { theme } from \"../../resources/theme\";\n\nimport {\n  chatScreenStyle,\n  chatScreenSidebarStyle,\n  chatScreenMainStyle,\n  chatScreenSecondaryStyle\n} from \"./style\";\n\n\nclass CometChatConversationListScreen extends React.Component {\n\n  loggedInUser = null;\n\n  constructor(props) {\n\t\tsuper(props);\n\n    this.state = {\n      darktheme: false,\n      viewdetailscreen: false,\n      item: {},\n      type: \"\",\n      tab: \"conversations\",\n      groupToDelete: {},\n      groupToLeave: {},\n      groupToUpdate: {},\n      threadmessageview: false,\n      threadmessagetype: null,\n      threadmessageitem: {},\n      threadmessageparent: {},\n      composedthreadmessage: {},\n      incomingCall: null,\n      outgoingCall: null,\n      messageToMarkRead: {},\n      callmessage: {},\n      sidebarview: false,\n      imageView: null,\n      groupmessage: {},\n      lastmessage: {}\n    }\n\n    this.theme = Object.assign({}, theme, this.props.theme);\n  }\n  \n  componentDidMount() {\n\n    if(!Object.keys(this.state.item).length) {\n      this.toggleSideBar();\n    }\n\n    new CometChatManager().getLoggedInUser().then((user) => {\n      this.loggedInUser = user;\n    }).catch((error) => {\n      console.log(\"[CometChatUnified] getLoggedInUser error\", error);\n      \n    });\n  }\n\n  changeTheme = (e) => {\n\n    const theme = this.state.darktheme;\n    this.setState({darktheme: !theme})\n  }\n\n  itemClicked = (item, type) => {\n\n    this.toggleSideBar();\n    this.setState({ item: {...item}, type, viewdetailscreen: false })\n  }\n\n  actionHandler = (action, item, count, ...otherProps) => {\n    \n    switch(action) {\n      case \"blockUser\":\n        this.blockUser();\n      break;\n      case \"unblockUser\":\n        this.unblockUser();\n      break;\n      case \"audioCall\":\n        this.audioCall();\n      break;\n      case \"videoCall\":\n        this.videoCall();\n      break;\n      case \"viewDetail\":\n      case \"closeDetailClicked\":\n        this.toggleDetailView();\n      break;\n      // eslint-disable-next-line no-lone-blocks\n      case \"menuClicked\":{\n        this.toggleSideBar();\n        this.setState({ item: {} });\n      }\n        break;\n      case \"closeMenuClicked\":\n        this.toggleSideBar();\n      break;\n      case \"groupUpdated\":\n        this.groupUpdated(item, count, ...otherProps);\n      break;\n      case \"groupDeleted\": \n        this.deleteGroup(item);\n      break;\n      case \"leftGroup\":\n        this.leaveGroup(item, ...otherProps);\n      break;\n      case \"membersUpdated\":\n        this.updateMembersCount(item, count);\n      break;\n      case \"viewMessageThread\":\n        this.viewMessageThread(item);\n      break;\n      case \"closeThreadClicked\":\n        this.closeThreadMessages();\n      break;\n      case \"threadMessageComposed\":\n        this.onThreadMessageComposed(item);\n        this.updateLastMessage(item[0]);\n      break;\n      case \"acceptIncomingCall\":\n        this.acceptIncomingCall(item);\n        break;\n      case \"acceptedIncomingCall\":\n        this.callInitiated(item);\n        break;\n      case \"rejectedIncomingCall\":\n        this.rejectedIncomingCall(item, count);\n        break;\n      case \"outgoingCallRejected\":\n      case \"outgoingCallCancelled\":\n      case \"callEnded\":\n        this.outgoingCallEnded(item);\n        break;\n      case \"userJoinedCall\":\n      case \"userLeftCall\":\n        this.appendCallMessage(item);\n        break;\n      case \"viewActualImage\":\n        this.toggleImageView(item);\n        break;\n      case \"membersAdded\":\n        this.membersAdded(item);\n        break;\n      case \"memberUnbanned\":\n        this.memberUnbanned(item);\n        break;\n      case \"memberScopeChanged\":\n        this.memberScopeChanged(item);\n        break;\n      case \"messageComposed\":\n      case \"messageEdited\":\n      case \"messageDeleted\":\n        this.updateLastMessage(item[0]);\n        break;\n      default:\n      break;\n    }\n  }\n\n  updateLastMessage = (message) => {\n    this.setState({ lastmessage: message });\n  }\n\n  blockUser = () => {\n\n    let usersList = [this.state.item.uid];\n    CometChatManager.blockUsers(usersList).then(list => {\n\n        this.setState({item: {...this.state.item, blockedByMe: true}});\n\n    }).catch(error => {\n      console.log(\"Blocking user fails with error\", error);\n    });\n\n  }\n\n  unblockUser = () => {\n    \n    let usersList = [this.state.item.uid];\n    CometChatManager.unblockUsers(usersList).then(list => {\n\n        this.setState({item: {...this.state.item, blockedByMe: false}});\n\n      }).catch(error => {\n      console.log(\"unblocking user fails with error\", error);\n    });\n\n  }\n\n  audioCall = () => {\n\n    let receiverId, receiverType;\n    if(this.state.type === \"user\") {\n\n      receiverId = this.state.item.uid;\n      receiverType = CometChat.RECEIVER_TYPE.USER;\n\n    } else if(this.state.type === \"group\") {\n\n      receiverId = this.state.item.guid;\n      receiverType = CometChat.RECEIVER_TYPE.GROUP;\n    }\n\n    CometChatManager.call(receiverId, receiverType, CometChat.CALL_TYPE.AUDIO).then(call => {\n\n      this.appendCallMessage(call);\n      this.setState({ outgoingCall: call });\n\n    }).catch(error => {\n      console.log(\"Call initialization failed with exception:\", error);\n    });\n\n  }\n\n  videoCall = () => {\n\n    let receiverId, receiverType;\n    if(this.state.type === \"user\") {\n\n      receiverId = this.state.item.uid;\n      receiverType = CometChat.RECEIVER_TYPE.USER;\n\n    } else if(this.state.type === \"group\") {\n      receiverId = this.state.item.guid;\n      receiverType = CometChat.RECEIVER_TYPE.GROUP;\n    }\n   \n    CometChatManager.call(receiverId, receiverType, CometChat.CALL_TYPE.VIDEO).then(call => {\n\n      this.appendCallMessage(call);\n      this.setState({ outgoingCall: call });\n\n    }).catch(error => {\n      console.log(\"Call initialization failed with exception:\", error);\n    });\n\n  }\n\n  toggleDetailView = () => {\n\n    let viewdetail = !this.state.viewdetailscreen;\n    this.setState({viewdetailscreen: viewdetail, threadmessageview: false});\n  }\n\n  toggleSideBar = () => {\n\n    const sidebarview = this.state.sidebarview;\n    this.setState({ sidebarview: !sidebarview });\n  }\n\n  deleteGroup = (group) => {\n    this.setState({groupToDelete: group, item: {}, type: \"group\", viewdetailscreen: false});\n  }\n\n  leaveGroup = (group) => {\n    this.setState({groupToLeave: group, item: {}, type: \"group\", viewdetailscreen: false});\n  }\n\n  updateMembersCount = (item, count) => {\n\n    const group = Object.assign({}, this.state.item, {membersCount: count});\n    this.setState({item: group, groupToUpdate: group});\n  }\n\n  groupUpdated = (message, key, group, options) => {\n    \n    switch(key) {\n      case enums.GROUP_MEMBER_BANNED:\n      case enums.GROUP_MEMBER_KICKED: {\n        if(options.user.uid === this.loggedInUser.uid) {\n          this.setState({item: {}, type: \"group\", viewdetailscreen: false});\n        }\n        break;\n      }\n      case enums.GROUP_MEMBER_SCOPE_CHANGED: {\n        \n        if(options.user.uid === this.loggedInUser.uid) {\n\n          const newObj = Object.assign({}, this.state.item, {\"scope\": options[\"scope\"]})\n          this.setState({item: newObj, type: \"group\", viewdetailscreen: false});\n        }\n        break;\n      }\n      default:\n      break;\n    }\n  }\n\n  closeThreadMessages = () => {\n    this.setState({viewdetailscreen: false, threadmessageview: false});\n  }\n\n  viewMessageThread = (parentMessage) => {\n\n    const message = {...parentMessage};\n    const threaditem = {...this.state.item};\n    this.setState({\n      threadmessageview: true, \n      threadmessageparent: message, \n      threadmessageitem: threaditem,\n      threadmessagetype: this.state.type, \n      viewdetailscreen: false\n    });\n  }\n\n  onThreadMessageComposed = (composedMessage) => {\n\n    if(this.state.type !== this.state.threadmessagetype) {\n      return false;\n    }\n\n    if((this.state.threadmessagetype === \"group\" && this.state.item.guid !== this.state.threadmessageitem.guid)\n    || (this.state.threadmessagetype === \"user\" && this.state.item.uid !== this.state.threadmessageitem.uid)) {\n      return false;\n    }\n\n    const message = {...composedMessage};\n    this.setState({composedthreadmessage: message});\n  }\n\n  acceptIncomingCall = (call) => {\n\n    this.setState({ incomingCall: call });\n\n    const type = call.receiverType;\n    const id = (type === \"user\") ? call.sender.uid : call.receiverId;\n\n    CometChat.getConversation(id, type).then(conversation => {\n\n      this.itemClicked(conversation.conversationWith, type);\n\n    }).catch(error => {\n\n      console.log('error while fetching a conversation', error);\n    });\n\n  }\n\n  callInitiated = (message) => {\n    this.appendCallMessage(message);\n  }\n\n  rejectedIncomingCall = (incomingCallMessage, rejectedCallMessage) => {\n\n    let receiverType = incomingCallMessage.receiverType;\n    let receiverId = (receiverType === \"user\") ? incomingCallMessage.sender.uid : incomingCallMessage.receiverId;\n\n    //marking the incoming call message as read\n    if (incomingCallMessage.hasOwnProperty(\"readAt\") === false) {\n      CometChat.markAsRead(incomingCallMessage.id, receiverId, receiverType);\n    }\n\n    //updating unreadcount in chats list\n    this.setState({ messageToMarkRead: incomingCallMessage });\n\n    let item = this.state.item;\n    let type = this.state.type;\n\n    receiverType = rejectedCallMessage.receiverType;\n    receiverId = rejectedCallMessage.receiverId;\n\n    if ((type === 'group' && receiverType === 'group' && receiverId === item.guid)\n      || (type === 'user' && receiverType === 'user' && receiverId === item.uid)) {\n\n      this.appendCallMessage(rejectedCallMessage);\n    }\n  }\n\n  outgoingCallEnded = (message) => {\n\n    this.setState({ outgoingCall: null, incomingCall: null });\n    this.appendCallMessage(message);\n  }\n\n  appendCallMessage = (call) => {\n    this.setState({ callmessage: call });\n  }\n\n  toggleImageView = (message) => {\n    this.setState({ imageView: message });\n  }\n\n  membersAdded = (members) => {\n\n    const messageList = [];\n    members.forEach(eachMember => {\n\n      const message = `${this.loggedInUser.name} added ${eachMember.name}`;\n      const sentAt = new Date() / 1000 | 0;\n      const messageObj = { \"category\": \"action\", \"message\": message, \"type\": enums.ACTION_TYPE_GROUPMEMBER, \"sentAt\": sentAt };\n      messageList.push(messageObj);\n    });\n\n    this.setState({ groupmessage: messageList });\n  }\n\n  memberUnbanned = (members) => {\n\n    const messageList = [];\n    members.forEach(eachMember => {\n\n      const message = `${this.loggedInUser.name} unbanned ${eachMember.name}`;\n      const sentAt = new Date() / 1000 | 0;\n      const messageObj = { \"category\": \"action\", \"message\": message, \"type\": enums.ACTION_TYPE_GROUPMEMBER, \"sentAt\": sentAt };\n      messageList.push(messageObj);\n    });\n\n    this.setState({ groupmessage: messageList });\n  }\n\n  memberScopeChanged = (members) => {\n\n    const messageList = [];\n\n    members.forEach(eachMember => {\n\n      const message = `${this.loggedInUser.name} made ${eachMember.name} ${eachMember.scope}`;\n      const sentAt = new Date() / 1000 | 0;\n      const messageObj = { \"category\": \"action\", \"message\": message, \"type\": enums.ACTION_TYPE_GROUPMEMBER, \"sentAt\": sentAt };\n      messageList.push(messageObj);\n    });\n\n    this.setState({ groupmessage: messageList });\n  }\n\n  render() {\n\n    let threadMessageView = null;\n    if(this.state.threadmessageview) {\n      threadMessageView = (\n        <div css={chatScreenSecondaryStyle(this.theme)} className=\"chats__secondary-view\">\n          <MessageThread\n          theme={this.theme}\n          tab={this.state.tab}\n          item={this.state.threadmessageitem}\n          type={this.state.threadmessagetype}\n          parentMessage={this.state.threadmessageparent}\n          loggedInUser={this.loggedInUser}\n          actionGenerated={this.actionHandler} />\n        </div>\n      );\n    }\n\n    let detailScreen;\n    if(this.state.viewdetailscreen) {\n\n      if(this.state.type === \"user\") {\n\n        detailScreen = (\n          <div css={chatScreenSecondaryStyle(this.theme)} className=\"chats__secondary-view\">\n            <CometChatUserDetail\n              theme={this.theme}\n              item={this.state.item} \n              type={this.state.type}\n              actionGenerated={this.actionHandler} />\n          </div>);\n\n      } else if (this.state.type === \"group\") {\n\n        detailScreen = (\n          <div css={chatScreenSecondaryStyle(this.theme)} className=\"chats__secondary-view\">\n          <CometChatGroupDetail\n            theme={this.theme}\n            item={this.state.item} \n            type={this.state.type}\n            actionGenerated={this.actionHandler} />\n          </div>\n        );\n      }\n    }\n\n    let messageScreen = null;\n    if(Object.keys(this.state.item).length) {\n      messageScreen = (\n        <CometChatMessageListScreen\n        theme={this.theme}\n        item={this.state.item} \n        tab={this.state.tab}\n        type={this.state.type}\n        composedthreadmessage={this.state.composedthreadmessage}\n        callmessage={this.state.callmessage}\n        groupmessage={this.state.groupmessage}\n        loggedInUser={this.loggedInUser}\n        actionGenerated={this.actionHandler} />\n      );\n    }\n\n    let imageView = null;\n    if (this.state.imageView) {\n      imageView = (<ImageView open={true} close={() => this.toggleImageView(null)} message={this.state.imageView} />);\n    }\n\n    return (\n      <div css={chatScreenStyle(this.theme)} className=\"cometchat cometchat--chats\">\n        <div css={chatScreenSidebarStyle(this.state, this.theme)} className=\"chats__sidebar\">\n          <CometChatConversationList\n          theme={this.theme}\n          item={this.state.item}\n          type={this.state.type}\n          groupToDelete={this.state.groupToDelete}\n          groupToLeave={this.state.groupToLeave}\n          groupToUpdate={this.state.groupToUpdate}\n          messageToMarkRead={this.state.messageToMarkRead}\n          onItemClick={this.itemClicked}\n          lastMessage={this.state.lastmessage}\n          actionGenerated={this.actionHandler}\n          enableCloseMenu={Object.keys(this.state.item).length} />\n        </div>\n        <div css={chatScreenMainStyle(this.state)} className=\"chats__main\">{messageScreen}</div>\n        {detailScreen}\n        {threadMessageView}\n        <CallAlert\n        theme={this.theme}\n        actionGenerated={this.actionHandler} />\n        <CallScreen\n        theme={this.theme}\n        item={this.state.item} \n        type={this.state.type}\n        incomingCall={this.state.incomingCall}\n        outgoingCall={this.state.outgoingCall}\n        loggedInUser={this.loggedInUser}\n        actionGenerated={this.actionHandler} />\n        {imageView}\n      </div>\n    );\n  }\n}\n\nexport default CometChatConversationListScreen;","import React from \"react\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nimport { CometChatManager } from \"../../util/controller\";\nimport { SvgAvatar } from '../../util/svgavatar';\nimport Avatar from \"../Avatar\";\n\nimport { theme } from \"../../resources/theme\";\n\nimport {\n  userInfoScreenStyle,\n  headerStyle,\n  headerTitleStyle,\n  detailStyle,\n  thumbnailStyle,\n  userDetailStyle,\n  userNameStyle,\n  userStatusStyle,\n  optionsStyle,\n  optionTitleStyle,\n  optionListStyle,\n  optionStyle,\n  optionNameStyle\n} from \"./style\";\n\nimport notificationIcon from \"./resources/notification-black-icon.svg\";\nimport privacyIcon from \"./resources/privacy-black-icon.svg\";\nimport chatIcon from \"./resources/chat-black-icon.svg\";\nimport helpIcon from \"./resources/help-black-icon.svg\";\nimport reportIcon from \"./resources/report-black-icon.svg\";\n\n\nclass CometChatUserInfoScreen extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n\n    this.state = {\n      user: {},\n    }\n\n    this.theme = Object.assign({}, theme, this.props.theme);\n  }\n  \n  componentDidMount() {\n    this.getProfile();\n  }\n\n  getProfile() {\n\n    new CometChatManager().getLoggedInUser().then(user => {\n\n        this.setAvatar(user);\n        this.setState({ user: user });\n    }).catch(error => {\n      console.log(\"[CometChatUserInfoScreen] getProfile getLoggedInUser error\", error);\n    });\n\n  }\n\n  setAvatar(user) {\n\n    if(!user.getAvatar()) {\n\n      const uid = user.getUid();\n      const char = user.getName().charAt(0).toUpperCase();\n      user.setAvatar(SvgAvatar.getAvatar(uid, char))\n    }\n\n  }\n\n  render() {\n\n    let avatar = null;\n    if(Object.keys(this.state.user).length) {\n      avatar = (<Avatar \n      image={this.state.user.avatar}\n      cornerRadius=\"50%\" \n      borderColor=\"#CCC\" \n      borderWidth=\"1px\" />);\n    }\n\n    return (\n      <div css={userInfoScreenStyle(this.theme)} className=\"userinfo\">\n        <div css={headerStyle(this.theme)} className=\"userinfo__header\">\n          <h4 css={headerTitleStyle()} className=\"header__title\">More</h4>\n        </div>\n        <div css={detailStyle()} className=\"userinfo__detail\">\n          <div css={thumbnailStyle()} className=\"detail__thumbnail\">{avatar}</div>\n          <div css={userDetailStyle()} className=\"detail__user\">\n            <div css={userNameStyle()} className=\"user__name\">{this.state.user.name}</div>\n            <p css={userStatusStyle(this.theme)} className=\"user__status\">Online</p>\n          </div>\n        </div>\n        <div css={optionsStyle()} className=\"userinfo__options\">\n          <div css={optionTitleStyle(this.theme)} className=\"options__title\">Preferences</div>\n          <div css={optionListStyle()} className=\"options_list\">\n            <div css={optionStyle(notificationIcon)} className=\"option option-notification\">\n              <div css={optionNameStyle()} className=\"option_name\">Notifications</div>\n            </div>\n            <div css={optionStyle(privacyIcon)} className=\"option option-privacy\">\n              <div css={optionNameStyle()} className=\"option_name\">Privacy and Security</div>\n            </div>\n            <div css={optionStyle(chatIcon)} className=\"option option-chats\">\n              <div css={optionNameStyle()} className=\"option_name\">Chats</div>\n            </div>\n          </div>\n          <div css={optionTitleStyle(this.theme)} className=\"options__title\">Other</div>\n          <div css={optionListStyle()} className=\"options_list\">\n            <div css={optionStyle(helpIcon)} className=\"option option-help\">\n              <div css={optionNameStyle()} className=\"option_name\">Help</div>\n            </div>\n            <div css={optionStyle(reportIcon)} className=\"option option-report\">\n              <div css={optionNameStyle()} className=\"option_name\">Report a Problem</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default CometChatUserInfoScreen;","export const footerStyle = () => {\n\n    return {\n        width: \"100%\",\n        zIndex: \"1\",\n    }\n}\n\nexport const navbarStyle = () => {\n\n    return {\n        display: \"flex\",\n        flexDirection: \"row\",\n        alignItems: \"center\",\n        justifyContent: \"space-around\",\n    }\n}\n\nexport const itemStyle = () => {\n\n    return {\n        display: \"inline-block\",\n        padding: \"13px\",\n        cursor: \"pointer\"\n    }\n}\n\nexport const itemLinkStyle = (icon, activeStateIcon, isActive) => {\n\n    let activeStateBg = (isActive) ? { background: `url(${activeStateIcon}) center center / 20px 21px no-repeat`, } : {};\n\n    return {\n        width: \"20px\",\n        height: \"21px\",\n        display: \"inline-block\",\n        background: `url(${icon}) center center / 20px 21px no-repeat`,\n        ...activeStateBg\n    }\n}","import React from \"react\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nimport CometChatUserList from \"../../CometChatUserList\";\nimport CometChatGroupList from \"../../CometChatGroupList\";\nimport CometChatConversationList from \"../../CometChatConversationList\";\nimport CometChatUserInfoScreen from \"../../CometChatUserInfoScreen\";\n\nimport {\n  footerStyle,\n  navbarStyle,\n  itemStyle,\n  itemLinkStyle\n} from \"./style\";\n\nimport chatGreyIcon from \"./resources/chat-grey-icon.svg\";\nimport chatBlueIcon from \"./resources/chat-blue-icon.svg\";\nimport contactGreyIcon from \"./resources/people-grey-icon.svg\";\nimport contactBlueIcon from \"./resources/people-blue-icon.svg\";\nimport groupGreyIcon from \"./resources/group-chat-grey-icon.svg\";\nimport groupBlueIcon from \"./resources/group-chat-blue-icon.svg\";\nimport moreGreyIcon from \"./resources/more-grey-icon.svg\";\nimport moreBlueIcon from \"./resources/more-blue-icon.svg\";\n\n\nclass Navbar extends React.Component {\n\n  constructor(props) {\n\n    super(props);\n    \n    this.sidebar = React.createRef();\n  }\n\n  getDefaultComponent = () => {\n\n    switch (this.props.tab) {\n      case \"contacts\":\n        return <CometChatUserList\n          theme={this.props.theme}\n          item={this.props.item}\n          type={this.props.type}\n          actionGenerated={this.props.actionGenerated}\n          enableCloseMenu={this.props.enableCloseMenu}\n          onItemClick={(item, type) => this.props.actionGenerated(\"itemClicked\", type, item)} />;\n      case \"calls\":\n        return \"calls\";\n      case \"conversations\":\n        return <CometChatConversationList\n          ref={this.sidebar}\n          theme={this.props.theme}\n          item={this.props.item}\n          type={this.props.type}\n          groupToUpdate={this.props.groupToUpdate}\n          messageToMarkRead={this.props.messageToMarkRead}\n          lastMessage={this.props.lastMessage}\n          actionGenerated={this.props.actionGenerated}\n          enableCloseMenu={this.props.enableCloseMenu}\n          onItemClick={(item, type) => this.props.actionGenerated(\"itemClicked\", type, item)} />;\n      case \"groups\":\n        return <CometChatGroupList\n          theme={this.props.theme}\n          item={this.props.item}\n          type={this.props.type}\n          groupToLeave={this.props.groupToLeave}\n          groupToDelete={this.props.groupToDelete}\n          groupToUpdate={this.props.groupToUpdate}\n          actionGenerated={this.props.actionGenerated}\n          enableCloseMenu={this.props.enableCloseMenu}\n          onItemClick={(item, type) => this.props.actionGenerated(\"itemClicked\", type, item)} />;\n      case \"info\":\n        return <CometChatUserInfoScreen\n          theme={this.props.theme}\n          onItemClick={(item, type) => this.props.actionGenerated(\"itemClicked\", type, item)} />;\n      default:\n        return null;\n    }\n\n  }\n\n\n  render() {\n\n    const chatsTabActive = (this.props.tab === \"conversations\") ? true : false;\n    const userTabActive = (this.props.tab === \"contacts\") ? true : false;\n    const groupsTabActive = (this.props.tab === \"groups\") ? true : false;\n    const moreTabActive = (this.props.tab === \"info\") ? true : false;\n\n    return (\n      <React.Fragment>\n        {this.getDefaultComponent()}\n        <div css={footerStyle()} className=\"sidebar__footer\">\n          <div css={navbarStyle()} className=\"footer__navbar\">\n            <div css={itemStyle()} className=\"navbar__item\" onClick={() => this.props.actionGenerated('tabChanged', 'conversations')}>\n              <span css={itemLinkStyle(chatGreyIcon, chatBlueIcon, chatsTabActive)} className=\"item__link item__link__chats\"></span>\n            </div>\n            <div css={itemStyle()} className=\"navbar__item\" onClick={() => this.props.actionGenerated('tabChanged', 'contacts')}>\n              <span css={itemLinkStyle(contactGreyIcon, contactBlueIcon, userTabActive)} className=\"item__link item__link__contacts\"></span>\n            </div>\n            <div css={itemStyle()} className=\"navbar__item\" onClick={() => this.props.actionGenerated('tabChanged', 'groups')}>\n              <span css={itemLinkStyle(groupGreyIcon, groupBlueIcon, groupsTabActive)} className=\"item__link item__link__groups\"></span>\n            </div>\n            <div css={itemStyle()} className=\"navbar__item\" onClick={() => this.props.actionGenerated('tabChanged', 'info')}>\n              <span css={itemLinkStyle(moreGreyIcon, moreBlueIcon, moreTabActive)} className=\"item__link item__link__info\"></span>\n            </div>\n          </div>\n        </div>\n      </React.Fragment>\n    )\n\n  }\n}\n\nexport default Navbar;","export const unifiedStyle = (theme) => {\n\n    return {\n        display: \"flex\",\n        height: \"100%\",\n        width: \"100%\",\n        boxSizing: \"border-box\",\n        fontFamily: `${theme.fontFamily}`,\n        position: \"relative\",\n        \"*\": {\n            boxSizing: \"border-box\",\n            fontFamily: `${theme.fontFamily}`,\n        }\n    }\n}\n\nexport const unifiedSidebarStyle = (state, theme) => {\n\n    const sidebarView = (state.sidebarview) ? {\n        left: \"0\",\n        boxShadow : \"rgba(0, 0, 0, .4) -30px 0 30px 30px\"\n    } : {};\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n\n        width: \"280px\",\n        borderRight: `1px solid ${theme.borderColor.primary}`,\n        height: \"100%\",\n        position: \"relative\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        \"> .contacts, .chats, .groups\": {\n            height: \"calc(100% - 50px)\",\n        },\n        [mq[0]]: {\n            position: \"absolute!important\",\n            left: \"-100%\",\n            top: \"0\",\n            bottom: \"0\",\n            width: \"100%!important\",\n            zIndex: \"2\",\n            backgroundColor: `${theme.backgroundColor.white}`,\n            transition: \"all .3s ease-out\",\n            ...sidebarView\n        }\n    }\n}\n\nexport const unifiedMainStyle = (state) => {\n\n    const secondaryView = (state.threadmessageview || state.detailview) ? {\n        width: \"calc(100% - 680px)\"\n    } : {};\n\n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n        width: \"calc(100% - 280px)\",\n        height: \"100%\",\n        order: \"2\",\n        ...secondaryView,\n        [mq[0]]: {\n            width: \"100%!important\",\n        }\n    }\n}\n\nexport const unifiedSecondaryStyle = (theme) => {\n    \n    const mq = [`@media (min-width : 320px) and (max-width: 767px)`];\n\n    return {\n        float: \"right\",\n        borderLeft: `1px solid ${theme.borderColor.primary}`,\n        height: \"100%\",\n        width: \"400px\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        order: \"3\",\n        [mq[0]]: {\n            position: \"absolute!important\",\n            right: \"0!important\",\n            top: \"0\",\n            bottom: \"0\",\n            width: \"100%!important\",\n            zIndex: \"2\",\n            backgroundColor: `${theme.backgroundColor.white}`,\n        }\n    }\n}","import React from \"react\";\n\n/** @jsx jsx */\nimport { jsx } from '@emotion/core';\n\nimport { CometChat } from \"@cometchat-pro/chat\";\n\nimport { CometChatManager } from \"../../util/controller\";\nimport * as enums from '../../util/enums.js';\n\nimport NavBar from \"./NavBar\";\nimport CometChatMessageListScreen from \"../CometChatMessageListScreen\";\nimport CometChatUserDetail from \"../CometChatUserDetail\";\nimport CometChatGroupDetail from \"../CometChatGroupDetail\";\nimport MessageThread from \"../MessageThread\";\nimport CallAlert from \"../CallAlert\";\nimport CallScreen from \"../CallScreen\";\nimport ImageView from \"../ImageView\";\n\nimport { theme } from \"../../resources/theme\";\n\nimport {\n  unifiedStyle,\n  unifiedSidebarStyle,\n  unifiedMainStyle,\n  unifiedSecondaryStyle\n} from \"./style\";\n\nclass CometChatUnified extends React.Component {\n\n  loggedInUser = null;\n\n  constructor(props) {\n    \n    super(props);\n\n    this.state = {\n      darktheme: false,\n      viewdetailscreen: false,\n      item: {},\n      type: \"user\",\n      tab: \"conversations\",\n      groupToDelete: {},\n      groupToLeave: {},\n      groupToUpdate: {},\n      threadmessageview: false,\n      threadmessagetype: null,\n      threadmessageitem: {},\n      threadmessageparent: {},\n      composedthreadmessage: {},\n      incomingCall: null,\n      outgoingCall: null,\n      messageToMarkRead: {},\n      callmessage: {},\n      sidebarview: false,\n      imageView: null,\n      groupmessage: {},\n      lastmessage: {}\n    }\n\n    this.theme = Object.assign({}, theme, this.props.theme);\n\t}\n  \n  componentDidMount() {\n\n    if(!Object.keys(this.state.item).length) {\n      this.toggleSideBar();\n    }\n\n    new CometChatManager().getLoggedInUser().then((user) => {\n      this.loggedInUser = user;\n\n    }).catch((error) => {\n      console.log(\"[CometChatUnified] getLoggedInUser error\", error);\n      \n    });\n    \n  }\n\n  changeTheme = (e) => {\n    this.setState({\n      darktheme: !this.state.darktheme\n    })\n  }\n\n  navBarAction = (action, type, item) => {\n    \n    switch(action) {\n      case \"itemClicked\":\n        this.itemClicked(item, type);\n      break;\n      case \"tabChanged\":\n        this.tabChanged(type);\n      break;\n      case \"closeMenuClicked\":\n        this.toggleSideBar();\n      break;\n      default:\n      break;\n    }\n  }\n  \n  itemClicked = (item, type) => {\n\n    this.toggleSideBar();\n    this.setState({ item: {...item}, type, viewdetailscreen: false });\n  }\n\n  tabChanged = (tab) => {\n\n    this.setState({tab});\n    this.setState({viewdetailscreen: false});\n  }\n\n  actionHandler = (action, item, count, ...otherProps) => {\n    \n    switch(action) {\n      case \"blockUser\":\n        this.blockUser();\n      break;\n      case \"unblockUser\":\n        this.unblockUser();\n      break;\n      case \"audioCall\":\n        this.audioCall();\n      break;\n      case \"videoCall\":\n        this.videoCall();\n      break;\n      case \"viewDetail\":\n      case \"closeDetailClicked\":\n        this.toggleDetailView();\n      break;\n      // eslint-disable-next-line no-lone-blocks\n      case \"menuClicked\": {\n        \n        this.toggleSideBar();\n        this.setState({ item: {} });\n      }\n      break;\n      case \"groupUpdated\":\n        this.groupUpdated(item, count, ...otherProps);\n      break;\n      case \"groupDeleted\": \n        this.deleteGroup(item);\n      break;\n      case \"leftGroup\":\n        this.leaveGroup(item);\n      break;\n      case \"membersUpdated\":\n        this.updateMembersCount(item, count);\n      break;\n      case \"viewMessageThread\":\n        this.viewMessageThread(item);\n      break;\n      case \"closeThreadClicked\":\n        this.closeThreadMessages();\n      break;\n      case \"threadMessageComposed\":\n        this.onThreadMessageComposed(item);\n        this.updateLastMessage(item[0]);\n        break;\n      case \"acceptIncomingCall\":\n        this.acceptIncomingCall(item);\n        break;\n      case \"acceptedIncomingCall\":\n        this.callInitiated(item);\n        break;\n      case \"rejectedIncomingCall\":\n        this.rejectedIncomingCall(item, count);\n        break;\n      case \"outgoingCallRejected\":\n        this.setState({ outgoingCall: null, incomingCall: null });\n        break;\n      case \"outgoingCallCancelled\":\n      case \"callEnded\":\n        this.outgoingCallEnded(item);\n        break;\n      case \"userJoinedCall\":\n      case \"userLeftCall\":\n        this.appendCallMessage(item);\n      break; \n      case \"viewActualImage\":\n        this.toggleImageView(item);\n      break;\n      case \"membersAdded\": \n        this.membersAdded(item);\n      break;\n      case \"memberUnbanned\":\n        this.memberUnbanned(item);\n      break;\n      case \"memberScopeChanged\":\n        this.memberScopeChanged(item);\n      break;\n      case \"messageComposed\": \n      case \"messageEdited\":\n      case \"messageDeleted\":\n        this.updateLastMessage(item[0]);\n      break;\n      default:\n      break;\n    }\n  }\n\n  updateLastMessage = (message) => {\n    this.setState({ lastmessage: message });\n  }\n\n  blockUser = () => {\n\n    let usersList = [this.state.item.uid];\n    CometChatManager.blockUsers(usersList).then(list => {\n\n        this.setState({item: {...this.state.item, blockedByMe: true}});\n\n    }).catch(error => {\n      console.log(\"Blocking user fails with error\", error);\n    });\n  }\n\n  unblockUser = () => {\n    \n    let usersList = [this.state.item.uid];\n    CometChatManager.unblockUsers(usersList).then(list => {\n\n        this.setState({item: {...this.state.item, blockedByMe: false}});\n\n      }).catch(error => {\n      console.log(\"unblocking user fails with error\", error);\n    });\n  }\n\n  audioCall = () => {\n\n    let receiverId, receiverType;\n    if(this.state.type === \"user\") {\n\n      receiverId = this.state.item.uid;\n      receiverType = CometChat.RECEIVER_TYPE.USER;\n\n    } else if(this.state.type === \"group\") {\n\n      receiverId = this.state.item.guid;\n      receiverType = CometChat.RECEIVER_TYPE.GROUP;\n    }\n\n    CometChatManager.call(receiverId, receiverType, CometChat.CALL_TYPE.AUDIO).then(outgoingCall => {\n\n      this.appendCallMessage(outgoingCall);\n      this.setState({ outgoingCall: outgoingCall });\n\n    }).catch(error => {\n\n      console.log(\"Call initialization failed with exception:\", error);\n    });\n\n  }\n\n  videoCall = () => {\n\n    let receiverId, receiverType;\n    if(this.state.type === \"user\") {\n\n      receiverId = this.state.item.uid;\n      receiverType = CometChat.RECEIVER_TYPE.USER;\n\n    } else if(this.state.type === \"group\") {\n      receiverId = this.state.item.guid;\n      receiverType = CometChat.RECEIVER_TYPE.GROUP;\n    }\n   \n    CometChatManager.call(receiverId, receiverType, CometChat.CALL_TYPE.VIDEO).then(outgoingCall => {\n\n      this.appendCallMessage(outgoingCall);\n      this.setState({ outgoingCall: outgoingCall });\n\n    }).catch(error => {\n\n      console.log(\"Call initialization failed with exception:\", error);\n    });\n\n  }\n\n  toggleDetailView = () => {\n\n    let viewdetail = !this.state.viewdetailscreen;\n    this.setState({viewdetailscreen: viewdetail,  threadmessageview: false});\n  }\n\n  toggleSideBar = () => {\n\n    const sidebarview = this.state.sidebarview;\n    this.setState({ sidebarview: !sidebarview });\n  }\n\n  closeThreadMessages = () => {\n    this.setState({viewdetailscreen: false, threadmessageview: false});\n  }\n\n  viewMessageThread = (parentMessage) => {\n\n    const message = {...parentMessage};\n    const threaditem = {...this.state.item};\n    this.setState({\n      threadmessageview: true, \n      threadmessageparent: message, \n      threadmessageitem: threaditem,\n      threadmessagetype: this.state.type, \n      viewdetailscreen: false\n    });\n  }\n\n  onThreadMessageComposed = (composedMessage) => {\n\n    if(this.state.type !== this.state.threadmessagetype) {\n      return false;\n    }\n\n    if((this.state.threadmessagetype === \"group\" && this.state.item.guid !== this.state.threadmessageitem.guid)\n    || (this.state.threadmessagetype === \"user\" && this.state.item.uid !== this.state.threadmessageitem.uid)) {\n      return false;\n    }\n\n    const message = { ...composedMessage };\n    this.setState({composedthreadmessage: message});\n  }\n\n  deleteGroup = (group) => {\n    this.setState({groupToDelete: group, item: {}, type: \"group\", viewdetailscreen: false});\n  }\n\n  leaveGroup = (group) => {\n    this.setState({groupToLeave: group, item: {}, type: \"group\", viewdetailscreen: false});\n  }\n\n  updateMembersCount = (item, count) => {\n\n    //console.log(\"updateMembersCount item\", item);\n    const group = Object.assign({}, this.state.item, {membersCount: count});\n    this.setState({item: group, groupToUpdate: group});\n  }\n\n  groupUpdated = (message, key, group, options) => {\n    \n    switch(key) {\n      case enums.GROUP_MEMBER_BANNED:\n      case enums.GROUP_MEMBER_KICKED: {\n        \n        if(options.user.uid === this.loggedInUser.uid) {\n          this.setState({item: {}, type: \"group\", viewdetailscreen: false});\n        }\n        break;\n      }\n      case enums.GROUP_MEMBER_SCOPE_CHANGED: {\n        \n        if(options.user.uid === this.loggedInUser.uid) {\n\n          const newObj = Object.assign({}, this.state.item, {\"scope\": options[\"scope\"]})\n          this.setState({item: newObj, type: \"group\", viewdetailscreen: false});\n        }\n        break;\n      }\n      default:\n      break;\n    }\n  }\n\n  acceptIncomingCall = (call) => {\n\n    this.setState({ incomingCall: call });\n\n    const type = call.receiverType;\n    const id = (type === \"user\") ? call.sender.uid : call.receiverId;\n\n    CometChat.getConversation(id, type).then(conversation => {\n\n      this.itemClicked(conversation.conversationWith, type);\n\n    }).catch(error => {\n\n      console.log('error while fetching a conversation', error);\n    });\n\n  }\n\n  callInitiated = (message) => {\n    this.appendCallMessage(message);\n  }\n\n  rejectedIncomingCall = (incomingCallMessage, rejectedCallMessage) => {\n\n    let receiverType = incomingCallMessage.receiverType;\n    let receiverId = (receiverType === \"user\") ? incomingCallMessage.sender.uid : incomingCallMessage.receiverId;\n\n    //marking the incoming call message as read\n    if (incomingCallMessage.hasOwnProperty(\"readAt\") === false) {\n      CometChat.markAsRead(incomingCallMessage.id, receiverId, receiverType);\n    }\n\n    //updating unreadcount in chats list\n    this.setState({ messageToMarkRead: incomingCallMessage });\n\n    let item = this.state.item;\n    let type = this.state.type;\n\n    receiverType = rejectedCallMessage.receiverType; \n    receiverId = rejectedCallMessage.receiverId;\n\n    if ((type === 'group' && receiverType === 'group' && receiverId === item.guid)\n      || (type === 'user' && receiverType === 'user' && receiverId === item.uid)) {\n\n      this.appendCallMessage(rejectedCallMessage);\n    }\n  }\n\n  outgoingCallEnded = (message) => {\n\n    this.setState({ outgoingCall: null, incomingCall: null });\n    this.appendCallMessage(message);\n  }\n\n  appendCallMessage = (call) => {\n    this.setState({ callmessage: call });\n  }\n\n  membersAdded = (members) => {\n\n    const messageList = [];\n    members.forEach(eachMember => {\n\n      const message = `${this.loggedInUser.name} added ${eachMember.name}`;\n      const sentAt = new Date() / 1000 | 0;\n      const messageObj = { \"category\": \"action\", \"message\": message, \"type\": enums.ACTION_TYPE_GROUPMEMBER, \"sentAt\": sentAt };\n      messageList.push(messageObj);\n    });\n    \n    this.setState({ groupmessage: messageList });\n  }\n\n  memberUnbanned = (members) => {\n\n    const messageList = [];\n    members.forEach(eachMember => {\n\n      const message = `${this.loggedInUser.name} unbanned ${eachMember.name}`;\n      const sentAt = new Date() / 1000 | 0;\n      const messageObj = { \"category\": \"action\", \"message\": message, \"type\": enums.ACTION_TYPE_GROUPMEMBER, \"sentAt\": sentAt };\n      messageList.push(messageObj);\n    });\n\n    this.setState({ groupmessage: messageList });\n  }\n\n  memberScopeChanged = (members) => {\n\n    const messageList = [];\n\n    members.forEach(eachMember => {\n\n      const message = `${this.loggedInUser.name} made ${eachMember.name} ${eachMember.scope}`;\n      const sentAt = new Date() / 1000 | 0;\n      const messageObj = { \"category\": \"action\", \"message\": message, \"type\": enums.ACTION_TYPE_GROUPMEMBER, \"sentAt\": sentAt };\n      messageList.push(messageObj);\n    });\n\n    this.setState({ groupmessage: messageList });\n  }\n\n  toggleImageView = (message) => {\n    this.setState({ imageView: message });\n  }\n  \n  render() {\n\n    let threadMessageView = null;\n    if(this.state.threadmessageview) {\n      threadMessageView = (\n        <div css={unifiedSecondaryStyle(this.theme)} className=\"unified__secondary-view\">\n          <MessageThread\n          theme={this.theme}\n          tab={this.state.tab}\n          item={this.state.threadmessageitem}\n          type={this.state.threadmessagetype}\n          parentMessage={this.state.threadmessageparent}\n          loggedInUser={this.loggedInUser}\n          actionGenerated={this.actionHandler} />\n        </div>\n      );\n    }\n\n    let detailScreen = null;\n    if(this.state.viewdetailscreen) {\n\n      if(this.state.type === \"user\") {\n\n        detailScreen = (\n          <div css={unifiedSecondaryStyle(this.theme)} className=\"unified__secondary-view\">\n            <CometChatUserDetail\n              theme={this.theme}\n              item={this.state.item} \n              type={this.state.type}\n              actionGenerated={this.actionHandler} />\n          </div>\n          );\n\n      } else if (this.state.type === \"group\") {\n\n        detailScreen = (\n          <div css={unifiedSecondaryStyle(this.theme)} className=\"unified__secondary-view\">\n          <CometChatGroupDetail\n            theme={this.theme}\n            item={this.state.item} \n            type={this.state.type}\n            actionGenerated={this.actionHandler} />\n          </div>\n        );\n      }\n    }\n    \n    let messageScreen = null;\n    if(Object.keys(this.state.item).length) {\n      messageScreen = (\n        <CometChatMessageListScreen \n        theme={this.theme}\n        item={this.state.item} \n        tab={this.state.tab}\n        type={this.state.type}\n        composedthreadmessage={this.state.composedthreadmessage}\n        callmessage={this.state.callmessage}\n        groupmessage={this.state.groupmessage}\n        loggedInUser={this.loggedInUser}\n        actionGenerated={this.actionHandler} />\n      );\n    }\n\n    let imageView = null;\n    if (this.state.imageView) {\n      imageView = (<ImageView open={true} close={() => this.toggleImageView(null)} message={this.state.imageView} />);\n    }\n    \n    return (\n      <div css={unifiedStyle(this.theme)} className=\"cometchat cometchat--unified\">\n        <div css={unifiedSidebarStyle(this.state, this.theme)} className=\"unified__sidebar\">\n          <NavBar \n          theme={this.theme}\n          type={this.state.type}\n          item={this.state.item}\n          tab={this.state.tab}\n          groupToDelete={this.state.groupToDelete}\n          groupToLeave={this.state.groupToLeave}\n          groupToUpdate={this.state.groupToUpdate}\n          messageToMarkRead={this.state.messageToMarkRead}\n          lastMessage={this.state.lastmessage}\n          actionGenerated={this.navBarAction}\n          enableCloseMenu={Object.keys(this.state.item).length} />\n        </div>\n        <div css={unifiedMainStyle(this.state)} className=\"unified__main\">{messageScreen}</div>\n        {detailScreen}\n        {threadMessageView}\n        <CallAlert \n        theme={this.theme} \n        actionGenerated={this.actionHandler}  />\n        <CallScreen\n        theme={this.theme}\n        item={this.state.item} \n        type={this.state.type}\n        incomingCall={this.state.incomingCall}\n        outgoingCall={this.state.outgoingCall}\n        loggedInUser={this.loggedInUser}\n        actionGenerated={this.actionHandler} />\n        {imageView}\n      </div>\n    );\n  }\n}\n\nexport default CometChatUnified;","import React from 'react'\nimport { useHistory } from 'react-router'\nimport  {CometChat} from '@cometchat-pro/chat'\nimport { AUTH_KEY} from '../constants/constants'\n\n\nconst defaultState = {\n  user: null,\n  IsLoggedIn:false,\n  login: async (username) => {},\n  logout: () => {},\n}\n\nexport const AuthContext = React.createContext(defaultState)\n\nexport const AuthConsumer = AuthContext.Consumer\n\nexport const AuthProvider= ({ children }) => {\n\n  const history = useHistory()\n  const [user, setUser] = React.useState(null)\n  const [IsLoggedIn, setLoggedIn] = React.useState()\n \n  React.useEffect(() => {\n\n    const refresh = async () => {\n      const user = await CometChat.getLoggedinUser()\n      if(user) {\n        setUser(user)\n        setLoggedIn(true)\n      }\n    }\n    refresh()\n\n  },[])\n\n  const login = async (username) => {\n          \n    const UID = username\n    if(username) {\n\n      CometChat.createUser(user, AUTH_KEY).then(user => {\n\n        console.log(\"user created\", user);\n        CometChat.login(UID, AUTH_KEY).then(data => {\n\n            setUser(data)\n            setLoggedIn(true)\n            history.push('/message')\n\n        }).catch(error => console.log(\"Login failed with exception:\", { error }));\n\n      }).catch(error => {\n\n        CometChat.login(UID, AUTH_KEY).then(data => {\n\n          setUser(data)\n          setLoggedIn(true)\n          history.push('/message')\n\n        }).catch(error => console.log(\"Login failed with exception:\", { error }));\n\n      });\n      \n    } else {\n      history.push('/message')\n    }\n  }\n\n  const logout = async () => {\n\n    CometChat.logout().then(user=>{\n      setUser(null)\n      setLoggedIn(false)\n      history.push('/')\n    });  \n  }\n\n  return (\n    <AuthContext.Provider value={{ user,login, logout,IsLoggedIn}}>\n      {children}\n    </AuthContext.Provider>\n  )\n}\n","import React from 'react'\nimport {CometChatGroupListScreen } from \"../../CometChat\";\nimport { AuthContext } from '../../context/authcontext'\n\nimport './style.css';\n\nexport const  Message = () => {\n  \n  const {logout} = React.useContext(AuthContext)\n\n  return(\n    <div className=\"wrapper\">\n      <div className=\"button__container\">\n        <button className=\"button\" onClick={logout}>LOGOUT</button>\n      </div>\n      <div className=\"chat__container\">\n        <CometChatGroupListScreen />\n      </div>\n    </div>\n  )\n}","\nimport React  from 'react';\nimport { AuthContext } from '../../context/authcontext';\n\nimport './style.css';\nimport './loader.css';\n\nexport const Login = () => {\n\n    const {login} = React.useContext(AuthContext)\n    const [username, setUsername] = React.useState('')\n    const [isSubmitting, setIsSubmitting] = React.useState(false)\n\n    const formsubmit = async (e) => {\n\n        e.preventDefault()\n        setIsSubmitting(true); console.log(\"isSubmitting\", isSubmitting);\n        const data = await login(username)\n        if(data){\n\n            setIsSubmitting(false)\n            setUsername('')\n        }\n    }\n\n    const userLogin = async (username) => {\n\n        setIsSubmitting(true);\n        const data = await login(username)\n        if (data) {\n\n            setIsSubmitting(false)\n        }\n    }\n\n    let loader = null;\n    if (isSubmitting) {\n        loader = (<div className=\"loading\">Loading...</div>);\n    }\n\n    return(\n        <div className=\"authContainer\">\n            <div className='container'>\n                {loader}\n                <div className='row'>\n                    <div className='col-md-3'></div>\n                    <div className='col-md-6'>\n                        <form onSubmit={formsubmit}>\n                            <fieldset>\n                                <legend>Welcome to CometChatApp</legend>\n                                <div className=\"user__container\">\n                                    <div className=\"user__block\">\n                                        <div className=\"avatar__block\" onClick={() => { userLogin('superhero1') }}>\n                                            <img src=\"https://data-us.cometchat.io/assets/images/avatars/ironman.png\" className=\"rounded\" alt=\"...\" />\n                                        </div>\n                                        <label>superhero1</label>\n                                    </div>\n                                    <div className=\"user__block\">\n                                        <div className=\"avatar__block\" onClick={() => { userLogin('superhero2') }}>\n                                            <img src=\"https://data-us.cometchat.io/assets/images/avatars/captainamerica.png\" className=\"rounded\" alt=\"...\" />\n                                        </div>\n                                        <label>superhero2</label>\n                                    </div>\n                                    <div className=\"user__block\">\n                                        <div className=\"avatar__block\" onClick={() => { userLogin('superhero3') }}>\n                                            <img src=\"https://data-us.cometchat.io/assets/images/avatars/spiderman.png\" className=\"rounded\" alt=\"...\" />\n                                        </div>\n                                        <label>superhero3</label>\n                                    </div>\n                                </div>\n                                <p>\n                                    <input className='form-control' value={username} type=\"text\" placeholder=\"Username\" onChange={(e) => setUsername(e.target.value)} />\n                                </p>\n                                <p className=\"button__container\">\n                                    <button type='submit' className='button' variant=\"secondary btn-action\" size=\"lg\" disabled={isSubmitting}>\n                                        LOGIN {isSubmitting ? (<i className=\"fa fa-spinner fa-spin\"></i>) : null}\n                                    </button>\n                                </p>\n                            </fieldset>\n                        </form>\n                    </div>\n                    <div className='col-md-3'></div>\n                </div>\n            </div>\n        </div>\n    )\n} \n","import React from 'react'\nimport { Route,Redirect } from 'react-router'\nimport { AuthContext } from '../context/authcontext'\n\nexport const ProtectedRoute = ({isPrivate,...props}) => {\n\n    const {IsLoggedIn} = React.useContext(AuthContext)\n\n    if(!IsLoggedIn){\n        return null\n    }\n\n    if(isPrivate && IsLoggedIn) {\n        return(<Route {...props}/>);\n    } else {\n        return(<Redirect to='/'/>);\n    }\n}","import React from 'react';\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\n\nimport { Message } from '../Message';\nimport { Login } from '../Login';\nimport { ProtectedRoute } from '../../constants/ProtectedRoute'\nimport { AuthProvider } from '../../context/authcontext';\n\nimport './App.scss';\n\nfunction App() {\n\n  return (\n    <BrowserRouter>\n      <AuthProvider>\n        <Switch>\n          <Route path='/' exact component={Login} />\n          <ProtectedRoute path='/message' isPrivate component={Message} />\n        </Switch>\n      </AuthProvider>\n    </BrowserRouter>\n  );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { CometChat } from '@cometchat-pro/chat'\n\nimport * as CONSTANTS from \"./constants/constants\";\n\nimport App from './components/App';\nimport './index.scss';\n\nimport reportWebVitals from './reportWebVitals';\n\n\nconst appSetting = new CometChat.AppSettingsBuilder().subscribePresenceForAllUsers().setRegion(CONSTANTS.APP_REGION).build();\nCometChat.init(CONSTANTS.APP_ID, appSetting).then(() => {\n\n  console.log(\"Initialization completed successfully\");\n\n  ReactDOM.render(\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n  );\n\n}).catch(error => {\n  console.log(\"Initialization failed with error:\", error);\n});\n\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals(console.log);\n"],"sourceRoot":""}